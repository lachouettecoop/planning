(this.webpackJsonpplanning=this.webpackJsonpplanning||[]).push([[0],{255:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(25),s=n.n(c),o=n(19),l=n(12),u=n(91),d=n.n(u),j=n(188),b=n.n(j),p=n(87),f=n(1);var m="bd8932c3a4a955397cd4900e01d9ad76";d.a.start({apiKey:m,releaseStage:"production",enabledReleaseStages:["production"],appVersion:"198de35a542c6864b9d32d3356cf08af855179c6",metadata:{deployDate:(new Date).toString(),deployAuthor:"SilviaAC"},plugins:[new b.a]});var h,O,x,v=function(e){console.error(e),alert(e.message),d.a.notify(e)},g=null===(r=d.a.getPlugin("react"))||void 0===r?void 0:r.createErrorBoundary(i.a),y=Object(l.a)("div",{target:"e1vn7bue1"})({name:"10i3u6",styles:"padding:1rem;h2{color:#e53935;margin:1rem 0;}code{display:block;margin-top:3rem;color:#aaa;}"}),w=function(e){var t=e.error;return Object(f.jsxs)(y,{children:[Object(f.jsxs)(p.a,{variant:"h2",children:[Object(f.jsx)("span",{"aria-hidden":!0,children:"\ud83d\udc1e"}),Object(f.jsx)("br",{}),"Une erreur est survenue"]}),Object(f.jsx)(p.a,{children:"Essayez de recharger la page"}),Object(f.jsx)("code",{children:String(t)})]})},I=Object(l.a)("p",{target:"e1vn7bue0"})({name:"1nm0ewq",styles:"color:#e53935"}),C=function(e){var t=e.error;return Object(f.jsxs)(I,{children:["Erreur : ",t.message]})},P=function(e){var t=e.children;return g?Object(f.jsx)(g,{FallbackComponent:w,children:t}):Object(f.jsx)(f.Fragment,{children:t})},k=n(32),A=n(193),E=n(8),S=n(38),q=Object(o.gql)(h||(h=Object(S.a)(["\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n      affichageDonneesPersonnelles\n    }\n  }\n"]))),F=Object(o.gql)(O||(O=Object(S.a)(["\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String, $affichageDonneesPersonnelles: Boolean) {\n    updateUser(\n      input: {\n        id: $idUser\n        email: $email\n        telephone: $telephone\n        affichageDonneesPersonnelles: $affichageDonneesPersonnelles\n      }\n    ) {\n      user {\n        id\n        email\n        telephone\n        affichageDonneesPersonnelles\n      }\n    }\n  }\n"]))),D=Object(o.gql)(x||(x=Object(S.a)(["\n  query USERS {\n    users(enabled: true) {\n      id\n      nom\n      prenom\n      email\n      actif\n      rolesChouette {\n        id\n        libelle\n        roleUniqueId\n      }\n      statut\n      reserve {\n        id\n        informations\n        creneauGeneriques {\n          id\n          heureDebut\n          heureFin\n          jour\n        }\n      }\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n    }\n  }\n"]))),M=function(e){return"".concat(e.prenom," ").concat(e.nom)},$=Object(a.createContext)({}),z="user",H=function(){var e=localStorage.getItem(z);return e?JSON.parse(e):null},G=function(e){var t=e.children,n=Object(a.useState)(H),r=Object(E.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(null),o=Object(E.a)(s,2),l=o[0],u=o[1];Object(a.useEffect)((function(){i&&X.query({query:q,variables:{id:"api/users/".concat(i.id)}}).then((function(e){var t=e.data;u(t.user)}))}),[i]),Object(a.useEffect)((function(){l?d.a.setUser(l.id,l.email,M(l)):d.a.setUser()}),[l]);return Object(f.jsx)($.Provider,{value:{auth:i,user:l,login:function(e){c(e),localStorage.setItem(z,JSON.stringify(e))},logout:function(){c(null),localStorage.removeItem(z)},refetchUser:function(){i&&X.query({query:q,variables:{id:"api/users/".concat(i.id)}}).then((function(e){var t=e.data;u(t.user)}))}},children:t})};function N(){return Object(a.useContext)($)}var U="https://adminchouettos.lachouettecoop.fr";var L,B,T,V,R,_,Z,W=U.includes("test"),J=Object(o.createHttpLink)({uri:"".concat(U,"/api/graphql")}),Q=Object(A.a)((function(e,t){var n=H();return n?Object(k.a)(Object(k.a)({},t),{},{headers:Object(k.a)(Object(k.a)({},t.headers),{},{"X-Auth-Token":n.token})}):t})),X=new o.ApolloClient({link:Q.concat(J),cache:new o.InMemoryCache,defaultOptions:{query:{fetchPolicy:"network-only"},watchQuery:{fetchPolicy:"cache-and-network"}}}),K=n(98),Y=n(303),ee=n(130),te=n(307),ne=n(354),re=n(48),ae=n(137);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function se(e,t){var n=e.title,r=e.titleId,i=ce(e,["title","titleId"]);return a.createElement("svg",ie({xmlns:"http://www.w3.org/2000/svg",style:{display:"none"},ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,L||(L=a.createElement("symbol",{id:"F",viewBox:"0 0 32 32"},a.createElement("title",null,"Formateur\xb7rice"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("circle",{cx:26.75,cy:26.8,r:5.25}))),B||(B=a.createElement("symbol",{id:"CA",viewBox:"0 0 32 32"},a.createElement("title",null,"Caissier\xb7\xe8re"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M21.24,20l1.34,1.32A6.23,6.23,0,0,1,20.15,23a8.24,8.24,0,0,1-3.17.59A8.45,8.45,0,0,1,13.59,23,7.42,7.42,0,0,1,11,21a7.12,7.12,0,0,1-1.51-2.88H7.06V17H9.25c0-.36-.05-.65-.05-.86s0-.49.05-.86H7.06V14.07h2.4A7,7,0,0,1,11,11.2a7.19,7.19,0,0,1,2.62-1.92A8.29,8.29,0,0,1,17,8.59a8.38,8.38,0,0,1,3.18.59,6.36,6.36,0,0,1,2.42,1.7l-1.34,1.33a5.48,5.48,0,0,0-4.16-1.75,5.83,5.83,0,0,0-3.36,1,5.23,5.23,0,0,0-2,2.62h6.66v1.18H11.39a5.81,5.81,0,0,0-.06.86,6,6,0,0,0,.06.86h7v1.18H11.68a5.25,5.25,0,0,0,2,2.63,5.9,5.9,0,0,0,3.36,1A5.5,5.5,0,0,0,21.24,20Z"}))),T||(T=a.createElement("symbol",{id:"CAF",viewBox:"0 0 32 32"},a.createElement("title",null,"Caissier\xb7\xe8re formateur\xb7ice"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("circle",{cx:26.75,cy:26.8,r:5.25}),a.createElement("path",{d:"M21.24,20l1.34,1.32A6.23,6.23,0,0,1,20.15,23a8.24,8.24,0,0,1-3.17.59A8.45,8.45,0,0,1,13.59,23,7.42,7.42,0,0,1,11,21a7.12,7.12,0,0,1-1.51-2.88H7.06V17H9.25c0-.36-.05-.65-.05-.86s0-.49.05-.86H7.06V14.07h2.4A7,7,0,0,1,11,11.2a7.19,7.19,0,0,1,2.62-1.92A8.29,8.29,0,0,1,17,8.59a8.38,8.38,0,0,1,3.18.59,6.36,6.36,0,0,1,2.42,1.7l-1.34,1.33a5.48,5.48,0,0,0-4.16-1.75,5.83,5.83,0,0,0-3.36,1,5.23,5.23,0,0,0-2,2.62h6.66v1.18H11.39a5.81,5.81,0,0,0-.06.86,6,6,0,0,0,.06.86h7v1.18H11.68a5.25,5.25,0,0,0,2,2.63,5.9,5.9,0,0,0,3.36,1A5.5,5.5,0,0,0,21.24,20Z"}))),V||(V=a.createElement("symbol",{id:"CH",viewBox:"0 0 32 32"},a.createElement("title",null,"Chouettos"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M30.13,10.49a7.25,7.25,0,0,0-8.68-3.38c-2.92,1-4.46,3.27-5.4,6.33a10.47,10.47,0,0,0-1.37-3.14C11.17,5,4.65,6.05,2.32,10L.21,13.4c2-7,6.59-11.53,13.16-13.18,7.3-.22,15.9,3.62,18.4,13.05Zm-14.07.37a8.8,8.8,0,0,1,3.37-4.73,7.83,7.83,0,0,1,7.78-.46C20.94-.9,10.41-1.09,4.79,5.8,9.55,2.81,14.55,6.62,16.06,10.86Z"}),a.createElement("path",{d:"M21.07,15.59a2.76,2.76,0,0,1,3-2.83,2.88,2.88,0,1,1-.1,5.76A2.75,2.75,0,0,1,21.07,15.59Zm4.05.06C25,15,24.7,14.51,24,14.51a1.05,1.05,0,0,0-1.17,1.11,1,1,0,0,0,1.14,1.15C24.66,16.79,25,16.36,25.12,15.65Z"}),a.createElement("path",{d:"M8.67,12.76a2.88,2.88,0,1,1,0,5.76,2.88,2.88,0,1,1,0-5.76Zm1.18,2.89a1.07,1.07,0,0,0-1.14-1.14,1.05,1.05,0,0,0-1.15,1.13A1.06,1.06,0,0,0,8.7,16.78,1.07,1.07,0,0,0,9.85,15.65Z"}),a.createElement("path",{d:"M16.07,21.41a3.86,3.86,0,0,1-1.22-2.08,1.33,1.33,0,0,1,1.23-1.25c.56,0,1.32.62,1.22,1.27A3.68,3.68,0,0,1,16.07,21.41Z"}))),R||(R=a.createElement("symbol",{id:"GH",viewBox:"0 0 32 32"},a.createElement("title",null,"GH"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M12.94,15h1.73v3.92a5.63,5.63,0,0,1-1.77.93,7,7,0,0,1-2.08.32,5.65,5.65,0,0,1-2.71-.65,4.87,4.87,0,0,1-1.9-1.81,5.24,5.24,0,0,1,0-5.2,4.87,4.87,0,0,1,1.9-1.81A5.8,5.8,0,0,1,10.85,10a6,6,0,0,1,2.25.41,4.47,4.47,0,0,1,1.7,1.19l-1.15,1.13a3.72,3.72,0,0,0-2.72-1.13A3.86,3.86,0,0,0,9.08,12a3.21,3.21,0,0,0-1.26,1.22,3.5,3.5,0,0,0-.46,1.8,3.39,3.39,0,0,0,.46,1.77,3.26,3.26,0,0,0,1.26,1.24,3.72,3.72,0,0,0,1.84.45,3.91,3.91,0,0,0,2-.51Z"}),a.createElement("path",{d:"M25.82,10.14V20H24V15.76H18.9V20H17.07V10.14H18.9V14.2H24V10.14Z"}),a.createElement("rect",{x:11.03,y:14.95,width:3.65,height:1.31}))),_||(_=a.createElement("symbol",{id:"GHF",viewBox:"0 0 32 32"},a.createElement("title",null,"GH formateur\xb7ice"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M12.94,15h1.73v3.92a5.52,5.52,0,0,1-1.77.93,7,7,0,0,1-2.08.32,5.65,5.65,0,0,1-2.71-.65,4.87,4.87,0,0,1-1.9-1.81,5.24,5.24,0,0,1,0-5.2,4.87,4.87,0,0,1,1.9-1.81A5.8,5.8,0,0,1,10.85,10a6,6,0,0,1,2.25.41,4.47,4.47,0,0,1,1.7,1.19l-1.15,1.13a3.72,3.72,0,0,0-2.72-1.13A3.86,3.86,0,0,0,9.08,12a3.21,3.21,0,0,0-1.26,1.22,3.5,3.5,0,0,0-.46,1.8,3.39,3.39,0,0,0,.46,1.77,3.26,3.26,0,0,0,1.26,1.24,3.72,3.72,0,0,0,1.84.45,3.91,3.91,0,0,0,2-.51Z"}),a.createElement("path",{d:"M25.82,10.14V20H24V15.76H18.9V20H17.07V10.14H18.9V14.2H24V10.14Z"}),a.createElement("circle",{cx:26.75,cy:26.75,r:5.25}),a.createElement("rect",{x:11.03,y:14.95,width:3.65,height:1.31}))),Z||(Z=a.createElement("symbol",{id:"P",viewBox:"0 0 32 32"},a.createElement("title",null,"PIAF"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}))))}var oe,le,ue,de,je,be,pe,fe,me,he,Oe,xe,ve,ge,ye=a.forwardRef(se),we=(n.p,"Montserrat, sans-serif"),Ie="Cabin, sans-serif",Ce="#3A5447",Pe=ae.a[500],ke=Object(K.a)({typography:{fontFamily:Ie,body1:{fontFamily:Ie,fontSize:"1rem"},body2:{fontFamily:Ie,fontSize:"1rem"},subtitle1:{fontFamily:we},subtitle2:{fontFamily:we},h1:{fontFamily:we,fontWeight:600,fontSize:"2.5rem"},h2:{fontFamily:we,fontWeight:600,fontSize:"1.5rem"},h3:{fontFamily:we,fontWeight:600,color:Ce},h4:{fontFamily:we},h5:{fontFamily:we},h6:{fontFamily:we}},palette:{primary:{main:Ce},secondary:{main:Pe},contrastThreshold:3,tonalOffset:.2},overrides:{MuiTooltip:{tooltip:{fontSize:"1rem"}},MuiCssBaseline:{"@global":{a:{color:Ce}}}}},re.frFR,ee.b),Ae=function(e){var t=e.children;return Object(f.jsx)(ne.b,{theme:ke,children:Object(f.jsxs)(Y.a,{theme:ke,children:[Object(f.jsx)(te.a,{}),Object(f.jsx)(ye,{}),t]})})},Ee=Object(o.gql)(oe||(oe=Object(S.a)(["\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      informations\n      debut\n      fin\n      horsMag\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n"]))),Se=Object(o.gql)(le||(le=Object(S.a)(["\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String, $validated: Boolean) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut, pourvu: $validated) {\n      id\n      statut\n      pourvu\n      nonPourvu\n      informations\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        nom\n        prenom\n        email\n        telephone\n        nbPiafGH\n        nbPiafCaisse\n        affichageDonneesPersonnelles\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n"]))),qe=Object(o.gql)(ue||(ue=Object(S.a)(["\n  query PIAFS_COUNT($userId: String, $after: String, $before: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }) {\n      id\n      statut\n      nonPourvu\n      creneau {\n        debut\n        fin\n      }\n    }\n  }\n"]))),Fe=Object(o.gql)(de||(de=Object(S.a)(["\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      informations\n      horsMag\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n          affichageDonneesPersonnelles\n        }\n      }\n    }\n  }\n"]))),De=Object(o.gql)(je||(je=Object(S.a)(["\n  mutation REGISTRATION_UPDATE($piafId: ID!, $userId: String!, $statut: String!, $informations: String) {\n    updatePiaf(input: { id: $piafId, piaffeur: $userId, statut: $statut, informations: $informations }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n        informations\n      }\n    }\n  }\n"]))),Me=Object(o.gql)(be||(be=Object(S.a)(["\n  mutation VALIDATE_PIAF($piafId: ID!, $validate: Boolean) {\n    updatePiaf(input: { id: $piafId, pourvu: $validate }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n      }\n    }\n  }\n"]))),$e=Object(o.gql)(pe||(pe=Object(S.a)(["\n  mutation PIAF_NON_POURVU($piafId: ID!, $nonPourvu: Boolean) {\n    updatePiaf(input: { id: $piafId, nonPourvu: $nonPourvu }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n        nonPourvu\n      }\n    }\n  }\n"]))),ze=Object(o.gql)(fe||(fe=Object(S.a)(["\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),He=Object(o.gql)(me||(me=Object(S.a)(["\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),Ge=Object(o.gql)(he||(he=Object(S.a)(["\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n"]))),Ne=Object(o.gql)(Oe||(Oe=Object(S.a)(["\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n"]))),Ue=(Object(o.gql)(xe||(xe=Object(S.a)(["\n  mutation PIAF_CREATE($idCreneau: String!, $idRole: String) {\n    createPiaf(input: { creneau: $idCreneau, role: $idRole, visible: true, pourvu: false, nonPourvu: false }) {\n      piaf {\n        id\n        creneau {\n          id\n        }\n        piaffeur {\n          id\n        }\n        role {\n          id\n        }\n      }\n    }\n  }\n"]))),Object(o.gql)(ve||(ve=Object(S.a)(["\n  query PIAF_GET($id: ID!) {\n    piaf(id: $id) {\n      id\n      creneau {\n        id\n      }\n      piaffeur {\n        id\n      }\n      role {\n        id\n      }\n    }\n  }\n"])))),Le=Object(o.gql)(ge||(ge=Object(S.a)(["\n  query ROLES {\n    roles {\n      id\n      libelle\n      roleUniqueId\n    }\n  }\n"]))),Be=Object(a.createContext)({}),Te=function(e){var t=e.children,n=[],r=Object(o.useQuery)(Le).data;return r&&(n=r.roles),Object(f.jsx)(Be.Provider,{value:{roles:n},children:t})};var Ve,Re,_e=n(54),Ze=n(308),We=n(309),Je=n(310),Qe=n(311),Xe=n(312),Ke=n(94),Ye=function(e){var t=e.open,n=e.handleClose,r=e.title,a=e.message,i=e.callback,c=function(e){return function(){i&&setTimeout(i,300,e),n()}};return Object(f.jsxs)(Ze.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(We.a,{id:"alert-dialog-title",children:r}),Object(f.jsx)(Je.a,{children:Object(f.jsx)(Qe.a,{id:"alert-dialog-description",children:a})}),i?Object(f.jsxs)(Xe.a,{children:[Object(f.jsx)(Ke.a,{onClick:c(!0),color:"primary",children:"Oui"}),Object(f.jsx)(Ke.a,{onClick:c(!1),color:"primary",children:"Non"})]}):Object(f.jsx)(Xe.a,{children:Object(f.jsx)(Ke.a,{onClick:n,color:"primary",children:"OK"})})]})},et=Object(a.createContext)({}),tt=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(E.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(""),o=Object(E.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(""),j=Object(E.a)(d,2),b=j[0],p=j[1],m=Object(a.useState)(),h=Object(E.a)(m,2),O=h[0],x=h[1],v=function(){c(!1)};return Object(f.jsxs)(et.Provider,{value:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";p(e),u(t),x(void 0),c(!0)},openQuestion:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p(e),u(t),new Promise((function(e){x((function(){return e})),c(!0)}))},closeDialog:v},children:[t,Object(f.jsx)(Ye,{open:i,handleClose:v,title:l,message:b,callback:O})]})},nt=function(){return Object(a.useContext)(et)},rt=n(29),at=n(313),it=n(22),ct=n.n(it),st=n(33),ot=n(165),lt=n(159),ut=n(93),dt=n(314),jt=n(315),bt=n(133),pt=n.n(bt),ft=function(){var e=Object(st.a)(ct.a.mark((function e(t,n,r){var a;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://adminchouettos.lachouettecoop.fr","/").concat(t),{method:"POST",body:n,headers:r});case 2:if((a=e.sent).ok){e.next=5;break}throw new pt.a(a.status,a.statusText);case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),mt=function(){var e=Object(st.a)(ct.a.mark((function e(t,n,r){var a,i,c;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=H()){e.next=3;break}throw new Error("You must be authenticated to trigger the sending of an email");case 3:return i={"X-Auth-Token":a.token},(c=new FormData).append("sujet",n),c.append("email",t),c.append("corps",r),e.next=10,ft("dist_api/send_email",c,i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function ht(){return(ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ot(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xt(e,t){var n=e.title,r=e.titleId,i=Ot(e,["title","titleId"]);return a.createElement("svg",ht({xmlns:"http://www.w3.org/2000/svg",width:756,height:756,viewBox:"0 0 756 756",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,Ve||(Ve=a.createElement("path",{d:"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z",fill:"#314b3f"})),Re||(Re=a.createElement("g",{transform:"matrix(1.33333 0 0 -1.33333 0 756)",fill:"#314b3f"},a.createElement("path",{d:"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308"}),a.createElement("path",{d:"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244"}))))}var vt=a.forwardRef(xt);n.p;var gt=Object(l.a)("div",{target:"e1o1sysb2"})({name:"1sw8vsk",styles:"text-align:center;svg{width:250px;height:250px;margin:-20px 0;}"}),yt=Object(l.a)(Ke.a,{target:"e1o1sysb1"})({name:"avpsk8",styles:"margin-bottom:15px"}),wt=Object(l.a)("div",{target:"e1o1sysb0"})({name:"1i02ixe",styles:"margin:5px;float:right"}),It=function(){var e=Object(a.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(E.a)(i,2),s=c[0],o=c[1],l=N().login,u=function(){var e=Object(st.a)(ct.a.mark((function e(t){var n,a,i;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),r(!0),e.prev=3,e.next=6,ft("login_api",n);case 6:a=e.sent,i={id:a.userId,email:n.get("username"),token:a.token},l(i),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),e.t0 instanceof pt.a&&401===e.t0.code?alert("Identifiant ou mot de passe incorrect"):v(e.t0),r(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(at.a,{maxWidth:"xs",children:[Object(f.jsxs)(gt,{children:[Object(f.jsx)(vt,{}),Object(f.jsx)(p.a,{variant:"h1",children:"Planning"})]}),Object(f.jsxs)("form",{onSubmit:u,children:[Object(f.jsx)("p",{children:"Pour te connecter, l\u2019identifiant et le mot de passe sont les m\xeames que ceux que tu utilises pour aller sur l\u2019espace membres. Si tu r\xe9initialises ton mot de passe, le changement sera donc valable aussi pour l\u2019espace membres."}),Object(f.jsx)(ot.a,{type:"email",name:"username",label:"E-mail",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(f.jsx)(ot.a,{type:s?"text":"password",name:"password",label:"Mot de passe",fullWidth:!0,variant:"outlined",margin:"normal",InputProps:{endAdornment:Object(f.jsx)(lt.a,{title:s?"Cacher le mot de passe":"Afficher le mot de passe",children:Object(f.jsx)(ut.a,{"aria-label":"toggle password visibility",onClick:function(){o(!s)},edge:"end",children:s?Object(f.jsx)(dt.a,{}):Object(f.jsx)(jt.a,{})})})}}),Object(f.jsx)(wt,{children:Object(f.jsx)("a",{href:"https://adminchouettos.lachouettecoop.fr/resetting/request",children:"Mot de passe oubli\xe9 ?"})}),Object(f.jsx)(yt,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",disabled:n,children:"Connexion"})]})]})},Ct=function(){var e=Object(rt.h)().pathname;return Object(f.jsx)(at.a,{children:Object(f.jsxs)(rt.e,{children:[Object(f.jsx)(rt.c,{path:"/login",children:Object(f.jsx)(It,{})}),Object(f.jsx)(rt.b,{to:"/login?next=".concat(e)})]})})},Pt=n(316),kt=n(317),At=n(318),Et=n(198),St=Object(a.createContext)({}),qt=function(){return Object(Pt.a)(new Date)},Ft=function(){return Object(kt.a)(new Date)},Dt=function(e){var t=e.children,n=Object(a.useState)(qt),r=Object(E.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(Ft),l=Object(E.a)(s,2),u=l[0],d=l[1],j=Object(o.useQuery)(Fe,{variables:{after:i,before:u}}),b=j.data,p=j.loading,m=j.error,h=j.refetch;return Object(f.jsx)(St.Provider,{value:{start:i,end:u,goBack:function(){var e=Object(At.a)(i,1);c(e),d(Object(kt.a)(e))},goForward:function(){var e=Object(Et.a)(i,1);c(e),d(Object(kt.a)(e))},goToday:function(){c(qt),d(Ft)},data:b,loading:p,error:m,refetch:h},children:t})};function Mt(){return Object(a.useContext)(St)}var $t,zt=n(35),Ht=n(6),Gt=n(57),Nt=n(186),Ut=n(37),Lt=n(121),Bt=n(353),Tt=n(327),Vt=n(328),Rt=n(306),_t=n(357),Zt=n(358),Wt=n(259),Jt=n(260),Qt=n(263),Xt=n(332),Kt=n(319),Yt=n(320),en=n(321),tn=n(322),nn=n(323),rn=n(324),an=n(325),cn=n(326),sn=n(329),on=n(330),ln=n(331),un=n(204),dn=function(e){var t=e.href,n=Object(un.a)(e,["href"]);return(null===t||void 0===t?void 0:t.startsWith("/"))?Object(f.jsx)(_e.b,Object(k.a)({to:t},n)):Object(f.jsx)("a",Object(k.a)({href:t},n))},jn=function(e,t){return t.some((function(t){return t.roleUniqueId===e}))},bn=function(e){return e.map((function(e){return e.libelle})).join(", ")};!function(e){e.GrandHibou="GH",e.Chouettos="CH",e.Caissier="CA",e.GrandHibou_Formateur="GHF",e.Caissier_Formateur="CAF",e.AdminMag="MAG",e.AdminBdM="BDM",e.PIAF="P",e.Formateur="F"}($t||($t={}));var pn=260,fn=Object(Lt.a)(Bt.a)({flexGrow:1}),mn=Object(Gt.a)((function(e){return Object(Nt.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:pn,width:"calc(100% - ".concat(pn,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:pn,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:pn,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(zt.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(k.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuItem:{textDecoration:"none",color:e.palette.secondary.main},activeItem:{textDecoration:"none",color:e.palette.primary.main}})})),hn=[{title:"Accueil",href:"/home",Icon:Kt.a,role:$t.Chouettos},{title:"Planning",href:"/planning",Icon:Yt.a,role:$t.Chouettos},{title:"R\xe9serve",href:"/reserve",Icon:en.a,role:$t.Chouettos},{title:"Mon profil",href:"/profile",Icon:tn.a,role:$t.Chouettos},{title:"Historique des PIAF",href:"/history",Icon:nn.a,role:$t.Chouettos},{title:"Groupe MAG",href:"/magasin",Icon:rn.a,role:$t.AdminMag},{title:"Groupe BdM",href:"/bdm",Icon:an.a,role:$t.AdminBdM},{title:"Espace membre",href:"https://espace-membres.lachouettecoop.fr/page/homepage",Icon:cn.a,role:$t.Chouettos}],On=function(){var e,t,n=mn(),r=N(),i=r.user,c=r.logout,s=Object(Ut.a)(),o=Object(a.useState)(!1),l=Object(E.a)(o,2),u=l[0],d=l[1],j=Object(rt.h)().pathname;if(!Object(Tt.a)(s.breakpoints.up("sm")))return null;var b=(null===i||void 0===i?void 0:i.rolesChouette)||[];return Object(f.jsxs)("div",{className:n.root,children:[Object(f.jsx)(Vt.a,{position:"fixed",className:Object(Ht.a)(n.appBar,Object(zt.a)({},n.appBarShift,u)),children:Object(f.jsxs)(Rt.a,{children:[Object(f.jsx)(ut.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(Ht.a)(n.menuButton,Object(zt.a)({},n.hide,u)),children:Object(f.jsx)(sn.a,{})}),Object(f.jsxs)(p.a,{variant:"h6",noWrap:!0,children:["Planning ",W&&Object(f.jsx)(_t.a,{label:"TEST"})]}),Object(f.jsx)(fn,{}),Object(f.jsx)(tn.a,{}),i&&M(i),Object(f.jsx)(fn,{}),Object(f.jsx)(Ke.a,{onClick:c,color:"inherit",children:"D\xe9connexion"})]})}),Object(f.jsx)(Rt.a,{}),Object(f.jsxs)(Zt.a,{variant:"permanent",className:Object(Ht.a)(n.drawer,(e={},Object(zt.a)(e,n.drawerOpen,u),Object(zt.a)(e,n.drawerClose,!u),e)),classes:{paper:Object(Ht.a)((t={},Object(zt.a)(t,n.drawerOpen,u),Object(zt.a)(t,n.drawerClose,!u),t))},children:[Object(f.jsx)("div",{className:n.toolbar,children:Object(f.jsx)(ut.a,{onClick:function(){d(!1)},children:"rtl"===s.direction?Object(f.jsx)(on.a,{}):Object(f.jsx)(ln.a,{})})}),Object(f.jsx)(Wt.a,{children:hn.filter((function(e){var t=e.role;return jn(t,b)})).map((function(e){var t=e.href,r=e.title,a=e.Icon,i=j===t;return Object(f.jsx)(dn,{className:i?n.activeItem:n.menuItem,href:t,children:Object(f.jsx)(lt.a,{title:r,children:Object(f.jsxs)(Jt.a,{button:!0,children:[Object(f.jsx)(Qt.a,{children:Object(f.jsx)(a,{color:i?"primary":"secondary"})}),Object(f.jsx)(Xt.a,{primary:r})]})})},t)}))})]})]})},xn=n(203),vn=n(88),gn=n(333),yn=Object(Gt.a)((function(e){return Object(Nt.a)({appBar:{top:"auto",bottom:0},toolbar:{justifyContent:"space-between"},label:{flexDirection:"column"},menu:{"& ul":{paddingTop:"0 !important",paddingBottom:"0 !important"}},textMenuDecoration:{textDecoration:"none"},menuItem:{color:"rgba(255, 255, 255, 0.54)",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},activeItem:{color:"white",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},icon:{justifyContent:"center","& svg":{fill:"rgba(255, 255, 255, 0.54)"}},activeIcon:{justifyContent:"center","& svg":{fill:"white"}}})})),wn=[{title:"Accueil",href:"/home",Icon:Kt.a,role:$t.Chouettos},{title:"Planning",href:"/planning",Icon:Yt.a,role:$t.Chouettos},{title:"R\xe9serve",href:"/reserve",Icon:en.a,role:$t.Chouettos}],In=[{title:"Mon profil",href:"/profile",role:$t.Chouettos},{title:"Historique des PIAF",href:"/history",role:$t.Chouettos},{title:"Espace membre",href:"/member",role:$t.Chouettos},{title:"Groupe MAG",href:"/magasin",role:$t.AdminMag},{title:"Groupe BdM",href:"/bdm",role:$t.AdminBdM}];function Cn(){var e=yn(),t=N(),n=t.user,r=t.logout,i=Object(a.useState)(null),c=Object(E.a)(i,2),s=c[0],o=c[1],l=Object(Ut.a)(),u=Object(rt.h)().pathname,d=Object(Tt.a)(l.breakpoints.down("xs")),j=function(){o(null)},b=(null===n||void 0===n?void 0:n.rolesChouette)||[];return d?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(Vt.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(f.jsxs)(Rt.a,{className:e.toolbar,children:[wn.filter((function(e){var t=e.role;return jn(t,b)})).map((function(t){var n=t.href,r=t.title,a=t.Icon,i=u===n;return Object(f.jsxs)(Jt.a,{button:!0,className:e.label,component:_e.b,to:n,children:[Object(f.jsx)(Qt.a,{className:i?e.activeIcon:e.icon,children:Object(f.jsx)(a,{})}),Object(f.jsx)(Xt.a,{className:i?e.activeItem:e.menuItem,primary:r})]},r)})),Object(f.jsxs)(xn.a,{id:"simple-menu",className:e.menu,anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:j,children:[In.filter((function(e){var t=e.role;return jn(t,b)})).map((function(t){var n=t.href,r=t.title,a=u===n;return Object(f.jsx)(vn.a,{className:a?e.activeItem:e.menuItem,onClick:j,component:_e.b,to:n,children:r},r)})),Object(f.jsx)(vn.a,{onClick:r,className:e.menuItem,color:"inherit",children:"D\xe9connexion"},"Logout")]}),Object(f.jsx)(ut.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},edge:"end",color:"inherit",children:Object(f.jsx)(gn.a,{})})]})})}):null}var Pn=n(340),kn=n(264);var An=Object(l.a)(kn.a,{target:"exfr9vd0"})({name:"1k6141t",styles:"margin:16px 0"}),En=n(338),Sn=n(339),qn=n(267),Fn=n(261),Dn=n(163),Mn=n(199),$n=n.n(Mn),zn=n(205),Hn=function(e){var t=e.role;return t?t.roleUniqueId:null},Gn=function(e){return"remplacement"!==e.statut&&Boolean(e.piaffeur)},Nn=function(e,t){var n,r;return!!e.piafs&&(!(Object(zn.a)(e.start,new Date)>5)&&(e.piafs.filter(Gn).length<3||(null===(n=t.role)||void 0===n?void 0:n.roleUniqueId)==$t.GrandHibou||(null===(r=t.role)||void 0===r?void 0:r.roleUniqueId)==$t.Caissier))},Un=function(e,t){return e.creneau.debut>t.creneau.debut?1:-1},Ln=function(e,t){return e.role?t.role?e.role.id>t.role.id?1:-1:2:-2};var Bn=Object.values($t),Tn=Object(l.a)("svg",{target:"emw2y5h2"})("flex-shrink:0;display:inline-block;margin:3px;width:32px;height:32px;opacity:",(function(e){return e.$taken?.25:1}),";use{fill:",(function(e){return e.$critical?"#e53935":"black"}),";}"),Vn=Object(l.a)($n.a,{target:"emw2y5h1"})({name:"vtxxan",styles:"position:absolute;z-index:10;left:-5px;top:0px;height:1rem!important"}),Rn=Object(l.a)("div",{target:"emw2y5h0"})({name:"bjn8wh",styles:"position:relative"}),_n=function(e){var t=e.role,n=e.taken,r=e.critical,a=e.info;return t&&Bn.includes(t)||(t=$t.Chouettos),Object(f.jsx)(lt.a,{title:a||"",children:Object(f.jsxs)(Rn,{children:[a&&Object(f.jsx)(Vn,{}),Object(f.jsx)(Tn,{$taken:n,$critical:r,children:Object(f.jsx)("use",{xlinkHref:"#"+t,width:"100%",height:"100%"})})]})})},Zn=function(e){var t=e.piaf,n=e.critical,r=e.displayTooltip;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(_n,{role:Hn(t),taken:Gn(t),critical:n,info:r&&t.informations||""})})},Wn=n(11),Jn=n(337),Qn=n(85),Xn=n(154),Kn=n(334),Yn=n(335),er=n(336),tr=n(352),nr=n(202),rr=function(e){return"object"!==typeof e?new Date(e):e},ar=function(e,t){return Object(tr.a)(rr(e),t,{locale:nr.a})},ir=function(e){return ar(e,"EEEE d MMM")},cr=function(e){return ar(e,"EEEE d MMMM yyyy")},sr=function(e){return ar(e,"HH:mm")},or=function(e){return ar(e,"EEEE d MMMM yyyy \xe0 HH:mm")},lr=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],ur=function(e){return Object(tr.a)(e,"yyyy-MM-dd")};var dr=[$t.AdminBdM,$t.AdminMag],jr=Object(l.a)("div",{target:"e181b5zh3"})({name:"yxesgb",styles:"margin:0 0 1rem 0;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;button{margin-left:8px;}"}),br=Object(l.a)("div",{target:"e181b5zh2"})("flex:1;margin:0 8px;span{color:",(function(e){return e.theme.palette.grey[600]}),";}"),pr=Object(l.a)("div",{target:"e181b5zh1"})({name:"1yv69uo",styles:"text-align:right;a{text-decoration:none;}"}),fr=Object(l.a)("div",{target:"e181b5zh0"})({name:"4zleql",styles:"display:block"}),mr=function(){var e=Object(st.a)(ct.a.mark((function e(t,n,r){var a,i,c,s;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="day"===r?Object(Qn.a)(t.start):Object(Xn.a)(t.start),i="day"===r?Object(Kn.a)(t.start):Object(Yn.a)(t.start),e.next=4,X.query({query:qe,variables:{userId:n,after:a,before:i}});case 4:return c=e.sent,s=c.data,e.abrupt("return",s.piafs.filter((function(e){return"occupe"===e.statut&&!1===e.nonPourvu})).length);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),hr=function(e,t){var n,r=null===(n=e.piafs)||void 0===n?void 0:n.find((function(e){var n,r=e.statut,a=e.role;return"remplacement"===r&&(null===a||void 0===a?void 0:a.id)===(null===(n=t.role)||void 0===n?void 0:n.id)}));return r||t},Or=function(e,t,n){var r,a=e.piaffeur.email;if(a&&mt(a,"PIAF remplac\xe9e","Ta PIAF du ".concat(or(t.start)," a \xe9t\xe9 pourvue. Tu n\u2019es plus en charge de cette PIAF.")),(null===(r=e.role)||void 0===r?void 0:r.roleUniqueId)!=$t.GrandHibou){var i=function(e){var t,n,r=null===(t=e.piafs)||void 0===t?void 0:t.find((function(e){var t=e.statut,n=e.role;return"occupe"===t&&(null===n||void 0===n?void 0:n.id)===$t.GrandHibou}));return null===r||void 0===r||null===(n=r.piaffeur)||void 0===n?void 0:n.email}(t);i&&mt(i,"PIAF remplac\xe9e","La PIAF du ".concat(or(t.start)," a \xe9t\xe9 pourvue.\n        ").concat(M(n)," est maintenant inscrit pour cette PIAF."))}},xr=function(e){var t,n,r=e.piaf,i=e.slot,c=Object(a.useState)(!1),s=Object(E.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(""),d=Object(E.a)(u,2),j=d[0],b=d[1],p=nt(),m=p.openDialog,h=p.openQuestion,O=N().user,x=Object(a.useContext)(Be).roles,g=Mt().refetch,y=!!O&&dr.some((function(e){return O.rolesChouette.some((function(t){return t.roleUniqueId===e}))})),w=O&&(null===(t=i.piafs)||void 0===t?void 0:t.find((function(e){var t=e.piaffeur,n=e.statut;return(null===t||void 0===t?void 0:t.id)===O.id&&"occupe"===n}))),I=function(){var e=Object(st.a)(ct.a.mark((function e(t){var n,a,c;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.query({query:Ue,variables:{id:r.id}});case 2:if(n=e.sent,!(a=n.data).piaf.piaffeur||"occupe"!=a.piaf.statut){e.next=8;break}return m("La PIAF a \xe9t\xe9 d\xe9j\xe0 prise par un autre chouettos"),g(),e.abrupt("return",!1);case 8:if(r.role){e.next=11;break}return m("Cette PIAF n\u2019a pas de r\xf4le. Contacte l\u2019administrateur pour lui signaler cette erreur."),e.abrupt("return",!1);case 11:if((c=null===O||void 0===O?void 0:O.rolesChouette)&&jn(r.role.roleUniqueId,c)){e.next=16;break}return l(!1),m("Pour t\u2019inscrire \xe0 cette PIAF, tu dois d\u2019abord passer la formation ".concat(r.role.libelle)),e.abrupt("return",!1);case 16:return e.next=18,mr(i,t.id,"week");case 18:if(!(e.sent>=3)){e.next=23;break}return l(!1),m("Il n\u2019est pas possible de s\u2019inscrire \xe0 plus de ".concat(3," PIAF par semaine")),e.abrupt("return",!1);case 23:return e.next=25,mr(i,t.id,"day");case 25:if(!(e.sent>=2)){e.next=30;break}return l(!1),m("Il n\u2019est pas possible de s\u2019inscrire \xe0 plus de ".concat(2," PIAF par jour")),e.abrupt("return",!1);case 30:return e.abrupt("return",!0);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(st.a)(ct.a.mark((function e(){var t,n,a;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O,e.next=3,I(t);case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,h("Es-tu s\xfbr\xb7e de vouloir t\u2019inscrire \xe0 cette PIAF du ".concat(ir(i.start)," en tant que ").concat(null===(n=r.role)||void 0===n?void 0:n.libelle,"?"));case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return l(!0),"remplacement"===(a=hr(i,r)).statut&&Or(a,i,t),e.next=16,X.mutate({mutation:De,variables:{piafId:a.id,userId:t.id,statut:"occupe",informations:j}});case 16:m("Inscription effectu\xe9e. Merci !"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),v(e.t0);case 22:l(!1);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(st.a)(ct.a.mark((function e(){var t;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("N\u2019oublie pas de chercher un\xb7e rempla\xe7ant\xb7e sur Facebook, Zulip, appel aux autres Chouettos\u2026 Plus ton cr\xe9neau est proche, plus c\u2019est important! Es-tu s\xfbr\xb7e de vouloir te d\xe9sinscrire ?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return l(!0),e.prev=6,b(""),t=O.id,e.next=11,X.mutate({mutation:De,variables:{piafId:r.id,userId:t,statut:"remplacement",informations:null}});case 11:m("D\xe9sinscription effectu\xe9e : la PIAF est d\xe9sormais en recherche de remplacement !"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),v(e.t0);case 17:l(!1);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}(),k=r.piaffeur,A=r.informations,S=Gn(r),q=!Object(er.a)(i.end),F=x.find((function(e){return e.roleUniqueId==Hn(r)})),D=y||(null===w||void 0===w||null===(n=w.role)||void 0===n?void 0:n.roleUniqueId)===$t.GrandHibou||(null===k||void 0===k?void 0:k.affichageDonneesPersonnelles);return Object(f.jsxs)(jr,{children:[Object(f.jsx)(Zn,{piaf:r}),Object(f.jsxs)(br,{children:[S&&k?M(k):"Place disponible",Object(f.jsx)("br",{}),Object(f.jsxs)("span",{children:[" ",null===F||void 0===F?void 0:F.libelle]})]}),S&&k&&k.id!=(null===O||void 0===O?void 0:O.id)&&Object(f.jsxs)(pr,{children:[D&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("a",{href:"mailto:".concat(k.email),children:k.email}),Object(f.jsx)("br",{}),Object(f.jsx)("a",{href:"tel:".concat(k.telephone),children:k.telephone}),Object(f.jsx)("br",{})]}),A]}),!S&&!w&&q&&Object(f.jsx)(ot.a,{name:"informations",multiline:!0,label:"Informations (optionnel)",value:j,onChange:function(e){var t=e.target;b(t.value)}}),!S&&!w&&q&&Object(f.jsx)(Ke.a,{disabled:o,color:"primary",variant:"contained",onClick:C,children:"S\u2019inscrire"}),(null===k||void 0===k?void 0:k.id)===(null===O||void 0===O?void 0:O.id)&&S&&q&&Object(f.jsxs)(fr,{children:[Object(f.jsx)("div",{children:A}),Object(f.jsx)(Ke.a,{disabled:o,color:"primary",variant:"contained",onClick:P,children:"Demander un remplacement"})]})]})};var vr=Object(l.a)(ut.a,{target:"e1el6lcd1"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),gr=Object(l.a)("div",{target:"e1el6lcd0"})("h3{font-size:1.5em;margin-bottom:8px;}h4{font-size:1.2em;}span{color:",(function(e){return e.theme.palette.grey[600]}),";margin-left:5px;font-weight:500;}"),yr=function(e){var t=e.slot,n=e.show,r=e.handleClose;return Object(f.jsxs)(Ze.a,{open:n,onClose:r,fullWidth:!0,children:[Object(f.jsx)(vr,{onClick:r,children:Object(f.jsx)(Jn.a,{})}),Object(f.jsx)(We.a,{disableTypography:!0,children:Object(f.jsxs)(gr,{children:[Object(f.jsx)(p.a,{variant:"h3",children:Object(Wn.a)(cr(t.start))}),Object(f.jsxs)(p.a,{variant:"h4",children:[Object(f.jsxs)("strong",{children:[sr(t.start),"\u2013",sr(t.end)]}),Object(f.jsx)("span",{children:t.title})]}),Object(f.jsx)("div",{children:t.information})]})}),Object(f.jsx)(Je.a,{children:t.piafs?t.piafs.map((function(e){return Object(f.jsx)(xr,{piaf:e,slot:t},e.id)})):Object(f.jsx)(An,{})})]})};var wr=Object(l.a)(En.a,{target:"eaqzuha0"})({name:"m832pm",styles:"border:1px solid gray;border-radius:5px;margin-bottom:2px"}),Ir=function(e){var t=e.piaf,n=e.allowValidate,r=void 0!==n&&n,i=t.creneau,c=Object(a.useState)(!1),s=Object(E.a)(c,2),l=s[0],u=s[1],d=nt(),j=d.openQuestion,b=d.openDialog,p=Object(o.useLazyQuery)(Ee,{variables:{id:i.id}}),m=Object(E.a)(p,2),h=m[0],O=m[1].data,x=function(){var e=Object(st.a)(ct.a.mark((function e(t){var n;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("Es-tu s\xfbr\xb7e de vouloir valider cette PIAF ?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return n={piafId:t,validate:!0},e.prev=6,e.next=9,X.mutate({mutation:Me,variables:n});case 9:b("La PIAF a \xe9t\xe9 valid\xe9e"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),v(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(st.a)(ct.a.mark((function e(t){var n;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("Es-tu s\xfbr\xb7e de vouloir indiquer cette PIAF comme non pourvue?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return n={piafId:t,nonPourvu:!0},e.prev=6,e.next=9,X.mutate({mutation:$e,variables:n});case 9:b("La PIAF a \xe9t\xe9 indiqu\xe9 comme non pourvue"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),v(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),y={id:i.id,title:i.titre,information:i.informations,start:new Date(i.debut),end:new Date(i.fin),piafs:null===O||void 0===O?void 0:O.creneau.piafs},w=r?wr:En.a;return Object(f.jsxs)(w,{container:!0,children:[Object(f.jsx)(En.a,{item:!0,xs:8,children:Object(f.jsxs)(Jt.a,{button:!0,onClick:function(){u(!0),h()},children:[Object(f.jsx)(Sn.a,{children:Object(f.jsx)(Zn,{piaf:t})}),Object(f.jsx)(Xt.a,{primary:cr(y.start),secondary:"de ".concat(sr(y.start)," \xe0 ").concat(sr(y.end))})]},t.id)}),Object(f.jsx)(En.a,{item:!0,xs:4,children:r&&Object(f.jsxs)(qn.a,{children:[Object(f.jsx)(Fn.a,{control:Object(f.jsx)(Dn.a,{checked:t.pourvu,name:"validatePIAF",onChange:function(){x(t.id)}}),label:"Valider"}),Object(f.jsx)(Fn.a,{control:Object(f.jsx)(Dn.a,{checked:t.nonPourvu,name:"nonPourvu",onChange:function(){g(t.id)}}),label:"Non pourvue"})]})}),Object(f.jsx)(yr,{show:l,slot:y,handleClose:function(){u(!1)}})]})},Cr=function(e){var t=e.userId,n=e.after,r=e.validated,a=void 0!==r&&r,i=e.allowValidate,c=void 0!==i&&i,s=Object(o.useQuery)(Se,{variables:{userId:t,after:n,validated:a},skip:!t}),l=s.loading,u=s.error,d=s.data;if(l||!t)return Object(f.jsx)(An,{});if(u)return Object(f.jsx)(C,{error:u});if(!d)return null;if(!d.piafs.length&&!c)return Object(f.jsx)("p",{children:"Aucune PIAF \xe0 venir. Inscris-toi sur le planning !"});if(!d.piafs.length&&c)return Object(f.jsx)("p",{children:"Aucune PIAF \xe0 valider."});var j=d.piafs.filter((function(e){var t=e.statut,n=e.nonPourvu;return"remplacement"!==t&&0==n})).sort(Un);return Object(f.jsx)(Wt.a,{children:j.map((function(e){return Object(f.jsx)(Ir,{piaf:e,allowValidate:c},e.id)}))})},Pr=n(200),kr=new Date(Date.now()),Ar=function(){var e=N(),t=e.auth,n=e.user,r=Object(o.useQuery)(Se,{variables:{after:ur(kr),before:ur(Object(Et.a)(kr,2)),statut:"remplacement"}}),a=r.loading,i=r.error,c=r.data;if(a)return Object(f.jsx)(An,{});if(i)return Object(f.jsx)(C,{error:i});if(!c)return null;var s=(null===n||void 0===n?void 0:n.rolesChouette)||[],l=c.piafs.filter((function(e){var n;return function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=e.match(/api\/\w+\/(\d+)/);if(t)return Number(t[1])}return null}(null===(n=e.piaffeur)||void 0===n?void 0:n.id)!==t.id&&e.role&&jn(e.role.roleUniqueId,s)&&new Date(e.creneau.fin)<Object(Pr.a)(Object(Pn.a)(),2)&&new Date(e.creneau.fin)>kr})).sort(Un);return l.length?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Les cr\xe9neaux suivants sont vacants et donc disponibles pour un remplacement. N\u2019h\xe9site pas \xe0 te positionner, la personne que tu remplaces sera avertie par e-mail instantan\xe9ment !"}),Object(f.jsx)(Wt.a,{children:l.map((function(e){return Object(f.jsx)(Ir,{piaf:e},e.id)}))})]}):Object(f.jsx)("p",{children:"Aucun remplacement \xe0 venir n\u2019est demand\xe9."})};var Er={"tr\xe8s chouette":"#2ECC40",chouette:"#FF851B","chouette en alerte":"#FF4136"},Sr=Object(l.a)(p.a,{target:"eeumoro4"})("color:",(function(e){var t=e.$status,n=e.theme;return t&&Er[t.toLowerCase()]||n.palette.secondary.main}),";&::first-letter{text-transform:uppercase;}"),qr=Object(l.a)("div",{target:"eeumoro3"})({name:"7ejfwp",styles:"min-height:calc(100vh - 132px);display:flex;flex-direction:column;justify-content:space-between"}),Fr=Object(l.a)("div",{target:"eeumoro2"})("font-size:0.85em;margin-top:",(function(e){return e.theme.spacing(4)}),"px;"),Dr=Object(l.a)("div",{target:"eeumoro1"})({name:"18mlbky",styles:"display:flex;flex-wrap:wrap;gap:32px;>div{flex:0 1 calc(50% - 16px);min-width:300px;}"}),Mr=Object(l.a)("div",{target:"eeumoro0"})({name:"tjnilk",styles:"h3{font-size:2.5rem;margin-bottom:2rem;span{font-size:0.5em;}}"}),$r=function(){var e,t,n=N().user,r="".concat(null!==(e=null===n||void 0===n?void 0:n.nbPiafEffectuees)&&void 0!==e?e:"\u2026","/").concat(null!==(t=null===n||void 0===n?void 0:n.nbPiafAttendues)&&void 0!==t?t:"\u2026"),a=(null===n||void 0===n?void 0:n.statut)||"\u2026";return Object(f.jsxs)(qr,{children:[Object(f.jsxs)(Dr,{children:[Object(f.jsxs)(Mr,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Mon statut"}),Object(f.jsxs)(p.a,{variant:"h3",children:[r," ",Object(f.jsx)("span",{children:"PIAF attendues"})]}),Object(f.jsx)(p.a,{variant:"h2",children:"Je suis"}),Object(f.jsx)(Sr,{variant:"h3",$status:null===n||void 0===n?void 0:n.statut,children:a})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Mes prochaines PIAF"}),Object(f.jsx)(Cr,{userId:null===n||void 0===n?void 0:n.id,after:ur(Object(Pn.a)())})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Remplacements"}),Object(f.jsx)(Ar,{})]})]}),Object(f.jsxs)(Fr,{children:[Object(f.jsx)(_e.b,{to:"/legal",children:"Politique de traitement des donn\xe9es personnelles"}),Object(f.jsx)("p",{children:"Ce site n\u2019utilise pas de cookies tiers"}),Object(f.jsxs)("p",{children:["Un probl\xe8me ? Une question ? Contacte le BdM :"," ",Object(f.jsx)("a",{href:"mailto:".concat("bureau-des-membres@lachouettecoop.fr"),children:"bureau-des-membres@lachouettecoop.fr"})]})]})]})},zr=n(344),Hr=n(346),Gr=n(347),Nr=n(345),Ur=n(341),Lr=n(201),Br=n(342),Tr=n(343),Vr=n(359);var Rr="#FFFFAA",_r=["inventaire","formation"],Zr=Object(l.a)("button",{target:"e7w31zc2"})("width:100%;border:none;background-color:",(function(e){var t=e.$open,n=e.$slotTitle;return t?Rr:_r.some((function(e){return n.toLowerCase().toString().startsWith(e)}))?"#89C7A8":"transparent"}),";padding:5px;text-align:left;font-size:inherit;line-height:inherit;font:inherit;cursor:pointer;&:focus{background-color:",Rr,";outline:none;}"),Wr=Object(l.a)("div",{target:"e7w31zc1"})({name:"88ia8m",styles:"span{color:gray;}"}),Jr=Object(l.a)("div",{target:"e7w31zc0"})({name:"l6pi5w",styles:"display:flex;flex-wrap:wrap;margin:0 -2px;svg{width:24px;height:24px;}"}),Qr=function(e){var t,n=e.slot,r=Object(a.useState)(!1),i=Object(E.a)(r,2),c=i[0],s=i[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(Zr,{$open:c,$slotTitle:n.title||"",onClick:function(){s(!0)},children:[Object(f.jsxs)(Wr,{children:[Object(f.jsxs)("strong",{children:[sr(n.start),"\u2013",sr(n.end)]}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:n.title})]}),Object(f.jsx)(Jr,{children:null===(t=n.piafs)||void 0===t?void 0:t.map((function(e){return Object(f.jsx)(Zn,{piaf:e,critical:Nn(n,e)&&!Gn(e),displayTooltip:!0},e.id)}))})]}),Object(f.jsx)(yr,{show:c,slot:n,handleClose:function(){s(!1)}})]})};var Xr={1:"#89C7A8",2:"#638F79",3:"#3A5447",4:"#27382F"},Kr=Object(l.a)("div",{target:"exian1q2"})("background-color:",(function(e){var t=e.$when,n=e.theme;return t?Xr[t]:n.palette.grey[400]}),";height:18px;color:white;font-size:12px;padding:0 4px;"),Yr=Object(l.a)("div",{target:"exian1q1"})("opacity:",(function(e){return"past"===e.$when?.25:1}),";border:1px solid gray;min-height:80px;background-color:",(function(e){return"present"===e.$when?"#d0d9d0":"#eee"}),";h3{font-size:1em;margin:4px;}"),ea=Object(l.a)("ul",{target:"exian1q0"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),ta=function(e){var t=e.day,n=e.weekNumber,r=t.start,a=t.slots,i=1===r.getDay()||1===r.getDate();return Object(f.jsxs)(Yr,{$when:Object(Vr.a)(r)?"present":Object(er.a)(r)?"past":"future",children:[Object(f.jsx)(Kr,{$when:n,children:i&&n&&"Semaine ".concat(n)}),Object(f.jsx)(p.a,{variant:"h3",children:Object(Wn.a)(ir(r))}),Object(f.jsx)(ea,{children:a.map((function(e){return Object(f.jsx)(Qr,{slot:e},e.id)}))})]})},na=function(){return Object(f.jsx)(Yr,{$when:"past"})};var ra=Object(l.a)("div",{target:"e1f08xgb1"})({name:"1juea80",styles:"border:1px solid gray;margin:0;padding:0"}),aa=Object(l.a)("div",{target:"e1f08xgb0"})({name:"17osowq",styles:"@media (min-width: 800px){display:flex;>div{flex:1 0 14.29%;}}"}),ia=function(e){var t=e.start,n=e.end,r=e.list,a=Object(Ut.a)(),i=Object(Tt.a)(a.breakpoints.down("sm"));if(!r)return null;var c=Object(Ur.a)({start:t,end:n},{weekStartsOn:1}).map((function(e){return{start:e,days:[0,1,2,3,4,5,6].map((function(t){return{start:Object(Lr.a)(e,t),slots:[]}}))}}));return r.forEach((function(e){var t=new Date(e.debut),n=Object(Br.a)(t,c[0].start),r=c[n],a=(Object(Tr.a)(t)||7)-1,i={piaffeursCount:e.piafs.length,piaffeursCountFirstPiaf:e.piafs.filter((function(e){var t=e.piaffeur;return 0===(null===t||void 0===t?void 0:t.nbPiafEffectuees)})).length},s=e.piafs.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{infoCreneau:i})})).sort(Ln);r.days[a].slots.push({id:e.id,title:e.titre,information:e.informations,start:t,end:new Date(e.fin),piafs:s}),e.creneauGenerique&&(r.weekNumber=Number(e.creneauGenerique.frequence))})),Object(f.jsx)(ra,{children:c.map((function(e,r){return Object(f.jsx)(aa,{children:e.days.map((function(r,a){return r.start>=t&&r.start<n?Object(f.jsx)(ta,{day:r,weekNumber:e.weekNumber},a):i?null:Object(f.jsx)(na,{},a)}))},r)}))})};var ca=Object(l.a)("div",{target:"e4heot02"})({name:"1azakc",styles:"text-align:center"}),sa=Object(l.a)("h3",{target:"e4heot01"})({name:"1oega3v",styles:"margin:0 0 2em"}),oa=Object(l.a)("figcaption",{target:"e4heot00"})({name:"6gj13f",styles:"word-wrap:break-word;padding:0 4px"}),la=function(){return Object(f.jsxs)(ca,{children:[Object(f.jsx)(sa,{children:"L\xe9gende"}),Object(f.jsxs)(En.a,{container:!0,children:[Object(f.jsxs)(En.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(_n,{role:$t.Chouettos}),Object(f.jsx)(oa,{children:"Chouettos"})]}),Object(f.jsxs)(En.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(_n,{role:$t.Caissier}),Object(f.jsx)(oa,{children:"Caissier\xb7\xe8re"})]}),Object(f.jsxs)(En.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(_n,{role:$t.GrandHibou}),Object(f.jsx)(oa,{children:"Grand Hibou"})]})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(En.a,{container:!0,children:[Object(f.jsxs)(En.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(_n,{role:$t.PIAF}),Object(f.jsx)(oa,{children:"PIAF disponible"})]}),Object(f.jsxs)(En.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(_n,{role:$t.PIAF,taken:!0}),Object(f.jsx)(oa,{children:"PIAF occup\xe9e"})]}),Object(f.jsxs)(En.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(_n,{role:$t.PIAF,critical:!0}),Object(f.jsx)(oa,{children:"PIAF critique"})]})]}),Object(f.jsx)("br",{}),Object(f.jsx)(En.a,{container:!0,children:Object(f.jsxs)(En.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(_n,{role:$t.Formateur}),Object(f.jsx)(oa,{children:"Formateur\xb7ice"})]})})]})},ua=la,da=function(){var e=Object(a.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){localStorage.getItem("caption_dismissed")||r(!0)}),[]);return Object(f.jsxs)(Ze.a,{open:n,fullWidth:!0,children:[Object(f.jsx)(Je.a,{children:Object(f.jsx)(la,{})}),Object(f.jsx)(Xe.a,{children:Object(f.jsx)(Ke.a,{onClick:function(){r(!1),localStorage.setItem("caption_dismissed","true")},color:"primary",children:"Compris !"})})]})},ja=function(){var e=Object(a.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],i=N(),c=i.user,s=i.refetchUser;Object(a.useEffect)((function(){(null===c||void 0===c?void 0:c.affichageDonneesPersonnelles)||(localStorage.getItem("privacy_police_dismissed")||r(!0))}),[null===c||void 0===c?void 0:c.affichageDonneesPersonnelles]);var o=function(){var e=Object(st.a)(ct.a.mark((function e(){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.prev=1,e.next=4,X.mutate({mutation:F,variables:{affichageDonneesPersonnelles:!0,idUser:null===c||void 0===c?void 0:c.id}});case 4:s(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),v(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(Ze.a,{open:n,fullWidth:!0,children:[Object(f.jsxs)(Je.a,{children:[Object(f.jsxs)("p",{children:[" ","Par d\xe9faut, tes coordonn\xe9es (email et num\xe9ro de t\xe9l\xe9phone) ne sont pas visibles par les autres coop\xe9rateurs\xb7rices. Les rendre accessibles facilite la communication entre coop\xe9rateurs\xb7rices et optimise l\u2019organisation des PIAF au magasin, par exemple en cas d\u2019indisponibilit\xe9 au dernier moment."," "]}),Object(f.jsxs)("p",{children:["Ce choix est modifiable \xe0 tout moment depuis ",Object(f.jsx)(_e.b,{to:"/profile",children:" mon profil"})]})]}),Object(f.jsx)(Ke.a,{onClick:o,color:"primary",children:"Je comprends et j\u2019accepte que mes coordonn\xe9es soient visibles par tous\xb7tes les coop\xe9rateurs\xb7rices"}),Object(f.jsx)(Ke.a,{onClick:function(){r(!1)},color:"primary",children:"Je d\xe9cide plus tard"}),Object(f.jsx)(Ke.a,{onClick:function(){r(!1),localStorage.setItem("privacy_police_dismissed","true")},color:"primary",children:"Je n\u2019accepte pas que mes coordonn\xe9es soient visibles"})]})};var ba=Object(l.a)("div",{target:"e1i6h5gm3"})({name:"1ocx2cx",styles:"border:2px solid gray;height:500px;display:flex;align-items:center;justify-content:center"}),pa=Object(l.a)("nav",{target:"e1i6h5gm2"})("display:flex;margin-bottom:1rem;button:not(:first-of-type){margin-left:1rem;}h2{flex:1;text-transform:capitalize;}",(function(e){return e.theme.breakpoints.down("xs")}),"{h2{font-size:1.15rem;}}"),fa=Object(l.a)("div",{target:"e1i6h5gm1"})("display:flex;justify-content:end;",(function(e){return e.theme.breakpoints.down("sm")}),"{span.text{display:none;}.MuiButton-root{min-width:32px;}.MuiButton-startIcon{margin-right:-4px;}.MuiButton-endIcon{margin-left:-4px;}}"),ma=Object(l.a)("div",{target:"e1i6h5gm0"})({name:"1esf6zn",styles:"max-width:500px;margin:20px 0 100px auto;border:1px solid gray;border-radius:10px;padding:20px 10px"}),ha=function(e,t){return e.debut>t.debut?1:-1},Oa=function(){var e=N().user,t=Object(a.useState)(!1),n=Object(E.a)(t,2),r=n[0],i=n[1];Object(a.useEffect)((function(){e&&i(!e.affichageDonneesPersonnelles)}),[e]);var c=Mt(),s=c.goBack,o=c.goForward,l=c.goToday,u=c.start,d=c.end,j=c.data,b=c.error,m=c.loading;if(b)return Object(f.jsx)(w,{error:b});var h,O=null===j||void 0===j?void 0:j.creneaus.filter((function(e){return!e.horsMag})).sort(ha);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(pa,{children:[Object(f.jsx)(p.a,{variant:"h2",children:(h=u,ar(h,"MMMM yyyy"))}),Object(f.jsxs)(fa,{children:[Object(f.jsx)(Ke.a,{disabled:m,variant:"contained",color:"primary",startIcon:Object(f.jsx)(zr.a,{}),onClick:s,children:Object(f.jsx)("span",{className:"text",children:"Pr\xe9c\xe9dent"})}),Object(f.jsx)(Ke.a,{disabled:m||Object(Nr.a)(u,new Date),variant:"contained",color:"primary",startIcon:Object(f.jsx)(Hr.a,{}),onClick:l,children:Object(f.jsx)("span",{className:"text",children:"Aujourd\u2019hui"})}),Object(f.jsx)(Ke.a,{disabled:m,variant:"contained",color:"primary",endIcon:Object(f.jsx)(Gr.a,{}),onClick:o,children:Object(f.jsx)("span",{className:"text",children:"Suivant"})})]})]}),m?Object(f.jsx)(ba,{children:Object(f.jsx)(An,{})}):Object(f.jsxs)(f.Fragment,{children:[r&&Object(f.jsx)(ja,{}),Object(f.jsx)(ia,{start:u,end:d,list:O})]}),Object(f.jsx)(ma,{children:Object(f.jsx)(ua,{})}),Object(f.jsx)(da,{})]})},xa=n(349),va=n(350),ga=n(113),ya=n(348),wa=n(351),Ia=n(355),Ca=n(166),Pa=n(161);var ka=Object(l.a)("div",{target:"ej6jrjj3"})("display:flex;align-items:center;justify-content:center;flex-wrap:wrap;>*{margin-bottom:1rem;@media (min-width: 400px){flex:1;&:not(:first-of-type){margin-left:",(function(e){return e.theme.spacing(3)}),"px;}}}"),Aa=Object(l.a)(ut.a,{target:"ej6jrjj2"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),Ea=Object(l.a)(ot.a,{target:"ej6jrjj1"})({name:"1d3w5wq",styles:"width:100%"}),Sa=Object(l.a)(We.a,{target:"ej6jrjj0"})({name:"d9gf8v",styles:"margin-right:32px"}),qa={noPiaf:"Je ne pourrai pas assurer ma PIAF",noBuy:"Je ne pourrai pas assurer ma PIAF ni effectuer mes courses",other:"Autre (sp\xe9cifier en commentaire)"},Fa=function(e){var t=e.show,n=e.handleClose,r=e.user,i=nt().openDialog,c=Object(a.useState)({reason:"",comment:"",startDate:"",endDate:""}),s=Object(E.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(!1),d=Object(E.a)(u,2),j=d[0],b=d[1],p=function(e){var t=e.target,n=t.name,r=t.value;l(Object(k.a)(Object(k.a)({},o),{},Object(zt.a)({},n,r)))},m=function(){var e=Object(st.a)(ct.a.mark((function e(t){var a;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),e.next=4;break;case 4:if(o.startDate&&o.reason){e.next=7;break}return i("Tous les champs sont obligatoires."),e.abrupt("return");case 7:return b(!0),e.prev=8,a=["Nom et pr\xe9nom : ".concat(M(r)),"Mail : ".concat(r.email," "),"T\xe9l\xe9phone : ".concat(r.telephone," "),"Raison de l'absence : ".concat(qa[o.reason]),"Date d\xe9but : ".concat(cr(o.startDate))],o.comment&&a.push("Commentaire : ".concat(o.comment)),e.next=13,mt("bureau-des-membres@lachouettecoop.fr","Absence prolong\xe9e",a.join("<br />"));case 13:n(),i("Un e-mail a \xe9t\xe9 envoy\xe9 au BdM qui te recontactera si besoin. Pense bien a les recontacter lorsque tu pourras reprendre les PIAF."),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),v(e.t0);case 20:b(!1);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(Ze.a,{open:t,onClose:n,children:Object(f.jsxs)("form",{onSubmit:m,autoComplete:"off",children:[Object(f.jsx)(Aa,{onClick:n,children:Object(f.jsx)(Jn.a,{})}),Object(f.jsx)(Sa,{children:"Informer d\u2019un changement de ma situation"}),Object(f.jsxs)(Je.a,{children:[Object(f.jsx)(ka,{children:Object(f.jsx)(ot.a,{id:"startDate",label:"Date de d\xe9but",name:"startDate",type:"date",fullWidth:!0,required:!0,value:o.startDate,onChange:p,InputLabelProps:{shrink:!0}})}),Object(f.jsx)(ka,{children:Object(f.jsxs)(ga.a,{fullWidth:!0,children:[Object(f.jsx)(Ca.a,{children:"Type de changement"}),Object(f.jsx)(Pa.a,{value:o.reason,label:"Type de changement",name:"reason",required:!0,onChange:function(e){var t=e.target,n=t.name,r=t.value;l(Object(k.a)(Object(k.a)({},o),{},Object(zt.a)({},n,r)))},children:Object.keys(qa).map((function(e){return Object(f.jsx)(vn.a,{value:e,children:qa[e]},e)}))})]})}),Object(f.jsx)(ka,{children:Object(f.jsx)(Ea,{name:"comment",multiline:!0,required:"other"===o.reason,label:"Commentaire additionnel",value:o.comment,onChange:p})}),Object(f.jsx)(ka,{children:Object(f.jsxs)("span",{children:["Pour plus d\u2019informations,"," ",Object(f.jsx)("a",{href:"https://espace-membres.lachouettecoop.fr/page/les-documents",target:"_blank",rel:"noopener",children:"consultez le manuel du\u2022de la coop\xe9rateur\u2022ice"}),"."]})})]}),Object(f.jsx)(Xe.a,{children:Object(f.jsx)(Ke.a,{type:"submit",color:"primary",variant:"contained",disabled:j,children:"Confirmer au BdM"})})]})})};var Da=Object(l.a)("div",{target:"e16mrsvp2"})({name:"1bv1svr",styles:"height:50vh;display:flex;align-items:center;justify-content:center"}),Ma=Object(l.a)("div",{target:"e16mrsvp1"})({name:"71mxng",styles:"margin:0 auto;max-width:500px;p,.MuiTextField-root{margin:10px 0;}button{margin:15px auto;display:block;}"}),$a=Object(l.a)(ga.a,{target:"e16mrsvp0"})({name:"45bbqm",styles:"margin:10px 0"}),za=function(){var e=N(),t=e.user,n=e.refetchUser,r=Object(a.useState)(!1),i=Object(E.a)(r,2),c=i[0],s=i[1],o=nt().openDialog,l=Object(a.useState)(!1),u=Object(E.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!1),m=Object(E.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)({email:(null===t||void 0===t?void 0:t.email)||"",telephone:(null===t||void 0===t?void 0:t.telephone)||"",affichageDonneesPersonnelles:null===t||void 0===t?void 0:t.affichageDonneesPersonnelles}),g=Object(E.a)(x,2),y=g[0],w=g[1];Object(a.useEffect)((function(){t&&w({email:t.email,telephone:t.telephone,affichageDonneesPersonnelles:t.affichageDonneesPersonnelles})}),[t]),Object(a.useEffect)((function(){var e=function(e){h&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[h]);var I=function(e){var t=e.target,n=t.name,r=t.value;w(Object(k.a)(Object(k.a)({},y),{},Object(zt.a)({},n,r))),O(!0)},C=function(){var e=Object(st.a)(ct.a.mark((function e(r){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),s(!0),e.prev=2,e.next=5,X.mutate({mutation:F,variables:Object(k.a)(Object(k.a)({},y),{},{idUser:null===t||void 0===t?void 0:t.id})});case 5:n(),o("Tes informations ont bien \xe9t\xe9 mises \xe0 jour"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),v(e.t0);case 12:O(!1),s(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(rt.a,{when:h,message:"Les changements n'ont pas \xe9t\xe9 enregistr\xe9s, es-tu s\xfbr\xb7e de vouloir abandonner la page?"}),Object(f.jsxs)(Ma,{children:[Object(f.jsxs)("form",{onSubmit:C,children:[Object(f.jsx)(p.a,{variant:"h2",children:M(t)}),Object(f.jsx)("p",{children:bn(t.rolesChouette)}),Object(f.jsx)(ot.a,{name:"telephone",label:"T\xe9l\xe9phone",required:!0,disabled:!t,value:y.telephone,onChange:I,fullWidth:!0,InputProps:{startAdornment:Object(f.jsx)(ya.a,{position:"start",children:Object(f.jsx)(xa.a,{})})}}),Object(f.jsx)(ot.a,{name:"email",label:"Adresse e-mail",required:!0,disabled:!0,value:y.email,onChange:I,fullWidth:!0,InputProps:{startAdornment:Object(f.jsx)(ya.a,{position:"start",children:Object(f.jsx)(va.a,{})})}}),Object(f.jsxs)($a,{children:[Object(f.jsxs)("p",{children:[" ","L\u2019acc\xe8s \xe0 mes coordonn\xe9es (email et num\xe9ro de t\xe9l\xe9phone) par tous les coop\xe9rateurs\xb7rices facilite la communication entre coop\xe9rateurs\xb7rices et optimise l\u2019organisation des PIAF au magasin, par exemple en cas d\u2019indisponibilit\xe9 au dernier moment."]}),Object(f.jsx)("p",{children:"Je peux modifier ce choix \xe0 tout moment."}),Object(f.jsxs)(wa.a,{"aria-label":"displayMyContactDetails",defaultValue:"false",name:"radio-buttons-group",value:y.affichageDonneesPersonnelles?"true":"false",onChange:function(e){w(Object(k.a)(Object(k.a)({},y),{},{affichageDonneesPersonnelles:"true"==e.target.value.toLowerCase()})),O(!0)},children:[Object(f.jsx)(Fn.a,{value:"true",control:Object(f.jsx)(Ia.a,{}),label:"Je comprends et j\u2019accepte que mes coordonn\xe9es soient visibles par tous\xb7tes les coop\xe9rateurs\xb7rices"}),Object(f.jsx)(Fn.a,{value:"false",control:Object(f.jsx)(Ia.a,{}),label:"Je n\u2019accepte pas que mes coordonn\xe9es soient visibles"})]})]}),Object(f.jsx)(Ke.a,{color:"primary",variant:"contained",disabled:c,type:"submit",children:"Enregistrer"}),Object(f.jsx)(Ke.a,{color:"primary",disabled:c,onClick:function(){j(!0)},children:"Tu ne peux pas faire des PIAF pendant au moins 2 mois, c\u2019est par ici!"})]}),Object(f.jsx)(Fa,{show:d,handleClose:function(){j(!1)},user:t})]})]}):Object(f.jsx)(Da,{children:Object(f.jsx)(An,{})})},Ha=n(39);var Ga=Object(l.a)("div",{target:"e1y580i91"})({name:"1p6wbo1",styles:"height:300px;display:flex;align-items:center;justify-content:center"}),Na=Object(l.a)("div",{target:"e1y580i90"})({name:"188rsd6",styles:"margin-top:2rem;@media (min-width: 980px){display:flex;>div{flex:1 0 14.29%;}}"}),Ua=function(){var e=N().user,t=Object(a.useState)(!1),n=Object(E.a)(t,2),r=n[0],i=n[1],c=nt().openDialog,s=Object(a.useState)(""),l=Object(E.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)([]),b=Object(E.a)(j,2),m=b[0],h=b[1],O=Object(a.useState)(!1),x=Object(E.a)(O,2),g=x[0],y=x[1],I=Object(o.useQuery)(Ne),C=I.data,P=I.loading,k=I.error,A=Object(o.useQuery)(Ge,{skip:!e,variables:{idUser:null===e||void 0===e?void 0:e.id}}),S=A.data,q=A.loading,F=A.error,D=P||q;Object(a.useEffect)((function(){S&&(null===S||void 0===S?void 0:S.reserves.length)>0&&(d(S.reserves[0].informations),h(S.reserves[0].creneauGeneriques.map((function(e){return e.id}))))}),[S]),Object(a.useEffect)((function(){var e=function(e){g&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[g]);var M=k||F;if(M)return Object(f.jsx)(w,{error:M});var $=[];if(C)for(var z=function(e){null===C||void 0===C||C.creneauGeneriques.filter((function(t){var n=t.jour,r=t.actif;return n===e&&r})).forEach((function(t){var n=$.find((function(t){return t.day===e})),r=new Date(t.heureDebut).getTime();if(n){var a=n.slots.find((function(e){return e.time===r}));a?a.allSlotIds.push(t.id):n.slots.push({time:r,slotDisplayed:t,allSlotIds:[t.id]})}else $.push({day:e,slots:[{time:r,slotDisplayed:t,allSlotIds:[t.id]}]})}))},H=0;H<7;H++)z(H);var G=function(e){var t=[];return $.forEach((function(n){var r=n.slots.find((function(t){return t.slotDisplayed.id===e}));r&&(t=r.allSlotIds)})),t},U=function(){var t=Object(st.a)(ct.a.mark((function t(){var n,r;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),n={user:null===e||void 0===e?void 0:e.id,informations:u,creneauGenerique:m},(null===S||void 0===S?void 0:S.reserves.length)&&(n.id=S.reserves[0].id),t.prev=3,t.next=6,X.mutate({mutation:n.id?He:ze,variables:n});case 6:y(!1),r=n.id?"Ton inscription \xe0 la r\xe9serve a bien \xe9t\xe9 mise \xe0 jour":"Tu es d\xe9sormais inscrit\xb7e \xe0 la reserve",c(r+". Merci !"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),v(t.t0);case 14:i(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(rt.a,{when:g,message:"Les changements n'ont pas \xe9t\xe9 enregistr\xe9s, es-tu s\xfbr\xb7e de vouloir abandonner la page?"}),Object(f.jsx)(p.a,{variant:"h2",children:"R\xe9serve"}),D?Object(f.jsx)(Ga,{children:Object(f.jsx)(An,{})}):Object(f.jsxs)(f.Fragment,{children:["Jours pour lesquels je peux parfois me rendre disponible. Si un cr\xe9neau est libre moins de 48h avant, un e-mail sera envoy\xe9 \xe0 tou\xb7te\xb7s les inscrit\xb7te\xb7s.",Object(f.jsx)(Na,{children:$.map((function(e){return Object(f.jsxs)(qn.a,{children:[(t=e.day,lr[t]),e.slots.sort((function(e,t){return e.time>t.time?1:-1})).map((function(e){var t=e.slotDisplayed;return Object(f.jsx)(Fn.a,{control:Object(f.jsx)(Dn.a,{color:"default",checked:m.includes(t.id),onChange:function(e){var n=e.target;!function(e,t){var n=m.slice();t?(n.push.apply(n,Object(Ha.a)(G(e))),h(n)):(G(e).forEach((function(e){n.splice(n.indexOf(e),1)})),h(n)),y(!0)}(t.id,n.checked)}}),label:"".concat(sr(t.heureDebut)," - ").concat(sr(t.heureFin))},t.id)}))]},e.day);var t}))}),Object(f.jsx)(Ke.a,{disabled:r,color:"primary",variant:"contained",onClick:U,children:"Enregistrer"})]})]})};var La=Object(l.a)(En.a,{target:"e3772390"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Ba=function(e){var t=e.open,n=e.handleClose,r=e.data;return r?Object(f.jsxs)(Ze.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(We.a,{id:"alert-dialog-title",children:M(r)}),Object(f.jsx)(Je.a,{children:Object(f.jsx)(Qe.a,{id:"alert-dialog-description",children:Object(f.jsxs)(En.a,{container:!0,children:[Object(f.jsx)(En.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Roles"})}),Object(f.jsx)(La,{item:!0,xs:6,children:bn(r.rolesChouette)}),Object(f.jsx)(En.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Statut"})}),Object(f.jsx)(La,{item:!0,xs:6,children:r.statut}),Object(f.jsx)(En.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Compteur PIAF"})}),Object(f.jsxs)(La,{item:!0,xs:6,children:[r.nbPiafEffectuees,"/",r.nbPiafAttendues]}),Object(f.jsx)(En.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Absence longue dur\xe9e sans courses"})}),Object(f.jsx)(La,{item:!0,xs:6,children:r.absenceLongueDureeSansCourses?"oui":"non"}),Object(f.jsx)(En.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Absence longue dur\xe9e avec courses"})}),Object(f.jsx)(La,{item:!0,xs:6,children:r.absenceLongueDureeCourses?"oui":"non"}),Object(f.jsx)(En.a,{item:!0,xs:12,children:Object(f.jsx)(Cr,{userId:r.id,validated:!1,allowValidate:!0})})]})})}),Object(f.jsx)(Xe.a,{children:Object(f.jsx)(Ke.a,{onClick:n,color:"primary",variant:"contained",children:"Fermer"})})]}):null};var Ta=Object(l.a)(ee.a,{target:"ez4p05b0"})({name:"am2b86",styles:"margin-top:16px;height:calc(100vh - 150px);.MuiDataGrid-row{cursor:pointer;}"}),Va=function(e){return e.value?"oui":"non"},Ra=[{field:"nom",headerName:"Nom",flex:1},{field:"prenom",headerName:"Prenom",flex:1},{field:"statut",headerName:"Statut",flex:1},{field:"rolesChouette",headerName:"Roles",flex:2,valueFormatter:function(e){var t=e.value;return bn(t)}},{field:"absenceLongueDureeCourses",headerName:"Absence avec courses",flex:1,valueFormatter:Va},{field:"absenceLongueDureeSansCourses",headerName:"Absence sans courses",flex:1,valueFormatter:Va}],_a=function(){var e=Object(o.useQuery)(D),t=e.data,n=e.loading,r=e.error,i=Object(a.useState)(),c=Object(E.a)(i,2),s=c[0],l=c[1],u=Object(a.useState)(!1),d=Object(E.a)(u,2),j=d[0],b=d[1];if(n)return Object(f.jsx)(An,{});if(r)return Object(f.jsx)(C,{error:r});if(!t)return null;var p=t.users.slice().sort((function(e,t){return e.nom>t.nom?1:-1}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Ta,{rows:p,columns:Ra,onRowClick:function(e){var t=e.row;l(t),b(!0)},autoPageSize:!0}),Object(f.jsx)(Ba,{open:j,handleClose:function(){b(!1)},data:s})]})},Za=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Groupe MAG"}),Object(f.jsx)(_a,{})]})},Wa=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Groupe BdM"}),Object(f.jsx)(_a,{})]})},Ja=function(e){var t=e.userId,n=e.after,r=e.before,a=Object(o.useQuery)(Se,{variables:{before:r,after:n,statut:"occupe",userId:t}}),i=a.loading,c=a.error,s=a.data;if(i)return Object(f.jsx)(An,{});if(c)return Object(f.jsx)(C,{error:c});if(!s)return null;if(!s.piafs.length)return Object(f.jsx)("p",{children:"Tu n\u2019as pas encore fait des PIAF. Inscris-toi sur le planning !"});var l=s.piafs.filter((function(e){return 1==e.pourvu})).sort(Un);return Object(f.jsx)(Wt.a,{children:l.map((function(e){return Object(f.jsx)(Ir,{piaf:e},e.id)}))})},Qa=Object(l.a)(ot.a,{target:"egv0o8y0"})("margin:",(function(e){return e.theme.spacing(1)}),"px;"),Xa=new Date(Date.now()),Ka=function(){var e=N().auth,t=Object(a.useState)(Object(Et.a)(Xa,-3)),n=Object(E.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(Xa),s=Object(E.a)(c,2),o=s[0],l=s[1],u=function(e){e.target.valueAsDate&&("dateIni"===e.target.id?i(e.target.valueAsDate):"dateFin"===e.target.id&&l(e.target.valueAsDate))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Historique des PIAF"}),Object(f.jsx)(Qa,{id:"dateIni",label:"Depuis",type:"date",defaultValue:ur(r),InputLabelProps:{shrink:!0},onChange:u}),Object(f.jsx)(Qa,{id:"dateFin",label:"Jusqu\u2019au",type:"date",defaultValue:ur(o),InputLabelProps:{shrink:!0},onChange:u}),Object(f.jsx)(Ja,{userId:"api/users/".concat(e.id),after:ur(r),before:ur(o)})]})},Ya=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Politique de traitement des donn\xe9es personnelles"}),Object(f.jsx)("p",{children:"Les informations recueillies sur ces formulaires sont enregistr\xe9es dans un fichier informatis\xe9 par La Chouette Coop SAS, pour permettre la gestion du planning de participation des coop\xe9rateurs\xb7rices au fonctionnement de la coop\xe9rative. La base l\xe9gale du traitement est le contrat par lequel les coop\xe9rateurs\xb7rices s\u2019engagent \xe0 effectuer 3 heures de participation toutes les 4 semaines \xe0 la coop\xe9rative."}),Object(f.jsx)("p",{children:"Les donn\xe9es sont communiqu\xe9es aux seuls coop\xe9rateurs\xb7rices de La Chouette Coop. Elles sont conserv\xe9es pendant la dur\xe9e du mandat de coop\xe9rateur\xb7rice et en cas de d\xe9mission pendant 5 ans maximum."}),Object(f.jsx)("p",{children:"Les donn\xe9es sont h\xe9berg\xe9es en France par OVH."}),Object(f.jsxs)("p",{children:["Vous pouvez acc\xe9der aux donn\xe9es vous concernant, les rectifier, demander leur effacement ou exercer votre droit \xe0 la limitation du traitement de vos donn\xe9es. Pour exercer ces droits ou pour toute question sur le traitement de vos donn\xe9es dans ce dispositif, vous pouvez contacter\xa0:"," ",Object(f.jsx)("a",{href:"mailto:bureau-des-membres@lachouettecoop.fr",children:"bureau-des-membres@lachouettecoop.fr"})]}),Object(f.jsx)("p",{children:"Si vous estimez, apr\xe8s nous avoir contact\xe9s, que vos droits \xab\xa0Informatique et Libert\xe9s\xa0\xbb ne sont pas respect\xe9s, vous pouvez adresser une r\xe9clamation \xe0 la CNIL."})]})},ei=Object(l.a)("div",{target:"e1pd3b3q0"})("margin:",(function(e){return e.theme.spacing(3)}),"px;",(function(e){return e.theme.breakpoints.down("xs")}),"{margin-bottom:",(function(e){return e.theme.spacing(12)}),"px;}",(function(e){return e.theme.breakpoints.up("sm")}),"{margin-left:",(function(e){return e.theme.spacing(12)}),"px;}"),ti=function(){var e=function(e){var t={};return e.substr(1).split("&").forEach((function(e){if(e){var n=e.split("=");2===n.length&&(t[n[0]]=decodeURIComponent(n[1]))}})),t}(Object(rt.h)().search).next;return Object(f.jsxs)(Dt,{children:[Object(f.jsx)(On,{}),Object(f.jsxs)(ei,{children:[Object(f.jsxs)(rt.e,{children:[Object(f.jsx)(rt.c,{path:"/home",component:$r}),Object(f.jsx)(rt.c,{path:"/planning",component:Oa}),Object(f.jsx)(rt.c,{path:"/profile",component:za}),Object(f.jsx)(rt.c,{path:"/reserve",component:Ua}),Object(f.jsx)(rt.c,{path:"/bdm",component:Wa}),Object(f.jsx)(rt.c,{path:"/magasin",component:Za}),Object(f.jsx)(rt.c,{path:"/legal",component:Ya}),Object(f.jsx)(rt.c,{path:"/history",component:Ka}),Object(f.jsx)(rt.b,{to:e||"/home"})]}),Object(f.jsx)(Cn,{})]})]})},ni=function(){var e=N().auth;return Object(f.jsx)(_e.a,{children:Object(f.jsx)(tt,{children:e?Object(f.jsx)(ti,{}):Object(f.jsx)(Ct,{})})})};s.a.render(Object(f.jsx)(P,{children:Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(Ae,{children:Object(f.jsx)(o.ApolloProvider,{client:X,children:Object(f.jsx)(G,{children:Object(f.jsx)(Te,{children:Object(f.jsx)(ni,{})})})})})})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.9b55a885.chunk.js.map