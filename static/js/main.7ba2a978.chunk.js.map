{"version":3,"sources":["helpers/errors.tsx","graphql/queriesUser.ts","providers/user.tsx","helpers/apollo.ts","providers/theme.tsx","graphql/queries.ts","providers/roles.tsx","images/logo_white.svg","helpers/request.ts","pages/anonymous/Login.tsx","pages/anonymous/index.tsx","providers/datePlanning.tsx","components/Loader.tsx","types/model.ts","helpers/piaf.ts","providers/dialog.tsx","images/icons/index.ts","images/icons/ca.svg","images/icons/caa.svg","images/icons/caf.svg","images/icons/ch.svg","images/icons/gh.svg","images/icons/gha.svg","images/icons/ghf.svg","images/icons/piaf.svg","images/icons/formation.svg","images/icons/acc.svg","components/PiafCircle.tsx","components/Dialog.tsx","helpers/role.tsx","components/PiafRow.tsx","helpers/date.ts","components/SlotDialog.tsx","components/Piaf.tsx","components/UserPiafs.tsx","components/ReplacementPiafs.tsx","pages/authenticated/Home.tsx","components/Slot.tsx","components/CalendarDay.tsx","components/Calendar.tsx","components/IconsCaption.tsx","pages/authenticated/Planning.tsx","components/LongAbsence.tsx","pages/authenticated/Profile.tsx","pages/authenticated/Reserve.tsx","components/UserInfoDialog.tsx","components/Users.tsx","pages/authenticated/Magasin.tsx","pages/authenticated/BdM.tsx","components/Link.tsx","components/menu.tsx","components/menuBottom.tsx","pages/authenticated/index.tsx","App.tsx","index.tsx"],"names":["apiKey","process","Bugsnag","start","releaseStage","enabledReleaseStages","appVersion","metadata","deployDate","Date","toString","deployAuthor","plugins","BugsnagPluginReact","handleError","error","console","alert","message","notify","Boundary","getPlugin","createErrorBoundary","React","Container","ErrorBlock","Typography","variant","aria-hidden","String","Text","ErrorMessage","ErrorBoundary","children","FallbackComponent","LOGGED_IN_USER","gql","USER_UPDATE","USERS","UserContext","createContext","STORAGE_KEY","getStoredUser","stored","localStorage","getItem","JSON","parse","UserProvider","useState","auth","setAuth","user","setUser","useEffect","apollo","query","variables","id","then","data","Provider","value","login","setItem","stringify","logout","removeItem","useUser","useContext","API_URL","TEST","includes","link","createHttpLink","uri","authLink","setContext","_","previous","headers","token","client","ApolloClient","concat","cache","InMemoryCache","TITLE_FONT","TEXT_FONT","MAIN_COLOR","SECONDARY_COLOR","grey","THEME","createMuiTheme","typography","fontFamily","body1","fontSize","body2","subtitle1","subtitle2","h1","fontWeight","h2","h3","color","h4","h5","h6","palette","primary","main","secondary","contrastThreshold","tonalOffset","coreLocale","dataGridLocale","ThemeProvider","theme","CssBaseline","SLOTS","PIAFS","PIAFS_COUNT","PLANNING","REGISTRATION_UPDATE","VALIDATE_PIAF","RESERVE_CREATE","RESERVE_UPDATE","RESERVE_USER","CRENEAUX_GENERIQUES","PIAF_CREATE","ROLES","RolesContext","RolesProvider","roles","useQuery","_path","_g","post","path","body","a","fetch","method","response","ok","HttpError","status","statusText","json","sendEmail","recipient","subject","Error","FormData","append","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogoWhite","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","ref","d","fill","transform","ForwardRef","Header","LoginPage","loading","setLoading","handleSubmit","event","preventDefault","currentTarget","userId","email","get","maxWidth","onSubmit","TextField","type","name","label","fullWidth","margin","Button","size","disabled","Anonymous","pathname","useLocation","Login","to","DatePlanningContext","getInitialStart","startOfMonth","getInitialEnd","endOfMonth","DatePlanningProvider","setStart","end","setEnd","after","before","refetch","goBack","date","subMonths","goForward","addMonths","goToday","useDatePlanning","RoleId","Loader","CircularProgress","TypeDialog","getPiafRole","role","piaffeur","roleUniqueId","GrandHibou","nbPiafGH","GrandHibou_Formation","Caissier","nbPiafCaisse","Caissier_Formation","isTaken","piaf","statut","Boolean","orderPiafsByDate","left","right","creneau","debut","ICONS","CA","CAA","CAF","CH","GH","GHA","GHF","P","F","A","PiafIcon","img","getImg","$role","$taken","PiafCircle","Dialog","open","handleClose","callback","handleConfirm","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","onClick","DialogContext","DialogProvider","setOpen","setTitle","setMessage","setCallback","closeDialog","openDialog","newMessage","newTitle","newCallback","useDialog","getTrainerRoleId","Caissier_Acc","GrandHibou_Acc","hasRole","find","needsTraining","roleId","formatRoles","map","libelle","join","Row","Status","Contact","InfoPiaf","getPiafCount","slot","startOfDay","startOfWeek","endOfDay","endOfWeek","piafs","filter","p","checkMaximumNumberOfNewChouettos","nbPiafEffectuees","piafeursCount","infoCreneau","piaffeursCount","maxPiafeursFirstPiaf","Math","floor","piaffeursCountFirstPiaf","getRegistrationPiafId","replacementPiaf","PiafRow","info","setInfo","currentUserIsInSlot","rolesBD","register","userRoles","rolesChouette","piafId","mutate","mutation","informations","registerOK","addTrainerPiaf","idRoleTrainer","roleTrainer","r","idCreneau","idRole","unregister","taken","roleUser","prenom","nom","href","telephone","isPast","multiline","onChange","formatInFrench","pattern","format","locale","fr","formatDateLong","formatTime","WEEKDAYS","queryDate","CloseButton","IconButton","Title","SlotDialog","show","Close","disableTypography","capitalize","information","Piaf","allowValidate","useLazyQuery","load","handleValidate","validate","titre","fin","Grid","container","item","xs","ListItem","button","ListItemAvatar","ListItemText","FormControlLabel","control","Checkbox","checked","pourvu","UserPiafs","validated","skip","sort","List","ReplacementPiafs","startOfToday","otherPiafs","matches","match","Number","getId","MyPlanning","Replacements","HomePage","counter","nbPiafAttendues","SELECTED_COLOR","ClickableSlot","$open","Slot","WEEK_COLORS","1","2","3","4","$when","CalendarDay","day","weekNumber","isMonday","getDay","isToday","slots","DayPlaceholder","WeekRow","Calendar","list","useTheme","useMediaQuery","breakpoints","down","weeks","eachWeekOfInterval","weekStartsOn","days","addDays","forEach","node","weekIndex","differenceInWeeks","week","piafeursCountFirstPiaf","tempPiaf","slice","push","creneauGenerique","frequence","index","Caption","IconsCaption","component","Chouettos","PIAF","Formation","Acc","CaptionDialog","Loading","Nav","ButtonArea","BottomCaption","PlanningPage","up","textTodayButton","textBeforeButton","textAfterButton","startIcon","ArrowBackIos","isSameMonth","CalendarToday","endIcon","ArrowForwardIos","creneaus","TextInput","LongAbsence","reasonAbsence","dateIni","dateFin","values","setValues","handleInputChange","handleSendEmail","REACT_APP_MAIL_BDM","autoComplete","required","InputLabelProps","shrink","ProfilePage","saving","setSaving","openAbsenceDialog","setOpenAbsenceDialog","handleSave","idUser","InputProps","startAdornment","InputAdornment","position","Phone","Mail","ReserveGrid","Infos","ReservePage","setInformation","setSlots","dataCreneauxList","loadingCL","errorCreneauxList","dataCreneauxUser","loadingCU","errorReserve","reserves","creneauGeneriques","cg","queryError","slotList","jour","actif","reserveFound","s","startTime","heureDebut","getTime","slotReserveFound","time","allSlotIds","slotDisplayed","getSlots","idCreneauGenerique","selected","displayed","reserve","FormGroup","temp","splice","handleCheckboxChange","heureFin","RightCol","UserInfoDialog","toUpperCase","absenceLongueDureeSansCourses","absenceLongueDureeCourses","StyledGrid","DataGrid","booleanFormatter","COLUMNS","field","headerName","flex","valueFormatter","Users","selectedRow","setSelectedRow","setOpenDialog","rows","users","columns","onRowClick","row","autoPageSize","MagasinPage","BdMPage","UniversalLink","startsWith","DRAWER_WIDTH","Spacer","styled","Box","flexGrow","useStyles","makeStyles","createStyles","root","display","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","toolbar","alignItems","justifyContent","padding","mixins","content","menuItem","textDecoration","activeItem","ITEMS","Icon","HomeIcon","EventIcon","GroupIcon","PersonIcon","StorefrontIcon","AdminMag","CardMembershipIcon","AdminBdM","ArrowBackIcon","Menu","classes","className","AppBar","clsx","Toolbar","aria-label","edge","noWrap","Chip","Drawer","paper","direction","ChevronRight","ChevronLeft","Divider","ListItemIcon","Person","active","Link","top","bottom","flexDirection","menu","paddingTop","paddingBottom","textMenuDecoration","backgroundColor","icon","activeIcon","MAIN_ITEMS","EXTRA_ITEMS","BottomAppBar","anchorEl","setAnchorEl","keepMounted","MenuItem","aria-controls","aria-haspopup","Content","marginTop","marginBottom","paddingLeft","Authenticated","next","search","params","substr","split","part","tuple","decodeURIComponent","getParams","Home","Planning","Profile","Reserve","BdM","Magasin","App","window","confirm","location","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7ba2a978.chunk.js","sourcesContent":["import React, { ErrorInfo, FC } from \"react\"\nimport Bugsnag from \"@bugsnag/js\"\nimport BugsnagPluginReact from \"@bugsnag/plugin-react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nconst apiKey = process.env.REACT_APP_BUGSNAG_KEY\n\nif (apiKey) {\n  Bugsnag.start({\n    apiKey,\n    releaseStage: process.env.NODE_ENV,\n    enabledReleaseStages: [\"production\"],\n    appVersion: process.env.REACT_APP_COMMIT,\n    metadata: {\n      deployDate: new Date().toString(),\n      deployAuthor: process.env.REACT_APP_AUTHOR,\n    },\n    plugins: [new BugsnagPluginReact()],\n  })\n}\n\n// TODO: show nicer message\nexport const handleError = (error: Error) => {\n  console.error(error)\n  alert(error.message)\n  if (apiKey) {\n    Bugsnag.notify(error)\n  }\n}\n\nconst Boundary = apiKey ? Bugsnag.getPlugin(\"react\")?.createErrorBoundary(React) : null\n\nconst Container = styled.div`\n  padding: 1rem;\n  h2 {\n    color: #e53935;\n    margin: 1rem 0;\n  }\n  code {\n    display: block;\n    margin-top: 3rem;\n    color: #aaa;\n  }\n`\n\n// https://github.com/bugsnag/bugsnag-js/blob/next/packages/plugin-react/types/bugsnag-plugin-react.d.ts\ninterface FallbackProps {\n  error: Error\n  info?: ErrorInfo\n  clearError?: () => void\n}\n\nexport const ErrorBlock = ({ error }: FallbackProps) => (\n  <Container>\n    <Typography variant=\"h2\">\n      <span aria-hidden>üêû</span>\n      <br />\n      Une erreur est survenue\n    </Typography>\n    <Typography>Essayez de recharger la page</Typography>\n    <code>{String(error)}</code>\n  </Container>\n)\n\nconst Text = styled.p`\n  color: #e53935;\n`\n\ninterface MessageProps {\n  error: Error\n}\n\nexport const ErrorMessage = ({ error }: MessageProps) => <Text>Erreur : {error.message}</Text>\n\nexport const ErrorBoundary: FC = ({ children }) =>\n  Boundary ? <Boundary FallbackComponent={ErrorBlock}>{children}</Boundary> : <>{children}</>\n","import { gql } from \"@apollo/client\"\n\nexport const LOGGED_IN_USER = gql`\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n    }\n  }\n`\nexport const USER_UPDATE = gql`\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String) {\n    updateUser(input: { id: $idUser, email: $email, telephone: $telephone }) {\n      user {\n        id\n        email\n        telephone\n      }\n    }\n  }\n`\n\nexport const USERS = gql`\n  query USERS {\n    users(enabled: true) {\n      id\n      nom\n      prenom\n      email\n      actif\n      rolesChouette {\n        id\n        libelle\n        roleUniqueId\n      }\n      statut\n      reserve {\n        id\n        informations\n        creneauGeneriques {\n          id\n          heureDebut\n          heureFin\n          jour\n        }\n      }\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n    }\n  }\n`\n","import type { User } from \"src/types/model\"\n\nimport { createContext, useContext, useState, FC, useEffect } from \"react\"\n\nimport { LOGGED_IN_USER } from \"src/graphql/queriesUser\"\nimport apollo from \"src/helpers/apollo\"\n\nexport interface Auth {\n  email: string\n  token: string\n  id: number\n}\n\nexport interface IUserContext<IsAuthenticated extends boolean = false> {\n  auth: IsAuthenticated extends true ? Auth : Auth | null\n  user: User | null\n  login: (auth: Auth) => void\n  logout: () => void\n}\n\nconst UserContext = createContext<IUserContext>({} as IUserContext)\n\nconst STORAGE_KEY = \"user\"\n\nexport const getStoredUser = () => {\n  const stored = localStorage.getItem(STORAGE_KEY)\n  if (!stored) {\n    return null\n  }\n  return JSON.parse(stored) as Auth\n}\n\nexport const UserProvider: FC = ({ children }) => {\n  const [auth, setAuth] = useState<Auth | null>(getStoredUser)\n  const [user, setUser] = useState<User | null>(null)\n\n  useEffect(() => {\n    if (auth) {\n      apollo\n        .query<{ user: User }>({\n          query: LOGGED_IN_USER,\n          variables: { id: `api/users/${auth.id}` },\n        })\n        .then(({ data }) => {\n          setUser(data.user)\n        })\n    }\n  }, [auth])\n\n  const login = (data: Auth) => {\n    setAuth(data)\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data))\n  }\n\n  const logout = () => {\n    setAuth(null)\n    localStorage.removeItem(STORAGE_KEY)\n  }\n\n  return <UserContext.Provider value={{ auth, user, login, logout }}>{children}</UserContext.Provider>\n}\n\nexport function useUser<IsAuthenticated extends boolean = false>() {\n  return useContext(UserContext) as IUserContext<IsAuthenticated>\n}\n","import { ApolloClient, createHttpLink, InMemoryCache } from \"@apollo/client\"\nimport { setContext } from \"@apollo/client/link/context\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nconst API_URL = process.env.REACT_APP_API\n\nif (!API_URL) {\n  throw new Error(\"You must compile the app with a REACT_APP_API environment variable - see example.env\")\n}\n\nexport const TEST = API_URL.includes(\"test\")\n\nconst link = createHttpLink({\n  uri: `${API_URL}/api/graphql`,\n})\n\nconst authLink = setContext((_, previous) => {\n  const user = getStoredUser()\n  if (!user) {\n    return previous\n  }\n  return {\n    ...previous,\n    headers: {\n      ...previous.headers,\n      \"X-Auth-Token\": user.token,\n    },\n  }\n})\n\nconst client = new ApolloClient({\n  link: authLink.concat(link),\n  cache: new InMemoryCache(),\n})\n\nexport default client\n\nexport const getId = (id?: string | number) => {\n  if (typeof id === \"number\") {\n    return id\n  }\n  if (typeof id === \"string\") {\n    const matches = id.match(/api\\/\\w+\\/(\\d+)/)\n    if (matches) {\n      return Number(matches[1])\n    }\n  }\n  return null\n}\n","import type { FC } from \"react\"\n\nimport { createMuiTheme, ThemeProvider as MUIThemeProvider, Theme as MUITheme } from \"@material-ui/core/styles\"\nimport { frFR as dataGridLocale } from \"@material-ui/data-grid\"\nimport { CssBaseline } from \"@material-ui/core\"\nimport { ThemeProvider as EmotionThemeProvider } from \"@emotion/react/macro\"\nimport { frFR as coreLocale } from \"@material-ui/core/locale\"\nimport { grey } from \"@material-ui/core/colors\"\n\n// see public/index.html\nconst TITLE_FONT = \"Montserrat, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=titres-et-sous-titres\nconst TEXT_FONT = \"Cabin, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=texte\n\nconst MAIN_COLOR = \"#3A5447\" // https://style.lachouettecoop.fr/#/couleurs\nconst SECONDARY_COLOR = grey[500]\n\ndeclare module \"@emotion/react\" {\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  export interface Theme extends MUITheme {}\n}\n\nconst THEME = createMuiTheme(\n  {\n    typography: {\n      fontFamily: TEXT_FONT,\n      body1: {\n        fontFamily: TEXT_FONT,\n        fontSize: \"1rem\",\n      },\n      body2: {\n        fontFamily: TEXT_FONT,\n        fontSize: \"1rem\",\n      },\n      subtitle1: {\n        fontFamily: TITLE_FONT,\n      },\n      subtitle2: {\n        fontFamily: TITLE_FONT,\n      },\n      h1: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        fontSize: \"2.5rem\",\n      },\n      h2: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        fontSize: \"1.5rem\",\n      },\n      h3: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        color: MAIN_COLOR,\n      },\n      h4: {\n        fontFamily: TITLE_FONT,\n      },\n      h5: {\n        fontFamily: TITLE_FONT,\n      },\n      h6: {\n        fontFamily: TITLE_FONT,\n      },\n    },\n    palette: {\n      primary: {\n        // light: will be calculated from palette.primary.main,\n        main: MAIN_COLOR,\n        // dark: will be calculated from palette.primary.main,\n        // contrastText: will be calculated to contrast with palette.primary.main\n      },\n      secondary: {\n        main: SECONDARY_COLOR,\n      },\n      // Used by `getContrastText()` to maximize the contrast between\n      // the background and the text.\n      contrastThreshold: 3,\n      // Used by the functions below to shift a color's luminance by approximately\n      // two indexes within its tonal palette.\n      // E.g., shift from Red 500 to Red 300 or Red 700.\n      tonalOffset: 0.2,\n    },\n  },\n  coreLocale,\n  dataGridLocale\n)\n\nconst ThemeProvider: FC = ({ children }) => (\n  <EmotionThemeProvider theme={THEME}>\n    <MUIThemeProvider theme={THEME}>\n      <CssBaseline />\n      {children}\n    </MUIThemeProvider>\n  </EmotionThemeProvider>\n)\n\nexport default ThemeProvider\n","import { gql } from \"@apollo/client\"\n\nexport const SLOTS = gql`\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      informations\n      debut\n      fin\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n`\n\nexport const PIAFS = gql`\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String, $validated: Boolean) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut, pourvu: $validated) {\n      id\n      statut\n      pourvu\n      informations\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        nom\n        prenom\n        email\n        telephone\n        nbPiafGH\n        nbPiafCaisse\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n`\n\nexport const PIAFS_COUNT = gql`\n  query PIAFS_COUNT($userId: String, $after: String, $before: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }) {\n      id\n      statut\n      creneau {\n        debut\n        fin\n      }\n    }\n  }\n`\n\nexport const PLANNING = gql`\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      informations\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n`\n\nexport const REGISTRATION_UPDATE = gql`\n  mutation REGISTRATION_UPDATE($piafId: ID!, $userId: String!, $statut: String!, $informations: String) {\n    updatePiaf(input: { id: $piafId, piaffeur: $userId, statut: $statut, informations: $informations }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n        informations\n      }\n    }\n  }\n`\nexport const VALIDATE_PIAF = gql`\n  mutation VALIDATE_PIAF($piafId: ID!, $validate: Boolean) {\n    updatePiaf(input: { id: $piafId, pourvu: $validate }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n      }\n    }\n  }\n`\n\nexport const RESERVE_CREATE = gql`\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_UPDATE = gql`\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_USER = gql`\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n`\n\nexport const CRENEAUX_GENERIQUES = gql`\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n`\n\nexport const PIAF_CREATE = gql`\n  mutation PIAF_CREATE($idCreneau: String!, $idRole: String) {\n    createPiaf(input: { creneau: $idCreneau, role: $idRole, visible: true, pourvu: false }) {\n      piaf {\n        id\n        creneau {\n          id\n        }\n        piaffeur {\n          id\n        }\n        role {\n          id\n        }\n      }\n    }\n  }\n`\n\nexport const ROLES = gql`\n  query ROLES {\n    roles {\n      id\n      libelle\n      roleUniqueId\n    }\n  }\n`\n","import type { Role } from \"src/types/model\"\n\nimport { createContext, useContext, FC } from \"react\"\n\nimport { ROLES } from \"src/graphql/queries\"\nimport { useQuery } from \"@apollo/client\"\n\nexport interface IRolesContext {\n  roles: Role[]\n}\ntype Result = { roles: Role[] }\n\nconst RolesContext = createContext<IRolesContext>({} as IRolesContext)\n\nexport const RolesProvider: FC = ({ children }) => {\n  let roles: Role[] = []\n\n  const { data } = useQuery<Result>(ROLES)\n\n  if (data) {\n    roles = data.roles\n  }\n\n  return <RolesContext.Provider value={{ roles }}>{children}</RolesContext.Provider>\n}\n\nexport function useRoles() {\n  return (useContext(RolesContext) as IRolesContext).roles\n}\n","var _path, _g;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoWhite(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 756,\n    height: 756,\n    viewBox: \"0 0 756 756\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z\",\n    fill: \"#314b3f\"\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1.33333 0 0 -1.33333 0 756)\",\n    fill: \"#314b3f\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoWhite);\nexport default __webpack_public_path__ + \"static/media/logo_white.6e9fcd91.svg\";\nexport { ForwardRef as ReactComponent };","import HttpError from \"standard-http-error\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nexport const post = async (path: string, body: BodyInit, headers?: HeadersInit) => {\n  const response = await fetch(`${process.env.REACT_APP_API}/${path}`, {\n    method: \"POST\",\n    body,\n    headers,\n  })\n  if (!response.ok) {\n    throw new HttpError(response.status, response.statusText)\n  }\n  return response.json()\n}\n\nexport const getParams = (search: string) => {\n  const params: Record<string, string> = {}\n  search\n    .substr(1)\n    .split(\"&\")\n    .forEach((part) => {\n      if (part) {\n        const tuple = part.split(\"=\")\n        if (tuple.length === 2) {\n          params[tuple[0]] = decodeURIComponent(tuple[1])\n        }\n      }\n    })\n  return params\n}\n\n// TODO: use email templates and just pass a template ID with variables\nexport const sendEmail = async (recipient: string, subject: string, message: string) => {\n  const user = getStoredUser()\n\n  if (!user) {\n    throw new Error(\"You must be authenticated to trigger the sending of an email\")\n  }\n\n  const headers = {\n    \"X-Auth-Token\": user.token,\n  }\n\n  const data = new FormData()\n  data.append(\"sujet\", subject)\n  data.append(\"email\", recipient)\n  data.append(\"corps\", message)\n\n  return await post(\"dist_api/send_email\", data, headers)\n}\n","import { FormEvent, useState } from \"react\"\nimport { Container, TextField, Button, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { useUser, Auth } from \"src/providers/user\"\nimport { post } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\n\nimport { ReactComponent as Logo } from \"src/images/logo_white.svg\"\n\nconst Header = styled.div`\n  text-align: center;\n  svg {\n    width: 250px;\n    height: 250px;\n    margin: -20px 0;\n  }\n`\n\nconst LoginPage = () => {\n  const [loading, setLoading] = useState(false)\n  const { login } = useUser()\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const body = new FormData(event.currentTarget)\n    setLoading(true)\n    try {\n      const data = await post(\"login_api\", body)\n      const auth: Auth = {\n        id: data.userId,\n        email: body.get(\"username\") as string,\n        token: data.token,\n      }\n      login(auth)\n    } catch (error) {\n      handleError(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <Header>\n        <Logo />\n        <Typography variant=\"h1\">Planning</Typography>\n      </Header>\n      <form onSubmit={handleSubmit}>\n        <p>\n          Cette application permet de g√©rer le planning des PIAFs du magasin. Connectez-vous avec vos identifiants\n          habituels.\n        </p>\n        <TextField type=\"email\" name=\"username\" label=\"E-mail\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <TextField type=\"password\" name=\"password\" label=\"Mot de passe\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <Button type=\"submit\" fullWidth size=\"large\" variant=\"contained\" color=\"primary\" disabled={loading}>\n          Connexion\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default LoginPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Container } from \"@material-ui/core\"\n\nimport LoginPage from \"src/pages/anonymous/Login\"\n\nconst Anonymous = () => {\n  const { pathname } = useLocation()\n\n  return (\n    <Container>\n      <Switch>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Redirect to={`/login?next=${pathname}`} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Anonymous\n","import { createContext, useContext, useState, FC } from \"react\"\nimport { startOfMonth, endOfMonth, subMonths, addMonths } from \"date-fns\"\nimport { ApolloError, ApolloQueryResult, OperationVariables, useQuery } from \"@apollo/client\"\n\nimport { PLANNING } from \"src/graphql/queries\"\nimport { Creneau } from \"src/types/model\"\n\nexport interface IDatePlanningContext {\n  start: Date\n  end: Date\n  goBack: () => void\n  goForward: () => void\n  goToday: () => void\n  data?: Result\n  loading: boolean\n  error?: ApolloError\n  refetch: (variables?: Partial<OperationVariables> | undefined) => Promise<ApolloQueryResult<Result>>\n}\n\ntype Result = { creneaus: Creneau[] }\n\nconst DatePlanningContext = createContext<IDatePlanningContext>({} as IDatePlanningContext)\n\nconst getInitialStart = () => startOfMonth(new Date())\nconst getInitialEnd = () => endOfMonth(new Date())\n\nexport const DatePlanningProvider: FC = ({ children }) => {\n  const [start, setStart] = useState<Date>(getInitialStart)\n  const [end, setEnd] = useState<Date>(getInitialEnd)\n\n  const { data, loading, error, refetch } = useQuery<Result>(PLANNING, {\n    variables: { after: start, before: end },\n  })\n\n  const goBack = () => {\n    const date = subMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goForward = () => {\n    const date = addMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goToday = () => {\n    setStart(getInitialStart)\n    setEnd(getInitialEnd)\n  }\n\n  return (\n    <DatePlanningContext.Provider value={{ start, end, goBack, goForward, goToday, data, loading, error, refetch }}>\n      {children}\n    </DatePlanningContext.Provider>\n  )\n}\n\nexport function useDatePlanning() {\n  return useContext(DatePlanningContext) as IDatePlanningContext\n}\n","import styled from \"@emotion/styled/macro\"\nimport { CircularProgress } from \"@material-ui/core\"\n\nconst Loader = styled(CircularProgress)`\n  margin: 16px 0;\n`\n\nexport default Loader\n","export type ID = string\n\nexport enum RoleId {\n  GrandHibou = \"GH\",\n  Chouettos = \"CH\",\n  Caissier = \"CA\",\n  GrandHibou_Formation = \"GHF\",\n  Caissier_Formation = \"CAF\",\n  GrandHibou_Acc = \"GHA\",\n  Caissier_Acc = \"CAA\",\n  AdminMag = \"MAG\",\n  AdminBdM = \"BDM\",\n  // only for icons:\n  PIAF = \"P\",\n  Formation = \"F\",\n  Acc = \"A\",\n}\n\nexport interface Role {\n  id: ID\n  libelle: string\n  roleUniqueId: RoleId\n}\n\nexport interface CreneauGenerique {\n  id: ID\n  titre: string\n  frequence: string\n  jour: number\n  heureDebut: string // ISO datetime\n  heureFin: string // ISO datetime\n  actif: boolean\n}\n\nexport interface Poste {\n  id: ID\n  reservationChouettos: User\n  creneauGenerique: CreneauGenerique\n  role: Role\n}\n\nexport interface Reserve {\n  id: ID\n  informations: string\n  user: User\n  creneauGeneriques: CreneauGenerique[]\n}\n\nexport interface User {\n  id: ID\n  email: string\n  username: string\n  rolesChouette: Role[]\n  enabled: boolean\n  civilite: string\n  nom: string\n  prenom: string\n  telephone: string\n  codeBarre: string\n  domaineCompetence: string\n  photo: string\n  dateNaissance: string // ISO datetime\n  notes: string\n  actif: boolean // what‚Äôs the difference with \"enabled\"?\n  carteImprimee: boolean\n  gh: boolean // grand hibou\n  poste: Poste\n  statut: string\n  reserve: Reserve\n  absenceLongueDureeCourses: boolean\n  absenceLongueDureeSansCourses: boolean\n  nbPiafEffectuees: number\n  nbPiafAttendues: number\n  nbPiafGH?: number\n  nbPiafCaisse?: number\n}\n\nexport interface Creneau {\n  id: ID\n  titre: string\n  creneauGenerique: CreneauGenerique\n  debut: string // ISO datetime\n  fin: string // ISO datetime\n  informations: string\n  piafs: PIAF[]\n}\n\nexport interface InfoCreneau {\n  piaffeursCount: number\n  piaffeursCountFirstPiaf: number\n}\n\nexport interface PIAF {\n  id: ID\n  role: Role\n  piaffeur?: User\n  creneau: Creneau\n  visible: boolean\n  pourvu: boolean\n  statut: \"occupe\" | \"remplacement\" | \"\" | null // empty = available\n  informations: string\n  infoCreneau: InfoCreneau\n}\n","import { PIAF, RoleId } from \"src/types/model\"\n\nexport const getPiafRole = ({ role, piaffeur }: PIAF) => {\n  if (piaffeur) {\n    if (role.roleUniqueId === RoleId.GrandHibou && !piaffeur.nbPiafGH) {\n      return RoleId.GrandHibou_Formation\n    }\n    if (role.roleUniqueId === RoleId.Caissier && !piaffeur.nbPiafCaisse) {\n      return RoleId.Caissier_Formation\n    }\n  }\n  return role.roleUniqueId\n}\n\nexport const isTaken = (piaf: PIAF) => {\n  if (piaf.statut === \"remplacement\") {\n    return false\n  }\n  return Boolean(piaf.piaffeur)\n}\n\nexport const orderPiafsByDate = (left: PIAF, right: PIAF) => (left.creneau.debut > right.creneau.debut ? 1 : -1)\n","import { createContext, useContext, useState, FC } from \"react\"\n\nimport Dialog from \"src/components/Dialog\"\n\nexport enum TypeDialog {\n  YesNo,\n  Information,\n}\n\ntype Callback = (choice: boolean) => void\n\ninterface IDialogContext {\n  openDialog: (message: string, title?: string, callback?: Callback) => void\n  closeDialog: () => void\n}\n\nconst DialogContext = createContext({} as IDialogContext)\n\nexport const DialogProvider: FC = ({ children }) => {\n  const [open, setOpen] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [message, setMessage] = useState(\"\")\n  const [callback, setCallback] = useState<Callback>()\n\n  const openDialog = (newMessage: string, newTitle = \"\", newCallback?: Callback) => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    setCallback(() => newCallback)\n    setOpen(true)\n  }\n\n  const closeDialog = () => {\n    setOpen(false)\n  }\n\n  return (\n    <DialogContext.Provider value={{ openDialog, closeDialog }}>\n      {children}\n      <Dialog open={open} handleClose={closeDialog} title={title} message={message} callback={callback} />\n    </DialogContext.Provider>\n  )\n}\n\nexport const useDialog = () => useContext(DialogContext)\n","import { RoleId } from \"src/types/model\"\n\nimport CA from \"./ca.svg\"\nimport CAA from \"./caa.svg\"\nimport CAF from \"./caf.svg\"\nimport CH from \"./ch.svg\"\nimport GH from \"./gh.svg\"\nimport GHA from \"./gha.svg\"\nimport GHF from \"./ghf.svg\"\n\nimport P from \"./piaf.svg\"\nimport F from \"./formation.svg\"\nimport A from \"./acc.svg\"\n\n//TODO: add MAG and BDM to remove Partial<>\n\nconst ICONS: Partial<Record<RoleId, string>> = { CA, CAA, CAF, CH, GH, GHA, GHF, P, F, A }\n\nexport default ICONS\n","export default __webpack_public_path__ + \"static/media/ca.b47d9fee.svg\";","export default __webpack_public_path__ + \"static/media/caa.f4457990.svg\";","export default __webpack_public_path__ + \"static/media/caf.7fd9d842.svg\";","export default __webpack_public_path__ + \"static/media/ch.7513f395.svg\";","export default __webpack_public_path__ + \"static/media/gh.a3fdca6f.svg\";","export default __webpack_public_path__ + \"static/media/gha.bd476097.svg\";","export default __webpack_public_path__ + \"static/media/ghf.c11dd89e.svg\";","export default __webpack_public_path__ + \"static/media/piaf.44236479.svg\";","export default __webpack_public_path__ + \"static/media/formation.89c70634.svg\";","export default __webpack_public_path__ + \"static/media/acc.60814349.svg\";","import type { PIAF, RoleId } from \"src/types/model\"\n\nimport styled from \"@emotion/styled/macro\"\n\nimport { getPiafRole, isTaken } from \"src/helpers/piaf\"\n\nimport ICONS from \"src/images/icons\"\n\nconst getImg = (role?: RoleId) => {\n  if (role) {\n    const img = ICONS[role]\n    if (img) {\n      return `url(${img})`\n    }\n  }\n  return \"none\" // TODO\n}\n\nexport const PiafIcon = styled.span<{ $taken?: boolean; $role?: RoleId }>`\n  flex-shrink: 0;\n  display: inline-block;\n  margin: 3px;\n  width: 32px;\n  height: 32px;\n  background-image: ${({ $role }) => getImg($role)};\n  background-size: 100%;\n  background-position: center center;\n  background-repeat: no-repeat;\n  opacity: ${({ $taken }) => ($taken ? 0.25 : 1)};\n`\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst PiafCircle = ({ piaf }: Props) => <PiafIcon $taken={isTaken(piaf)} $role={getPiafRole(piaf)} />\n\nexport default PiafCircle\n","import {\n  Button,\n  Dialog as MuiDialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\"\n\ninterface Props {\n  open: boolean\n  handleClose: () => void\n  title: string\n  message: string\n  callback?: (ok: boolean) => void\n}\n\nconst Dialog = ({ open, handleClose, title, message, callback }: Props) => {\n  const handleConfirm = (ok: boolean) => () => {\n    if (callback) {\n      callback(ok)\n    }\n    handleClose()\n  }\n\n  return (\n    <MuiDialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">{message}</DialogContentText>\n      </DialogContent>\n      {callback ? (\n        <DialogActions>\n          <Button onClick={handleConfirm(true)} color=\"primary\">\n            Oui\n          </Button>\n          <Button onClick={handleConfirm(false)} color=\"primary\">\n            Non\n          </Button>\n        </DialogActions>\n      ) : (\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      )}\n    </MuiDialog>\n  )\n}\n\nexport default Dialog\n","import { Role, RoleId, User } from \"src/types/model\"\n\nexport const getTrainerRoleId = (id: RoleId) => {\n  switch (id) {\n    case RoleId.Caissier:\n      return RoleId.Caissier_Acc\n    case RoleId.GrandHibou:\n      return RoleId.GrandHibou_Acc\n    default:\n      return null\n  }\n}\n\nexport const hasRole = (id: RoleId, roles: Role[]) => {\n  return roles.find(({ roleUniqueId }) => roleUniqueId === id)\n}\n\nexport const needsTraining = (user: User | null, roleId: RoleId) => {\n  if (user) {\n    if (roleId == RoleId.GrandHibou) {\n      return !user.nbPiafGH || user.nbPiafGH == 0\n    } else if (roleId == RoleId.Caissier) {\n      return !user.nbPiafGH || user.nbPiafGH == 0\n    }\n  }\n  return false\n}\n\nexport const formatRoles = (roles: Role[]) => roles.map(({ libelle }) => libelle).join(\", \")\n","import type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { Button, TextField } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\nimport { startOfWeek, endOfWeek, startOfDay, endOfDay, isPast } from \"date-fns\"\n\nimport { PIAF, User, RoleId } from \"src/types/model\"\nimport PiafCircle from \"src/components/PiafCircle\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { useRoles } from \"src/providers/roles\"\nimport { PIAFS_COUNT, PIAF_CREATE, REGISTRATION_UPDATE } from \"src/graphql/queries\"\nimport apollo from \"src/helpers/apollo\"\nimport { getTrainerRoleId, hasRole, needsTraining } from \"src/helpers/role\"\nimport { handleError } from \"src/helpers/errors\"\nimport { isTaken, getPiafRole } from \"src/helpers/piaf\"\nimport { useDatePlanning } from \"src/providers/datePlanning\"\n\nconst MAX_PIAF_PER_WEEK = 3\nconst MAX_PIAF_PER_DAY = 2\nconst PERCENTAGE_NEW_CHOUETTOS = 50\n\nconst Row = styled.div`\n  margin: 0 0 1rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n`\nconst Status = styled.div`\n  flex: 1;\n  margin: 0 8px;\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n  }\n`\nconst Contact = styled.div`\n  text-align: right;\n`\nconst InfoPiaf = styled.div`\n  display: block;\n`\n\ninterface Props {\n  piaf: PIAF\n  user: User | null\n  slot: ISlot\n}\n\ntype Result = { piafs: PIAF[] }\n\nconst getPiafCount = async (slot: ISlot, userId: string, type: \"week\" | \"day\") => {\n  const after = type === \"day\" ? startOfDay(slot.start) : startOfWeek(slot.start)\n  const before = type === \"day\" ? endOfDay(slot.start) : endOfWeek(slot.start)\n  const { data } = await apollo.query<Result>({\n    query: PIAFS_COUNT,\n    variables: { userId, after, before },\n  })\n  //The filter by statut on the database does not work\n  return data.piafs.filter((p) => p.statut === \"occupe\").length\n}\n\nconst checkMaximumNumberOfNewChouettos = (user: User | null, piaf: PIAF) => {\n  // There is a maximum percentage for PIAF of new Chouettos\n  if (user?.nbPiafEffectuees === 0) {\n    const piafeursCount = piaf.infoCreneau.piaffeursCount\n    const maxPiafeursFirstPiaf = Math.floor((piafeursCount * PERCENTAGE_NEW_CHOUETTOS) / 100)\n    const piafeursFirstPiaf = piaf.infoCreneau.piaffeursCountFirstPiaf\n\n    if (piafeursFirstPiaf >= maxPiafeursFirstPiaf) {\n      return false\n    }\n  }\n  return true\n}\nconst getRegistrationPiafId = (slot: ISlot, piaf: PIAF) => {\n  const replacementPiaf = slot.piafs?.find(({ statut, role }) => statut === \"remplacement\" && role.id === piaf.role.id)\n  if (replacementPiaf) {\n    // If there is a PIAF with status \"remplacement\" and the same role,\n    // the user will be registered to it instead of the requested one.\n    return replacementPiaf.id\n  }\n  return piaf.id\n}\n\nconst PiafRow = ({ piaf, user, slot }: Props) => {\n  const [loading, setLoading] = useState(false)\n  const [info, setInfo] = useState(\"\")\n  const { openDialog } = useDialog()\n  const currentUserIsInSlot = slot.piafs?.find(\n    ({ piaffeur, statut }) => piaffeur?.id === user?.id && statut === \"occupe\"\n  )\n  const rolesBD = useRoles()\n  const { refetch } = useDatePlanning()\n\n  const handleInputChange = ({ target }: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setInfo(target.value)\n  }\n\n  const register = async () => {\n    setLoading(true)\n\n    try {\n      const userRoles = user?.rolesChouette\n      if (!userRoles || !hasRole(piaf.role.roleUniqueId, userRoles)) {\n        setLoading(false)\n        openDialog(`Pour t‚Äôinscrire √† cette PIAF, tu dois d‚Äôabord passer la formation ${piaf.role.libelle}`)\n        return\n      }\n\n      const userId = (user as User).id\n\n      const piafOfWeek = await getPiafCount(slot, userId, \"week\")\n      if (piafOfWeek >= MAX_PIAF_PER_WEEK) {\n        setLoading(false)\n        openDialog(`Il n‚Äôest pas possible de s‚Äôinscrire √† plus de ${MAX_PIAF_PER_WEEK} PIAF par semaine`)\n        return\n      }\n\n      const piafOfDay = await getPiafCount(slot, userId, \"day\")\n      if (piafOfDay >= MAX_PIAF_PER_DAY) {\n        setLoading(false)\n        openDialog(`Il n‚Äôest pas possible de s‚Äôinscrire √† plus de ${MAX_PIAF_PER_DAY} PIAF par jour`)\n        return\n      }\n\n      if (!checkMaximumNumberOfNewChouettos(user, piaf)) {\n        setLoading(false)\n        openDialog(`Il n‚Äôest pas possible d‚Äôavoir plus de ${PERCENTAGE_NEW_CHOUETTOS}% de nouveaux chouettos par PIAF`)\n        return\n      }\n\n      const piafId = getRegistrationPiafId(slot, piaf)\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: {\n          piafId,\n          userId,\n          statut: \"occupe\",\n          informations: info,\n        },\n      })\n\n      let registerOK = true\n      if (needsTraining(user, piaf.role.roleUniqueId)) {\n        registerOK = await addTrainerPiaf(piaf.role.roleUniqueId)\n      }\n      if (registerOK) openDialog(\"Inscription effectu√©e. Merci !\")\n    } catch (error) {\n      handleError(error)\n    }\n\n    setLoading(false)\n  }\n\n  const addTrainerPiaf = async (roleUniqueId: RoleId) => {\n    const idRoleTrainer = getTrainerRoleId(roleUniqueId)\n    if (idRoleTrainer) {\n      const roleTrainer = rolesBD.find((r) => r.roleUniqueId == idRoleTrainer)\n      if (roleTrainer) {\n        await apollo.mutate({\n          mutation: PIAF_CREATE,\n          variables: {\n            idCreneau: slot.id,\n            idRole: roleTrainer.id,\n          },\n        })\n        refetch()\n      } else {\n        openDialog(`Le role ${idRoleTrainer} n'a pas pu √™tre trouv√©. Svp, contactez votre administrateur`)\n        return false\n      }\n    } else {\n      openDialog(`Il n'y a pas un role formateur pour ${roleUniqueId}. Svp, contactez votre administrateur`)\n      return false\n    }\n    return true\n  }\n\n  const unregister = async () => {\n    setLoading(true)\n\n    try {\n      //Delete info in memory\n      setInfo(\"\")\n\n      const userId = (user as User).id\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: { piafId: piaf.id, userId, statut: \"remplacement\", informations: null },\n      })\n\n      if (needsTraining(user, piaf.role.roleUniqueId)) {\n        openDialog(\n          \"D√©sinscription effectu√©e ! Svp, mettez vous en contact avec le BdM pour enlever la PIAF accompagnateur¬∑trice\"\n        )\n      } else {\n        openDialog(\"D√©sinscription effectu√©e : la PIAF est d√©sormais en recherche de remplacement !\")\n      }\n    } catch (error) {\n      handleError(error)\n    }\n\n    setLoading(false)\n  }\n\n  const { id, piaffeur } = piaf\n  const taken = isTaken(piaf)\n\n  const roleUser = rolesBD.find((r) => r.roleUniqueId == getPiafRole(piaf))\n\n  return (\n    <Row key={id}>\n      <PiafCircle piaf={piaf} />\n      <Status>\n        {taken && piaffeur ? `${piaffeur.prenom} ${piaffeur.nom}` : \"Place disponible\"}\n        <br />\n        <span> {roleUser?.libelle}</span>\n      </Status>\n      {taken &&\n        currentUserIsInSlot &&\n        currentUserIsInSlot.role.roleUniqueId === RoleId.GrandHibou &&\n        piaffeur &&\n        piaffeur.id != user?.id && (\n          //Show info contacts only if the current user is the GH of the slot\n          <Contact>\n            <a href={`mailto:${piaffeur.email}`}>{piaffeur.email}</a>\n            <br />\n            <a href={`tel:${piaffeur.telephone}`}>{piaffeur.telephone}</a>\n            <div>{piaf.informations}</div>\n          </Contact>\n        )}\n      {!taken && !currentUserIsInSlot && !isPast(slot.start) && (\n        <TextField\n          name=\"informations\"\n          multiline\n          label=\"Information (optionnel)\"\n          value={info}\n          onChange={handleInputChange}\n        ></TextField>\n      )}\n      {!taken && !currentUserIsInSlot && !isPast(slot.start) && (\n        <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={register}>\n          S‚Äôinscrire\n        </Button>\n      )}\n      {piaffeur?.id === user?.id && taken && !isPast(slot.start) && (\n        <InfoPiaf>\n          <div>{piaf.informations}</div>\n          <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={unregister}>\n            Demander un remplacement\n          </Button>\n        </InfoPiaf>\n      )}\n    </Row>\n  )\n}\n\nexport default PiafRow\n","import { format } from \"date-fns\"\nimport fr from \"date-fns/locale/fr\"\n\nconst formatInFrench = (date: Date | number | string, pattern: string) => {\n  if (typeof date === \"string\") {\n    date = new Date(date)\n  }\n  return format(date, pattern, { locale: fr })\n}\n\nexport const formatDateShort = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMM\")\nexport const formatDateLong = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMMM yyyy\")\n\nexport const formatMonthYear = (date: Date | number | string) => formatInFrench(date, \"MMMM yyyy\")\n\nexport const formatTime = (date: Date | number | string) => formatInFrench(date, \"HH:mm\")\n\nconst WEEKDAYS = [\"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\", \"Dimanche\"]\nexport const getDayOfWeek = (index: number) => WEEKDAYS[index]\n\nexport const queryDate = (date: Date | number) => format(date, \"yyyy-MM-dd\")\n","import type { ISlot } from \"src/types/app\"\n\nimport { capitalize, Dialog, DialogContent, DialogTitle, IconButton, Typography } from \"@material-ui/core\"\nimport { Close } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport PiafRow from \"src/components/PiafRow\"\nimport { formatTime, formatDateLong } from \"src/helpers/date\"\nimport { useUser } from \"src/providers/user\"\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  right: 8px;\n  top: 8px;\n`\nconst Title = styled.div`\n  h3 {\n    font-size: 1.5em;\n    margin-bottom: 8px;\n  }\n  h4 {\n    font-size: 1.2em;\n  }\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n    margin-left: 5px;\n    font-weight: 500;\n  }\n`\n\ninterface Props {\n  slot: ISlot\n  show: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nconst SlotDialog = ({ slot, show, handleClose }: Props) => {\n  const { user } = useUser<true>()\n\n  return (\n    <Dialog open={show} onClose={handleClose} fullWidth>\n      <CloseButton onClick={handleClose}>\n        <Close />\n      </CloseButton>\n      <DialogTitle disableTypography>\n        <Title>\n          <Typography variant=\"h3\">{capitalize(formatDateLong(slot.start))}</Typography>\n          <Typography variant=\"h4\">\n            <strong>\n              {formatTime(slot.start)}‚Äì{formatTime(slot.end)}\n            </strong>\n            <span>{slot.title}</span>\n          </Typography>\n          <div>{slot.information}</div>\n        </Title>\n      </DialogTitle>\n      <DialogContent>\n        {slot.piafs ? (\n          slot.piafs.map((piaf) => <PiafRow key={piaf.id} piaf={piaf} user={user} slot={slot} />)\n        ) : (\n          <Loader />\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nexport default SlotDialog\n","import type { Creneau, PIAF } from \"src/types/model\"\nimport { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { ListItem, ListItemAvatar, ListItemText, Checkbox, FormControlLabel, Grid } from \"@material-ui/core\"\nimport { useLazyQuery } from \"@apollo/client\"\n\nimport PiafCircle from \"src/components/PiafCircle\"\nimport SlotDialog from \"src/components/SlotDialog\"\nimport { SLOTS } from \"src/graphql/queries\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { VALIDATE_PIAF } from \"src/graphql/queries\"\nimport { formatDateLong, formatTime } from \"src/helpers/date\"\nimport apollo from \"src/helpers/apollo\"\nimport { handleError } from \"src/helpers/errors\"\n\ninterface Result {\n  creneau: Creneau\n}\n\ninterface Props {\n  piaf: PIAF\n  allowValidate?: boolean\n}\n\nconst Piaf = ({ piaf, allowValidate = false }: Props) => {\n  const { creneau } = piaf\n  const [open, setOpen] = useState(false)\n  const { openDialog } = useDialog()\n\n  const [load, { data }] = useLazyQuery<Result>(SLOTS, {\n    variables: { id: creneau.id },\n  })\n\n  const handleClick = () => {\n    setOpen(true)\n    load()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleValidate = async (piafId: string) => {\n    openDialog(\"√ätes-vous s√ªr¬∑e de vouloir valider cette PIAF ?\", \"\", async (ok) => {\n      if (ok) {\n        const variables: Record<string, any> = {\n          piafId,\n          validate: true,\n        }\n\n        try {\n          await apollo.mutate({\n            mutation: VALIDATE_PIAF,\n            variables,\n          })\n\n          openDialog(\"La PIAF a √©t√© valid√©e\")\n        } catch (error) {\n          handleError(error)\n        }\n      }\n    })\n  }\n\n  const slot: ISlot = {\n    id: creneau.id,\n    title: creneau.titre,\n    information: creneau.informations,\n    start: new Date(creneau.debut),\n    end: new Date(creneau.fin),\n    piafs: data?.creneau.piafs,\n  }\n\n  return (\n    <Grid container>\n      <Grid item xs={8}>\n        <ListItem key={piaf.id} button onClick={handleClick}>\n          <ListItemAvatar>\n            <PiafCircle piaf={piaf} />\n          </ListItemAvatar>\n          <ListItemText\n            primary={formatDateLong(slot.start)}\n            secondary={`de ${formatTime(slot.start)} √† ${formatTime(slot.end)}`}\n          />\n        </ListItem>\n      </Grid>\n      <Grid item xs={4}>\n        {allowValidate && (\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={piaf.pourvu}\n                name=\"validatePIAF\"\n                onChange={() => {\n                  handleValidate(piaf.id)\n                }}\n              />\n            }\n            label=\"Valider PIAF\"\n          />\n        )}\n      </Grid>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </Grid>\n  )\n}\n\nexport default Piaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { List } from \"@material-ui/core\"\n\nimport Loader from \"src/components/Loader\"\nimport Piaf from \"src/components/Piaf\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { orderPiafsByDate } from \"src/helpers/piaf\"\n\ntype Result = { piafs: PIAF[] }\ninterface Props {\n  userId: string\n  after?: string\n  validated?: boolean\n  allowValidate?: boolean\n}\n\nconst UserPiafs = ({ userId, after, validated = false, allowValidate = false }: Props) => {\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: { userId, after, validated },\n    skip: !userId,\n  })\n\n  if (loading || !userId) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  if (!data.piafs.length && !allowValidate) {\n    return <p>Aucune PIAF √† venir. Inscrivez-vous sur le planning !</p>\n  }\n\n  if (!data.piafs.length && allowValidate) {\n    return <p>Aucune PIAF √† valider.</p>\n  }\n\n  const piafs = data.piafs.filter(({ statut }) => statut !== \"remplacement\").sort(orderPiafsByDate)\n\n  return (\n    <List>\n      {piafs.map((piaf) => (\n        <Piaf key={piaf.id} piaf={piaf} allowValidate={allowValidate} />\n      ))}\n    </List>\n  )\n}\n\nexport default UserPiafs\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { startOfToday, addMonths } from \"date-fns\"\nimport { List } from \"@material-ui/core\"\n\nimport Loader from \"src/components/Loader\"\nimport Piaf from \"src/components/Piaf\"\nimport { useUser } from \"src/providers/user\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { queryDate } from \"src/helpers/date\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { orderPiafsByDate } from \"src/helpers/piaf\"\nimport { getId } from \"src/helpers/apollo\"\n\ntype Result = { piafs: PIAF[] }\n\nconst ReplacementPiafs = () => {\n  const { auth } = useUser<true>()\n\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: {\n      after: queryDate(startOfToday()),\n      before: queryDate(addMonths(startOfToday(), 2)),\n      statut: \"remplacement\",\n    },\n  })\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  const otherPiafs = data.piafs.filter((piaf) => getId(piaf.piaffeur?.id) !== auth.id).sort(orderPiafsByDate)\n\n  if (!otherPiafs.length) {\n    return <p>Aucun remplacement √† venir n‚Äôest demand√©.</p>\n  }\n\n  return (\n    <>\n      <p>\n        Les cr√©neaux ci dessous ne peuvent plus √™tre effectu√©s par un Chouettos, ils sont disponibles pour un\n        remplacement. N‚Äôh√©sites pas √† te positionner, la personne que tu remplaces sera avertie par e-mail\n        instantan√©ment !\n      </p>\n      <List>\n        {otherPiafs.map((piaf) => (\n          <Piaf key={piaf.id} piaf={piaf} />\n        ))}\n      </List>\n    </>\n  )\n}\n\nexport default ReplacementPiafs\n","import styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\nimport { startOfToday } from \"date-fns\"\n\nimport { useUser } from \"src/providers/user\"\nimport UserPiafs from \"src/components/UserPiafs\"\nimport ReplacementPiafs from \"src/components/ReplacementPiafs\"\nimport { queryDate } from \"src/helpers/date\"\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  > div {\n    flex: 0 1 50%;\n    min-width: 300px;\n  }\n`\nconst Status = styled.div`\n  h3 {\n    font-size: 2.5rem;\n    &::first-letter {\n      text-transform: uppercase;\n    }\n    span {\n      font-size: 0.5em;\n    }\n    margin-bottom: 2rem;\n  }\n`\nconst MyPlanning = styled.div``\nconst Replacements = styled.div``\n\nconst HomePage = () => {\n  const { user } = useUser<true>()\n  const userId = user?.id || \"\"\n\n  const counter = `${user?.nbPiafEffectuees ?? \"‚Ä¶\"}/${user?.nbPiafAttendues ?? \"‚Ä¶\"}`\n  const status = user?.statut || \"‚Ä¶\"\n\n  return (\n    <Container>\n      <Status>\n        <Typography variant=\"h2\">Mon statut</Typography>\n        <Typography variant=\"h3\">\n          {counter} <span>PIAFs attendues</span>\n        </Typography>\n        <Typography variant=\"h2\">Je suis</Typography>\n        <Typography variant=\"h3\">{status}</Typography>\n      </Status>\n      <MyPlanning>\n        <Typography variant=\"h2\">Mes prochaines PIAFs</Typography>\n        <UserPiafs userId={userId} after={queryDate(startOfToday())} />\n      </MyPlanning>\n      <Replacements>\n        <Typography variant=\"h2\">Remplacements</Typography>\n        <ReplacementPiafs />\n      </Replacements>\n    </Container>\n  )\n}\n\nexport default HomePage\n","import type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport styled from \"@emotion/styled/macro\"\n\nimport SlotDialog from \"src/components/SlotDialog\"\nimport PiafCircle, { PiafIcon } from \"src/components/PiafCircle\"\nimport { formatTime } from \"src/helpers/date\"\n\nconst SELECTED_COLOR = \"#FFFFAA\"\n\nconst ClickableSlot = styled.button<{ $open: boolean }>`\n  width: 100%;\n  border: none;\n  background-color: ${({ $open }) => ($open ? SELECTED_COLOR : \"transparent\")};\n  padding: 5px;\n  text-align: left;\n  font-size: inherit;\n  line-height: inherit;\n  font: inherit;\n  cursor: pointer;\n  &:focus {\n    background-color: ${SELECTED_COLOR};\n    outline: none;\n  }\n`\nconst Title = styled.div`\n  span {\n    color: gray;\n  }\n`\nconst List = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 -2px;\n  ${PiafIcon} {\n    width: 24px;\n    height: 24px;\n  }\n`\n\ninterface Props {\n  slot: ISlot\n}\n\nconst Slot = ({ slot }: Props) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClick = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ClickableSlot $open={open} onClick={handleClick}>\n        <Title>\n          <strong>\n            {formatTime(slot.start)}‚Äì{formatTime(slot.end)}\n          </strong>\n          <br />\n          <span>{slot.title}</span>\n        </Title>\n        <List>\n          {slot.piafs?.map((piaf) => (\n            <PiafCircle key={piaf.id} piaf={piaf} />\n          ))}\n        </List>\n      </ClickableSlot>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </>\n  )\n}\n\nexport default Slot\n","import type { IDay, IWeekNumber } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { isPast, isToday } from \"date-fns\"\nimport { capitalize, Typography } from \"@material-ui/core\"\n\nimport Slot from \"src/components/Slot\"\nimport { formatDateShort } from \"src/helpers/date\"\n\ntype TimeStatus = \"past\" | \"present\" | \"future\"\n\nconst WEEK_COLORS: Record<IWeekNumber, string> = {\n  1: \"#89C7A8\",\n  2: \"#638F79\",\n  3: \"#3A5447\",\n  4: \"#27382F\",\n}\n\nconst Header = styled.div<{ $when: IWeekNumber }>`\n  background-color: ${({ $when }) => WEEK_COLORS[$when]};\n  height: 18px;\n  color: white;\n  font-size: 12px;\n  padding: 0 4px;\n`\n\nconst Container = styled.div<{ $when: TimeStatus }>`\n  opacity: ${({ $when }) => ($when === \"past\" ? 0.25 : 1)};\n  border: 1px solid gray;\n  min-height: 80px;\n  background-color: ${({ $when }) => ($when === \"present\" ? \"#d0d9d0\" : \"#eee\")};\n  h3 {\n    font-size: 1em;\n    margin: 4px;\n  }\n`\nconst List = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n`\n\ninterface Props {\n  day: IDay\n  weekNumber: IWeekNumber\n}\n\nconst CalendarDay = ({ day, weekNumber }: Props) => {\n  const isMonday = day.start.getDay() === 1\n\n  return (\n    <Container $when={isToday(day.start) ? \"present\" : isPast(day.start) ? \"past\" : \"future\"}>\n      <Header $when={weekNumber}>{isMonday && `Semaine ${weekNumber}`}</Header>\n      <Typography variant=\"h3\">{capitalize(formatDateShort(day.start))}</Typography>\n      <List>\n        {day.slots.map((slot) => (\n          <Slot slot={slot} key={slot.id}></Slot>\n        ))}\n      </List>\n    </Container>\n  )\n}\n\nexport default CalendarDay\n\nexport const DayPlaceholder = () => <Container $when=\"past\" />\n","import type { Creneau, PIAF } from \"src/types/model\"\nimport type { IWeek, IWeekNumber } from \"src/types/app\"\n\nimport { useMediaQuery, useTheme } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\nimport { addDays, differenceInWeeks, eachWeekOfInterval, getDay } from \"date-fns\"\n\nimport CalendarDay, { DayPlaceholder } from \"src/components/CalendarDay\"\n\nconst Container = styled.div`\n  border: 1px solid gray;\n  margin: 0;\n  padding: 0;\n`\nconst WeekRow = styled.div`\n  @media screen and (min-width: 800px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\n\ninterface Props {\n  start: Date\n  end: Date\n  list?: Creneau[]\n}\n\nconst Calendar = ({ start, end, list }: Props) => {\n  const theme = useTheme()\n  const matches = useMediaQuery(theme.breakpoints.down(\"sm\"))\n\n  if (!list) {\n    return null\n  }\n\n  const weeks: IWeek[] = eachWeekOfInterval({ start, end }, { weekStartsOn: 1 }).map((date) => ({\n    start: date,\n    days: [0, 1, 2, 3, 4, 5, 6].map((i) => ({ start: addDays(date, i), slots: [] })),\n    weekNumber: 1,\n  }))\n\n  list.forEach((node) => {\n    const date = new Date(node.debut)\n    const weekIndex = differenceInWeeks(date, weeks[0].start)\n    const week = weeks[weekIndex]\n    const day = (getDay(date) || 7) - 1 // Monday = 0, ..., Sunday = 6\n    const piaffeursCount = node.piafs.length\n    const piafeursCountFirstPiaf = node.piafs.filter((p) => p.piaffeur?.nbPiafEffectuees === 0).length\n\n    node.piafs.map((p) => {\n      const tempPiaf = JSON.parse(JSON.stringify(p))\n      const infoCreneau = {\n        piaffeursCount: piaffeursCount,\n        piaffeursCountFirstPiaf: piafeursCountFirstPiaf,\n      }\n      tempPiaf.infoCreneau = infoCreneau\n    })\n\n    const piafs: PIAF[] = []\n    node.piafs\n      .slice()\n      .sort((left, right) => (left.role.id > right.role.id ? 1 : -1))\n      .map((p) => {\n        const tempPiaf = JSON.parse(JSON.stringify(p))\n        const infoCreneau = {\n          piaffeursCount: piaffeursCount,\n          piaffeursCountFirstPiaf: piafeursCountFirstPiaf,\n        }\n        tempPiaf.infoCreneau = infoCreneau\n        piafs.push(tempPiaf)\n      })\n\n    week.days[day].slots.push({\n      id: node.id,\n      title: node.titre,\n      information: node.informations,\n      start: date,\n      end: new Date(node.fin),\n      piafs,\n    })\n\n    week.weekNumber = Number(node.creneauGenerique.frequence) as IWeekNumber\n  })\n\n  return (\n    <Container>\n      {weeks.map((week, index) => (\n        <WeekRow key={index}>\n          {week.days.map((day, i) =>\n            day.start >= start && day.start < end ? (\n              <CalendarDay day={day} key={i} weekNumber={week.weekNumber} />\n            ) : matches ? null : (\n              <DayPlaceholder key={i} />\n            )\n          )}\n        </WeekRow>\n      ))}\n    </Container>\n  )\n}\n\nexport default Calendar\n","import { useEffect, useState } from \"react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Grid, Dialog, DialogContent, DialogActions, Button } from \"@material-ui/core\"\n\nimport { RoleId } from \"src/types/model\"\nimport { PiafIcon } from \"src/components/PiafCircle\"\n\nconst Container = styled.div`\n  text-align: center;\n`\nconst Title = styled.h3`\n  margin: 0 0 2em;\n`\nconst Caption = styled.figcaption`\n  word-wrap: break-word;\n  padding: 0 4px;\n`\n\nconst IconsCaption = () => {\n  return (\n    <Container>\n      <Title>L√©gende</Title>\n      <Grid container>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon $role={RoleId.Chouettos} />\n          <Caption>Chouettos</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon $role={RoleId.Caissier} />\n          <Caption>Caissier¬∑√®re</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon $role={RoleId.GrandHibou} />\n          <Caption>Grand Hibou</Caption>\n        </Grid>\n      </Grid>\n      <br />\n      <Grid container>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon $role={RoleId.PIAF} />\n          <Caption>PIAF disponible</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon $role={RoleId.PIAF} $taken />\n          <Caption>PIAF occup√©e</Caption>\n        </Grid>\n      </Grid>\n      <br />\n      <Grid container>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon $role={RoleId.Formation} />\n          <Caption>En formation</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon $role={RoleId.Acc} />\n          <Caption>Accompagnateur¬∑rice</Caption>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n}\n\nexport default IconsCaption\n\nexport const CaptionDialog = () => {\n  const [open, setOpen] = useState(false)\n\n  useEffect(() => {\n    const dismissed = localStorage.getItem(\"caption_dismissed\")\n    if (!dismissed) {\n      setOpen(true)\n    }\n  }, [])\n\n  const handleClose = () => {\n    setOpen(false)\n    localStorage.setItem(\"caption_dismissed\", \"true\")\n  }\n\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogContent>\n        <IconsCaption />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Compris !\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import { Button, Typography, useMediaQuery, useTheme } from \"@material-ui/core\"\nimport { ArrowBackIos, ArrowForwardIos, CalendarToday } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\nimport { isSameMonth } from \"date-fns\"\n\nimport Loader from \"src/components/Loader\"\nimport Calendar from \"src/components/Calendar\"\nimport IconsCaption, { CaptionDialog } from \"src/components/IconsCaption\"\nimport { useDatePlanning } from \"src/providers/datePlanning\"\nimport { formatMonthYear } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\nconst Loading = styled.div`\n  border: 2px solid gray;\n  height: 500px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Nav = styled.nav`\n  display: flex;\n  margin-bottom: 1rem;\n  button:not(:first-of-type) {\n    margin-left: 1rem;\n  }\n  h2 {\n    flex: 1;\n    text-transform: capitalize;\n  }\n`\nconst ButtonArea = styled.div`\n  display: flex;\n  justify-content: end;\n`\nconst BottomCaption = styled.div`\n  max-width: 500px;\n  margin: 20px 0 100px auto;\n  border: 1px solid gray;\n  border-radius: 10px;\n  padding: 20px 10px;\n`\n\nconst PlanningPage = () => {\n  const { goBack, goForward, goToday, start, end, data, error, loading } = useDatePlanning()\n  const theme = useTheme()\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"))\n  const textTodayButton = matches ? \"Aujourd‚Äôhui\" : \"\"\n  const textBeforeButton = matches ? \"Pr√©c√©dent\" : \"\"\n  const textAfterButton = matches ? \"Suivant\" : \"\"\n\n  if (error) {\n    return <ErrorBlock error={error} />\n  }\n\n  return (\n    <>\n      <Nav>\n        <Typography variant=\"h2\">{formatMonthYear(start)}</Typography>\n        <ButtonArea>\n          <Button disabled={loading} variant=\"contained\" color=\"primary\" startIcon={<ArrowBackIos />} onClick={goBack}>\n            {textBeforeButton}\n          </Button>\n          <Button\n            disabled={loading || isSameMonth(start, new Date())}\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<CalendarToday />}\n            onClick={goToday}\n          >\n            {textTodayButton}\n          </Button>\n          <Button\n            disabled={loading}\n            variant=\"contained\"\n            color=\"primary\"\n            endIcon={<ArrowForwardIos />}\n            onClick={goForward}\n          >\n            {textAfterButton}\n          </Button>\n        </ButtonArea>\n      </Nav>\n      {loading ? (\n        <Loading>\n          <Loader />\n        </Loading>\n      ) : (\n        <Calendar start={start} end={end} list={data?.creneaus} />\n      )}\n      <BottomCaption>\n        <IconsCaption />\n      </BottomCaption>\n      <CaptionDialog />\n    </>\n  )\n}\n\nexport default PlanningPage\n","import React, { useState } from \"react\"\nimport { Button, Dialog, TextField, DialogContent, DialogActions, IconButton, DialogTitle } from \"@material-ui/core\"\nimport { Close } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { sendEmail } from \"src/helpers/request\"\nimport { useDialog } from \"src/providers/dialog\"\n\nconst Row = styled.div`\n  margin: 0 0 1rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n`\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  right: 8px;\n  top: 8px;\n`\n\nconst TextInput = styled(TextField)`\n  width: 100%;\n`\n\nconst Title = styled(DialogTitle)`\n  margin-right: 30px;\n`\n\ninterface Props {\n  show: boolean\n  handleClose: () => void\n}\n\nconst LongAbsence = ({ show, handleClose }: Props) => {\n  const { openDialog } = useDialog()\n  const [values, setValues] = useState({\n    reasonAbsence: \"\",\n    dateIni: new Date(),\n    dateFin: new Date(),\n  })\n\n  const handleInputChange = ({ target }: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = target\n    setValues({\n      ...values,\n      [name]: value,\n    })\n  }\n\n  const handleSendEmail = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n\n    if (!process.env.REACT_APP_MAIL_BDM) {\n      alert(\"L‚Äôadresse  e-mail du BdM n‚Äôest pas configur√©e. Contactez votre administrateur.\")\n      return\n    }\n\n    if (!values.dateIni || !values.dateFin || !values.reasonAbsence) {\n      openDialog(\"Tous les champs sont obligatoires.\")\n      return\n    }\n    if (values.dateIni > values.dateFin) {\n      openDialog(\"La date de d√©but ne peut pas √™tre post√©rieure √† la date de fin.\")\n      return\n    }\n\n    await sendEmail(\n      process.env.REACT_APP_MAIL_BDM,\n      \"Absence prolong√©e\",\n      `Bonjour, je ne pourrai pas assurer une activit√© r√©guli√®re √† La Chouette Coop du ${values.dateIni} au ${values.dateFin} en raison de ${values.reasonAbsence}.`\n    )\n    handleClose()\n\n    openDialog(\"Un mail informatif a √©t√© envoy√© au BdM. Votre absence sera bient√¥t valid√©e.\")\n  }\n\n  return (\n    <Dialog open={show} onClose={handleClose}>\n      <form onSubmit={handleSendEmail} autoComplete=\"off\">\n        <CloseButton onClick={handleClose}>\n          <Close />\n        </CloseButton>\n        <Title>Informer d‚Äôune absence prolong√©e</Title>\n        <DialogContent>\n          <Row>\n            <TextField\n              id=\"dateIni\"\n              label=\"Date debut\"\n              name=\"dateIni\"\n              type=\"date\"\n              required\n              value={values.dateIni}\n              onChange={handleInputChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Row>\n          <Row>\n            <TextField\n              id=\"dateFin\"\n              label=\"Date fin\"\n              name=\"dateFin\"\n              type=\"date\"\n              required\n              value={values.dateFin}\n              onChange={handleInputChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n          </Row>\n          <Row>\n            <TextInput\n              name=\"reasonAbsence\"\n              multiline\n              required\n              label=\"Motif de l‚Äôabsence\"\n              value={values.reasonAbsence}\n              onChange={handleInputChange}\n            ></TextInput>\n          </Row>\n        </DialogContent>\n        <DialogActions>\n          <Button type=\"submit\" color=\"primary\" variant=\"contained\">\n            Confirmer au BdM\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  )\n}\n\nexport default LongAbsence\n","import { useEffect, useState } from \"react\"\nimport { Phone, Mail } from \"@material-ui/icons\"\nimport { Button, InputAdornment, TextField, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport LongAbsence from \"src/components/LongAbsence\"\nimport { useUser } from \"src/providers/user\"\nimport apollo from \"src/helpers/apollo\"\nimport { USER_UPDATE } from \"src/graphql/queriesUser\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { handleError } from \"src/helpers/errors\"\nimport { formatRoles } from \"src/helpers/role\"\n\nconst Loading = styled.div`\n  height: 50vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 500px;\n  p,\n  .MuiTextField-root {\n    margin: 10px 0;\n  }\n  button {\n    margin: 15px auto;\n    display: block;\n  }\n`\n\nconst ProfilePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [openAbsenceDialog, setOpenAbsenceDialog] = useState(false)\n  const [values, setValues] = useState({\n    email: user?.email || \"\",\n    telephone: user?.telephone || \"\",\n  })\n\n  useEffect(() => {\n    if (user) {\n      setValues({\n        email: user.email,\n        telephone: user.telephone,\n      })\n    }\n  }, [user])\n\n  const handleInputChange = ({ target }: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = target\n    setValues({\n      ...values,\n      [name]: value,\n    })\n  }\n\n  const handleSave = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    setSaving(true)\n    try {\n      await apollo.mutate({\n        mutation: USER_UPDATE,\n        variables: { ...values, idUser: user?.id },\n      })\n      openDialog(\"Vos informations ont bien √©t√© mises √† jour\")\n    } catch (error) {\n      handleError(error)\n    }\n    setSaving(false)\n  }\n\n  const handleOpenAbsenceDialog = () => {\n    setOpenAbsenceDialog(true)\n  }\n\n  const handleCloseAbsenceDialog = () => {\n    setOpenAbsenceDialog(false)\n  }\n\n  if (!user) {\n    return (\n      <Loading>\n        <Loader />\n      </Loading>\n    )\n  }\n\n  return (\n    <Container>\n      <form onSubmit={handleSave}>\n        <Typography variant=\"h2\">\n          {user.prenom} {user.nom}\n        </Typography>\n        <p>{formatRoles(user.rolesChouette)}</p>\n        <TextField\n          name=\"telephone\"\n          label=\"T√©l√©phone\"\n          required\n          disabled={!user}\n          value={values.telephone}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Phone />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <TextField\n          name=\"email\"\n          label=\"Adresse e-mail\"\n          required\n          disabled={!user}\n          value={values.email}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Mail />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <Button color=\"primary\" variant=\"contained\" disabled={saving} type=\"submit\">\n          Enregistrer\n        </Button>\n        <Button color=\"primary\" variant=\"contained\" disabled={saving} onClick={handleOpenAbsenceDialog}>\n          Informer d‚Äôune absence prolong√©e\n        </Button>\n      </form>\n      <LongAbsence show={openAbsenceDialog} handleClose={handleCloseAbsenceDialog} />\n    </Container>\n  )\n}\n\nexport default ProfilePage\n","import { CreneauGenerique, Reserve } from \"src/types/model\"\nimport { IReserve } from \"src/types/app\"\n\nimport { useEffect, useState, ChangeEvent } from \"react\"\nimport { Button, FormGroup, FormControlLabel, Checkbox, TextField, Typography } from \"@material-ui/core\"\nimport { useQuery } from \"@apollo/client\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport apollo from \"src/helpers/apollo\"\nimport { handleError } from \"src/helpers/errors\"\nimport { RESERVE_CREATE, RESERVE_UPDATE, CRENEAUX_GENERIQUES, RESERVE_USER } from \"src/graphql/queries\"\nimport { useUser } from \"src/providers/user\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { formatTime, getDayOfWeek } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\nconst Loading = styled.div`\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst ReserveGrid = styled.div`\n  margin-top: 2rem;\n  @media screen and (min-width: 980px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\nconst Infos = styled.div`\n  margin: 20px 0 40px;\n`\n\ntype ResultCG = { creneauGeneriques: CreneauGenerique[] }\ntype ResultRU = { reserves: Reserve[] }\n\nconst ReservePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [information, setInformation] = useState<string>(\"\")\n  const [slots, setSlots] = useState<string[]>([])\n\n  const { data: dataCreneauxList, loading: loadingCL, error: errorCreneauxList } = useQuery<ResultCG>(\n    CRENEAUX_GENERIQUES\n  )\n  const { data: dataCreneauxUser, loading: loadingCU, error: errorReserve } = useQuery<ResultRU>(RESERVE_USER, {\n    skip: !user,\n    variables: { idUser: user?.id },\n  })\n  const loading = loadingCL || loadingCU\n\n  useEffect(() => {\n    if (dataCreneauxUser && dataCreneauxUser?.reserves.length > 0) {\n      setInformation(dataCreneauxUser.reserves[0].informations)\n      setSlots(dataCreneauxUser.reserves[0].creneauGeneriques.map((cg) => cg.id))\n    }\n  }, [dataCreneauxUser])\n\n  const queryError = errorCreneauxList || errorReserve\n  if (queryError) {\n    return <ErrorBlock error={queryError} />\n  }\n\n  const slotList: IReserve[] = []\n\n  if (dataCreneauxList) {\n    for (let day = 0; day < 7; day++) {\n      dataCreneauxList?.creneauGeneriques\n        .filter(({ jour, actif }) => jour === day && actif)\n        .forEach((slot) => {\n          const reserveFound = slotList.find((s) => s.day === day)\n          const startTime = new Date(slot.heureDebut).getTime()\n          if (reserveFound) {\n            const slotReserveFound = reserveFound.slots.find(({ time }) => time === startTime)\n            if (slotReserveFound) {\n              slotReserveFound.allSlotIds.push(slot.id)\n            } else {\n              reserveFound.slots.push({\n                time: startTime,\n                slotDisplayed: slot,\n                allSlotIds: [slot.id],\n              })\n            }\n          } else {\n            slotList.push({\n              day: day,\n              slots: [\n                {\n                  time: startTime,\n                  slotDisplayed: slot,\n                  allSlotIds: [slot.id],\n                },\n              ],\n            })\n          }\n        })\n    }\n  }\n\n  const handleInfoChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    setInformation(target.value)\n  }\n\n  const getSlots = (idCreneauGenerique: string) => {\n    let list: string[] = []\n    slotList.forEach((slot) => {\n      const selected = slot.slots.find((displayed) => displayed.slotDisplayed.id === idCreneauGenerique)\n      if (selected) {\n        list = selected.allSlotIds\n      }\n    })\n    return list\n  }\n\n  const handleCheckboxChange = (idCreneauGenerique: string, checked: boolean) => {\n    const temp = slots.slice()\n    if (checked) {\n      temp.push(...getSlots(idCreneauGenerique))\n      setSlots(temp)\n    } else {\n      getSlots(idCreneauGenerique).forEach((slot) => {\n        temp.splice(temp.indexOf(slot), 1)\n      })\n      setSlots(temp)\n    }\n  }\n\n  const handleSave = async () => {\n    setSaving(true)\n\n    const variables: Record<string, any> = {\n      user: user?.id,\n      informations: information,\n      creneauGenerique: slots,\n    }\n    if (dataCreneauxUser?.reserves.length) {\n      variables.id = dataCreneauxUser.reserves[0].id\n    }\n\n    try {\n      await apollo.mutate({\n        mutation: variables.id ? RESERVE_UPDATE : RESERVE_CREATE,\n        variables,\n      })\n\n      openDialog(\n        (variables.id\n          ? \"Votre inscription √† la r√©serve a bien √©t√© mise √† jour.\"\n          : \"Vous √™tes d√©sormais inscrit¬∑e √† la reserve.\") + \" Merci !\"\n      )\n    } catch (error) {\n      handleError(error)\n    }\n\n    setSaving(false)\n  }\n\n  return (\n    <>\n      <Typography variant=\"h2\">R√©serve</Typography>\n      {loading ? (\n        <Loading>\n          <Loader />\n        </Loading>\n      ) : (\n        <>\n          <ReserveGrid>\n            {slotList.map((reserve) => (\n              <FormGroup key={reserve.day}>\n                {getDayOfWeek(reserve.day)}\n                {reserve.slots.map(({ slotDisplayed }) => (\n                  <FormControlLabel\n                    key={slotDisplayed.id}\n                    control={\n                      <Checkbox\n                        color=\"default\"\n                        checked={slots.includes(slotDisplayed.id)}\n                        onChange={({ target }) => {\n                          handleCheckboxChange(slotDisplayed.id, target.checked)\n                        }}\n                      />\n                    }\n                    label={`${formatTime(slotDisplayed.heureDebut)} - ${formatTime(slotDisplayed.heureFin)}`}\n                  />\n                ))}\n              </FormGroup>\n            ))}\n          </ReserveGrid>\n          <Infos>\n            <TextField\n              multiline\n              disabled={loading}\n              label=\"Informations suppl√©mentaires (optionnel)\"\n              value={information}\n              onChange={handleInfoChange}\n              fullWidth\n            />\n          </Infos>\n          <Button disabled={saving} color=\"primary\" variant=\"contained\" onClick={handleSave}>\n            Enregistrer\n          </Button>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default ReservePage\n","import type { User } from \"src/types/model\"\n\nimport { Button } from \"@material-ui/core\"\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Grid } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport UserPiafs from \"src/components/UserPiafs\"\nimport { formatRoles } from \"src/helpers/role\"\n\nconst RightCol = styled(Grid)`\n  display: flex;\n  align-items: center;\n`\n\ninterface Props {\n  open: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n  data?: User\n}\n\nconst UserInfoDialog = ({ open, handleClose, data }: Props) => {\n  if (!data) {\n    return null\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">\n        {data.prenom} {data.nom.toUpperCase()}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          <Grid container>\n            <Grid item xs={6}>\n              <h3>Roles</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {formatRoles(data.rolesChouette)}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Statut</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.statut}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Compteur PIAFS</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.nbPiafEffectuees}/{data.nbPiafAttendues}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Absence longue dur√©e sans courses</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.absenceLongueDureeSansCourses ? \"oui\" : \"non\"}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Absence longue dur√©e avec courses</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.absenceLongueDureeCourses ? \"oui\" : \"non\"}\n            </RightCol>\n            <Grid item xs={12}>\n              <UserPiafs userId={data.id} validated={false} allowValidate={true} />\n            </Grid>\n          </Grid>\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\" variant=\"contained\">\n          Fermer\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default UserInfoDialog\n","import type { Role, User } from \"src/types/model\"\n\nimport { useState } from \"react\"\nimport { DataGrid, GridColumns, GridRowData, GridValueFormatterParams } from \"@material-ui/data-grid\"\nimport { useQuery } from \"@apollo/client\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport UserInfoDialog from \"src/components/UserInfoDialog\"\nimport { USERS } from \"src/graphql/queriesUser\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { formatRoles } from \"src/helpers/role\"\n\nconst StyledGrid = styled(DataGrid)`\n  margin-top: 16px;\n  height: calc(100vh - 150px);\n  .MuiDataGrid-row {\n    cursor: pointer;\n  }\n`\n\nconst booleanFormatter = ({ value }: GridValueFormatterParams) => (value ? \"oui\" : \"non\")\n\ntype Result = { users: User[] }\n\nconst COLUMNS: GridColumns = [\n  { field: \"nom\", headerName: \"Nom\", flex: 1 },\n  { field: \"prenom\", headerName: \"Prenom\", flex: 1 },\n  { field: \"statut\", headerName: \"Statut\", flex: 1 },\n  {\n    field: \"rolesChouette\",\n    headerName: \"Roles\",\n    flex: 2,\n    valueFormatter: ({ value }: GridValueFormatterParams) => formatRoles(value as Role[]),\n  },\n  {\n    field: \"absenceLongueDureeCourses\",\n    headerName: \"Absence avec courses\",\n    flex: 1,\n    valueFormatter: booleanFormatter,\n  },\n  {\n    field: \"absenceLongueDureeSansCourses\",\n    headerName: \"Absence sans courses\",\n    flex: 1,\n    valueFormatter: booleanFormatter,\n  },\n]\n\nconst Users = () => {\n  const { data, loading, error } = useQuery<Result>(USERS)\n  const [selectedRow, setSelectedRow] = useState<User>()\n  const [openDialog, setOpenDialog] = useState(false)\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  const rows = data.users.slice().sort((left, right) => (left.nom > right.nom ? 1 : -1))\n\n  const onRowClick = ({ row }: GridRowData) => {\n    setSelectedRow(row)\n    setOpenDialog(true)\n  }\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false)\n  }\n\n  return (\n    <>\n      <StyledGrid rows={rows} columns={COLUMNS} onRowClick={onRowClick} autoPageSize />\n      <UserInfoDialog open={openDialog} handleClose={handleCloseDialog} data={selectedRow} />\n    </>\n  )\n}\n\nexport default Users\n","import { Typography } from \"@material-ui/core\"\n\nimport Users from \"src/components/Users\"\n\nconst MagasinPage = () => {\n  return (\n    <>\n      <Typography variant=\"h2\">Groupe MAG</Typography>\n      <Users />\n    </>\n  )\n}\n\nexport default MagasinPage\n","const BdMPage = () => {\n  return <>BdM - en construction</>\n}\n\nexport default BdMPage\n","import { Link } from \"react-router-dom\"\n\nconst UniversalLink = ({ href, ...props }: React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  if (href?.startsWith(\"/\")) {\n    return <Link to={href} {...props} />\n  }\n  return <a href={href} {...props} />\n}\n\nexport default UniversalLink\n","import { useState } from \"react\"\nimport { useLocation } from \"react-router\"\nimport clsx from \"clsx\"\nimport { createStyles, makeStyles, useTheme } from \"@material-ui/core/styles\"\nimport {\n  styled,\n  useMediaQuery,\n  Drawer,\n  AppBar,\n  Toolbar,\n  List,\n  Typography,\n  Divider,\n  IconButton,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Button,\n  Box,\n  Chip,\n} from \"@material-ui/core\"\nimport {\n  Menu as MenuIcon,\n  ChevronLeft as ChevronLeftIcon,\n  ChevronRight as ChevronRightIcon,\n  Group as GroupIcon,\n  Person as PersonIcon,\n  // Replay as ReplayIcon,\n  ArrowBack as ArrowBackIcon,\n  Home as HomeIcon,\n  Event as EventIcon,\n  Storefront as StorefrontIcon,\n  CardMembership as CardMembershipIcon,\n} from \"@material-ui/icons\"\n\nimport Link from \"src/components/Link\"\nimport { useUser } from \"src/providers/user\"\nimport { hasRole } from \"src/helpers/role\"\nimport { TEST } from \"src/helpers/apollo\"\nimport { RoleId } from \"src/types/model\"\n\nconst DRAWER_WIDTH = 260\n\nconst Spacer = styled(Box)({\n  flexGrow: 1,\n})\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      marginLeft: DRAWER_WIDTH,\n      width: `calc(100% - ${DRAWER_WIDTH}px)`,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: 36,\n    },\n    hide: {\n      display: \"none\",\n    },\n    drawer: {\n      width: DRAWER_WIDTH,\n      flexShrink: 0,\n      whiteSpace: \"nowrap\",\n    },\n    drawerOpen: {\n      width: DRAWER_WIDTH,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    drawerClose: {\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      overflowX: \"hidden\",\n      width: theme.spacing(7) + 1,\n      [theme.breakpoints.up(\"sm\")]: {\n        width: theme.spacing(9) + 1,\n      },\n    },\n    toolbar: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-end\",\n      padding: theme.spacing(0, 1),\n      // necessary for content to be below app bar\n      ...theme.mixins.toolbar,\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n    },\n    menuItem: {\n      textDecoration: \"none\",\n      color: theme.palette.secondary.main,\n    },\n    activeItem: {\n      textDecoration: \"none\",\n      color: theme.palette.primary.main,\n    },\n  })\n)\n\nconst ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon, role: RoleId.Chouettos },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon, role: RoleId.Chouettos },\n  { title: \"R√©serve\", href: \"/reserve\", Icon: GroupIcon, role: RoleId.Chouettos },\n  /* {\n    title: \"R√©servation automatique\",\n    href: \"/auto\",\n    Icon: ReplayIcon,\n    role: RoleId.Chouettos,\n  },*/\n  { title: \"Mon profil\", href: \"/profile\", Icon: PersonIcon, role: RoleId.Chouettos },\n  { title: \"Groupe MAG\", href: \"/magasin\", Icon: StorefrontIcon, role: RoleId.AdminMag },\n  { title: \"Groupe BdM\", href: \"/bdm\", Icon: CardMembershipIcon, role: RoleId.AdminBdM },\n  {\n    title: \"Espace membre\",\n    href: \"https://espace-membres.lachouettecoop.fr/page/homepage\",\n    Icon: ArrowBackIcon,\n    role: RoleId.Chouettos,\n  },\n]\n\nconst Menu = () => {\n  const classes = useStyles()\n  const { user, logout } = useUser<true>()\n  const theme = useTheme()\n  const [open, setOpen] = useState(false)\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"))\n\n  const handleDrawerOpen = () => {\n    setOpen(true)\n  }\n\n  const handleDrawerClose = () => {\n    setOpen(false)\n  }\n\n  if (!matches) {\n    return null\n  }\n\n  const userRoles = user?.rolesChouette || []\n\n  return (\n    <div className={classes.root}>\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, {\n              [classes.hide]: open,\n            })}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Planning {TEST && <Chip label=\"TEST\" />}\n          </Typography>\n          <Spacer />\n          <Button onClick={logout} color=\"inherit\">\n            D√©connexion\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <Toolbar />\n      <Drawer\n        variant=\"permanent\"\n        className={clsx(classes.drawer, {\n          [classes.drawerOpen]: open,\n          [classes.drawerClose]: !open,\n        })}\n        classes={{\n          paper: clsx({\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          }),\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === \"rtl\" ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <ListItem>\n          <ListItemIcon>\n            <PersonIcon />\n          </ListItemIcon>\n          {user && <ListItemText primary={`${user.prenom} ${user.nom}`} />}\n        </ListItem>\n        <Divider />\n        <List>\n          {ITEMS.filter(({ role }) => hasRole(role, userRoles)).map(({ href, title, Icon }) => {\n            const active = pathname === href\n            return (\n              <Link className={active ? classes.activeItem : classes.menuItem} href={href} key={href}>\n                <ListItem button>\n                  <ListItemIcon>\n                    <Icon color={active ? \"primary\" : \"secondary\"} />\n                  </ListItemIcon>\n                  <ListItemText primary={title} />\n                </ListItem>\n              </Link>\n            )\n          })}\n        </List>\n      </Drawer>\n    </div>\n  )\n}\n\nexport default Menu\n","import { useState } from \"react\"\nimport { Link, useLocation } from \"react-router-dom\"\nimport { createStyles, useTheme, makeStyles } from \"@material-ui/core/styles\"\nimport {\n  useMediaQuery,\n  Menu,\n  MenuItem,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  AppBar,\n  Toolbar,\n  IconButton,\n} from \"@material-ui/core\"\nimport { MoreVert as MoreIcon, Group as GroupIcon, Event as EventIcon, Home as HomeIcon } from \"@material-ui/icons\"\n\nimport { RoleId } from \"src/types/model\"\nimport { hasRole } from \"src/helpers/role\"\nimport { useUser } from \"src/providers/user\"\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    appBar: {\n      top: \"auto\",\n      bottom: 0,\n    },\n    toolbar: {\n      justifyContent: \"space-between\",\n    },\n    label: {\n      // Aligns the content of the button vertically.\n      flexDirection: \"column\",\n    },\n    menu: {\n      \"& ul\": {\n        paddingTop: \"0 !important\",\n        paddingBottom: \"0 !important\",\n      },\n    },\n    textMenuDecoration: {\n      textDecoration: \"none\",\n    },\n    menuItem: {\n      color: \"rgba(255, 255, 255, 0.54)\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    activeItem: {\n      color: \"white\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    icon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"rgba(255, 255, 255, 0.54)\",\n      },\n    },\n    activeIcon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"white\",\n      },\n    },\n  })\n)\n\nconst MAIN_ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon, role: RoleId.Chouettos },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon, role: RoleId.Chouettos },\n  { title: \"R√©serve\", href: \"/reserve\", Icon: GroupIcon, role: RoleId.Chouettos },\n]\nconst EXTRA_ITEMS = [\n  //{ title: \"Auto\", href: \"/auto\", role: RoleId.Chouettos },\n  { title: \"Mon profil\", href: \"/profile\", role: RoleId.Chouettos },\n  { title: \"Espace membre\", href: \"/member\", role: RoleId.Chouettos },\n  { title: \"Groupe MAG\", href: \"/magasin\", role: RoleId.AdminMag },\n  { title: \"Groupe BdM\", href: \"/bdm\", role: RoleId.AdminBdM },\n]\n\nexport default function BottomAppBar() {\n  const classes = useStyles()\n  const { user, logout } = useUser<true>()\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null)\n  const theme = useTheme()\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.down(\"xs\"))\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  const userRoles = user?.rolesChouette || []\n\n  if (!matches) {\n    return null\n  }\n\n  return (\n    <>\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\n        <Toolbar className={classes.toolbar}>\n          {MAIN_ITEMS.filter(({ role }) => hasRole(role, userRoles)).map(({ href, title, Icon }) => {\n            const active = pathname === href\n            return (\n              <ListItem button className={classes.label} key={title} component={Link} to={href}>\n                <ListItemIcon className={active ? classes.activeIcon : classes.icon}>\n                  <Icon />\n                </ListItemIcon>\n                <ListItemText className={active ? classes.activeItem : classes.menuItem} primary={title} />\n              </ListItem>\n            )\n          })}\n          <Menu\n            id=\"simple-menu\"\n            className={classes.menu}\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n          >\n            {EXTRA_ITEMS.filter(({ role }) => hasRole(role, userRoles)).map(({ href, title }) => {\n              const active = pathname === href\n              return (\n                <MenuItem\n                  key={title}\n                  className={active ? classes.activeItem : classes.menuItem}\n                  onClick={handleClose}\n                  component={Link}\n                  to={href}\n                >\n                  {title}\n                </MenuItem>\n              )\n            })}\n\n            <MenuItem onClick={logout} key=\"Logout\" className={classes.menuItem} color=\"inherit\">\n              D√©connexion\n            </MenuItem>\n          </Menu>\n          <IconButton aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick} edge=\"end\" color=\"inherit\">\n            <MoreIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </>\n  )\n}\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { styled, Container } from \"@material-ui/core\"\n\nimport { DatePlanningProvider } from \"src/providers/datePlanning\"\nimport HomePage from \"src/pages/authenticated/Home\"\nimport PlanningPage from \"src/pages/authenticated/Planning\"\nimport ProfilePage from \"src/pages/authenticated/Profile\"\nimport ReservePage from \"src/pages/authenticated/Reserve\"\nimport MagasinPage from \"src/pages/authenticated/Magasin\"\nimport BdMPage from \"src/pages/authenticated/BdM\"\nimport Menu from \"src/components/menu\"\nimport MenuBottom from \"src/components/menuBottom\"\nimport { getParams } from \"src/helpers/request\"\n\nconst Content = styled(Container)(({ theme }) => ({\n  marginTop: theme.spacing(4),\n  marginBottom: theme.spacing(14),\n  paddingLeft: theme.spacing(1),\n  [theme.breakpoints.up(\"sm\")]: {\n    paddingLeft: theme.spacing(12),\n  },\n}))\n\nconst Authenticated = () => {\n  const { search } = useLocation()\n  const { next } = getParams(search)\n\n  return (\n    <DatePlanningProvider>\n      <Menu />\n      <Content>\n        <Switch>\n          <Route path=\"/home\">\n            <HomePage />\n          </Route>\n          <Route path=\"/planning\">\n            <PlanningPage />\n          </Route>\n          <Route path=\"/profile\">\n            <ProfilePage />\n          </Route>\n          <Route path=\"/reserve\">\n            <ReservePage />\n          </Route>\n          <Route path=\"/bdm\">\n            <BdMPage />\n          </Route>\n          <Route path=\"/magasin\">\n            <MagasinPage />\n          </Route>\n          <Redirect to={next || \"/home\"} />\n        </Switch>\n        <MenuBottom />\n      </Content>\n    </DatePlanningProvider>\n  )\n}\n\nexport default Authenticated\n","import { useEffect } from \"react\"\nimport { BrowserRouter } from \"react-router-dom\"\n\nimport { useUser } from \"src/providers/user\"\n\nimport Anonymous from \"src/pages/anonymous\"\nimport Authenticated from \"src/pages/authenticated\"\nimport { DialogProvider } from \"src/providers/dialog\"\n\nconst App = () => {\n  const { auth } = useUser()\n\n  useEffect(() => {\n    const redirect = window.confirm(`ATTENTION ! Cet outil n'est pas encore le planning officiel de La Chouette Coop !\nIl s'agit pour l'instant d'une version de d√©veloppement, avec des donn√©es de test.\nCliquez sur OK pour √™tre redirig√©¬∑e vers la page de l'espace membre sur laquelle se trouve le lien vers le planning actuel.`)\n\n    if (redirect) {\n      window.location.href = \"https://espace-membres.lachouettecoop.fr/page/tafs\"\n    }\n  }, [])\n\n  return (\n    <BrowserRouter>\n      <DialogProvider>{auth ? <Authenticated /> : <Anonymous />}</DialogProvider>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { ApolloProvider } from \"@apollo/client\"\n\nimport { ErrorBoundary } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { UserProvider } from \"src/providers/user\"\nimport ThemeProvider from \"src/providers/theme\"\nimport { RolesProvider } from \"src/providers/roles\"\nimport App from \"src/App\"\n\nReactDOM.render(\n  <ErrorBoundary>\n    <React.StrictMode>\n      <ThemeProvider>\n        <ApolloProvider client={apollo}>\n          <UserProvider>\n            <RolesProvider>\n              <App />\n            </RolesProvider>\n          </UserProvider>\n        </ApolloProvider>\n      </ThemeProvider>\n    </React.StrictMode>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}