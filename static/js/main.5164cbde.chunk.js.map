{"version":3,"sources":["helpers/errors.tsx","graphql/queriesUser.ts","providers/user.tsx","helpers/apollo.ts","images/logo_white.svg","providers/theme.tsx","helpers/request.ts","pages/anonymous/Login.tsx","pages/anonymous/index.tsx","providers/datePlanning.tsx","graphql/queries.ts","helpers/date.ts","components/Loader.tsx","types/model.ts","images/chouettos.png","components/PiafCircle.tsx","components/InfoDialog.tsx","providers/dialog.tsx","helpers/role.tsx","components/SlotDialog.tsx","components/Piaf.tsx","components/UserPiafs.tsx","components/ReplacementPiafs.tsx","pages/authenticated/Home.tsx","components/Slot.tsx","components/CalendarDay.tsx","components/Calendar.tsx","pages/authenticated/Planning.tsx","pages/authenticated/Profile.tsx","pages/authenticated/Reserve.tsx","components/UserInfoDialog.tsx","components/Users.tsx","pages/authenticated/Magasin.tsx","pages/authenticated/BdM.tsx","components/Link.tsx","components/menu.tsx","components/menuBottom.tsx","pages/authenticated/index.tsx","App.tsx","index.tsx"],"names":["apiKey","process","Bugsnag","start","releaseStage","enabledReleaseStages","appVersion","metadata","deployDate","Date","toString","deployAuthor","plugins","BugsnagPluginReact","handleError","error","console","alert","message","notify","Boundary","getPlugin","createErrorBoundary","React","Container","ErrorBlock","Typography","variant","aria-hidden","String","Text","ErrorMessage","ErrorBoundary","children","FallbackComponent","LOGGED_IN_USER","gql","USER_UPDATE","USERS","UserContext","createContext","STORAGE_KEY","getStoredUser","stored","localStorage","getItem","JSON","parse","UserProvider","useState","auth","setAuth","user","setUser","useEffect","apollo","query","variables","id","then","data","Provider","value","login","setItem","stringify","logout","removeItem","useUser","useContext","_path","_g","link","createHttpLink","uri","authLink","setContext","_","previous","headers","token","client","ApolloClient","concat","cache","InMemoryCache","TITLE_FONT","TEXT_FONT","THEME","createMuiTheme","typography","fontFamily","body1","fontSize","body2","subtitle1","subtitle2","h1","fontWeight","h2","h3","h4","h5","h6","palette","primary","main","secondary","contrastThreshold","tonalOffset","coreLocale","dataGridLocale","ThemeProvider","theme","CssBaseline","post","path","body","a","fetch","method","response","ok","HttpError","status","statusText","json","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogoWhite","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","ref","d","fill","transform","ForwardRef","Header","LoginPage","loading","setLoading","handleSubmit","event","preventDefault","FormData","currentTarget","userId","email","get","maxWidth","onSubmit","TextField","type","name","label","fullWidth","margin","Button","size","color","disabled","Anonymous","pathname","useLocation","Login","to","DatePlanningContext","getInitialStart","startOfMonth","getInitialEnd","endOfMonth","DatePlanningProvider","setStart","end","setEnd","goBack","date","subMonths","goForward","addMonths","goToday","SLOTS","PIAFS","PIAFS_COUNT","PLANNING","REGISTRATION_UPDATE","RESERVE_CREATE","RESERVE_UPDATE","RESERVE_USER","CRENEAUX_GENERIQUES","PIAF_CREATE","formatInFrench","pattern","format","locale","fr","formatDateLong","formatTime","WEEKDAYS","queryDate","RoleId","Loader","CircularProgress","STATUS_COLORS","available","replacement","occupied","IMAGES","Chouettos","getImg","role","img","PiafIcon","$status","grey","$role","getStatus","piaf","statut","piaffeur","PiafCircle","roleUniqueId","InfoDialog","open","handleClose","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","onClick","DialogContext","DialogProvider","setOpen","setTitle","setMessage","closeDialog","openDialog","newMessage","newTitle","useDialog","getIdRoleAccompagnateur","Caissier","Caissier_Acc","GrandHibou","GrandHibou_Acc","hasRole","roles","find","Caissier_Formation","GrandHibou_Formation","FORMATION_ROLES","hasRoleFormation","includes","formatRoles","map","libelle","join","getPiafCount","slot","after","startOfDay","startOfWeek","before","endOfDay","endOfWeek","piafs","filter","p","getRegistrationPiafId","replacementPiaf","CloseButton","IconButton","Title","PiafRow","Status","Contact","SlotInfo","show","piafCurrentUser","hideButtons","getTime","now","register","rolesChouette","piafId","mutate","mutation","idRoleAccompagnateur","idCreneau","idRole","unregister","Close","capitalize","prenom","nom","href","telephone","Piaf","creneau","useLazyQuery","load","titre","debut","fin","ListItem","button","ListItemAvatar","ListItemText","SlotDialog","UserPiafs","useQuery","startOfToday","slice","sort","left","right","List","ReplacementPiafs","addDays","otherPiafs","piafA","piafB","MyPlanning","Replacements","HomePage","nbPiafEffectuees","nbPiafAttendues","SELECTED_COLOR","ClickableSlot","$open","Slot","$when","CalendarDay","day","isToday","isPast","slots","DayPlaceholder","WeekRow","Calendar","list","weeks","eachWeekOfInterval","weekStartsOn","days","forEach","node","weekIndex","differenceInWeeks","week","getDay","push","index","Loading","Caption","CaptionTitle","Nav","ButtonArea","PlanningPage","useTheme","matches","useMediaQuery","breakpoints","up","textTodayButton","textBeforeButton","textAfterButton","startIcon","ArrowBackIos","isSameMonth","CalendarToday","endIcon","ArrowForwardIos","creneaus","Grid","container","item","xs","ProfilePage","saving","setSaving","values","setValues","handleInputChange","handleSave","idUser","required","onChange","InputProps","startAdornment","InputAdornment","position","Phone","Mail","ReserveGrid","Infos","ReservePage","information","setInformation","setSlots","dataCreneauxList","loadingCL","errorCreneauxList","skip","dataCreneauxUser","loadingCU","errorReserve","reserves","informations","creneauGeneriques","cg","queryError","slotList","jour","actif","reserveFound","s","startTime","heureDebut","slotReserveFound","time","allSlotIds","slotDisplayed","getSlots","idCreneauGenerique","selected","displayed","creneauGenerique","reserve","FormGroup","FormControlLabel","control","Checkbox","checked","temp","splice","handleCheckboxChange","heureFin","multiline","useStyles","makeStyles","createStyles","row","lineHeight","UserInfoDialog","classes","toUpperCase","className","absenceLongueDureeSansCourses","absenceLongueDureeCourses","StyledGrid","DataGrid","booleanFormatter","COLUMNS","field","headerName","flex","valueFormatter","Users","selectedRow","setSelectedRow","setOpenDialog","rows","users","columns","onRowClick","autoPageSize","MagasinPage","BdMPage","UniversalLink","startsWith","DRAWER_WIDTH","Spacer","styled","Box","flexGrow","root","display","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","toolbar","alignItems","justifyContent","padding","mixins","content","menuItem","textDecoration","activeItem","ITEMS","Icon","HomeIcon","EventIcon","GroupIcon","ReplayIcon","PersonIcon","StorefrontIcon","AdminMag","CardMembershipIcon","AdminBdM","ArrowBackIcon","Menu","userRoles","AppBar","clsx","Toolbar","aria-label","edge","noWrap","Drawer","paper","direction","ChevronRight","ChevronLeft","Divider","ListItemIcon","Person","active","Link","top","bottom","flexDirection","menu","paddingTop","paddingBottom","textMenuDecoration","backgroundColor","icon","activeIcon","MAIN_ITEMS","EXTRA_ITEMS","BottomAppBar","anchorEl","setAnchorEl","down","component","keepMounted","Boolean","MenuItem","aria-controls","aria-haspopup","Content","marginTop","marginBottom","paddingLeft","Authenticated","next","search","params","substr","split","part","tuple","decodeURIComponent","getParams","Home","Planning","Profile","Reserve","BdM","Magasin","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5164cbde.chunk.js","sourcesContent":["import React, { ErrorInfo, FC } from \"react\"\nimport Bugsnag from \"@bugsnag/js\"\nimport BugsnagPluginReact from \"@bugsnag/plugin-react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nconst apiKey = process.env.REACT_APP_BUGSNAG_KEY\n\nif (apiKey) {\n  Bugsnag.start({\n    apiKey,\n    releaseStage: process.env.NODE_ENV,\n    enabledReleaseStages: [\"production\"],\n    appVersion: process.env.REACT_APP_COMMIT,\n    metadata: {\n      deployDate: new Date().toString(),\n      deployAuthor: process.env.REACT_APP_AUTHOR,\n    },\n    plugins: [new BugsnagPluginReact()],\n  })\n}\n\n// TODO: show nicer message\nexport const handleError = (error: Error) => {\n  console.error(error)\n  alert(error.message)\n  if (apiKey) {\n    Bugsnag.notify(error)\n  }\n}\n\nconst Boundary = apiKey ? Bugsnag.getPlugin(\"react\")?.createErrorBoundary(React) : null\n\nconst Container = styled.div`\n  padding: 1rem;\n  h2 {\n    color: #e53935;\n    margin: 1rem 0;\n  }\n  code {\n    display: block;\n    margin-top: 3rem;\n    color: #aaa;\n  }\n`\n\n// https://github.com/bugsnag/bugsnag-js/blob/next/packages/plugin-react/types/bugsnag-plugin-react.d.ts\ninterface FallbackProps {\n  error: Error\n  info?: ErrorInfo\n  clearError?: () => void\n}\n\nexport const ErrorBlock = ({ error }: FallbackProps) => (\n  <Container>\n    <Typography variant=\"h2\">\n      <span aria-hidden>🐞</span>\n      <br />\n      Une erreur est survenue\n    </Typography>\n    <Typography>Essayez de recharger la page</Typography>\n    <code>{String(error)}</code>\n  </Container>\n)\n\nconst Text = styled.p`\n  color: #e53935;\n`\n\ninterface MessageProps {\n  error: Error\n}\n\nexport const ErrorMessage = ({ error }: MessageProps) => <Text>Erreur : {error.message}</Text>\n\nexport const ErrorBoundary: FC = ({ children }) =>\n  Boundary ? <Boundary FallbackComponent={ErrorBlock}>{children}</Boundary> : <>{children}</>\n","import { gql } from \"@apollo/client\"\n\nexport const LOGGED_IN_USER = gql`\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      username\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n    }\n  }\n`\nexport const USER_UPDATE = gql`\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String) {\n    updateUser(input: { id: $idUser, email: $email, telephone: $telephone }) {\n      user {\n        id\n        username\n        email\n        telephone\n      }\n    }\n  }\n`\n\nexport const USERS = gql`\n  query USERS {\n    users(enabled: true) {\n      id\n      nom\n      prenom\n      email\n      actif\n      rolesChouette {\n        id\n        libelle\n        roleUniqueId\n      }\n      statut\n      reserve {\n        id\n        informations\n        creneauGeneriques {\n          id\n          heureDebut\n          heureFin\n          jour\n        }\n      }\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      nbPiafEffectuees\n      nbPiafAttendues\n    }\n  }\n`\n","import type { User } from \"src/types/model\"\n\nimport { createContext, useContext, useState, FC, useEffect } from \"react\"\n\nimport { LOGGED_IN_USER } from \"src/graphql/queriesUser\"\nimport apollo from \"src/helpers/apollo\"\n\nexport interface Auth {\n  email: string\n  token: string\n  id: number\n}\n\nexport interface IUserContext<IsAuthenticated extends boolean = false> {\n  auth: IsAuthenticated extends true ? Auth : Auth | null\n  user: User | null\n  login: (auth: Auth) => void\n  logout: () => void\n}\n\nconst UserContext = createContext<IUserContext>({} as IUserContext)\n\nconst STORAGE_KEY = \"user\"\n\nexport const getStoredUser = () => {\n  const stored = localStorage.getItem(STORAGE_KEY)\n  if (!stored) {\n    return null\n  }\n  return JSON.parse(stored) as Auth\n}\n\nexport const UserProvider: FC = ({ children }) => {\n  const [auth, setAuth] = useState<Auth | null>(getStoredUser)\n  const [user, setUser] = useState<User | null>(null)\n\n  useEffect(() => {\n    if (auth) {\n      apollo\n        .query<{ user: User }>({\n          query: LOGGED_IN_USER,\n          variables: { id: `api/users/${auth.id}` },\n        })\n        .then(({ data }) => {\n          setUser(data.user)\n        })\n    }\n  }, [auth])\n\n  const login = (data: Auth) => {\n    setAuth(data)\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data))\n  }\n\n  const logout = () => {\n    setAuth(null)\n    localStorage.removeItem(STORAGE_KEY)\n  }\n\n  return <UserContext.Provider value={{ auth, user, login, logout }}>{children}</UserContext.Provider>\n}\n\nexport function useUser<IsAuthenticated extends boolean = false>() {\n  return useContext(UserContext) as IUserContext<IsAuthenticated>\n}\n","import { ApolloClient, createHttpLink, InMemoryCache } from \"@apollo/client\"\nimport { setContext } from \"@apollo/client/link/context\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nconst link = createHttpLink({\n  uri: `${process.env.REACT_APP_API}/api/graphql`,\n})\n\nconst authLink = setContext((_, previous) => {\n  const user = getStoredUser()\n  if (!user) {\n    return previous\n  }\n  return {\n    ...previous,\n    headers: {\n      ...previous.headers,\n      \"X-Auth-Token\": user.token,\n    },\n  }\n})\n\nconst client = new ApolloClient({\n  link: authLink.concat(link),\n  cache: new InMemoryCache(),\n})\n\nexport default client\n","var _path, _g;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoWhite(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 756,\n    height: 756,\n    viewBox: \"0 0 756 756\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z\",\n    fill: \"#314b3f\"\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1.33333 0 0 -1.33333 0 756)\",\n    fill: \"#314b3f\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoWhite);\nexport default __webpack_public_path__ + \"static/media/logo_white.6e9fcd91.svg\";\nexport { ForwardRef as ReactComponent };","import type { FC } from \"react\"\n\nimport { createMuiTheme, ThemeProvider as MUIThemeProvider, Theme as MUITheme } from \"@material-ui/core/styles\"\nimport { frFR as dataGridLocale } from \"@material-ui/data-grid\"\nimport { CssBaseline } from \"@material-ui/core\"\nimport { ThemeProvider as EmotionThemeProvider } from \"@emotion/react/macro\"\nimport { frFR as coreLocale } from \"@material-ui/core/locale\"\n\n// see public/index.html\nconst TITLE_FONT = \"Montserrat, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=titres-et-sous-titres\nconst TEXT_FONT = \"Cabin, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=texte\n\nconst MAIN_COLOR = \"#445448\" // https://style.lachouettecoop.fr/#/couleurs\nconst SECONDARY_COLOR = \"#9e9e9e\" // material grey 500\n\ndeclare module \"@emotion/react\" {\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  export interface Theme extends MUITheme {}\n}\n\nconst THEME = createMuiTheme(\n  {\n    typography: {\n      fontFamily: TEXT_FONT,\n      body1: {\n        fontFamily: TEXT_FONT,\n        fontSize: \"1rem\",\n      },\n      body2: {\n        fontFamily: TEXT_FONT,\n        fontSize: \"1rem\",\n      },\n      subtitle1: {\n        fontFamily: TITLE_FONT,\n      },\n      subtitle2: {\n        fontFamily: TITLE_FONT,\n      },\n      h1: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        fontSize: \"2.5rem\",\n      },\n      h2: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        fontSize: \"1.5rem\",\n      },\n      h3: {\n        fontFamily: TITLE_FONT,\n      },\n      h4: {\n        fontFamily: TITLE_FONT,\n      },\n      h5: {\n        fontFamily: TITLE_FONT,\n      },\n      h6: {\n        fontFamily: TITLE_FONT,\n      },\n    },\n    palette: {\n      primary: {\n        // light: will be calculated from palette.primary.main,\n        main: MAIN_COLOR,\n        // dark: will be calculated from palette.primary.main,\n        // contrastText: will be calculated to contrast with palette.primary.main\n      },\n      secondary: {\n        main: SECONDARY_COLOR,\n      },\n      // Used by `getContrastText()` to maximize the contrast between\n      // the background and the text.\n      contrastThreshold: 3,\n      // Used by the functions below to shift a color's luminance by approximately\n      // two indexes within its tonal palette.\n      // E.g., shift from Red 500 to Red 300 or Red 700.\n      tonalOffset: 0.2,\n    },\n  },\n  coreLocale,\n  dataGridLocale\n)\n\nconst ThemeProvider: FC = ({ children }) => (\n  <EmotionThemeProvider theme={THEME}>\n    <MUIThemeProvider theme={THEME}>\n      <CssBaseline />\n      {children}\n    </MUIThemeProvider>\n  </EmotionThemeProvider>\n)\n\nexport default ThemeProvider\n","import HttpError from \"standard-http-error\"\n\nexport const post = async (path: string, body: BodyInit) => {\n  const response = await fetch(`${process.env.REACT_APP_API}/${path}`, {\n    method: \"POST\",\n    body,\n  })\n  if (!response.ok) {\n    throw new HttpError(response.status, response.statusText)\n  }\n  return response.json()\n}\n\nexport const getParams = (search: string) => {\n  const params: Record<string, string> = {}\n  search\n    .substr(1)\n    .split(\"&\")\n    .forEach((part) => {\n      if (part) {\n        const tuple = part.split(\"=\")\n        if (tuple.length === 2) {\n          params[tuple[0]] = decodeURIComponent(tuple[1])\n        }\n      }\n    })\n  return params\n}\n","import { FormEvent, useState } from \"react\"\nimport { Container, TextField, Button, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { useUser, Auth } from \"src/providers/user\"\nimport { post } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\n\nimport { ReactComponent as Logo } from \"src/images/logo_white.svg\"\n\nconst Header = styled.div`\n  text-align: center;\n  svg {\n    width: 250px;\n    height: 250px;\n    margin: -20px 0;\n  }\n`\n\nconst LoginPage = () => {\n  const [loading, setLoading] = useState(false)\n  const { login } = useUser()\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const body = new FormData(event.currentTarget)\n    setLoading(true)\n    try {\n      const data = await post(\"login_api\", body)\n      const auth: Auth = {\n        id: data.userId,\n        email: body.get(\"username\") as string,\n        token: data.token,\n      }\n      login(auth)\n    } catch (error) {\n      handleError(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <Header>\n        <Logo />\n        <Typography variant=\"h1\">Planning</Typography>\n      </Header>\n      <form onSubmit={handleSubmit}>\n        <p>\n          Cette application permet de gérer le planning des PIAFs du magasin. Connectez-vous avec vos identifiants\n          habituels.\n        </p>\n        <TextField type=\"email\" name=\"username\" label=\"E-mail\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <TextField type=\"password\" name=\"password\" label=\"Mot de passe\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <Button type=\"submit\" fullWidth size=\"large\" variant=\"contained\" color=\"primary\" disabled={loading}>\n          Connexion\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default LoginPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Container } from \"@material-ui/core\"\n\nimport LoginPage from \"src/pages/anonymous/Login\"\n\nconst Anonymous = () => {\n  const { pathname } = useLocation()\n\n  return (\n    <Container>\n      <Switch>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Redirect to={`/login?next=${pathname}`} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Anonymous\n","import { createContext, useContext, useState, FC } from \"react\"\nimport { startOfMonth, endOfMonth, subMonths, addMonths } from \"date-fns\"\n\nexport interface IDatePlanningContext {\n  start: Date\n  end: Date\n  goBack: () => void\n  goForward: () => void\n  goToday: () => void\n}\n\nconst DatePlanningContext = createContext<IDatePlanningContext>({} as IDatePlanningContext)\n\nconst getInitialStart = () => startOfMonth(new Date())\nconst getInitialEnd = () => endOfMonth(new Date())\n\nexport const DatePlanningProvider: FC = ({ children }) => {\n  const [start, setStart] = useState<Date>(getInitialStart)\n  const [end, setEnd] = useState<Date>(getInitialEnd)\n\n  const goBack = () => {\n    const date = subMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goForward = () => {\n    const date = addMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goToday = () => {\n    setStart(getInitialStart)\n    setEnd(getInitialEnd)\n  }\n\n  return (\n    <DatePlanningContext.Provider value={{ start, end, goBack, goForward, goToday }}>\n      {children}\n    </DatePlanningContext.Provider>\n  )\n}\n\nexport function useDatePlanning() {\n  return useContext(DatePlanningContext) as IDatePlanningContext\n}\n","import { gql } from \"@apollo/client\"\n\nexport const SLOTS = gql`\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      debut\n      fin\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          prenom\n          nom\n        }\n      }\n    }\n  }\n`\n\nexport const PIAFS = gql`\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n      statut\n      pourvu\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        prenom\n        nom\n        username\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n`\n\nexport const PIAFS_COUNT = gql`\n  query PIAFS_COUNT($userId: String, $after: String, $before: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }) {\n      id\n      statut\n      creneau {\n        debut\n        fin\n      }\n    }\n  }\n`\n\nexport const PLANNING = gql`\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n        }\n      }\n    }\n  }\n`\n\nexport const REGISTRATION_UPDATE = gql`\n  mutation REGISTRATION_UPDATE($piafId: ID!, $userId: String!, $statut: String!) {\n    updatePiaf(input: { id: $piafId, piaffeur: $userId, statut: $statut }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n      }\n    }\n  }\n`\n\nexport const RESERVE_CREATE = gql`\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_UPDATE = gql`\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_USER = gql`\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n`\n\nexport const CRENEAUX_GENERIQUES = gql`\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n`\n\nexport const PIAF_CREATE = gql`\n  mutation PIAF_CREATE($idCreneau: String!, $idRole: String) {\n    createPiaf(input: { creneau: $idCreneau, role: $idRole, visible: true }) {\n      piaf {\n        id\n        creneau {\n          id\n        }\n        piaffeur {\n          id\n        }\n        role {\n          id\n        }\n      }\n    }\n  }\n`\n","import { format } from \"date-fns\"\nimport fr from \"date-fns/locale/fr\"\n\nconst formatInFrench = (date: Date | number | string, pattern: string) => {\n  if (typeof date === \"string\") {\n    date = new Date(date)\n  }\n  return format(date, pattern, { locale: fr })\n}\n\nexport const formatDateShort = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMM\")\nexport const formatDateLong = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMMM yyyy\")\n\nexport const formatMonthYear = (date: Date | number | string) => formatInFrench(date, \"MMMM yyyy\")\n\nexport const formatTime = (date: Date | number | string) => formatInFrench(date, \"HH:mm\")\n\nconst WEEKDAYS = [\"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\", \"Dimanche\"]\nexport const getDayOfWeek = (index: number) => WEEKDAYS[index]\n\nexport const queryDate = (date: Date | number) => format(date, \"yyyy-MM-dd\")\n","import styled from \"@emotion/styled/macro\"\nimport { CircularProgress } from \"@material-ui/core\"\n\nconst Loader = styled(CircularProgress)`\n  margin: 16px 0;\n`\n\nexport default Loader\n","export type ID = string\n\nexport enum RoleId {\n  GrandHibou = \"GH\",\n  Chouettos = \"CH\",\n  Caissier = \"CA\",\n  GrandHibou_Formation = \"GHF\",\n  Caissier_Formation = \"CAF\",\n  GrandHibou_Acc = \"GHA\",\n  Caissier_Acc = \"CAA\",\n  AdminMag = \"MAG\",\n  AdminBdM = \"BDM\",\n}\n\nexport interface Role {\n  id: ID\n  libelle: string\n  roleUniqueId: RoleId\n}\n\nexport interface CreneauGenerique {\n  id: ID\n  titre: string\n  frequence: string\n  jour: number\n  heureDebut: string // ISO datetime\n  heureFin: string // ISO datetime\n  actif: boolean\n}\n\nexport interface Poste {\n  id: ID\n  reservationChouettos: User\n  creneauGenerique: CreneauGenerique\n  role: Role\n}\n\nexport interface Reserve {\n  id: ID\n  informations: string\n  user: User\n  creneauGeneriques: CreneauGenerique[]\n}\n\nexport interface User {\n  id: ID\n  email: string\n  username: string\n  rolesChouette: Role[]\n  enabled: boolean\n  civilite: string\n  nom: string\n  prenom: string\n  telephone: string\n  codeBarre: string\n  domaineCompetence: string\n  photo: string\n  dateNaissance: string // ISO datetime\n  notes: string\n  actif: boolean // what’s the difference with \"enabled\"?\n  carteImprimee: boolean\n  gh: boolean // grand hibou\n  poste: Poste\n  statut: string\n  reserve: Reserve\n  absenceLongueDureeCourses: boolean\n  absenceLongueDureeSansCourses: boolean\n  nbPiafEffectuees: number\n  nbPiafAttendues: number\n}\n\nexport interface Creneau {\n  id: ID\n  titre: string\n  creneauGenerique: CreneauGenerique\n  debut: string // ISO datetime\n  fin: string // ISO datetime\n  informations: string\n  piafs: PIAF[]\n}\n\nexport interface PIAF {\n  id: ID\n  role: Role\n  piaffeur?: User\n  creneau: Creneau\n  visible: boolean\n  pourvu: boolean\n  statut: \"occupe\" | \"remplacement\" | \"\" | null // empty = available\n}\n","export default \"data:image/png;base64,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\"","import type { IStatus } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\n\nimport { PIAF, RoleId } from \"src/types/model\"\nimport chouettos from \"src/images/chouettos.png\"\n\nconst STATUS_COLORS: Record<IStatus, string> = {\n  available: \"white\",\n  replacement: \"orange\",\n  occupied: \"green\",\n}\n\nconst IMAGES: Partial<Record<RoleId, string>> = {\n  [RoleId.Chouettos]: chouettos,\n}\n\nconst getImg = (role?: RoleId) => {\n  if (role) {\n    const img = IMAGES[role]\n    if (img) {\n      return `url(${img})`\n    }\n  }\n}\n\nexport const PiafIcon = styled.span<{ $status: IStatus; $role?: RoleId }>`\n  flex-shrink: 0;\n  display: inline-block;\n  margin: 2px;\n  width: 2rem;\n  height: 2rem;\n  border: 2px solid ${({ $status }) => STATUS_COLORS[$status]};\n  border-radius: 50%;\n  background-color: ${({ theme }) => theme.palette.grey[300]};\n  background-image: ${({ $role }) => getImg($role) || \"none\"};\n  background-position: center;\n  background-size: 24px;\n  background-repeat: no-repeat;\n  line-height: 28px;\n  text-align: center;\n`\n\nexport const getStatus = (piaf: PIAF): IStatus => {\n  if (piaf.statut === \"remplacement\") {\n    return \"replacement\"\n  }\n  if (piaf.piaffeur) {\n    return \"occupied\"\n  }\n  return \"available\"\n}\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst PiafCircle = ({ piaf }: Props) => (\n  <PiafIcon $status={getStatus(piaf)} $role={piaf.role.roleUniqueId}>\n    {getImg(piaf.role.roleUniqueId) ? \"\" : piaf.role.roleUniqueId}\n  </PiafIcon>\n)\n\nexport default PiafCircle\n","import React from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogContentText from \"@material-ui/core/DialogContentText\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\n\ninterface Props {\n  open: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n  title: string\n  message: string\n}\n\nconst InfoDialog = ({ open, handleClose, title, message }: Props) => {\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">{message}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default InfoDialog\n","import { createContext, useContext, useState, FC } from \"react\"\n\nimport InfoDialog from \"src/components/InfoDialog\"\n\ninterface IDialogContext {\n  openDialog: (message: string, title?: string) => void\n  closeDialog: () => void\n}\n\nconst DialogContext = createContext({} as IDialogContext)\n\nexport const DialogProvider: FC = ({ children }) => {\n  const [open, setOpen] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [message, setMessage] = useState(\"\")\n\n  const openDialog = (newMessage: string, newTitle = \"\") => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    setOpen(true)\n  }\n\n  const closeDialog = () => {\n    setOpen(false)\n  }\n\n  return (\n    <DialogContext.Provider value={{ openDialog, closeDialog }}>\n      {children}\n      <InfoDialog open={open} handleClose={closeDialog} title={title} message={message}></InfoDialog>\n    </DialogContext.Provider>\n  )\n}\n\nexport const useDialog = () => useContext(DialogContext)\n","import { Role, RoleId } from \"src/types/model\"\n\nexport const getIdRoleAccompagnateur = (id: RoleId) => {\n  switch (id) {\n    case RoleId.Caissier:\n      return RoleId.Caissier_Acc\n    case RoleId.GrandHibou:\n      return RoleId.GrandHibou_Acc\n    default:\n      return null\n  }\n}\n\nexport const hasRole = (id: RoleId, roles: Role[]) => {\n  switch (id) {\n    case RoleId.Caissier:\n      return roles.find(\n        ({ roleUniqueId }) => roleUniqueId === RoleId.Caissier || roleUniqueId === RoleId.Caissier_Formation\n      )\n    case RoleId.GrandHibou:\n      return roles.find(\n        ({ roleUniqueId }) => roleUniqueId === RoleId.GrandHibou || roleUniqueId === RoleId.GrandHibou_Formation\n      )\n    default:\n      return roles.find(({ roleUniqueId }) => roleUniqueId === id)\n  }\n}\n\nconst FORMATION_ROLES = [RoleId.Caissier_Formation, RoleId.GrandHibou_Formation]\n\nexport const hasRoleFormation = (roles: Role[]) =>\n  roles.find(({ roleUniqueId }) => FORMATION_ROLES.includes(roleUniqueId))\n\nexport const formatRoles = (roles: Role[]) => roles.map(({ libelle }) => libelle).join(\", \")\n","import type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { Button, capitalize, Dialog, DialogContent, DialogTitle, IconButton } from \"@material-ui/core\"\nimport { Close } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\nimport { startOfWeek, endOfWeek, startOfDay, endOfDay } from \"date-fns\"\n\nimport { PIAF, RoleId, User } from \"src/types/model\"\nimport { formatTime, formatDateLong } from \"src/helpers/date\"\nimport { REGISTRATION_UPDATE, PIAFS_COUNT, PIAF_CREATE } from \"src/graphql/queries\"\nimport { useUser } from \"src/providers/user\"\nimport apollo from \"src/helpers/apollo\"\nimport Loader from \"src/components/Loader\"\nimport PiafCircle, { getStatus } from \"src/components/PiafCircle\"\nimport { handleError } from \"src/helpers/errors\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { getIdRoleAccompagnateur, hasRole, hasRoleFormation } from \"src/helpers/role\"\n\nconst MAX_PIAF_PER_WEEK = 3\nconst MAX_PIAF_PER_DAY = 2\n\ntype Result = { piafs: PIAF[] }\n\nconst getPiafCount = async (slot: ISlot, userId: string, type: \"week\" | \"day\") => {\n  const after = type === \"day\" ? startOfDay(slot.start) : startOfWeek(slot.start)\n  const before = type === \"day\" ? endOfDay(slot.start) : endOfWeek(slot.start)\n  const { data } = await apollo.query<Result>({\n    query: PIAFS_COUNT,\n    variables: { userId, after, before },\n  })\n  //The filter by statut on the database does not work\n  return data.piafs.filter((p) => p.statut === \"occupe\").length\n}\n\nconst getRegistrationPiafId = (slot: ISlot, piaf: PIAF) => {\n  const replacementPiaf = slot.piafs?.find(({ statut, role }) => statut === \"remplacement\" && role.id === piaf.role.id)\n  if (replacementPiaf) {\n    // If there is a PIAF with status \"remplacement\" and the same role,\n    // the user will be registered to it instead of the requested one.\n    return replacementPiaf.id\n  }\n  return piaf.id\n}\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  right: 8px;\n  top: 8px;\n`\nconst Title = styled.div`\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n    margin-left: 5px;\n  }\n`\nconst PiafRow = styled.div`\n  margin: 0 0 1rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n`\nconst Status = styled.div`\n  flex: 1;\n  margin: 0 8px;\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n  }\n`\nconst Contact = styled.div`\n  text-align: right;\n`\n\ninterface Props {\n  slot: ISlot\n  show: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nconst SlotInfo = ({ slot, show, handleClose }: Props) => {\n  const [loading, setLoading] = useState(false)\n  const { openDialog } = useDialog()\n  const { user } = useUser<true>()\n  const piafCurrentUser = slot.piafs?.find(({ piaffeur, statut }) => piaffeur?.id === user?.id && statut === \"occupe\")\n  const hideButtons = slot.start.getTime() < Date.now()\n\n  const register = async (piaf: PIAF) => {\n    setLoading(true)\n\n    try {\n      const roles = user?.rolesChouette\n      if (!roles || !hasRole(piaf.role.roleUniqueId, roles)) {\n        setLoading(false)\n        openDialog(`Pour t’inscrire à cette PIAF, tu dois d’abord passer la formation ${piaf.role.libelle}`)\n        return\n      }\n\n      const userId = (user as User).id\n\n      const piafOfWeek = await getPiafCount(slot, userId, \"week\")\n      if (piafOfWeek >= MAX_PIAF_PER_WEEK) {\n        setLoading(false)\n        openDialog(`Il n’est pas possible de s’inscrire à plus de ${MAX_PIAF_PER_WEEK} PIAF par semaine`)\n        return\n      }\n\n      const piafOfDay = await getPiafCount(slot, userId, \"day\")\n      if (piafOfDay >= MAX_PIAF_PER_DAY) {\n        setLoading(false)\n        openDialog(`Il n’est pas possible de s’inscrire à plus de ${MAX_PIAF_PER_DAY} PIAF par jour`)\n        return\n      }\n\n      const piafId = getRegistrationPiafId(slot, piaf)\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: { piafId, userId, statut: \"occupe\" },\n      })\n\n      if (hasRoleFormation(roles)) {\n        const idRoleAccompagnateur = getIdRoleAccompagnateur(piaf.role.roleUniqueId)\n        if (idRoleAccompagnateur) {\n          await apollo.mutate({\n            mutation: PIAF_CREATE,\n            variables: {\n              idCreneau: slot.id,\n              idRole: idRoleAccompagnateur,\n            },\n          })\n        } else {\n          console.error(\"PIAF formation sans role accompagnateur\")\n        }\n      }\n\n      openDialog(\"Inscription effectuée. Merci !\")\n    } catch (error) {\n      handleError(error)\n    }\n\n    setLoading(false)\n  }\n\n  const unregister = async (piaf: PIAF) => {\n    setLoading(true)\n\n    try {\n      const userId = (user as User).id\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: { piafId: piaf.id, userId, statut: \"remplacement\" },\n      })\n\n      openDialog(\"Désinscription effectuée : la PIAF est désormais en recherche de remplacement !\")\n    } catch (error) {\n      handleError(error)\n    }\n\n    setLoading(false)\n  }\n\n  return (\n    <Dialog open={show} onClose={handleClose} fullWidth>\n      <CloseButton onClick={handleClose}>\n        <Close />\n      </CloseButton>\n      <DialogTitle>\n        {capitalize(formatDateLong(slot.start))}\n        <br />\n        <Title>\n          <strong>\n            {formatTime(slot.start)}–{formatTime(slot.end)}\n          </strong>\n          <span>{slot.title}</span>\n        </Title>\n      </DialogTitle>\n      <DialogContent>\n        {slot.piafs ? (\n          slot.piafs.map((piaf) => {\n            const { id, role, piaffeur } = piaf\n            const status = getStatus(piaf)\n\n            return (\n              <PiafRow key={id}>\n                <PiafCircle piaf={piaf} />\n                <Status>\n                  {status === \"occupied\" && piaffeur ? `${piaffeur.prenom} ${piaffeur.nom}` : \"Place disponible\"}\n                  <br />\n                  <span>{role.libelle}</span>\n                </Status>\n                {status === \"occupied\" &&\n                  piafCurrentUser &&\n                  piafCurrentUser.role.roleUniqueId === RoleId.GrandHibou &&\n                  piaffeur &&\n                  piaffeur.id != user?.id && (\n                    //Show info contacts only if the current user is the GH of the slot\n                    <Contact>\n                      <a href={`mailto:${piaffeur.email}`}>{piaffeur.email}</a>\n                      <br />\n                      <a href={`tel:${piaffeur.telephone}`}>{piaffeur.telephone}</a>\n                    </Contact>\n                  )}\n                {status !== \"occupied\" && !piafCurrentUser && !hideButtons && (\n                  <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={() => register(piaf)}>\n                    S’inscrire\n                  </Button>\n                )}\n                {piaffeur?.id === user?.id && piaf.statut === \"occupe\" && !hideButtons && (\n                  <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={() => unregister(piaf)}>\n                    Demander un remplacement\n                  </Button>\n                )}\n              </PiafRow>\n            )\n          })\n        ) : (\n          <Loader />\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nexport default SlotInfo\n","import type { Creneau, PIAF } from \"src/types/model\"\nimport { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { ListItem, ListItemAvatar, ListItemText } from \"@material-ui/core\"\nimport { useLazyQuery } from \"@apollo/client\"\n\nimport { formatDateLong, formatTime } from \"src/helpers/date\"\nimport PiafCircle from \"src/components/PiafCircle\"\nimport SlotDialog from \"src/components/SlotDialog\"\nimport { SLOTS } from \"src/graphql/queries\"\n\ninterface Result {\n  creneau: Creneau\n}\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst Piaf = ({ piaf }: Props) => {\n  const { creneau } = piaf\n  const [open, setOpen] = useState(false)\n\n  const [load, { data }] = useLazyQuery<Result>(SLOTS, {\n    variables: { id: creneau.id },\n  })\n\n  const handleClick = () => {\n    setOpen(true)\n    load()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const slot: ISlot = {\n    id: creneau.id,\n    title: creneau.titre,\n    start: new Date(creneau.debut),\n    end: new Date(creneau.fin),\n    piafs: data?.creneau.piafs,\n  }\n\n  return (\n    <>\n      <ListItem key={piaf.id} button onClick={handleClick}>\n        <ListItemAvatar>\n          <PiafCircle piaf={piaf} />\n        </ListItemAvatar>\n        <ListItemText\n          primary={formatDateLong(slot.start)}\n          secondary={`de ${formatTime(slot.start)} à ${formatTime(slot.end)}`}\n        />\n      </ListItem>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </>\n  )\n}\n\nexport default Piaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { startOfToday } from \"date-fns\"\nimport { List } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { queryDate } from \"src/helpers/date\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport Loader from \"src/components/Loader\"\nimport Piaf from \"src/components/Piaf\"\n\ntype Result = { piafs: PIAF[] }\n\nconst UserPiafs = () => {\n  const { auth } = useUser<true>()\n\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: {\n      userId: `/api/users/${auth.id}`,\n      after: queryDate(startOfToday()),\n    },\n  })\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  if (!data.piafs.length) {\n    return <p>Aucune PIAF à venir. Inscrivez-vous sur le planning !</p>\n  }\n\n  const piafs = data.piafs.slice().sort((left, right) => (left.creneau.debut > right.creneau.debut ? 1 : -1))\n\n  return (\n    <List>\n      {piafs.map((piaf) => (\n        <Piaf key={piaf.id} piaf={piaf} />\n      ))}\n    </List>\n  )\n}\n\nexport default UserPiafs\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { startOfToday, addDays } from \"date-fns\"\nimport { List } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { queryDate } from \"src/helpers/date\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport Loader from \"src/components/Loader\"\nimport Piaf from \"src/components/Piaf\"\n\ntype Result = { piafs: PIAF[] }\n\nconst ReplacementPiafs = () => {\n  const { auth } = useUser<true>()\n\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: {\n      after: queryDate(startOfToday()),\n      before: queryDate(addDays(startOfToday(), 700)),\n      statut: \"remplacement\",\n    },\n  })\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  const otherPiafs = data.piafs\n    .filter((piaf) => piaf.piaffeur?.id !== `/api/users/${auth.id}`)\n    .sort((piafA, piafB) =>\n      new Date(piafA.creneau.debut).getTime() > new Date(piafB.creneau.debut).getTime() ? 1 : -1\n    )\n\n  if (!otherPiafs.length) {\n    return <p>Aucun remplacement à venir n’est demandé.</p>\n  }\n\n  return (\n    <>\n      <p>\n        Les créneaux ci dessous ne peuvent plus être effectués par un Chouettos, ils sont disponibles pour un\n        remplacement. N’hésites pas à te positionner, la personne que tu remplaces sera avertie par e-mail\n        instantanément !\n      </p>\n      <List>\n        {otherPiafs.map((piaf) => (\n          <Piaf key={piaf.id} piaf={piaf} />\n        ))}\n      </List>\n    </>\n  )\n}\n\nexport default ReplacementPiafs\n","import styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport UserPiafs from \"src/components/UserPiafs\"\nimport ReplacementPiafs from \"src/components/ReplacementPiafs\"\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  > div {\n    flex: 0 1 50%;\n    min-width: 300px;\n  }\n`\nconst Status = styled.div`\n  p {\n    font-size: 2.5rem;\n    &::first-letter {\n      text-transform: uppercase;\n    }\n    span {\n      font-size: 0.5em;\n    }\n    margin-bottom: 2rem;\n  }\n`\nconst MyPlanning = styled.div``\nconst Replacements = styled.div``\n\nconst HomePage = () => {\n  const { user } = useUser<true>()\n\n  return (\n    <Container>\n      <Status>\n        <Typography variant=\"h2\">Mon statut</Typography>\n        <Typography>\n          {user?.nbPiafEffectuees ?? \"…\"}/{user?.nbPiafAttendues ?? \"…\"} <span>PIAFs attendues</span>\n        </Typography>\n        <Typography variant=\"h2\">Je suis</Typography>\n        <Typography>{user?.statut || \"…\"}</Typography>\n      </Status>\n      <MyPlanning>\n        <Typography variant=\"h2\">Mes prochaines PIAFs</Typography>\n        <UserPiafs />\n      </MyPlanning>\n      <Replacements>\n        <Typography variant=\"h2\">Remplacements</Typography>\n        <ReplacementPiafs />\n      </Replacements>\n    </Container>\n  )\n}\n\nexport default HomePage\n","import type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport styled from \"@emotion/styled/macro\"\n\nimport SlotDialog from \"src/components/SlotDialog\"\nimport { formatTime } from \"src/helpers/date\"\nimport PiafCircle from \"src/components/PiafCircle\"\n\nconst SELECTED_COLOR = \"#FFFFAA\"\n\nconst ClickableSlot = styled.button<{ $open: boolean }>`\n  width: 100%;\n  border: none;\n  background-color: ${({ $open }) => ($open ? SELECTED_COLOR : \"transparent\")};\n  padding: 5px;\n  text-align: left;\n  font-size: inherit;\n  line-height: inherit;\n  font: inherit;\n  cursor: pointer;\n  &:focus {\n    background-color: ${SELECTED_COLOR};\n    outline: none;\n  }\n`\nconst Title = styled.div`\n  span {\n    color: gray;\n  }\n`\nconst List = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 -2px;\n`\n\ninterface Props {\n  slot: ISlot\n}\n\nconst Slot = ({ slot }: Props) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClick = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ClickableSlot $open={open} onClick={handleClick}>\n        <Title>\n          <strong>\n            {formatTime(slot.start)}–{formatTime(slot.end)}\n          </strong>\n          <br />\n          <span>{slot.title}</span>\n        </Title>\n        <List>\n          {slot.piafs?.map((piaf) => (\n            <PiafCircle key={piaf.id} piaf={piaf} />\n          ))}\n        </List>\n      </ClickableSlot>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </>\n  )\n}\n\nexport default Slot\n","import type { IDay } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { isPast, isToday } from \"date-fns\"\n\nimport Slot from \"src/components/Slot\"\nimport { formatDateShort } from \"src/helpers/date\"\n\ntype TimeStatus = \"past\" | \"present\" | \"future\"\n\nconst Container = styled.div<{ $when: TimeStatus }>`\n  opacity: ${({ $when }) => ($when === \"past\" ? 0.5 : 1)};\n  border: 1px solid gray;\n  min-height: 80px;\n  background-color: ${({ $when }) => ($when === \"present\" ? \"#d0d9d0\" : \"#eee\")};\n`\nconst Title = styled.h3`\n  margin: 0 5px;\n  font-weight: 500;\n  text-transform: capitalize;\n`\nconst List = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n`\n\ninterface Props {\n  day: IDay\n}\n\nconst CalendarDay = ({ day }: Props) => {\n  return (\n    <Container $when={isToday(day.start) ? \"present\" : isPast(day.start) ? \"past\" : \"future\"}>\n      <Title>{formatDateShort(day.start)}</Title>\n      <List>\n        {day.slots.map((slot) => (\n          <Slot slot={slot} key={slot.id}></Slot>\n        ))}\n      </List>\n    </Container>\n  )\n}\n\nexport default CalendarDay\n\nexport const DayPlaceholder = () => <Container $when=\"past\" />\n","import type { Creneau } from \"src/types/model\"\nimport type { IWeek } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { addDays, differenceInWeeks, eachWeekOfInterval, getDay } from \"date-fns\"\n\nimport CalendarDay, { DayPlaceholder } from \"src/components/CalendarDay\"\n\nconst Container = styled.div`\n  border: 1px solid gray;\n  margin: 0;\n  padding: 0;\n`\nconst WeekRow = styled.div`\n  @media screen and (min-width: 800px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\n\ninterface Props {\n  start: Date\n  end: Date\n  list?: Creneau[]\n}\n\nconst Calendar = ({ start, end, list }: Props) => {\n  if (!list) {\n    return null\n  }\n\n  const weeks: IWeek[] = eachWeekOfInterval({ start, end }, { weekStartsOn: 1 }).map((date) => ({\n    start: date,\n    days: [0, 1, 2, 3, 4, 5, 6].map((i) => ({ start: addDays(date, i), slots: [] })),\n  }))\n\n  list.forEach((node) => {\n    const date = new Date(node.debut)\n    const weekIndex = differenceInWeeks(date, weeks[0].start)\n    const week = weeks[weekIndex]\n    const day = (getDay(date) || 7) - 1 // Monday = 0, ..., Sunday = 6\n    const piafs = node.piafs.slice().sort((left, right) => (left.role.id > right.role.id ? 1 : -1))\n\n    week.days[day].slots.push({\n      id: node.id,\n      title: node.titre,\n      start: date,\n      end: new Date(node.fin),\n      piafs,\n    })\n  })\n\n  return (\n    <Container>\n      {weeks.map((week, index) => (\n        <WeekRow key={index}>\n          {week.days.map((day, i) =>\n            day.start >= start && day.start < end ? <CalendarDay day={day} key={i} /> : <DayPlaceholder key={i} />\n          )}\n        </WeekRow>\n      ))}\n    </Container>\n  )\n}\n\nexport default Calendar\n","import { useQuery } from \"@apollo/client\"\nimport { Button, Grid, Typography, useMediaQuery, useTheme } from \"@material-ui/core\"\nimport { ArrowBackIos, ArrowForwardIos, CalendarToday } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\nimport { isSameMonth } from \"date-fns\"\n\nimport { Creneau, RoleId } from \"src/types/model\"\nimport { useDatePlanning } from \"src/providers/datePlanning\"\nimport { PLANNING } from \"src/graphql/queries\"\nimport Loader from \"src/components/Loader\"\nimport Calendar from \"src/components/Calendar\"\nimport { PiafIcon } from \"src/components/PiafCircle\"\nimport { formatMonthYear } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\ntype Result = { creneaus: Creneau[] }\n\nconst Loading = styled.div`\n  border: 2px solid gray;\n  height: 500px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Caption = styled.div`\n  border: 1px solid gray;\n  border-radius: 10px;\n  max-width: 500px;\n  margin: 20px 0 100px auto;\n  padding: 10px;\n  text-align: center;\n`\nconst CaptionTitle = styled.h3`\n  text-align: left;\n  margin-top: 0;\n`\nconst Nav = styled.nav`\n  display: flex;\n  margin-bottom: 1rem;\n  button:not(:first-of-type) {\n    margin-left: 1rem;\n  }\n  h2 {\n    flex: 1;\n    text-transform: capitalize;\n  }\n`\n\nconst ButtonArea = styled.div`\n  display: flex;\n  justify-content: end;\n`\n\nconst PlanningPage = () => {\n  const { goBack, goForward, goToday, start, end } = useDatePlanning()\n  const theme = useTheme()\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"))\n  const textTodayButton = matches ? \"Aujourd’hui\" : \"\"\n  const textBeforeButton = matches ? \"Précédent\" : \"\"\n  const textAfterButton = matches ? \"Suivant\" : \"\"\n\n  const { data, loading, error } = useQuery<Result>(PLANNING, {\n    variables: { after: start, before: end },\n  })\n\n  if (error) {\n    return <ErrorBlock error={error} />\n  }\n\n  return (\n    <>\n      <Nav>\n        <Typography variant=\"h2\">{formatMonthYear(start)}</Typography>\n        <ButtonArea>\n          <Button disabled={loading} variant=\"contained\" color=\"primary\" startIcon={<ArrowBackIos />} onClick={goBack}>\n            {textBeforeButton}\n          </Button>\n          <Button\n            disabled={loading || isSameMonth(start, new Date())}\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<CalendarToday />}\n            onClick={goToday}\n          >\n            {textTodayButton}\n          </Button>\n          <Button\n            disabled={loading}\n            variant=\"contained\"\n            color=\"primary\"\n            endIcon={<ArrowForwardIos />}\n            onClick={goForward}\n          >\n            {textAfterButton}\n          </Button>\n        </ButtonArea>\n      </Nav>\n      {loading ? (\n        <Loading>\n          <Loader />\n        </Loading>\n      ) : (\n        <Calendar start={start} end={end} list={data?.creneaus} />\n      )}\n      <Caption>\n        <CaptionTitle>Légende</CaptionTitle>\n        <Grid container>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\" />\n            <div>PIAF disponible</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"replacement\" />\n            <div>Cherche remplaçant·e</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"occupied\" />\n            <div>PIAF occupée</div>\n          </Grid>\n        </Grid>\n        <br />\n        <Grid container>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\" $role={RoleId.Chouettos}>\n               \n            </PiafIcon>\n            <div>Chouettos</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\">CA</PiafIcon>\n            <div>Caissier·ère</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\">GH</PiafIcon>\n            <div>Grand Hibou</div>\n          </Grid>\n        </Grid>\n      </Caption>\n    </>\n  )\n}\n\nexport default PlanningPage\n","import { useEffect, useState } from \"react\"\nimport { Phone, Mail } from \"@material-ui/icons\"\nimport { Button, InputAdornment, TextField, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport { useUser } from \"src/providers/user\"\nimport { handleError } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { USER_UPDATE } from \"src/graphql/queriesUser\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { formatRoles } from \"src/helpers/role\"\n\nconst Loading = styled.div`\n  height: 50vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 500px;\n  p,\n  .MuiTextField-root {\n    margin: 10px 0;\n  }\n  button {\n    margin: 15px auto;\n    display: block;\n  }\n`\n\nconst ProfilePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [values, setValues] = useState({\n    email: user?.email || \"\",\n    telephone: user?.telephone || \"\",\n  })\n\n  useEffect(() => {\n    if (user) {\n      setValues({\n        email: user.email,\n        telephone: user.telephone,\n      })\n    }\n  }, [user])\n\n  const handleInputChange = ({ target }: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = target\n    setValues({\n      ...values,\n      [name]: value,\n    })\n  }\n\n  const handleSave = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    setSaving(true)\n    try {\n      await apollo.mutate({\n        mutation: USER_UPDATE,\n        variables: { ...values, idUser: user?.id },\n      })\n      openDialog(\"Vos informations ont bien été mises à jour\")\n    } catch (error) {\n      handleError(error)\n    }\n    setSaving(false)\n  }\n\n  if (!user) {\n    return (\n      <Loading>\n        <Loader />\n      </Loading>\n    )\n  }\n\n  return (\n    <Container>\n      <form onSubmit={handleSave}>\n        <Typography variant=\"h2\">\n          {user.prenom} {user.nom}\n        </Typography>\n        <p>{formatRoles(user.rolesChouette)}</p>\n        <TextField\n          name=\"telephone\"\n          label=\"Téléphone\"\n          required\n          disabled={!user}\n          value={values.telephone}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Phone />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <TextField\n          name=\"email\"\n          label=\"Adresse e-mail\"\n          required\n          disabled={!user}\n          value={values.email}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Mail />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <Button color=\"primary\" variant=\"contained\" disabled={saving} type=\"submit\">\n          Enregistrer\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default ProfilePage\n","import { CreneauGenerique, Reserve } from \"src/types/model\"\nimport { IReserve } from \"src/types/app\"\n\nimport { useEffect, useState, ChangeEvent } from \"react\"\nimport { Button, FormGroup, FormControlLabel, Checkbox, TextField, Typography } from \"@material-ui/core\"\nimport { useQuery } from \"@apollo/client\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport apollo from \"src/helpers/apollo\"\nimport { handleError } from \"src/helpers/errors\"\nimport { RESERVE_CREATE, RESERVE_UPDATE, CRENEAUX_GENERIQUES, RESERVE_USER } from \"src/graphql/queries\"\nimport { useUser } from \"src/providers/user\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { formatTime, getDayOfWeek } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\nconst Loading = styled.div`\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst ReserveGrid = styled.div`\n  margin-top: 2rem;\n  @media screen and (min-width: 980px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\nconst Infos = styled.div`\n  margin: 20px 0 40px;\n`\n\ntype ResultCG = { creneauGeneriques: CreneauGenerique[] }\ntype ResultRU = { reserves: Reserve[] }\n\nconst ReservePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [information, setInformation] = useState<string>(\"\")\n  const [slots, setSlots] = useState<string[]>([])\n\n  const { data: dataCreneauxList, loading: loadingCL, error: errorCreneauxList } = useQuery<ResultCG>(\n    CRENEAUX_GENERIQUES\n  )\n  const { data: dataCreneauxUser, loading: loadingCU, error: errorReserve } = useQuery<ResultRU>(RESERVE_USER, {\n    skip: !user,\n    variables: { idUser: user?.id },\n  })\n  const loading = loadingCL || loadingCU\n\n  useEffect(() => {\n    if (dataCreneauxUser && dataCreneauxUser?.reserves.length > 0) {\n      setInformation(dataCreneauxUser.reserves[0].informations)\n      setSlots(dataCreneauxUser.reserves[0].creneauGeneriques.map((cg) => cg.id))\n    }\n  }, [dataCreneauxUser])\n\n  const queryError = errorCreneauxList || errorReserve\n  if (queryError) {\n    return <ErrorBlock error={queryError} />\n  }\n\n  const slotList: IReserve[] = []\n\n  if (dataCreneauxList) {\n    for (let day = 0; day < 7; day++) {\n      dataCreneauxList?.creneauGeneriques\n        .filter(({ jour, actif }) => jour === day && actif)\n        .forEach((slot) => {\n          const reserveFound = slotList.find((s) => s.day === day)\n          const startTime = new Date(slot.heureDebut).getTime()\n          if (reserveFound) {\n            const slotReserveFound = reserveFound.slots.find(({ time }) => time === startTime)\n            if (slotReserveFound) {\n              slotReserveFound.allSlotIds.push(slot.id)\n            } else {\n              reserveFound.slots.push({\n                time: startTime,\n                slotDisplayed: slot,\n                allSlotIds: [slot.id],\n              })\n            }\n          } else {\n            slotList.push({\n              day: day,\n              slots: [\n                {\n                  time: startTime,\n                  slotDisplayed: slot,\n                  allSlotIds: [slot.id],\n                },\n              ],\n            })\n          }\n        })\n    }\n  }\n\n  const handleInfoChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    setInformation(target.value)\n  }\n\n  const getSlots = (idCreneauGenerique: string) => {\n    let list: string[] = []\n    slotList.forEach((slot) => {\n      const selected = slot.slots.find((displayed) => displayed.slotDisplayed.id === idCreneauGenerique)\n      if (selected) {\n        list = selected.allSlotIds\n      }\n    })\n    return list\n  }\n\n  const handleCheckboxChange = (idCreneauGenerique: string, checked: boolean) => {\n    const temp = slots.slice()\n    if (checked) {\n      temp.push(...getSlots(idCreneauGenerique))\n      setSlots(temp)\n    } else {\n      getSlots(idCreneauGenerique).forEach((slot) => {\n        temp.splice(temp.indexOf(slot), 1)\n      })\n      setSlots(temp)\n    }\n  }\n\n  const handleSave = async () => {\n    setSaving(true)\n\n    const variables: Record<string, any> = {\n      user: user?.id,\n      informations: information,\n      creneauGenerique: slots,\n    }\n    if (dataCreneauxUser?.reserves.length) {\n      variables.id = dataCreneauxUser.reserves[0].id\n    }\n\n    try {\n      await apollo.mutate({\n        mutation: variables.id ? RESERVE_UPDATE : RESERVE_CREATE,\n        variables,\n      })\n\n      openDialog(\n        (variables.id\n          ? \"Votre inscription à la réserve a bien été mise à jour.\"\n          : \"Vous êtes désormais inscrit·e à la reserve.\") + \" Merci !\"\n      )\n    } catch (error) {\n      handleError(error)\n    }\n\n    setSaving(false)\n  }\n\n  return (\n    <>\n      <Typography variant=\"h2\">Réserve</Typography>\n      {loading ? (\n        <Loading>\n          <Loader />\n        </Loading>\n      ) : (\n        <>\n          <ReserveGrid>\n            {slotList.map((reserve) => (\n              <FormGroup key={reserve.day}>\n                {getDayOfWeek(reserve.day)}\n                {reserve.slots.map(({ slotDisplayed }) => (\n                  <FormControlLabel\n                    key={slotDisplayed.id}\n                    control={\n                      <Checkbox\n                        color=\"default\"\n                        checked={slots.includes(slotDisplayed.id)}\n                        onChange={({ target }) => {\n                          handleCheckboxChange(slotDisplayed.id, target.checked)\n                        }}\n                      />\n                    }\n                    label={`${formatTime(slotDisplayed.heureDebut)} - ${formatTime(slotDisplayed.heureFin)}`}\n                  />\n                ))}\n              </FormGroup>\n            ))}\n          </ReserveGrid>\n          <Infos>\n            <TextField\n              multiline\n              disabled={loading}\n              label=\"Informations supplémentaires (optionnel)\"\n              value={information}\n              onChange={handleInfoChange}\n              fullWidth\n            />\n          </Infos>\n          <Button disabled={saving} color=\"primary\" variant=\"contained\" onClick={handleSave}>\n            Enregistrer\n          </Button>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default ReservePage\n","import { Button } from \"@material-ui/core\"\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Grid } from \"@material-ui/core\"\nimport { User } from \"src/types/model\"\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\"\nimport { formatRoles } from \"src/helpers/role\"\n\n// TODO: use @emotion/styled\nconst useStyles = makeStyles(() =>\n  createStyles({\n    row: {\n      lineHeight: 4,\n    },\n  })\n)\n\ninterface Props {\n  open: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n  data?: User\n}\n\nconst UserInfoDialog = ({ open, handleClose, data }: Props) => {\n  const classes = useStyles()\n\n  if (!data) {\n    return null\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">\n        {data.prenom} {data.nom.toUpperCase()}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          <Grid container>\n            <Grid item xs={6}>\n              <h3>Roles</h3>\n            </Grid>\n            <Grid className={classes.row} item xs={6}>\n              {formatRoles(data.rolesChouette)}\n            </Grid>\n            <Grid item xs={6}>\n              <h3>Statut</h3>\n            </Grid>\n            <Grid className={classes.row} item xs={6}>\n              {data.statut}\n            </Grid>\n            <Grid item xs={6}>\n              <h3>Compteur PIAFS</h3>\n            </Grid>\n            <Grid className={classes.row} item xs={6}>\n              {data.nbPiafEffectuees}/{data.nbPiafAttendues}\n            </Grid>\n            <Grid item xs={6}>\n              <h3>Absence longue durée sans courses</h3>\n            </Grid>\n            <Grid className={classes.row} item xs={6}>\n              {data.absenceLongueDureeSansCourses ? \"oui\" : \"non\"}\n            </Grid>\n            <Grid item xs={6}>\n              <h3>Absence longue durée avec courses</h3>\n            </Grid>\n            <Grid className={classes.row} item xs={6}>\n              {data.absenceLongueDureeCourses ? \"oui\" : \"non\"}\n            </Grid>\n          </Grid>\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\" variant=\"contained\">\n          Fermer\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default UserInfoDialog\n","import { DataGrid, GridColumns, GridRowData, GridValueFormatterParams } from \"@material-ui/data-grid\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { useState } from \"react\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { Role, User } from \"src/types/model\"\nimport { USERS } from \"src/graphql/queriesUser\"\nimport Loader from \"src/components/Loader\"\nimport UserInfoDialog from \"src/components/UserInfoDialog\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { formatRoles } from \"src/helpers/role\"\n\nconst StyledGrid = styled(DataGrid)`\n  margin-top: 16px;\n  height: calc(100vh - 150px);\n  .MuiDataGrid-row {\n    cursor: pointer;\n  }\n`\n\nconst booleanFormatter = ({ value }: GridValueFormatterParams) => (value ? \"oui\" : \"non\")\n\ntype Result = { users: User[] }\n\nconst COLUMNS: GridColumns = [\n  { field: \"nom\", headerName: \"Nom\", flex: 1 },\n  { field: \"prenom\", headerName: \"Prenom\", flex: 1 },\n  { field: \"statut\", headerName: \"Statut\", flex: 1 },\n  {\n    field: \"rolesChouette\",\n    headerName: \"Roles\",\n    flex: 2,\n    valueFormatter: ({ value }: GridValueFormatterParams) => formatRoles(value as Role[]),\n  },\n  {\n    field: \"absenceLongueDureeCourses\",\n    headerName: \"Absence avec courses\",\n    flex: 1,\n    valueFormatter: booleanFormatter,\n  },\n  {\n    field: \"absenceLongueDureeSansCourses\",\n    headerName: \"Absence sans courses\",\n    flex: 1,\n    valueFormatter: booleanFormatter,\n  },\n]\n\nconst Users = () => {\n  const { data, loading, error } = useQuery<Result>(USERS)\n  const [selectedRow, setSelectedRow] = useState<User>()\n  const [openDialog, setOpenDialog] = useState(false)\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  const rows = data.users.slice().sort((left, right) => (left.nom > right.nom ? 1 : -1))\n\n  const onRowClick = ({ row }: GridRowData) => {\n    setSelectedRow(row)\n    setOpenDialog(true)\n  }\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false)\n  }\n\n  return (\n    <>\n      <StyledGrid rows={rows} columns={COLUMNS} onRowClick={onRowClick} autoPageSize />\n      <UserInfoDialog open={openDialog} handleClose={handleCloseDialog} data={selectedRow} />\n    </>\n  )\n}\n\nexport default Users\n","import { Typography } from \"@material-ui/core\"\n\nimport Users from \"src/components/Users\"\n\nconst MagasinPage = () => {\n  return (\n    <>\n      <Typography variant=\"h2\">Groupe MAG</Typography>\n      <Users />\n    </>\n  )\n}\n\nexport default MagasinPage\n","const BdMPage = () => {\n  return <>BdM</>\n}\n\nexport default BdMPage\n","import { Link } from \"react-router-dom\"\n\nconst UniversalLink = ({ href, ...props }: React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  if (href?.startsWith(\"/\")) {\n    return <Link to={href} {...props} />\n  }\n  return <a href={href} {...props} />\n}\n\nexport default UniversalLink\n","import { useState } from \"react\"\nimport { useLocation } from \"react-router\"\nimport clsx from \"clsx\"\nimport { createStyles, makeStyles, useTheme } from \"@material-ui/core/styles\"\nimport {\n  styled,\n  useMediaQuery,\n  Drawer,\n  AppBar,\n  Toolbar,\n  List,\n  Typography,\n  Divider,\n  IconButton,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Button,\n  Box,\n} from \"@material-ui/core\"\nimport {\n  Menu as MenuIcon,\n  ChevronLeft as ChevronLeftIcon,\n  ChevronRight as ChevronRightIcon,\n  Group as GroupIcon,\n  Person as PersonIcon,\n  Replay as ReplayIcon,\n  ArrowBack as ArrowBackIcon,\n  Home as HomeIcon,\n  Event as EventIcon,\n  Storefront as StorefrontIcon,\n  CardMembership as CardMembershipIcon,\n} from \"@material-ui/icons\"\n\nimport { useUser } from \"src/providers/user\"\nimport Link from \"src/components/Link\"\nimport { hasRole } from \"src/helpers/role\"\nimport { RoleId } from \"src/types/model\"\n\nconst DRAWER_WIDTH = 260\n\nconst Spacer = styled(Box)({\n  flexGrow: 1,\n})\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      marginLeft: DRAWER_WIDTH,\n      width: `calc(100% - ${DRAWER_WIDTH}px)`,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: 36,\n    },\n    hide: {\n      display: \"none\",\n    },\n    drawer: {\n      width: DRAWER_WIDTH,\n      flexShrink: 0,\n      whiteSpace: \"nowrap\",\n    },\n    drawerOpen: {\n      width: DRAWER_WIDTH,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    drawerClose: {\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      overflowX: \"hidden\",\n      width: theme.spacing(7) + 1,\n      [theme.breakpoints.up(\"sm\")]: {\n        width: theme.spacing(9) + 1,\n      },\n    },\n    toolbar: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-end\",\n      padding: theme.spacing(0, 1),\n      // necessary for content to be below app bar\n      ...theme.mixins.toolbar,\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n    },\n    menuItem: {\n      textDecoration: \"none\",\n      color: theme.palette.secondary.main,\n    },\n    activeItem: {\n      textDecoration: \"none\",\n      color: theme.palette.primary.main,\n    },\n  })\n)\n\nconst ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon, role: RoleId.Chouettos },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon, role: RoleId.Chouettos },\n  { title: \"Réserve\", href: \"/reserve\", Icon: GroupIcon, role: RoleId.Chouettos },\n  {\n    title: \"Réservation automatique\",\n    href: \"/auto\",\n    Icon: ReplayIcon,\n    role: RoleId.Chouettos,\n  },\n  { title: \"Mon profil\", href: \"/profile\", Icon: PersonIcon, role: RoleId.Chouettos },\n  { title: \"Groupe MAG\", href: \"/magasin\", Icon: StorefrontIcon, role: RoleId.AdminMag },\n  { title: \"Groupe BdM\", href: \"/bdm\", Icon: CardMembershipIcon, role: RoleId.AdminBdM },\n  {\n    title: \"Espace membre\",\n    href: \"https://espace-membres.lachouettecoop.fr/page/homepage\",\n    Icon: ArrowBackIcon,\n    role: RoleId.Chouettos,\n  },\n]\n\nconst Menu = () => {\n  const classes = useStyles()\n  const { user, logout } = useUser<true>()\n  const theme = useTheme()\n  const [open, setOpen] = useState(false)\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"))\n\n  const handleDrawerOpen = () => {\n    setOpen(true)\n  }\n\n  const handleDrawerClose = () => {\n    setOpen(false)\n  }\n\n  if (!matches) {\n    return null\n  }\n\n  const userRoles = user?.rolesChouette || []\n\n  return (\n    <div className={classes.root}>\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, {\n              [classes.hide]: open,\n            })}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Planning\n          </Typography>\n          <Spacer />\n          <Button onClick={logout} color=\"inherit\">\n            Déconnexion\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <Toolbar />\n      <Drawer\n        variant=\"permanent\"\n        className={clsx(classes.drawer, {\n          [classes.drawerOpen]: open,\n          [classes.drawerClose]: !open,\n        })}\n        classes={{\n          paper: clsx({\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          }),\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === \"rtl\" ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <ListItem>\n          <ListItemIcon>\n            <PersonIcon />\n          </ListItemIcon>\n          {user && <ListItemText primary={`${user.prenom} ${user.nom}`} />}\n        </ListItem>\n        <Divider />\n        <List>\n          {ITEMS.filter(({ role }) => hasRole(role, userRoles)).map(({ href, title, Icon }) => {\n            const active = pathname === href\n            return (\n              <Link className={active ? classes.activeItem : classes.menuItem} href={href} key={href}>\n                <ListItem button>\n                  <ListItemIcon>\n                    <Icon color={active ? \"primary\" : \"secondary\"} />\n                  </ListItemIcon>\n                  <ListItemText primary={title} />\n                </ListItem>\n              </Link>\n            )\n          })}\n        </List>\n      </Drawer>\n    </div>\n  )\n}\n\nexport default Menu\n","import { useState } from \"react\"\nimport { Link, useLocation } from \"react-router-dom\"\nimport { createStyles, useTheme, makeStyles } from \"@material-ui/core/styles\"\nimport {\n  useMediaQuery,\n  Menu,\n  MenuItem,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  AppBar,\n  Toolbar,\n  IconButton,\n} from \"@material-ui/core\"\nimport {\n  MoreVert as MoreIcon,\n  Group as GroupIcon,\n  Person as PersonIcon,\n  Replay as ReplayIcon,\n  ArrowBack as ArrowBackIcon,\n  Event as EventIcon,\n  Home as HomeIcon,\n} from \"@material-ui/icons\"\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    appBar: {\n      top: \"auto\",\n      bottom: 0,\n    },\n    toolbar: {\n      justifyContent: \"space-between\",\n    },\n    label: {\n      // Aligns the content of the button vertically.\n      flexDirection: \"column\",\n    },\n    menu: {\n      \"& ul\": {\n        paddingTop: \"0 !important\",\n        paddingBottom: \"0 !important\",\n      },\n    },\n    textMenuDecoration: {\n      textDecoration: \"none\",\n    },\n    menuItem: {\n      color: \"rgba(255, 255, 255, 0.54)\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    activeItem: {\n      color: \"white\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    icon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"rgba(255, 255, 255, 0.54)\",\n      },\n    },\n    activeIcon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"white\",\n      },\n    },\n  })\n)\n\nconst MAIN_ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon },\n  { title: \"Réserve\", href: \"/reserve\", Icon: GroupIcon },\n]\nconst EXTRA_ITEMS = [\n  { title: \"Auto\", href: \"/auto\", Icon: ReplayIcon },\n  { title: \"Mon profil\", href: \"/profile\", Icon: PersonIcon },\n  { title: \"Espace membre\", href: \"/member\", Icon: ArrowBackIcon },\n]\n\nexport default function BottomAppBar() {\n  const classes = useStyles()\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null)\n  const theme = useTheme()\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.down(\"xs\"))\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  if (!matches) {\n    return null\n  }\n\n  return (\n    <>\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\n        <Toolbar className={classes.toolbar}>\n          {MAIN_ITEMS.map(({ href, title, Icon }) => {\n            const active = pathname === href\n            return (\n              <ListItem button className={classes.label} key={title} component={Link} to={href}>\n                <ListItemIcon className={active ? classes.activeIcon : classes.icon}>\n                  <Icon />\n                </ListItemIcon>\n                <ListItemText className={active ? classes.activeItem : classes.menuItem} primary={title} />\n              </ListItem>\n            )\n          })}\n          <Menu\n            id=\"simple-menu\"\n            className={classes.menu}\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n          >\n            {EXTRA_ITEMS.map(({ href, title }) => {\n              const active = pathname === href\n              return (\n                <MenuItem\n                  key={title}\n                  className={active ? classes.activeItem : classes.menuItem}\n                  onClick={handleClose}\n                  component={Link}\n                  to={href}\n                >\n                  {title}\n                </MenuItem>\n              )\n            })}\n          </Menu>\n          <IconButton aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick} edge=\"end\" color=\"inherit\">\n            <MoreIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </>\n  )\n}\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { styled, Container } from \"@material-ui/core\"\n\nimport { DatePlanningProvider } from \"src/providers/datePlanning\"\nimport HomePage from \"src/pages/authenticated/Home\"\nimport PlanningPage from \"src/pages/authenticated/Planning\"\nimport ProfilePage from \"src/pages/authenticated/Profile\"\nimport ReservePage from \"src/pages/authenticated/Reserve\"\nimport MagasinPage from \"src/pages/authenticated/Magasin\"\nimport BdMPage from \"src/pages/authenticated/BdM\"\nimport Menu from \"src/components/menu\"\nimport MenuBottom from \"src/components/menuBottom\"\nimport { getParams } from \"src/helpers/request\"\n\nconst Content = styled(Container)(({ theme }) => ({\n  marginTop: theme.spacing(4),\n  marginBottom: theme.spacing(14),\n  paddingLeft: theme.spacing(1),\n  [theme.breakpoints.up(\"sm\")]: {\n    paddingLeft: theme.spacing(12),\n  },\n}))\n\nconst Authenticated = () => {\n  const { search } = useLocation()\n  const { next } = getParams(search)\n\n  return (\n    <DatePlanningProvider>\n      <Menu />\n      <Content>\n        <Switch>\n          <Route path=\"/home\">\n            <HomePage />\n          </Route>\n          <Route path=\"/planning\">\n            <PlanningPage />\n          </Route>\n          <Route path=\"/profile\">\n            <ProfilePage />\n          </Route>\n          <Route path=\"/reserve\">\n            <ReservePage />\n          </Route>\n          <Route path=\"/bdm\">\n            <BdMPage />\n          </Route>\n          <Route path=\"/magasin\">\n            <MagasinPage />\n          </Route>\n          <Redirect to={next || \"/home\"} />\n        </Switch>\n        <MenuBottom />\n      </Content>\n    </DatePlanningProvider>\n  )\n}\n\nexport default Authenticated\n","import { BrowserRouter } from \"react-router-dom\"\n\nimport { useUser } from \"src/providers/user\"\n\nimport Anonymous from \"src/pages/anonymous\"\nimport Authenticated from \"src/pages/authenticated\"\nimport { DialogProvider } from \"src/providers/dialog\"\n\nconst App = () => {\n  const { auth } = useUser()\n\n  return (\n    <BrowserRouter>\n      <DialogProvider>{auth ? <Authenticated /> : <Anonymous />}</DialogProvider>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { ApolloProvider } from \"@apollo/client\"\n\nimport { ErrorBoundary } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { UserProvider } from \"src/providers/user\"\nimport ThemeProvider from \"src/providers/theme\"\nimport App from \"src/App\"\n\nReactDOM.render(\n  <ErrorBoundary>\n    <React.StrictMode>\n      <ThemeProvider>\n        <ApolloProvider client={apollo}>\n          <UserProvider>\n            <App />\n          </UserProvider>\n        </ApolloProvider>\n      </ThemeProvider>\n    </React.StrictMode>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}