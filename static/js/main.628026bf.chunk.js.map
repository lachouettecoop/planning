{"version":3,"sources":["helpers/errors.tsx","graphql/queriesUser.ts","providers/user.tsx","helpers/apollo.ts","images/logo_white.svg","providers/theme.tsx","helpers/request.ts","pages/anonymous/Login.tsx","pages/anonymous/index.tsx","providers/datePlanning.tsx","helpers/role.tsx","graphql/queries.ts","helpers/date.ts","components/PiafCircle.tsx","images/chouettos.png","components/InfoDialog.tsx","providers/dialog.tsx","components/SlotDialog.tsx","components/Piaf.tsx","components/UserPiafs.tsx","components/ReplacementPiafs.tsx","pages/authenticated/Home.tsx","components/Slot.tsx","components/CalendarDay.tsx","components/Calendar.tsx","pages/authenticated/Planning.tsx","pages/authenticated/Profile.tsx","pages/authenticated/Reserve.tsx","components/UserDatagrid.tsx","pages/authenticated/Magasin.tsx","pages/authenticated/BdM.tsx","components/Link.tsx","components/menu.tsx","components/menuBottom.tsx","pages/authenticated/index.tsx","App.tsx","index.tsx"],"names":["apiKey","process","Bugsnag","start","releaseStage","enabledReleaseStages","appVersion","metadata","deployDate","Date","toString","deployAuthor","plugins","BugsnagPluginReact","handleError","error","console","alert","message","notify","Boundary","getPlugin","createErrorBoundary","React","Container","ErrorBlock","Typography","variant","aria-hidden","String","Text","ErrorMessage","ErrorBoundary","children","FallbackComponent","LOGGED_IN_USER","gql","USER_UPDATE","USERS","UserContext","createContext","STORAGE_KEY","getStoredUser","stored","localStorage","getItem","JSON","parse","UserProvider","useState","auth","setAuth","user","setUser","useEffect","apollo","query","variables","id","then","data","Provider","value","login","setItem","stringify","logout","removeItem","useUser","useContext","_path","_g","link","createHttpLink","uri","authLink","setContext","_","previous","headers","token","client","ApolloClient","concat","cache","InMemoryCache","TITLE_FONT","TEXT_FONT","THEME","createMuiTheme","typography","fontFamily","body1","fontSize","body2","subtitle1","subtitle2","h1","fontWeight","h2","h3","h4","h5","h6","palette","primary","main","secondary","contrastThreshold","tonalOffset","ThemeProvider","theme","CssBaseline","post","path","body","a","fetch","method","response","ok","HttpError","status","statusText","json","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogoWhite","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","ref","d","fill","transform","ForwardRef","Header","LoginPage","loading","setLoading","handleSubmit","event","preventDefault","FormData","currentTarget","userId","email","get","maxWidth","onSubmit","TextField","type","name","label","fullWidth","margin","Button","size","color","disabled","Anonymous","pathname","useLocation","Login","to","DatePlanningContext","getInitialStart","startOfMonth","getInitialEnd","endOfMonth","DatePlanningProvider","setStart","end","setEnd","goBack","date","subMonths","goForward","addMonths","goToday","RoleId","SLOTS","PIAFS","PIAFS_COUNT","PLANNING","REGISTRATION_UPDATE","RESERVE_CREATE","RESERVE_UPDATE","RESERVE_USER","CRENEAUX_GENERIQUES","PIAF_CREATE","formatInFrench","pattern","format","locale","fr","formatDateLong","formatTime","WEEKDAYS","queryDate","STATUS_COLORS","available","replacement","occupied","IMAGES","CH","getImg","role","img","PiafIcon","$status","grey","$role","getStatus","piaf","statut","piaffeur","PiafCircle","roleUniqueId","InfoDialog","open","handleClose","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","onClick","DialogContext","DialogProvider","setOpen","setTitle","setMessage","closeDialog","openDialog","newMessage","newTitle","useDialog","getIdRoleAccompagnateur","idRole","Cassier","Cassier_Acc","GH","GH_Acc","hasRole","idRequiredRole","roles","find","Cassier_Formation","GH_Formation","hasRoleFormation","getPiafCount","slot","after","startOfDay","startOfWeek","before","endOfDay","endOfWeek","piafs","getRegistrationPiafId","replacementPiaf","CloseButton","IconButton","Title","PiafRow","Status","Contact","SlotInfo","show","piafCurrentUser","hideButtons","getTime","now","register","rolesChouette","libelle","piafId","mutate","mutation","idRoleAccompagnateur","idCreneau","unregister","Close","capitalize","map","prenom","nom","href","telephone","CircularProgress","Piaf","creneau","useLazyQuery","load","titre","debut","fin","ListItem","button","ListItemAvatar","ListItemText","SlotDialog","UserPiafs","useQuery","startOfToday","List","slice","sort","piafA","piafB","ReplacementPiafs","addDays","otherPiafs","filter","MyPlanning","Replacements","HomePage","nbPiafEffectuees","nbPiafAttendues","SELECTED_COLOR","ClickableSlot","$open","Slot","$when","CalendarDay","day","isToday","isPast","slots","DayPlaceholder","WeekRow","Calendar","list","weeks","eachWeekOfInterval","weekStartsOn","days","forEach","node","weekIndex","differenceInWeeks","week","getDay","left","right","push","index","Loading","Caption","CaptionTitle","Nav","ButtonArea","PlanningPage","useTheme","matches","useMediaQuery","breakpoints","up","textTodayButton","textBeforeButton","textAfterButton","startIcon","ArrowBackIos","isSameMonth","CalendarToday","endIcon","ArrowForwardIos","creneaus","Grid","container","item","xs","ProfilePage","saving","setSaving","values","setValues","handleInputChange","handleSave","idUser","r","join","required","onChange","InputProps","startAdornment","InputAdornment","position","Phone","Mail","ReserveGrid","Infos","ReservePage","information","setInformation","setSlots","dataCreneauxList","loadingCL","errorCreneauxList","skip","dataCreneauxUser","loadingCU","errorReserve","reserves","informations","creneauGeneriques","cg","queryError","slotList","jour","actif","reserveFound","s","startTime","heureDebut","slotReserveFound","time","allSlotIds","slotDisplayed","getSlots","idCreneauGenerique","selected","displayed","creneauGenerique","reserve","FormGroup","FormControlLabel","control","Checkbox","checked","includes","temp","splice","handleCheckboxChange","heureFin","multiline","UserDataGrid","rows","users","userA","userB","lastName","absenceWithPurchase","absenceWithoutPurchase","absenceLongueDureeCourses","absenceLongueDureeSansCourses","style","columns","field","headerName","MagasinPage","BdMPage","UniversalLink","startsWith","DRAWER_WIDTH","Spacer","styled","Box","flexGrow","useStyles","makeStyles","createStyles","root","display","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","toolbar","alignItems","justifyContent","padding","mixins","content","menuItem","textDecoration","activeItem","ITEMS","Icon","HomeIcon","Chouettos","EventIcon","GroupIcon","ReplayIcon","PersonIcon","StorefrontIcon","AdminMAG","CardMembershipIcon","AdminBdM","ArrowBackIcon","Menu","classes","className","AppBar","clsx","Toolbar","aria-label","edge","noWrap","Drawer","paper","direction","ChevronRight","ChevronLeft","Divider","ListItemIcon","Person","active","Link","top","bottom","flexDirection","menu","paddingTop","paddingBottom","textMenuDecoration","backgroundColor","icon","activeIcon","MAIN_ITEMS","EXTRA_ITEMS","BottomAppBar","anchorEl","setAnchorEl","down","component","keepMounted","Boolean","MenuItem","aria-controls","aria-haspopup","Content","marginTop","marginBottom","paddingLeft","Authenticated","next","search","params","substr","split","part","tuple","decodeURIComponent","getParams","Home","Planning","Profile","Reserve","BdM","Magasin","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.628026bf.chunk.js","sourcesContent":["import React, { ErrorInfo, FC } from \"react\"\nimport Bugsnag from \"@bugsnag/js\"\nimport BugsnagPluginReact from \"@bugsnag/plugin-react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nconst apiKey = process.env.REACT_APP_BUGSNAG_KEY\n\nif (apiKey) {\n  Bugsnag.start({\n    apiKey,\n    releaseStage: process.env.NODE_ENV,\n    enabledReleaseStages: [\"production\"],\n    appVersion: process.env.REACT_APP_COMMIT,\n    metadata: {\n      deployDate: new Date().toString(),\n      deployAuthor: process.env.REACT_APP_AUTHOR,\n    },\n    plugins: [new BugsnagPluginReact()],\n  })\n}\n\n// TODO: show nicer message\nexport const handleError = (error: Error) => {\n  console.error(error)\n  alert(error.message)\n  if (apiKey) {\n    Bugsnag.notify(error)\n  }\n}\n\nconst Boundary = apiKey ? Bugsnag.getPlugin(\"react\")?.createErrorBoundary(React) : null\n\nconst Container = styled.div`\n  padding: 1rem;\n  h2 {\n    color: #e53935;\n    margin: 1rem 0;\n  }\n  code {\n    display: block;\n    margin-top: 3rem;\n    color: #aaa;\n  }\n`\n\n// https://github.com/bugsnag/bugsnag-js/blob/next/packages/plugin-react/types/bugsnag-plugin-react.d.ts\ninterface FallbackProps {\n  error: Error\n  info?: ErrorInfo\n  clearError?: () => void\n}\n\nexport const ErrorBlock = ({ error }: FallbackProps) => (\n  <Container>\n    <Typography variant=\"h2\">\n      <span aria-hidden>🐞</span>\n      <br />\n      Une erreur est survenue\n    </Typography>\n    <Typography>Essayez de recharger la page</Typography>\n    <code>{String(error)}</code>\n  </Container>\n)\n\nconst Text = styled.p`\n  color: #e53935;\n`\n\ninterface MessageProps {\n  error: Error\n}\n\nexport const ErrorMessage = ({ error }: MessageProps) => <Text>Erreur : {error.message}</Text>\n\nexport const ErrorBoundary: FC = ({ children }) =>\n  Boundary ? <Boundary FallbackComponent={ErrorBlock}>{children}</Boundary> : <>{children}</>\n","import { gql } from \"@apollo/client\"\n\nexport const LOGGED_IN_USER = gql`\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      username\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n    }\n  }\n`\nexport const USER_UPDATE = gql`\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String) {\n    updateUser(input: { id: $idUser, email: $email, telephone: $telephone }) {\n      user {\n        id\n        username\n        email\n        telephone\n      }\n    }\n  }\n`\n\nexport const USERS = gql`\n  query USERS {\n    users(enabled: true) {\n      id\n      nom\n      prenom\n      email\n      actif\n      rolesChouette {\n        id\n        libelle\n        roleUniqueId\n      }\n      statut\n      reserve {\n        id\n        informations\n        creneauGeneriques {\n          id\n          heureDebut\n          heureFin\n          jour\n        }\n      }\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      nbPiafEffectuees\n      nbPiafAttendues\n    }\n  }\n`\n","import type { User } from \"src/types/model\"\n\nimport { createContext, useContext, useState, FC, useEffect } from \"react\"\n\nimport { LOGGED_IN_USER } from \"src/graphql/queriesUser\"\nimport apollo from \"src/helpers/apollo\"\n\nexport interface Auth {\n  email: string\n  token: string\n  id: number\n}\n\nexport interface IUserContext<IsAuthenticated extends boolean = false> {\n  auth: IsAuthenticated extends true ? Auth : Auth | null\n  user: User | null\n  login: (auth: Auth) => void\n  logout: () => void\n}\n\nconst UserContext = createContext<IUserContext>({} as IUserContext)\n\nconst STORAGE_KEY = \"user\"\n\nexport const getStoredUser = () => {\n  const stored = localStorage.getItem(STORAGE_KEY)\n  if (!stored) {\n    return null\n  }\n  return JSON.parse(stored) as Auth\n}\n\nexport const UserProvider: FC = ({ children }) => {\n  const [auth, setAuth] = useState<Auth | null>(getStoredUser)\n  const [user, setUser] = useState<User | null>(null)\n\n  useEffect(() => {\n    if (auth) {\n      apollo\n        .query<{ user: User }>({\n          query: LOGGED_IN_USER,\n          variables: { id: `api/users/${auth.id}` },\n        })\n        .then(({ data }) => {\n          setUser(data.user)\n        })\n    }\n  }, [auth])\n\n  const login = (data: Auth) => {\n    setAuth(data)\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data))\n  }\n\n  const logout = () => {\n    setAuth(null)\n    localStorage.removeItem(STORAGE_KEY)\n  }\n\n  return <UserContext.Provider value={{ auth, user, login, logout }}>{children}</UserContext.Provider>\n}\n\nexport function useUser<IsAuthenticated extends boolean = false>() {\n  return useContext(UserContext) as IUserContext<IsAuthenticated>\n}\n","import { ApolloClient, createHttpLink, InMemoryCache } from \"@apollo/client\"\nimport { setContext } from \"@apollo/client/link/context\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nconst link = createHttpLink({\n  uri: `${process.env.REACT_APP_API}/api/graphql`,\n})\n\nconst authLink = setContext((_, previous) => {\n  const user = getStoredUser()\n  if (!user) {\n    return previous\n  }\n  return {\n    ...previous,\n    headers: {\n      ...previous.headers,\n      \"X-Auth-Token\": user.token,\n    },\n  }\n})\n\nconst client = new ApolloClient({\n  link: authLink.concat(link),\n  cache: new InMemoryCache(),\n})\n\nexport default client\n","var _path, _g;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoWhite(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 756,\n    height: 756,\n    viewBox: \"0 0 756 756\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z\",\n    fill: \"#314b3f\"\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1.33333 0 0 -1.33333 0 756)\",\n    fill: \"#314b3f\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoWhite);\nexport default __webpack_public_path__ + \"static/media/logo_white.6e9fcd91.svg\";\nexport { ForwardRef as ReactComponent };","import type { FC } from \"react\"\n\nimport { createMuiTheme, ThemeProvider as MUIThemeProvider, Theme as MUITheme } from \"@material-ui/core/styles\"\nimport { CssBaseline } from \"@material-ui/core\"\nimport { ThemeProvider as EmotionThemeProvider } from \"@emotion/react/macro\"\n\n// see public/index.html\nconst TITLE_FONT = \"Montserrat, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=titres-et-sous-titres\nconst TEXT_FONT = \"Cabin, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=texte\n\nconst MAIN_COLOR = \"#445448\" // https://style.lachouettecoop.fr/#/couleurs\nconst SECONDARY_COLOR = \"#9e9e9e\" // material grey 500\n\ndeclare module \"@emotion/react\" {\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  export interface Theme extends MUITheme {}\n}\n\nconst THEME = createMuiTheme({\n  typography: {\n    fontFamily: TEXT_FONT,\n    body1: {\n      fontFamily: TEXT_FONT,\n      fontSize: \"1rem\",\n    },\n    body2: {\n      fontFamily: TEXT_FONT,\n      fontSize: \"1rem\",\n    },\n    subtitle1: {\n      fontFamily: TITLE_FONT,\n    },\n    subtitle2: {\n      fontFamily: TITLE_FONT,\n    },\n    h1: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 600,\n      fontSize: \"2.5rem\",\n    },\n    h2: {\n      fontFamily: TITLE_FONT,\n      fontWeight: 600,\n      fontSize: \"1.5rem\",\n    },\n    h3: {\n      fontFamily: TITLE_FONT,\n    },\n    h4: {\n      fontFamily: TITLE_FONT,\n    },\n    h5: {\n      fontFamily: TITLE_FONT,\n    },\n    h6: {\n      fontFamily: TITLE_FONT,\n    },\n  },\n  palette: {\n    primary: {\n      // light: will be calculated from palette.primary.main,\n      main: MAIN_COLOR,\n      // dark: will be calculated from palette.primary.main,\n      // contrastText: will be calculated to contrast with palette.primary.main\n    },\n    secondary: {\n      main: SECONDARY_COLOR,\n    },\n    // Used by `getContrastText()` to maximize the contrast between\n    // the background and the text.\n    contrastThreshold: 3,\n    // Used by the functions below to shift a color's luminance by approximately\n    // two indexes within its tonal palette.\n    // E.g., shift from Red 500 to Red 300 or Red 700.\n    tonalOffset: 0.2,\n  },\n})\n\nconst ThemeProvider: FC = ({ children }) => (\n  <EmotionThemeProvider theme={THEME}>\n    <MUIThemeProvider theme={THEME}>\n      <CssBaseline />\n      {children}\n    </MUIThemeProvider>\n  </EmotionThemeProvider>\n)\n\nexport default ThemeProvider\n","import HttpError from \"standard-http-error\"\n\nexport const post = async (path: string, body: BodyInit) => {\n  const response = await fetch(`${process.env.REACT_APP_API}/${path}`, {\n    method: \"POST\",\n    body,\n  })\n  if (!response.ok) {\n    throw new HttpError(response.status, response.statusText)\n  }\n  return response.json()\n}\n\nexport const getParams = (search: string) => {\n  const params: Record<string, string> = {}\n  search\n    .substr(1)\n    .split(\"&\")\n    .forEach((part) => {\n      if (part) {\n        const tuple = part.split(\"=\")\n        if (tuple.length === 2) {\n          params[tuple[0]] = decodeURIComponent(tuple[1])\n        }\n      }\n    })\n  return params\n}\n","import { FormEvent, useState } from \"react\"\nimport { Container, TextField, Button, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { useUser, Auth } from \"src/providers/user\"\nimport { post } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\n\nimport { ReactComponent as Logo } from \"src/images/logo_white.svg\"\n\nconst Header = styled.div`\n  text-align: center;\n  svg {\n    width: 250px;\n    height: 250px;\n    margin: -20px 0;\n  }\n`\n\nconst LoginPage = () => {\n  const [loading, setLoading] = useState(false)\n  const { login } = useUser()\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const body = new FormData(event.currentTarget)\n    setLoading(true)\n    try {\n      const data = await post(\"login_api\", body)\n      const auth: Auth = {\n        id: data.userId,\n        email: body.get(\"username\") as string,\n        token: data.token,\n      }\n      login(auth)\n    } catch (error) {\n      handleError(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <Header>\n        <Logo />\n        <Typography variant=\"h1\">Planning</Typography>\n      </Header>\n      <form onSubmit={handleSubmit}>\n        <p>\n          Cette application permet de gérer le planning des PIAFs du magasin. Connectez-vous avec vos identifiants\n          habituels.\n        </p>\n        <TextField type=\"email\" name=\"username\" label=\"E-mail\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <TextField type=\"password\" name=\"password\" label=\"Mot de passe\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <Button type=\"submit\" fullWidth size=\"large\" variant=\"contained\" color=\"primary\" disabled={loading}>\n          Connexion\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default LoginPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Container } from \"@material-ui/core\"\n\nimport LoginPage from \"src/pages/anonymous/Login\"\n\nconst Anonymous = () => {\n  const { pathname } = useLocation()\n\n  return (\n    <Container>\n      <Switch>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Redirect to={`/login?next=${pathname}`} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Anonymous\n","import { createContext, useContext, useState, FC } from \"react\"\nimport { startOfMonth, endOfMonth, subMonths, addMonths } from \"date-fns\"\n\nexport interface IDatePlanningContext {\n  start: Date\n  end: Date\n  goBack: () => void\n  goForward: () => void\n  goToday: () => void\n}\n\nconst DatePlanningContext = createContext<IDatePlanningContext>({} as IDatePlanningContext)\n\nconst getInitialStart = () => startOfMonth(new Date())\nconst getInitialEnd = () => endOfMonth(new Date())\n\nexport const DatePlanningProvider: FC = ({ children }) => {\n  const [start, setStart] = useState<Date>(getInitialStart)\n  const [end, setEnd] = useState<Date>(getInitialEnd)\n\n  const goBack = () => {\n    const date = subMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goForward = () => {\n    const date = addMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goToday = () => {\n    setStart(getInitialStart)\n    setEnd(getInitialEnd)\n  }\n\n  return (\n    <DatePlanningContext.Provider value={{ start, end, goBack, goForward, goToday }}>\n      {children}\n    </DatePlanningContext.Provider>\n  )\n}\n\nexport function useDatePlanning() {\n  return useContext(DatePlanningContext) as IDatePlanningContext\n}\n","import { Role } from \"src/types/model\"\n\nexport enum RoleId {\n  GH = \"GH\",\n  Chouettos = \"CH\",\n  Cassier = \"CA\",\n  GH_Formation = \"GHF\",\n  Cassier_Formation = \"CAF\",\n  Cassier_Acc = \"CAA\",\n  GH_Acc = \"GHA\",\n  AdminMAG = \"MAG\",\n  AdminBdM = \"BdM\",\n}\n\nexport const getIdRoleAccompagnateur = (idRole: string) => {\n  switch (idRole) {\n    case RoleId.Cassier:\n      return RoleId.Cassier_Acc\n    case RoleId.GH:\n      return RoleId.GH_Acc\n  }\n}\n\nexport const hasRole = (idRequiredRole: string, roles: Role[]) => {\n  switch (idRequiredRole) {\n    case RoleId.Cassier:\n      return (\n        roles.find(({ roleUniqueId }) => roleUniqueId.toString() === idRequiredRole) ||\n        roles.find(({ roleUniqueId }) => roleUniqueId.toString() === RoleId.Cassier_Formation)\n      )\n    case RoleId.GH:\n      return (\n        roles.find(({ roleUniqueId }) => roleUniqueId.toString() === idRequiredRole) ||\n        roles.find(({ roleUniqueId }) => roleUniqueId.toString() === RoleId.GH_Formation)\n      )\n    default:\n      return roles.find(({ roleUniqueId }) => roleUniqueId === idRequiredRole)\n  }\n}\n\nexport const hasRoleFormation = (roles: Role[]) => {\n  return (\n    roles.find(({ roleUniqueId }) => roleUniqueId === RoleId.GH_Formation) ||\n    roles.find(({ roleUniqueId }) => roleUniqueId === RoleId.Cassier_Formation)\n  )\n}\n","import { gql } from \"@apollo/client\"\n\nexport const SLOTS = gql`\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      debut\n      fin\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          prenom\n          nom\n        }\n      }\n    }\n  }\n`\n\nexport const PIAFS = gql`\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n      statut\n      pourvu\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        prenom\n        nom\n        username\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n`\n\nexport const PIAFS_COUNT = gql`\n  query PIAFS_COUNT($userId: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n    }\n  }\n`\n\nexport const PLANNING = gql`\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n        }\n      }\n    }\n  }\n`\n\nexport const REGISTRATION_UPDATE = gql`\n  mutation REGISTRATION_UPDATE($piafId: ID!, $userId: String!, $statut: String!) {\n    updatePiaf(input: { id: $piafId, piaffeur: $userId, statut: $statut }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n      }\n    }\n  }\n`\n\nexport const RESERVE_CREATE = gql`\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_UPDATE = gql`\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_USER = gql`\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n`\n\nexport const CRENEAUX_GENERIQUES = gql`\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n`\n\nexport const PIAF_CREATE = gql`\n  mutation PIAF_CREATE($idCreneau: String!, $idRole: String) {\n    createPiaf(input: { creneau: $idCreneau, role: $idRole, visible: true }) {\n      piaf {\n        id\n        creneau {\n          id\n        }\n        piaffeur {\n          id\n        }\n        role {\n          id\n        }\n      }\n    }\n  }\n`\n","import { format } from \"date-fns\"\nimport fr from \"date-fns/locale/fr\"\n\nconst formatInFrench = (date: Date | number | string, pattern: string) => {\n  if (typeof date === \"string\") {\n    date = new Date(date)\n  }\n  return format(date, pattern, { locale: fr })\n}\n\nexport const formatDateShort = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMM\")\nexport const formatDateLong = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMMM yyyy\")\n\nexport const formatMonthYear = (date: Date | number | string) => formatInFrench(date, \"MMMM yyyy\")\n\nexport const formatTime = (date: Date | number | string) => formatInFrench(date, \"HH:mm\")\n\nconst WEEKDAYS = [\"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\", \"Dimanche\"]\nexport const getDayOfWeek = (index: number) => WEEKDAYS[index]\n\nexport const queryDate = (date: Date | number) => format(date, \"yyyy-MM-dd\")\n","import type { PIAF, RoleUniqueId } from \"src/types/model\"\nimport type { IStatus } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\n\nimport chouettos from \"src/images/chouettos.png\"\n\nconst STATUS_COLORS: Record<IStatus, string> = {\n  available: \"white\",\n  replacement: \"orange\",\n  occupied: \"green\",\n}\n\nconst IMAGES: Partial<Record<RoleUniqueId, string>> = {\n  CH: chouettos,\n}\n\nconst getImg = (role?: RoleUniqueId) => {\n  if (role) {\n    const img = IMAGES[role]\n    if (img) {\n      return `url(${img})`\n    }\n  }\n}\n\nexport const PiafIcon = styled.span<{ $status: IStatus; $role?: RoleUniqueId }>`\n  flex-shrink: 0;\n  display: inline-block;\n  margin: 2px;\n  width: 2rem;\n  height: 2rem;\n  border: 2px solid ${({ $status }) => STATUS_COLORS[$status]};\n  border-radius: 50%;\n  background-color: ${({ theme }) => theme.palette.grey[300]};\n  background-image: ${({ $role }) => getImg($role) || \"none\"};\n  background-position: center;\n  background-size: 24px;\n  background-repeat: no-repeat;\n  line-height: 28px;\n  text-align: center;\n`\n\nexport const getStatus = (piaf: PIAF): IStatus => {\n  if (piaf.statut === \"remplacement\") {\n    return \"replacement\"\n  }\n  if (piaf.piaffeur) {\n    return \"occupied\"\n  }\n  return \"available\"\n}\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst PiafCircle = ({ piaf }: Props) => (\n  <PiafIcon $status={getStatus(piaf)} $role={piaf.role.roleUniqueId}>\n    {getImg(piaf.role.roleUniqueId) ? \"\" : piaf.role.roleUniqueId}\n  </PiafIcon>\n)\n\nexport default PiafCircle\n","export default \"data:image/png;base64,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\"","import React from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogContentText from \"@material-ui/core/DialogContentText\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\n\ninterface Props {\n  open: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n  title: string\n  message: string\n}\n\nconst InfoDialog = ({ open, handleClose, title, message }: Props) => {\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">{message}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default InfoDialog\n","import { createContext, useContext, useState, FC } from \"react\"\n\nimport InfoDialog from \"src/components/InfoDialog\"\n\ninterface IDialogContext {\n  openDialog: (message: string, title?: string) => void\n  closeDialog: () => void\n}\n\nconst DialogContext = createContext({} as IDialogContext)\n\nexport const DialogProvider: FC = ({ children }) => {\n  const [open, setOpen] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [message, setMessage] = useState(\"\")\n\n  const openDialog = (newMessage: string, newTitle = \"\") => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    setOpen(true)\n  }\n\n  const closeDialog = () => {\n    setOpen(false)\n  }\n\n  return (\n    <DialogContext.Provider value={{ openDialog, closeDialog }}>\n      {children}\n      <InfoDialog open={open} handleClose={closeDialog} title={title} message={message}></InfoDialog>\n    </DialogContext.Provider>\n  )\n}\n\nexport const useDialog = () => useContext(DialogContext)\n","import type { PIAF, User } from \"src/types/model\"\nimport type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { Button, capitalize, Dialog, DialogContent, DialogTitle, IconButton, CircularProgress } from \"@material-ui/core\"\nimport { Close } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\nimport { startOfWeek, endOfWeek, startOfDay, endOfDay } from \"date-fns\"\n\nimport { formatTime, formatDateLong } from \"src/helpers/date\"\nimport { REGISTRATION_UPDATE, PIAFS_COUNT, PIAF_CREATE } from \"src/graphql/queries\"\nimport { useUser } from \"src/providers/user\"\nimport apollo from \"src/helpers/apollo\"\nimport PiafCircle, { getStatus } from \"src/components/PiafCircle\"\nimport { handleError } from \"src/helpers/errors\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { getIdRoleAccompagnateur, hasRole, hasRoleFormation } from \"src/helpers/role\"\n\nconst MAX_PIAF_PER_WEEK = 3\nconst MAX_PIAF_PER_DAY = 2\n\ntype Result = { piafs: PIAF[] }\n\nconst getPiafCount = async (slot: ISlot, userId: string, type: \"week\" | \"day\") => {\n  const after = type === \"day\" ? startOfDay(slot.start) : startOfWeek(slot.start)\n  const before = type === \"day\" ? endOfDay(slot.start) : endOfWeek(slot.start)\n  const { data } = await apollo.query<Result>({\n    query: PIAFS_COUNT,\n    variables: { userId, after, before },\n  })\n  return data.piafs.length\n}\n\nconst getRegistrationPiafId = (slot: ISlot, piaf: PIAF) => {\n  const replacementPiaf = slot.piafs?.find(({ statut, role }) => statut === \"remplacement\" && role.id === piaf.role.id)\n  if (replacementPiaf) {\n    // If there is a PIAF with status \"remplacement\" and the same role,\n    // the user will be registered to it instead of the requested one.\n    return replacementPiaf.id\n  }\n  return piaf.id\n}\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  right: 8px;\n  top: 8px;\n`\nconst Title = styled.div`\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n    margin-left: 5px;\n  }\n`\nconst PiafRow = styled.div`\n  margin: 0 0 1rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n`\nconst Status = styled.div`\n  flex: 1;\n  margin: 0 8px;\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n  }\n`\nconst Contact = styled.div`\n  text-align: right;\n`\n\ninterface Props {\n  slot: ISlot\n  show: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nconst SlotInfo = ({ slot, show, handleClose }: Props) => {\n  const [loading, setLoading] = useState(false)\n  const { openDialog } = useDialog()\n  const { user } = useUser<true>()\n  const piafCurrentUser = slot.piafs?.find(({ piaffeur, statut }) => piaffeur?.id === user?.id && statut === \"occupe\")\n  const hideButtons = slot.start.getTime() < Date.now()\n\n  const register = async (piaf: PIAF) => {\n    setLoading(true)\n\n    try {\n      const roles = user?.rolesChouette\n      if (!roles || !hasRole(piaf.role.roleUniqueId, roles)) {\n        setLoading(false)\n        openDialog(`Pour t’inscrire à cette PIAF, tu dois d’abord passer la formation ${piaf.role.libelle}`)\n        return\n      }\n\n      const userId = (user as User).id\n\n      const piafOfWeek = await getPiafCount(slot, userId, \"week\")\n      if (piafOfWeek >= MAX_PIAF_PER_WEEK) {\n        setLoading(false)\n        openDialog(`Il n’est pas possible de s’inscrire à plus de ${MAX_PIAF_PER_WEEK} PIAF par semaine`)\n        return\n      }\n\n      const piafOfDay = await getPiafCount(slot, userId, \"day\")\n      if (piafOfDay >= MAX_PIAF_PER_DAY) {\n        setLoading(false)\n        openDialog(`Il n’est pas possible de s’inscrire à plus de ${MAX_PIAF_PER_DAY} PIAF par jour`)\n        return\n      }\n\n      const piafId = getRegistrationPiafId(slot, piaf)\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: { piafId, userId, statut: \"occupe\" },\n      })\n\n      if (hasRoleFormation(roles)) {\n        const idRoleAccompagnateur = getIdRoleAccompagnateur(piaf.role.id)\n        if (idRoleAccompagnateur) {\n          await apollo.mutate({\n            mutation: PIAF_CREATE,\n            variables: {\n              idCreneau: slot.id,\n              idRole: idRoleAccompagnateur,\n            },\n          })\n        } else {\n          console.error(\"PIAF formation sans role accompagnateur\")\n        }\n      }\n\n      openDialog(\"Inscription effectuée. Merci !\")\n    } catch (error) {\n      handleError(error)\n    }\n\n    setLoading(false)\n  }\n\n  const unregister = async (piaf: PIAF) => {\n    setLoading(true)\n\n    try {\n      const userId = (user as User).id\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: { piafId: piaf.id, userId, statut: \"remplacement\" },\n      })\n\n      openDialog(\"Désinscription effectuée : la PIAF est désormais en recherche de remplacement !\")\n    } catch (error) {\n      handleError(error)\n    }\n\n    setLoading(false)\n  }\n\n  return (\n    <Dialog open={show} onClose={handleClose} fullWidth>\n      <CloseButton onClick={handleClose}>\n        <Close />\n      </CloseButton>\n      <DialogTitle>\n        {capitalize(formatDateLong(slot.start))}\n        <br />\n        <Title>\n          <strong>\n            {formatTime(slot.start)}–{formatTime(slot.end)}\n          </strong>\n          <span>{slot.title}</span>\n        </Title>\n      </DialogTitle>\n      <DialogContent>\n        {slot.piafs ? (\n          slot.piafs.map((piaf) => {\n            const { id, role, piaffeur } = piaf\n            const status = getStatus(piaf)\n\n            return (\n              <PiafRow key={id}>\n                <PiafCircle piaf={piaf} />\n                <Status>\n                  {status === \"occupied\" && piaffeur ? `${piaffeur.prenom} ${piaffeur.nom}` : \"Place disponible\"}\n                  <br />\n                  <span>{role.libelle}</span>\n                </Status>\n                {status === \"occupied\" &&\n                  piafCurrentUser &&\n                  piafCurrentUser.role.roleUniqueId === \"GH\" &&\n                  piaffeur &&\n                  piaffeur.id != user?.id && (\n                    //Show info contacts only if the current user is the GH of the slot\n                    <Contact>\n                      <a href={`mailto:${piaffeur.email}`}>{piaffeur.email}</a>\n                      <br />\n                      <a href={`tel:${piaffeur.telephone}`}>{piaffeur.telephone}</a>\n                    </Contact>\n                  )}\n                {status !== \"occupied\" && !piafCurrentUser && !hideButtons && (\n                  <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={() => register(piaf)}>\n                    S’inscrire\n                  </Button>\n                )}\n                {piaffeur?.id === user?.id && piaf.statut === \"occupe\" && !hideButtons && (\n                  <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={() => unregister(piaf)}>\n                    Demander un remplacement\n                  </Button>\n                )}\n              </PiafRow>\n            )\n          })\n        ) : (\n          <CircularProgress />\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nexport default SlotInfo\n","import type { Creneau, PIAF } from \"src/types/model\"\nimport { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { ListItem, ListItemAvatar, ListItemText } from \"@material-ui/core\"\nimport { useLazyQuery } from \"@apollo/client\"\n\nimport { formatDateLong, formatTime } from \"src/helpers/date\"\nimport PiafCircle from \"src/components/PiafCircle\"\nimport SlotDialog from \"src/components/SlotDialog\"\nimport { SLOTS } from \"src/graphql/queries\"\n\ninterface Result {\n  creneau: Creneau\n}\n\ninterface Props {\n  piaf: PIAF\n}\n\nconst Piaf = ({ piaf }: Props) => {\n  const { creneau } = piaf\n  const [open, setOpen] = useState(false)\n\n  const [load, { data }] = useLazyQuery<Result>(SLOTS, {\n    variables: { id: creneau.id },\n  })\n\n  const handleClick = () => {\n    setOpen(true)\n    load()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const slot: ISlot = {\n    id: creneau.id,\n    title: creneau.titre,\n    start: new Date(creneau.debut),\n    end: new Date(creneau.fin),\n    piafs: data?.creneau.piafs,\n  }\n\n  return (\n    <>\n      <ListItem key={piaf.id} button onClick={handleClick}>\n        <ListItemAvatar>\n          <PiafCircle piaf={piaf} />\n        </ListItemAvatar>\n        <ListItemText\n          primary={formatDateLong(slot.start)}\n          secondary={`de ${formatTime(slot.start)} à ${formatTime(slot.end)}`}\n        />\n      </ListItem>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </>\n  )\n}\n\nexport default Piaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { startOfToday } from \"date-fns\"\nimport { CircularProgress, List } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { queryDate } from \"src/helpers/date\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport Piaf from \"src/components/Piaf\"\n\ntype Result = { piafs: PIAF[] }\n\nconst UserPiafs = () => {\n  const { auth } = useUser<true>()\n\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: {\n      userId: `/api/users/${auth.id}`,\n      after: queryDate(startOfToday()),\n    },\n  })\n\n  if (loading) {\n    return <CircularProgress />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  if (!data.piafs.length) {\n    return <p>Aucune PIAF à venir. Inscrivez-vous sur le planning !</p>\n  }\n\n  return (\n    <List>\n      {data.piafs\n        .slice()\n        .sort((piafA, piafB) =>\n          new Date(piafA.creneau.debut).getTime() > new Date(piafB.creneau.debut).getTime() ? 1 : -1\n        )\n        .map((piaf) => (\n          <Piaf key={piaf.id} piaf={piaf} />\n        ))}\n    </List>\n  )\n}\n\nexport default UserPiafs\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { startOfToday, addDays } from \"date-fns\"\nimport { CircularProgress, List } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { queryDate } from \"src/helpers/date\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport Piaf from \"src/components/Piaf\"\n\ntype Result = { piafs: PIAF[] }\n\nconst ReplacementPiafs = () => {\n  const { auth } = useUser<true>()\n\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: {\n      after: queryDate(startOfToday()),\n      before: queryDate(addDays(startOfToday(), 700)),\n      statut: \"remplacement\",\n    },\n  })\n\n  if (loading) {\n    return <CircularProgress />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  const otherPiafs = data.piafs\n    .filter((piaf) => piaf.piaffeur?.id !== `/api/users/${auth.id}`)\n    .sort((piafA, piafB) =>\n      new Date(piafA.creneau.debut).getTime() > new Date(piafB.creneau.debut).getTime() ? 1 : -1\n    )\n\n  if (!otherPiafs.length) {\n    return <p>Aucun remplacement à venir n’est demandé.</p>\n  }\n\n  return (\n    <>\n      <p>\n        Les créneaux ci dessous ne peuvent plus être effectués par un Chouettos, ils sont disponibles pour un\n        remplacement. N’hésites pas à te positionner, la personne que tu remplaces sera avertie par e-mail\n        instantanément !\n      </p>\n      <List>\n        {otherPiafs.map((piaf) => (\n          <Piaf key={piaf.id} piaf={piaf} />\n        ))}\n      </List>\n    </>\n  )\n}\n\nexport default ReplacementPiafs\n","import styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nimport { useUser } from \"src/providers/user\"\nimport UserPiafs from \"src/components/UserPiafs\"\nimport ReplacementPiafs from \"src/components/ReplacementPiafs\"\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  > div {\n    flex: 0 1 50%;\n    min-width: 300px;\n  }\n`\nconst Status = styled.div`\n  p {\n    font-size: 2.5rem;\n    &::first-letter {\n      text-transform: uppercase;\n    }\n    span {\n      font-size: 0.5em;\n    }\n    margin-bottom: 2rem;\n  }\n`\nconst MyPlanning = styled.div``\nconst Replacements = styled.div``\n\nconst HomePage = () => {\n  const { user } = useUser<true>()\n\n  return (\n    <Container>\n      <Status>\n        <Typography variant=\"h2\">Mon statut</Typography>\n        <Typography>\n          {user?.nbPiafEffectuees ?? \"…\"}/{user?.nbPiafAttendues ?? \"…\"} <span>PIAFs attendues</span>\n        </Typography>\n        <Typography variant=\"h2\">Je suis</Typography>\n        <Typography>{user?.statut || \"…\"}</Typography>\n      </Status>\n      <MyPlanning>\n        <Typography variant=\"h2\">Mes prochaines PIAFs</Typography>\n        <UserPiafs />\n      </MyPlanning>\n      <Replacements>\n        <Typography variant=\"h2\">Remplacements</Typography>\n        <ReplacementPiafs />\n      </Replacements>\n    </Container>\n  )\n}\n\nexport default HomePage\n","import type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport styled from \"@emotion/styled/macro\"\n\nimport SlotDialog from \"src/components/SlotDialog\"\nimport { formatTime } from \"src/helpers/date\"\nimport PiafCircle from \"src/components/PiafCircle\"\n\nconst SELECTED_COLOR = \"#FFFFAA\"\n\nconst ClickableSlot = styled.button<{ $open: boolean }>`\n  width: 100%;\n  border: none;\n  background-color: ${({ $open }) => ($open ? SELECTED_COLOR : \"transparent\")};\n  padding: 5px;\n  text-align: left;\n  font-size: inherit;\n  line-height: inherit;\n  font: inherit;\n  cursor: pointer;\n  &:focus {\n    background-color: ${SELECTED_COLOR};\n    outline: none;\n  }\n`\nconst Title = styled.div`\n  span {\n    color: gray;\n  }\n`\nconst List = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 -2px;\n`\n\ninterface Props {\n  slot: ISlot\n}\n\nconst Slot = ({ slot }: Props) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClick = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ClickableSlot $open={open} onClick={handleClick}>\n        <Title>\n          <strong>\n            {formatTime(slot.start)}–{formatTime(slot.end)}\n          </strong>\n          <br />\n          <span>{slot.title}</span>\n        </Title>\n        <List>\n          {slot.piafs?.map((piaf) => (\n            <PiafCircle key={piaf.id} piaf={piaf} />\n          ))}\n        </List>\n      </ClickableSlot>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </>\n  )\n}\n\nexport default Slot\n","import type { IDay } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { isPast, isToday } from \"date-fns\"\n\nimport Slot from \"src/components/Slot\"\nimport { formatDateShort } from \"src/helpers/date\"\n\ntype TimeStatus = \"past\" | \"present\" | \"future\"\n\nconst Container = styled.div<{ $when: TimeStatus }>`\n  opacity: ${({ $when }) => ($when === \"past\" ? 0.5 : 1)};\n  border: 1px solid gray;\n  min-height: 80px;\n  background-color: ${({ $when }) => ($when === \"present\" ? \"#d0d9d0\" : \"#eee\")};\n`\nconst Title = styled.h3`\n  margin: 0 5px;\n  font-weight: 500;\n  text-transform: capitalize;\n`\nconst List = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n`\n\ninterface Props {\n  day: IDay\n}\n\nconst CalendarDay = ({ day }: Props) => {\n  return (\n    <Container $when={isToday(day.start) ? \"present\" : isPast(day.start) ? \"past\" : \"future\"}>\n      <Title>{formatDateShort(day.start)}</Title>\n      <List>\n        {day.slots.map((slot) => (\n          <Slot slot={slot} key={slot.id}></Slot>\n        ))}\n      </List>\n    </Container>\n  )\n}\n\nexport default CalendarDay\n\nexport const DayPlaceholder = () => <Container $when=\"past\" />\n","import type { Creneau } from \"src/types/model\"\nimport type { IWeek } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { addDays, differenceInWeeks, eachWeekOfInterval, getDay } from \"date-fns\"\n\nimport CalendarDay, { DayPlaceholder } from \"src/components/CalendarDay\"\n\nconst Container = styled.div`\n  border: 1px solid gray;\n  margin: 0;\n  padding: 0;\n`\nconst WeekRow = styled.div`\n  @media screen and (min-width: 800px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\n\ninterface Props {\n  start: Date\n  end: Date\n  list?: Creneau[]\n}\n\nconst Calendar = ({ start, end, list }: Props) => {\n  if (!list) {\n    return null\n  }\n\n  const weeks: IWeek[] = eachWeekOfInterval({ start, end }, { weekStartsOn: 1 }).map((date) => ({\n    start: date,\n    days: [0, 1, 2, 3, 4, 5, 6].map((i) => ({ start: addDays(date, i), slots: [] })),\n  }))\n\n  list.forEach((node) => {\n    const date = new Date(node.debut)\n    const weekIndex = differenceInWeeks(date, weeks[0].start)\n    const week = weeks[weekIndex]\n    const day = (getDay(date) || 7) - 1 // Monday = 0, ..., Sunday = 6\n    const piafs = node.piafs.slice().sort((left, right) => (left.role.id > right.role.id ? 1 : -1))\n\n    week.days[day].slots.push({\n      id: node.id,\n      title: node.titre,\n      start: date,\n      end: new Date(node.fin),\n      piafs,\n    })\n  })\n\n  return (\n    <Container>\n      {weeks.map((week, index) => (\n        <WeekRow key={index}>\n          {week.days.map((day, i) =>\n            day.start >= start && day.start < end ? <CalendarDay day={day} key={i} /> : <DayPlaceholder key={i} />\n          )}\n        </WeekRow>\n      ))}\n    </Container>\n  )\n}\n\nexport default Calendar\n","import type { Creneau } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { Button, CircularProgress, Grid, Typography, useMediaQuery, useTheme } from \"@material-ui/core\"\nimport { ArrowBackIos, ArrowForwardIos, CalendarToday } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\nimport { isSameMonth } from \"date-fns\"\n\nimport { useDatePlanning } from \"src/providers/datePlanning\"\nimport { PLANNING } from \"src/graphql/queries\"\nimport Calendar from \"src/components/Calendar\"\nimport { PiafIcon } from \"src/components/PiafCircle\"\nimport { formatMonthYear } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\ntype Result = { creneaus: Creneau[] }\n\nconst Loading = styled.div`\n  border: 2px solid gray;\n  height: 500px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Caption = styled.div`\n  border: 1px solid gray;\n  border-radius: 10px;\n  max-width: 500px;\n  margin: 20px 0 100px auto;\n  padding: 10px;\n  text-align: center;\n`\nconst CaptionTitle = styled.h3`\n  text-align: left;\n  margin-top: 0;\n`\nconst Nav = styled.nav`\n  display: flex;\n  align-items: center;\n  margin-bottom: 1rem;\n  button:not(:first-of-type) {\n    margin-left: 1rem;\n  }\n  h2 {\n    flex: 1;\n    text-transform: capitalize;\n  }\n`\n\nconst ButtonArea = styled.div`\n  display: flex;\n  justify-content: end;\n`\n\nconst PlanningPage = () => {\n  const { goBack, goForward, goToday, start, end } = useDatePlanning()\n  const theme = useTheme()\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"))\n  const textTodayButton = matches ? \"Aujourd’hui\" : \"\"\n  const textBeforeButton = matches ? \"Précédent\" : \"\"\n  const textAfterButton = matches ? \"Suivant\" : \"\"\n\n  const { data, loading, error } = useQuery<Result>(PLANNING, {\n    variables: { after: start, before: end },\n  })\n\n  if (error) {\n    return <ErrorBlock error={error} />\n  }\n\n  return (\n    <>\n      <Nav>\n        <Typography variant=\"h2\">{formatMonthYear(start)}</Typography>\n        <ButtonArea>\n          <Button disabled={loading} variant=\"contained\" color=\"primary\" startIcon={<ArrowBackIos />} onClick={goBack}>\n            {textBeforeButton}\n          </Button>\n          <Button\n            disabled={loading || isSameMonth(start, new Date())}\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<CalendarToday />}\n            onClick={goToday}\n          >\n            {textTodayButton}\n          </Button>\n          <Button\n            disabled={loading}\n            variant=\"contained\"\n            color=\"primary\"\n            endIcon={<ArrowForwardIos />}\n            onClick={goForward}\n          >\n            {textAfterButton}\n          </Button>\n        </ButtonArea>\n      </Nav>\n      {loading ? (\n        <Loading>\n          <CircularProgress />\n        </Loading>\n      ) : (\n        <Calendar start={start} end={end} list={data?.creneaus} />\n      )}\n      <Caption>\n        <CaptionTitle>Légende</CaptionTitle>\n        <Grid container>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\" />\n            <div>PIAF disponible</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"replacement\" />\n            <div>Cherche remplaçant·e</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"occupied\" />\n            <div>PIAF occupée</div>\n          </Grid>\n        </Grid>\n        <br />\n        <Grid container>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\" $role=\"CH\">\n               \n            </PiafIcon>\n            <div>Chouettos</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\">CA</PiafIcon>\n            <div>Caissier·ère</div>\n          </Grid>\n          <Grid item xs={4}>\n            <PiafIcon $status=\"available\">GH</PiafIcon>\n            <div>Grand Hibou</div>\n          </Grid>\n        </Grid>\n      </Caption>\n    </>\n  )\n}\n\nexport default PlanningPage\n","import { useEffect, useState } from \"react\"\nimport { Phone, Mail } from \"@material-ui/icons\"\nimport { Button, CircularProgress, InputAdornment, TextField, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { useUser } from \"src/providers/user\"\nimport { handleError } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { USER_UPDATE } from \"src/graphql/queriesUser\"\nimport { useDialog } from \"src/providers/dialog\"\n\nconst Loading = styled.div`\n  height: 50vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 500px;\n  p,\n  .MuiTextField-root {\n    margin: 10px 0;\n  }\n  button {\n    margin: 15px auto;\n    display: block;\n  }\n`\n\nconst ProfilePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [values, setValues] = useState({\n    email: user?.email || \"\",\n    telephone: user?.telephone || \"\",\n  })\n\n  useEffect(() => {\n    if (user) {\n      setValues({\n        email: user.email,\n        telephone: user.telephone,\n      })\n    }\n  }, [user])\n\n  const handleInputChange = ({ target }: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = target\n    setValues({\n      ...values,\n      [name]: value,\n    })\n  }\n\n  const handleSave = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    setSaving(true)\n    try {\n      await apollo.mutate({\n        mutation: USER_UPDATE,\n        variables: { ...values, idUser: user?.id },\n      })\n      openDialog(\"Vos informations ont bien été mises à jour\")\n    } catch (error) {\n      handleError(error)\n    }\n    setSaving(false)\n  }\n\n  if (!user) {\n    return (\n      <Loading>\n        <CircularProgress />\n      </Loading>\n    )\n  }\n\n  const roles = user.rolesChouette.map((r) => r.libelle).join(\", \")\n\n  return (\n    <Container>\n      <form onSubmit={handleSave}>\n        <Typography variant=\"h2\">\n          {user.prenom} {user.nom}\n        </Typography>\n        <p>{roles}</p>\n        <TextField\n          name=\"telephone\"\n          label=\"Téléphone\"\n          required\n          disabled={!user}\n          value={values.telephone}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Phone />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <TextField\n          name=\"email\"\n          label=\"Adresse e-mail\"\n          required\n          disabled={!user}\n          value={values.email}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Mail />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <Button color=\"primary\" variant=\"contained\" disabled={saving} type=\"submit\">\n          Enregistrer\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default ProfilePage\n","import { CreneauGenerique, Reserve } from \"src/types/model\"\nimport { IReserve } from \"src/types/app\"\n\nimport { useEffect, useState, ChangeEvent } from \"react\"\nimport {\n  Button,\n  FormGroup,\n  FormControlLabel,\n  Checkbox,\n  CircularProgress,\n  TextField,\n  Typography,\n} from \"@material-ui/core\"\nimport { useQuery } from \"@apollo/client\"\nimport styled from \"@emotion/styled/macro\"\n\nimport apollo from \"src/helpers/apollo\"\nimport { handleError } from \"src/helpers/errors\"\nimport { RESERVE_CREATE, RESERVE_UPDATE, CRENEAUX_GENERIQUES, RESERVE_USER } from \"src/graphql/queries\"\nimport { useUser } from \"src/providers/user\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { formatTime, getDayOfWeek } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\nconst Loading = styled.div`\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst ReserveGrid = styled.div`\n  margin-top: 2rem;\n  @media screen and (min-width: 980px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\nconst Infos = styled.div`\n  margin: 20px 0 40px;\n`\n\ntype ResultCG = { creneauGeneriques: CreneauGenerique[] }\ntype ResultRU = { reserves: Reserve[] }\n\nconst ReservePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [information, setInformation] = useState<string>(\"\")\n  const [slots, setSlots] = useState<string[]>([])\n\n  const { data: dataCreneauxList, loading: loadingCL, error: errorCreneauxList } = useQuery<ResultCG>(\n    CRENEAUX_GENERIQUES\n  )\n  const { data: dataCreneauxUser, loading: loadingCU, error: errorReserve } = useQuery<ResultRU>(RESERVE_USER, {\n    skip: !user,\n    variables: { idUser: user?.id },\n  })\n  const loading = loadingCL || loadingCU\n\n  useEffect(() => {\n    if (dataCreneauxUser && dataCreneauxUser?.reserves.length > 0) {\n      setInformation(dataCreneauxUser.reserves[0].informations)\n      setSlots(dataCreneauxUser.reserves[0].creneauGeneriques.map((cg) => cg.id))\n    }\n  }, [dataCreneauxUser])\n\n  const queryError = errorCreneauxList || errorReserve\n  if (queryError) {\n    return <ErrorBlock error={queryError} />\n  }\n\n  const slotList: IReserve[] = []\n\n  if (dataCreneauxList) {\n    for (let day = 0; day < 7; day++) {\n      dataCreneauxList?.creneauGeneriques\n        .filter(({ jour, actif }) => jour === day && actif)\n        .forEach((slot) => {\n          const reserveFound = slotList.find((s) => s.day === day)\n          const startTime = new Date(slot.heureDebut).getTime()\n          if (reserveFound) {\n            const slotReserveFound = reserveFound.slots.find(({ time }) => time === startTime)\n            if (slotReserveFound) {\n              slotReserveFound.allSlotIds.push(slot.id)\n            } else {\n              reserveFound.slots.push({\n                time: startTime,\n                slotDisplayed: slot,\n                allSlotIds: [slot.id],\n              })\n            }\n          } else {\n            slotList.push({\n              day: day,\n              slots: [\n                {\n                  time: startTime,\n                  slotDisplayed: slot,\n                  allSlotIds: [slot.id],\n                },\n              ],\n            })\n          }\n        })\n    }\n  }\n\n  const handleInfoChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    setInformation(target.value)\n  }\n\n  const getSlots = (idCreneauGenerique: string) => {\n    let list: string[] = []\n    slotList.forEach((slot) => {\n      const selected = slot.slots.find((displayed) => displayed.slotDisplayed.id === idCreneauGenerique)\n      if (selected) {\n        list = selected.allSlotIds\n      }\n    })\n    return list\n  }\n\n  const handleCheckboxChange = (idCreneauGenerique: string, checked: boolean) => {\n    const temp = slots.slice()\n    if (checked) {\n      temp.push(...getSlots(idCreneauGenerique))\n      setSlots(temp)\n    } else {\n      getSlots(idCreneauGenerique).forEach((slot) => {\n        temp.splice(temp.indexOf(slot), 1)\n      })\n      setSlots(temp)\n    }\n  }\n\n  const handleSave = async () => {\n    setSaving(true)\n\n    const variables: Record<string, any> = {\n      user: user?.id,\n      informations: information,\n      creneauGenerique: slots,\n    }\n    if (dataCreneauxUser?.reserves.length) {\n      variables.id = dataCreneauxUser.reserves[0].id\n    }\n\n    try {\n      await apollo.mutate({\n        mutation: variables.id ? RESERVE_UPDATE : RESERVE_CREATE,\n        variables,\n      })\n\n      openDialog(\n        (variables.id\n          ? \"Votre inscription à la réserve a bien été mise à jour.\"\n          : \"Vous êtes désormais inscrit·e à la reserve.\") + \" Merci !\"\n      )\n    } catch (error) {\n      handleError(error)\n    }\n\n    setSaving(false)\n  }\n\n  return (\n    <>\n      <Typography variant=\"h2\">Réserve</Typography>\n      {loading ? (\n        <Loading>\n          <CircularProgress />\n        </Loading>\n      ) : (\n        <>\n          <ReserveGrid>\n            {slotList.map((reserve) => (\n              <FormGroup key={reserve.day}>\n                {getDayOfWeek(reserve.day)}\n                {reserve.slots.map(({ slotDisplayed }) => (\n                  <FormControlLabel\n                    key={slotDisplayed.id}\n                    control={\n                      <Checkbox\n                        color=\"default\"\n                        checked={slots.includes(slotDisplayed.id)}\n                        onChange={({ target }) => {\n                          handleCheckboxChange(slotDisplayed.id, target.checked)\n                        }}\n                      />\n                    }\n                    label={`${formatTime(slotDisplayed.heureDebut)} - ${formatTime(slotDisplayed.heureFin)}`}\n                  />\n                ))}\n              </FormGroup>\n            ))}\n          </ReserveGrid>\n          <Infos>\n            <TextField\n              multiline\n              disabled={loading}\n              label=\"Informations supplémentaires (optionnel)\"\n              value={information}\n              onChange={handleInfoChange}\n              fullWidth\n            />\n          </Infos>\n          <Button disabled={saving} color=\"primary\" variant=\"contained\" onClick={handleSave}>\n            Enregistrer\n          </Button>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default ReservePage\n","import { DataGrid, GridColDef } from \"@material-ui/data-grid\"\nimport { CircularProgress } from \"@material-ui/core\"\n\nimport { useQuery } from \"@apollo/client\"\n\nimport { USERS } from \"src/graphql/queriesUser\"\nimport { User } from \"src/types/model\"\nimport { ErrorMessage } from \"src/helpers/errors\"\n\ntype Result = { users: User[] }\ntype userData = {\n  id: string\n  name: string\n  lastName: string\n  status: string\n  roles: string\n  absenceWithPurchase: boolean\n  absenceWithoutPurchase: boolean\n}\n\nfunction createData(\n  id: string,\n  name: string,\n  lastName: string,\n  status: string,\n  roles: string,\n  absenceWithPurchase: boolean,\n  absenceWithoutPurchase: boolean\n) {\n  return { id, name, lastName, status, roles, absenceWithPurchase, absenceWithoutPurchase }\n}\n\nexport default function UserDataGrid() {\n  const { data, loading, error } = useQuery<Result>(USERS)\n  const rows: userData[] = []\n\n  if (loading) {\n    return <CircularProgress />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  data?.users\n    .slice()\n    .sort((userA, userB) => (userA.nom > userB.nom ? 1 : -1))\n    .forEach((user) => {\n      rows.push(\n        createData(\n          user.id,\n          user.prenom,\n          user.nom,\n          user.statut,\n          user.rolesChouette.map((r) => r.libelle).join(\", \"),\n          user.absenceLongueDureeCourses,\n          user.absenceLongueDureeSansCourses\n        )\n      )\n    })\n\n  const columns: GridColDef[] = [\n    { field: \"lastName\", headerName: \"Nom\", width: 150 },\n    { field: \"name\", headerName: \"Prenom\", width: 150 },\n    { field: \"status\", headerName: \"Status\", width: 150 },\n    { field: \"roles\", headerName: \"Roles\", width: 150 },\n    { field: \"absenceWithPurchase\", headerName: \"Absence avec courses\", width: 150 },\n    { field: \"absenceWithoutPurchase\", headerName: \"Absence sans courses\", width: 150 },\n  ]\n\n  return (\n    <>\n      <div style={{ height: 500, width: \"100%\" }}>\n        <DataGrid rows={rows} columns={columns} />\n      </div>\n    </>\n  )\n}\n","import UserDatagrid from \"src/components/UserDatagrid\"\n\nconst MagasinPage = () => {\n  return (\n    <>\n      <h1>Groupe MAG</h1>\n      <UserDatagrid></UserDatagrid>\n    </>\n  )\n}\n\nexport default MagasinPage\n","const BdMPage = () => {\n  return <>BdM</>\n}\n\nexport default BdMPage\n","import { Link } from \"react-router-dom\"\n\nconst UniversalLink = ({ href, ...props }: React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  if (href?.startsWith(\"/\")) {\n    return <Link to={href} {...props} />\n  }\n  return <a href={href} {...props} />\n}\n\nexport default UniversalLink\n","import { useState } from \"react\"\nimport { useLocation } from \"react-router\"\nimport clsx from \"clsx\"\nimport { createStyles, makeStyles, useTheme } from \"@material-ui/core/styles\"\nimport {\n  styled,\n  useMediaQuery,\n  Drawer,\n  AppBar,\n  Toolbar,\n  List,\n  Typography,\n  Divider,\n  IconButton,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Button,\n  Box,\n} from \"@material-ui/core\"\nimport {\n  Menu as MenuIcon,\n  ChevronLeft as ChevronLeftIcon,\n  ChevronRight as ChevronRightIcon,\n  Group as GroupIcon,\n  Person as PersonIcon,\n  Replay as ReplayIcon,\n  ArrowBack as ArrowBackIcon,\n  Home as HomeIcon,\n  Event as EventIcon,\n  Storefront as StorefrontIcon,\n  CardMembership as CardMembershipIcon,\n} from \"@material-ui/icons\"\n\nimport { useUser } from \"src/providers/user\"\nimport Link from \"src/components/Link\"\nimport { hasRole, RoleId } from \"src/helpers/role\"\n\nconst DRAWER_WIDTH = 260\n\nconst Spacer = styled(Box)({\n  flexGrow: 1,\n})\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      marginLeft: DRAWER_WIDTH,\n      width: `calc(100% - ${DRAWER_WIDTH}px)`,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: 36,\n    },\n    hide: {\n      display: \"none\",\n    },\n    drawer: {\n      width: DRAWER_WIDTH,\n      flexShrink: 0,\n      whiteSpace: \"nowrap\",\n    },\n    drawerOpen: {\n      width: DRAWER_WIDTH,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    drawerClose: {\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      overflowX: \"hidden\",\n      width: theme.spacing(7) + 1,\n      [theme.breakpoints.up(\"sm\")]: {\n        width: theme.spacing(9) + 1,\n      },\n    },\n    toolbar: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-end\",\n      padding: theme.spacing(0, 1),\n      // necessary for content to be below app bar\n      ...theme.mixins.toolbar,\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n    },\n    menuItem: {\n      textDecoration: \"none\",\n      color: theme.palette.secondary.main,\n    },\n    activeItem: {\n      textDecoration: \"none\",\n      color: theme.palette.primary.main,\n    },\n  })\n)\n\nconst ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon, role: RoleId.Chouettos },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon, role: RoleId.Chouettos },\n  { title: \"Réserve\", href: \"/reserve\", Icon: GroupIcon, role: RoleId.Chouettos },\n  {\n    title: \"Réservation automatique\",\n    href: \"/auto\",\n    Icon: ReplayIcon,\n    role: RoleId.Chouettos,\n  },\n  { title: \"Mon profil\", href: \"/profile\", Icon: PersonIcon, role: RoleId.Chouettos },\n  { title: \"Groupe MAG\", href: \"/magasin\", Icon: StorefrontIcon, role: RoleId.AdminMAG },\n  { title: \"Groupe BdM\", href: \"/bdm\", Icon: CardMembershipIcon, role: RoleId.AdminBdM },\n  {\n    title: \"Espace membre\",\n    href: \"https://espace-membres.lachouettecoop.fr/page/homepage\",\n    Icon: ArrowBackIcon,\n    role: RoleId.Chouettos,\n  },\n]\n\nconst Menu = () => {\n  const classes = useStyles()\n  const { user, logout } = useUser<true>()\n  const theme = useTheme()\n  const [open, setOpen] = useState(false)\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"))\n\n  const handleDrawerOpen = () => {\n    setOpen(true)\n  }\n\n  const handleDrawerClose = () => {\n    setOpen(false)\n  }\n\n  if (!matches) {\n    return null\n  }\n\n  return (\n    <div className={classes.root}>\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, {\n              [classes.hide]: open,\n            })}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Planning\n          </Typography>\n          <Spacer />\n          <Button onClick={logout} color=\"inherit\">\n            Déconnexion\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <Toolbar />\n      <Drawer\n        variant=\"permanent\"\n        className={clsx(classes.drawer, {\n          [classes.drawerOpen]: open,\n          [classes.drawerClose]: !open,\n        })}\n        classes={{\n          paper: clsx({\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          }),\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === \"rtl\" ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <ListItem>\n          <ListItemIcon>\n            <PersonIcon />\n          </ListItemIcon>\n          {user && <ListItemText primary={`${user.prenom} ${user.nom}`} />}\n        </ListItem>\n        <Divider />\n        <List>\n          {ITEMS.map(({ href, title, Icon, role }) => {\n            const active = pathname === href\n            return (\n              hasRole(role, user?.rolesChouette || []) && (\n                <Link className={active ? classes.activeItem : classes.menuItem} href={href} key={href}>\n                  <ListItem button>\n                    <ListItemIcon>\n                      <Icon color={active ? \"primary\" : \"secondary\"} />\n                    </ListItemIcon>\n                    <ListItemText primary={title} />\n                  </ListItem>\n                </Link>\n              )\n            )\n          })}\n        </List>\n      </Drawer>\n    </div>\n  )\n}\n\nexport default Menu\n","import { useState } from \"react\"\nimport { Link, useLocation } from \"react-router-dom\"\nimport { createStyles, useTheme, makeStyles } from \"@material-ui/core/styles\"\nimport {\n  useMediaQuery,\n  Menu,\n  MenuItem,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  AppBar,\n  Toolbar,\n  IconButton,\n} from \"@material-ui/core\"\nimport {\n  MoreVert as MoreIcon,\n  Group as GroupIcon,\n  Person as PersonIcon,\n  Replay as ReplayIcon,\n  ArrowBack as ArrowBackIcon,\n  Event as EventIcon,\n  Home as HomeIcon,\n} from \"@material-ui/icons\"\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    appBar: {\n      top: \"auto\",\n      bottom: 0,\n    },\n    toolbar: {\n      justifyContent: \"space-between\",\n    },\n    label: {\n      // Aligns the content of the button vertically.\n      flexDirection: \"column\",\n    },\n    menu: {\n      \"& ul\": {\n        paddingTop: \"0 !important\",\n        paddingBottom: \"0 !important\",\n      },\n    },\n    textMenuDecoration: {\n      textDecoration: \"none\",\n    },\n    menuItem: {\n      color: \"rgba(255, 255, 255, 0.54)\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    activeItem: {\n      color: \"white\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    icon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"rgba(255, 255, 255, 0.54)\",\n      },\n    },\n    activeIcon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"white\",\n      },\n    },\n  })\n)\n\nconst MAIN_ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon },\n  { title: \"Réserve\", href: \"/reserve\", Icon: GroupIcon },\n]\nconst EXTRA_ITEMS = [\n  { title: \"Auto\", href: \"/auto\", Icon: ReplayIcon },\n  { title: \"Mon profil\", href: \"/profile\", Icon: PersonIcon },\n  { title: \"Espace membre\", href: \"/member\", Icon: ArrowBackIcon },\n]\n\nexport default function BottomAppBar() {\n  const classes = useStyles()\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null)\n  const theme = useTheme()\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.down(\"xs\"))\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  if (!matches) {\n    return null\n  }\n\n  return (\n    <>\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\n        <Toolbar className={classes.toolbar}>\n          {MAIN_ITEMS.map(({ href, title, Icon }) => {\n            const active = pathname === href\n            return (\n              <ListItem button className={classes.label} key={title} component={Link} to={href}>\n                <ListItemIcon className={active ? classes.activeIcon : classes.icon}>\n                  <Icon />\n                </ListItemIcon>\n                <ListItemText className={active ? classes.activeItem : classes.menuItem} primary={title} />\n              </ListItem>\n            )\n          })}\n          <Menu\n            id=\"simple-menu\"\n            className={classes.menu}\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n          >\n            {EXTRA_ITEMS.map(({ href, title }) => {\n              const active = pathname === href\n              return (\n                <MenuItem\n                  key={title}\n                  className={active ? classes.activeItem : classes.menuItem}\n                  onClick={handleClose}\n                  component={Link}\n                  to={href}\n                >\n                  {title}\n                </MenuItem>\n              )\n            })}\n          </Menu>\n          <IconButton aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick} edge=\"end\" color=\"inherit\">\n            <MoreIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </>\n  )\n}\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { styled, Container } from \"@material-ui/core\"\n\nimport { DatePlanningProvider } from \"src/providers/datePlanning\"\nimport HomePage from \"src/pages/authenticated/Home\"\nimport PlanningPage from \"src/pages/authenticated/Planning\"\nimport ProfilePage from \"src/pages/authenticated/Profile\"\nimport ReservePage from \"src/pages/authenticated/Reserve\"\nimport MagasinPage from \"src/pages/authenticated/Magasin\"\nimport BdMPage from \"src/pages/authenticated/BdM\"\nimport Menu from \"src/components/menu\"\nimport MenuBottom from \"src/components/menuBottom\"\nimport { getParams } from \"src/helpers/request\"\n\nconst Content = styled(Container)(({ theme }) => ({\n  marginTop: theme.spacing(4),\n  marginBottom: theme.spacing(14),\n  paddingLeft: theme.spacing(1),\n  [theme.breakpoints.up(\"sm\")]: {\n    paddingLeft: theme.spacing(12),\n  },\n}))\n\nconst Authenticated = () => {\n  const { search } = useLocation()\n  const { next } = getParams(search)\n\n  return (\n    <DatePlanningProvider>\n      <Menu />\n      <Content>\n        <Switch>\n          <Route path=\"/home\">\n            <HomePage />\n          </Route>\n          <Route path=\"/planning\">\n            <PlanningPage />\n          </Route>\n          <Route path=\"/profile\">\n            <ProfilePage />\n          </Route>\n          <Route path=\"/reserve\">\n            <ReservePage />\n          </Route>\n          <Route path=\"/bdm\">\n            <BdMPage />\n          </Route>\n          <Route path=\"/magasin\">\n            <MagasinPage />\n          </Route>\n          <Redirect to={next || \"/home\"} />\n        </Switch>\n        <MenuBottom />\n      </Content>\n    </DatePlanningProvider>\n  )\n}\n\nexport default Authenticated\n","import { BrowserRouter } from \"react-router-dom\"\n\nimport { useUser } from \"src/providers/user\"\n\nimport Anonymous from \"src/pages/anonymous\"\nimport Authenticated from \"src/pages/authenticated\"\nimport { DialogProvider } from \"src/providers/dialog\"\n\nconst App = () => {\n  const { auth } = useUser()\n\n  return (\n    <BrowserRouter>\n      <DialogProvider>{auth ? <Authenticated /> : <Anonymous />}</DialogProvider>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { ApolloProvider } from \"@apollo/client\"\n\nimport { ErrorBoundary } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { UserProvider } from \"src/providers/user\"\nimport ThemeProvider from \"src/providers/theme\"\nimport App from \"src/App\"\n\nReactDOM.render(\n  <ErrorBoundary>\n    <React.StrictMode>\n      <ThemeProvider>\n        <ApolloProvider client={apollo}>\n          <UserProvider>\n            <App />\n          </UserProvider>\n        </ApolloProvider>\n      </ThemeProvider>\n    </React.StrictMode>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}