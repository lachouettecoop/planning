(this.webpackJsonpplanning=this.webpackJsonpplanning||[]).push([[0],{188:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(22),s=n.n(c),o=n(21),l=n(13),u=n(107),d=n.n(u),j=n(140),b=n.n(j),p=n(70),f=n(1);var O="bd8932c3a4a955397cd4900e01d9ad76";d.a.start({apiKey:O,releaseStage:"production",enabledReleaseStages:["production"],appVersion:"99c2f810f6c10cea02dbd9b33a63a3c8e8568fdb",metadata:{deployDate:(new Date).toString(),deployAuthor:"antoinerousseau"},plugins:[new b.a]});var h,x,m,v,g,y,w,M,A,I,k=function(e){console.error(e),alert(e.message),d.a.notify(e)},z=null===(r=d.a.getPlugin("react"))||void 0===r?void 0:r.createErrorBoundary(i.a),S=Object(l.a)("div",{target:"e1vn7bue1"})({name:"10i3u6",styles:"padding:1rem;h2{color:#e53935;margin:1rem 0;}code{display:block;margin-top:3rem;color:#aaa;}"}),E=function(e){var t=e.error;return Object(f.jsxs)(S,{children:[Object(f.jsxs)(p.a,{variant:"h2",children:[Object(f.jsx)("span",{"aria-hidden":!0,children:"\ud83d\udc1e"}),Object(f.jsx)("br",{}),"Une erreur est survenue"]}),Object(f.jsx)(p.a,{children:"Essayez de recharger la page"}),Object(f.jsx)("code",{children:String(t)})]})},D=Object(l.a)("p",{target:"e1vn7bue0"})({name:"1nm0ewq",styles:"color:#e53935"}),P=function(e){var t=e.error;return Object(f.jsxs)(D,{children:["Erreur : ",t.message]})},G=function(e){var t=e.children;return z?Object(f.jsx)(z,{FallbackComponent:E,children:t}):Object(f.jsx)(f.Fragment,{children:t})},H=n(36),R=n(145),B=n(18),C=n(53),Z=Object(o.gql)(h||(h=Object(C.a)(["\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      username\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statuts {\n        id\n        libelle\n        actif\n        dateDebut\n        dateFin\n      }\n    }\n  }\n"]))),q=Object(o.gql)(x||(x=Object(C.a)(["\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      debut\n      fin\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          prenom\n          nom\n        }\n      }\n    }\n  }\n"]))),F=Object(o.gql)(m||(m=Object(C.a)(["\n  query PIAFS($idPiaffeur: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $idPiaffeur, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n      statut\n      creneau {\n        id\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        prenom\n        nom\n        username\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n"]))),J=Object(o.gql)(v||(v=Object(C.a)(["\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n        }\n      }\n    }\n  }\n"]))),N=Object(o.gql)(g||(g=Object(C.a)(["\n  mutation REGISTRATION_UPDATE($idPiaf: ID!, $idPiaffeur: String!, $statut: String!) {\n    updatePiaf(input: { id: $idPiaf, piaffeur: $idPiaffeur, statut: $statut }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n      }\n    }\n  }\n"]))),Y=Object(o.gql)(y||(y=Object(C.a)(["\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String) {\n    updateUser(input: { id: $idUser, email: $email, telephone: $telephone }) {\n      user {\n        id\n        username\n        email\n        telephone\n      }\n    }\n  }\n"]))),T=Object(o.gql)(w||(w=Object(C.a)(["\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),L=Object(o.gql)(M||(M=Object(C.a)(["\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),U=Object(o.gql)(A||(A=Object(C.a)(["\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n"]))),X=Object(o.gql)(I||(I=Object(C.a)(["\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n"]))),W=Object(a.createContext)({}),V="user",K=function(){var e=localStorage.getItem(V);return e?JSON.parse(e):null},Q=function(e){var t=e.children,n=Object(a.useState)(K),r=Object(B.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(null),o=Object(B.a)(s,2),l=o[0],u=o[1];Object(a.useEffect)((function(){i&&re.query({query:Z,variables:{id:"api/users/".concat(i.id)}}).then((function(e){var t=e.data;u(t.user)}))}),[i]);return Object(f.jsx)(W.Provider,{value:{auth:i,user:l,login:function(e){c(e),localStorage.setItem(V,JSON.stringify(e))},logout:function(){c(null),localStorage.removeItem(V)}},children:t})};function $(){return Object(a.useContext)(W)}var _,ee,te=Object(o.createHttpLink)({uri:"".concat("https://adminchouettos.lachouettecoop.fr","/api/graphql")}),ne=Object(R.a)((function(e,t){var n=K();return n?Object(H.a)(Object(H.a)({},t),{},{headers:Object(H.a)(Object(H.a)({},t.headers),{},{"X-Auth-Token":n.token})}):t})),re=new o.ApolloClient({link:ne.concat(te),cache:new o.InMemoryCache}),ae=n(152),ie=n(227),ce=n(228),se="Montserrat, sans-serif",oe="Cabin, sans-serif",le=Object(ae.a)({typography:{fontFamily:oe,body1:{fontFamily:oe,fontSize:"1rem"},body2:{fontFamily:oe,fontSize:"1rem"},subtitle1:{fontFamily:se},subtitle2:{fontFamily:se},h1:{fontFamily:se,fontWeight:600,fontSize:"2.5rem"},h2:{fontFamily:se,fontWeight:600,fontSize:"1.5rem"},h3:{fontFamily:se},h4:{fontFamily:se},h5:{fontFamily:se},h6:{fontFamily:se}},palette:{primary:{main:"#445448"},contrastThreshold:3,tonalOffset:.2}}),ue=function(e){var t=e.children;return Object(f.jsxs)(ie.a,{theme:le,children:[Object(f.jsx)(ce.a,{}),t]})},de=n(62),je=n(26),be=n(229),pe=n(28),fe=n.n(pe),Oe=n(44),he=n(278),xe=n(231),me=n(149),ve=n.n(me),ge=function(){var e=Object(Oe.a)(fe.a.mark((function e(t,n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://adminchouettos.lachouettecoop.fr","/").concat(t),{method:"POST",body:n});case 2:if((r=e.sent).ok){e.next=5;break}throw new ve.a(r.status,r.statusText);case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Me(e,t){var n=e.title,r=e.titleId,i=we(e,["title","titleId"]);return a.createElement("svg",ye({xmlns:"http://www.w3.org/2000/svg",width:756,height:756,viewBox:"0 0 756 756",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,_||(_=a.createElement("path",{d:"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z",fill:"#314b3f"})),ee||(ee=a.createElement("g",{transform:"matrix(1.33333 0 0 -1.33333 0 756)",fill:"#314b3f"},a.createElement("path",{d:"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308"}),a.createElement("path",{d:"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244"}))))}var Ae=a.forwardRef(Me);n.p;var Ie=Object(l.a)("div",{target:"e1o1sysb0"})({name:"1sw8vsk",styles:"text-align:center;svg{width:250px;height:250px;margin:-20px 0;}"}),ke=function(){var e=Object(a.useState)(!1),t=Object(B.a)(e,2),n=t[0],r=t[1],i=$().login,c=function(){var e=Object(Oe.a)(fe.a.mark((function e(t){var n,a,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),r(!0),e.prev=3,e.next=6,ge("login_api",n);case 6:a=e.sent,c={id:a.userId,email:n.get("username"),token:a.token},i(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),k(e.t0),r(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(be.a,{maxWidth:"xs",children:[Object(f.jsxs)(Ie,{children:[Object(f.jsx)(Ae,{}),Object(f.jsx)(p.a,{variant:"h1",children:"Planning"})]}),Object(f.jsxs)("form",{onSubmit:c,children:[Object(f.jsx)("p",{children:"Cette application permet de g\xe9rer le planning des PIAFs du magasin. Connectez-vous avec vos identifiants habituels."}),Object(f.jsx)(he.a,{type:"email",name:"username",label:"E-mail",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(f.jsx)(he.a,{type:"password",name:"password",label:"Mot de passe",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(f.jsx)(xe.a,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",disabled:n,children:"Connexion"})]})]})},ze=function(){var e=Object(je.g)().pathname;return Object(f.jsx)(be.a,{children:Object(f.jsxs)(je.d,{children:[Object(f.jsx)(je.b,{path:"/login",children:Object(f.jsx)(ke,{})}),Object(f.jsx)(je.a,{to:"/login?next=".concat(e)})]})})},Se=n(40),Ee=n(156),De=n(232),Pe=n(233),Ge=n(234),He=n(150),Re=Object(a.createContext)({}),Be=function(){return Object(De.a)(new Date)},Ce=function(){return Object(Pe.a)(new Date)},Ze=function(e){var t=e.children,n=Object(a.useState)(Be),r=Object(B.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(Ce),o=Object(B.a)(s,2),l=o[0],u=o[1];return Object(f.jsx)(Re.Provider,{value:{start:i,end:l,goBack:function(){var e=Object(Ge.a)(i,1);c(e),u(Object(Pe.a)(e))},goForward:function(){var e=Object(He.a)(i,1);c(e),u(Object(Pe.a)(e))},goToday:function(){c(Be),u(Ce)}},children:t})};var qe=n(247),Fe=n(244),Je=n(230),Ne=n(277),Ye=n(153),Te=function(e,t){return"string"===typeof e&&(e=new Date(e)),Object(Ne.a)(e,t,{locale:Ye.a})},Le=function(e){return Te(e,"EEEE d MMMM yyyy")},Ue=function(e){return Te(e,"HH:mm")},Xe=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],We=function(e){return Object(Ne.a)(e,"yyyy-MM-dd")},Ve=n(192),Ke=n(245),Qe=n(246),$e={available:"white",replacement:"orange",occupied:"green"},_e={CH:"data:image/png;base64,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"},et=function(e){if(e){var t=_e[e];if(t)return"url(".concat(t,")")}},tt=Object(l.a)("span",{target:"emw2y5h0"})("flex-shrink:0;display:inline-block;margin:2px;width:2rem;height:2rem;border:2px solid ",(function(e){var t=e.$status;return $e[t]}),";border-radius:50%;background-color:#ddd;background-image:",(function(e){var t=e.$role;return et(t)||"none"}),";background-position:center;background-size:24px;background-repeat:no-repeat;line-height:28px;text-align:center;"),nt=function(e){return"remplacement"===e.statut?"replacement":e.piaffeur?"occupied":"available"},rt=function(e){var t=e.piaf;return Object(f.jsx)(tt,{$status:nt(t),$role:t.role.roleUniqueId,children:et(t.role.roleUniqueId)?"":t.role.roleUniqueId})},at=n(240),it=n(235),ct=n(236),st=n(12),ot=n(237),lt=n(243),ut=n(116),dt=n(241),jt=n(68),bt=n(242),pt=n(239),ft=n(238),Ot=function(e){var t=e.open,n=e.handleClose,r=e.title,a=e.message;return Object(f.jsxs)(it.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(ct.a,{id:"alert-dialog-title",children:r}),Object(f.jsx)(ot.a,{children:Object(f.jsx)(ft.a,{id:"alert-dialog-description",children:a})}),Object(f.jsx)(pt.a,{children:Object(f.jsx)(xe.a,{onClick:n,color:"primary",children:"OK"})})]})},ht=Object(a.createContext)({}),xt=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(B.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(""),o=Object(B.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(""),j=Object(B.a)(d,2),b=j[0],p=j[1],O=function(){c(!1)};return Object(f.jsxs)(ht.Provider,{value:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";p(e),u(t),c(!0)},closeDialog:O},children:[t,Object(f.jsx)(Ot,{open:i,handleClose:O,title:l,message:b})]})},mt=function(){return Object(a.useContext)(ht)};var vt=Object(l.a)(at.a,{target:"e1el6lcd4"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),gt=Object(l.a)("div",{target:"e1el6lcd3"})({name:"10vegbb",styles:"span{color:gray;margin-left:5px;}"}),yt=Object(l.a)("div",{target:"e1el6lcd2"})({name:"13i0wi",styles:"margin:0 0 1rem 0;display:flex;align-items:center;justify-content:center;flex-wrap:wrap"}),wt=Object(l.a)("div",{target:"e1el6lcd1"})({name:"825opm",styles:"flex:1;margin:0 8px;span{color:#888;}"}),Mt=Object(l.a)("div",{target:"e1el6lcd0"})({name:"2qga7i",styles:"text-align:right"}),At=function(e){var t,n=e.slot,r=e.show,i=e.handleClose,c=Object(a.useState)(!1),s=Object(B.a)(c,2),o=s[0],l=s[1],u=mt().openDialog,d=$().user,j=null===(t=n.piafs)||void 0===t?void 0:t.find((function(e){var t=e.piaffeur,n=e.statut;return(null===t||void 0===t?void 0:t.id)===(null===d||void 0===d?void 0:d.id)&&"occupe"===n})),b=n.start.getTime()<Date.now(),p=function(){var e=Object(Oe.a)(fe.a.mark((function e(){var t,r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ut.a)(n.start),r=Object(dt.a)(n.start),e.next=4,re.query({query:F,variables:{idPiaffeur:null===d||void 0===d?void 0:d.id,after:t,before:r}});case 4:return a=e.sent,e.abrupt("return",a.data.piafs.length);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(Oe.a)(fe.a.mark((function e(){var t,r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(jt.a)(n.start),r=Object(bt.a)(n.start),e.next=4,re.query({query:F,variables:{idPiaffeur:null===d||void 0===d?void 0:d.id,after:t,before:r}});case 4:return a=e.sent,e.abrupt("return",a.data.piafs.length);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(Oe.a)(fe.a.mark((function e(t){var r,a,i,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),e.prev=1,(a=null===d||void 0===d?void 0:d.rolesChouette)&&a.find((function(e){return e.id===t.role.id}))){e.next=6;break}return u("Pour t\u2019inscrire \xe0 cette PIAF tu dois d\u2019abord passer la formation ".concat(t.role.libelle)),e.abrupt("return");case 6:return e.next=8,p();case 8:if(!(e.sent>=3)){e.next=12;break}return u("Il n'est pas possible de s'inscriresur plus de 3 PIAF par semaine"),e.abrupt("return");case 12:return e.next=14,O();case 14:if(!(e.sent>=2)){e.next=18;break}return u("Il n'est pas possible de s'inscrire sur plus de 2 PIAF par jour"),e.abrupt("return");case 18:return i=t.id,(c=null===(r=n.piafs)||void 0===r?void 0:r.find((function(e){var n=e.statut,r=e.role;return"remplacement"===n&&r.id===t.role.id})))&&(i=c.id),e.next=23,re.mutate({mutation:N,variables:{idPiaf:i,idPiaffeur:null===d||void 0===d?void 0:d.id,statut:"occupe"}});case 23:u("Inscription OK. Merci !"),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),k(e.t0);case 29:l(!1);case 30:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(Oe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,re.mutate({mutation:N,variables:{idPiaf:t.id,idPiaffeur:null===d||void 0===d?void 0:d.id,statut:"remplacement"}});case 4:u("D\xe9sinscription faite : la PIAF est d\xe9sormais en recherche de remplacement"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),k(e.t0);case 10:l(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(it.a,{open:r,onClose:i,fullWidth:!0,children:[Object(f.jsx)(vt,{onClick:i,children:Object(f.jsx)(lt.a,{})}),Object(f.jsxs)(ct.a,{children:[Object(st.a)(Le(n.start)),Object(f.jsx)("br",{}),Object(f.jsxs)(gt,{children:[Object(f.jsxs)("strong",{children:[Ue(n.start),"\u2013",Ue(n.end)]}),Object(f.jsx)("span",{children:n.title})]})]}),Object(f.jsx)(ot.a,{children:n.piafs?n.piafs.map((function(e){var t=e.id,n=e.role,r=e.piaffeur,a=nt(e);return Object(f.jsxs)(yt,{children:[Object(f.jsx)(rt,{piaf:e}),Object(f.jsxs)(wt,{children:["occupied"===a&&r?"".concat(r.prenom," ").concat(r.nom):"Place disponible",Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:n.libelle})]}),"occupied"===a&&j&&"GH"===j.role.roleUniqueId&&r&&r.id!=(null===d||void 0===d?void 0:d.id)&&Object(f.jsxs)(Mt,{children:[Object(f.jsx)("a",{href:"mailto:".concat(r.email),children:r.email}),Object(f.jsx)("br",{}),Object(f.jsx)("a",{href:"tel:".concat(r.telephone),children:r.telephone})]}),"occupied"!==a&&!j&&!b&&Object(f.jsx)(xe.a,{disabled:o,color:"primary",variant:"contained",onClick:function(){return h(e)},children:"S\u2019inscrire"}),(null===r||void 0===r?void 0:r.id)===(null===d||void 0===d?void 0:d.id)&&"occupe"===e.statut&&!b&&Object(f.jsx)(xe.a,{disabled:o,color:"primary",variant:"contained",onClick:function(){return x(e)},children:"Demander un remplacement"})]},t)})):Object(f.jsx)(Fe.a,{})})]})},It=function(e){var t=e.piaf,n=t.creneau,r=Object(a.useState)(!1),i=Object(B.a)(r,2),c=i[0],s=i[1],l=Object(o.useLazyQuery)(q,{variables:{id:n.id}}),u=Object(B.a)(l,2),d=u[0],j=u[1].data,b={id:n.id,title:n.titre,start:new Date(n.debut),end:new Date(n.fin),piafs:null===j||void 0===j?void 0:j.creneau.piafs};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(Ve.a,{button:!0,onClick:function(){s(!0),d()},children:[Object(f.jsx)(Ke.a,{children:Object(f.jsx)(rt,{piaf:t})}),Object(f.jsx)(Qe.a,{primary:Le(b.start),secondary:"de ".concat(Ue(b.start)," \xe0 ").concat(Ue(b.end))})]},t.id),Object(f.jsx)(At,{show:c,slot:b,handleClose:function(){s(!1)}})]})},kt=function(){var e=$().auth,t=Object(o.useQuery)(F,{variables:{idPiaffeur:"/api/users/".concat(e.id),after:We(Object(qe.a)())}}),n=t.loading,r=t.error,a=t.data;return n?Object(f.jsx)(Fe.a,{}):r?Object(f.jsx)(P,{error:r}):a?a.piafs.length?Object(f.jsx)(Je.a,{children:a.piafs.map((function(e){return Object(f.jsx)(It,{piaf:e},e.id)}))}):Object(f.jsx)("p",{children:"Aucune PIAF \xe0 venir. Inscrivez-vous sur le planning !"}):null},zt=n(151),St=function(){var e=$().auth,t=Object(o.useQuery)(F,{variables:{after:We(Object(qe.a)()),before:We(Object(zt.a)(Object(qe.a)(),700)),statut:"remplacement"}}),n=t.loading,r=t.error,a=t.data;if(n)return Object(f.jsx)(Fe.a,{});if(r)return Object(f.jsx)(P,{error:r});if(!a)return null;var i=a.piafs.filter((function(t){var n;return(null===(n=t.piaffeur)||void 0===n?void 0:n.id)!=="/api/users/".concat(e.id)}));return i.length?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Les cr\xe9neaux ci dessous ne peuvent plus \xeatre effectu\xe9s par un Chouettos, ils sont disponibles pour un remplacement. N\u2019h\xe9sites pas \xe0 te positionner, la personne que tu remplaces sera avertie par e-mail instantan\xe9ment !"}),Object(f.jsx)(Je.a,{children:i.map((function(e){return Object(f.jsx)(It,{piaf:e},e.id)}))})]}):Object(f.jsx)("p",{children:"Aucun remplacement \xe0 venir n\u2019est demand\xe9."})};var Et=Object(l.a)("div",{target:"eeumoro3"})({name:"1vu4ehm",styles:"display:flex;flex-wrap:wrap;>div{flex:0 1 50%;min-width:400px;}"}),Dt=Object(l.a)("div",{target:"eeumoro2"})({name:"1e2ri1z",styles:"p{font-size:2.5rem;margin-bottom:2rem;&::first-letter{text-transform:uppercase;}span{font-size:0.5em;}}"}),Pt=Object(l.a)("div",{target:"eeumoro1"})(""),Gt=Object(l.a)("div",{target:"eeumoro0"})(""),Ht=function(e){if(!e)return"\u2026";var t=e.statuts.find((function(e){return e.actif}));return t?t.libelle:"?"},Rt=function(){var e=$().user;return Object(f.jsxs)(Et,{children:[Object(f.jsxs)(Dt,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Mon statut"}),Object(f.jsxs)(p.a,{children:["14/12 ",Object(f.jsx)("span",{children:"PIAFs attendues"})]}),Object(f.jsx)(p.a,{variant:"h2",children:"Je suis"}),Object(f.jsx)(p.a,{children:Ht(e)})]}),Object(f.jsxs)(Pt,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Mes prochaines PIAFs"}),Object(f.jsx)(kt,{})]}),Object(f.jsxs)(Gt,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Remplacements"}),Object(f.jsx)(St,{})]})]})},Bt=n(47),Ct=n(250),Zt=n(255),qt=n(251),Ft=n(253),Jt=n(254),Nt=n(252),Yt=n(285),Tt=n(281),Lt=n(249),Ut=n(284),Xt=n(248);var Wt="#FFFFAA",Vt=Object(l.a)("button",{target:"e7w31zc2"})("width:100%;border:none;background-color:",(function(e){return e.$open?Wt:"transparent"}),";padding:5px;text-align:left;font-size:inherit;line-height:inherit;font:inherit;cursor:pointer;&:focus{background-color:",Wt,";outline:none;}"),Kt=Object(l.a)("div",{target:"e7w31zc1"})({name:"88ia8m",styles:"span{color:gray;}"}),Qt=Object(l.a)("div",{target:"e7w31zc0"})({name:"3wl4gs",styles:"display:flex;flex-wrap:wrap;margin:0 -2px"}),$t=function(e){var t,n=e.slot,r=Object(a.useState)(!1),i=Object(B.a)(r,2),c=i[0],s=i[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(Vt,{$open:c,onClick:function(){s(!0)},children:[Object(f.jsxs)(Kt,{children:[Object(f.jsxs)("strong",{children:[Ue(n.start),"\u2013",Ue(n.end)]}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:n.title})]}),Object(f.jsx)(Qt,{children:null===(t=n.piafs)||void 0===t?void 0:t.map((function(e){return Object(f.jsx)(rt,{piaf:e},e.id)}))})]}),Object(f.jsx)(At,{show:c,slot:n,handleClose:function(){s(!1)}})]})};var _t=Object(l.a)("div",{target:"exian1q2"})("opacity:",(function(e){return"past"===e.$when?.5:1}),";border:1px solid gray;min-height:80px;background-color:",(function(e){return"present"===e.$when?"#d0d9d0":"#eee"}),";"),en=Object(l.a)("h3",{target:"exian1q1"})({name:"upb6wm",styles:"margin:0 5px;font-weight:500;text-transform:capitalize"}),tn=Object(l.a)("ul",{target:"exian1q0"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),nn=function(e){var t,n=e.day;return Object(f.jsxs)(_t,{$when:Object(Ut.a)(n.start)?"present":Object(Xt.a)(n.start)?"past":"future",children:[Object(f.jsx)(en,{children:(t=n.start,Te(t,"EEEE d MMM"))}),Object(f.jsx)(tn,{children:n.slots.map((function(e){return Object(f.jsx)($t,{slot:e},e.id)}))})]})},rn=function(){return Object(f.jsx)(_t,{$when:"past"})};var an=Object(l.a)("div",{target:"e1f08xgb1"})({name:"1juea80",styles:"border:1px solid gray;margin:0;padding:0"}),cn=Object(l.a)("div",{target:"e1f08xgb0"})({name:"agoxxa",styles:"@media screen and (min-width: 800px){display:flex;>div{flex:1 0 14.29%;}}"}),sn=function(e){var t=e.start,n=e.end,r=e.list;if(!r)return null;var a=Object(Yt.a)({start:t,end:n},{weekStartsOn:1}).map((function(e){return{start:e,days:[0,1,2,3,4,5,6].map((function(t){return{start:Object(zt.a)(e,t),slots:[]}}))}}));return r.forEach((function(e){var t=new Date(e.debut),n=Object(Tt.a)(t,a[0].start),r=a[n],i=(Object(Lt.a)(t)||7)-1,c=e.piafs.slice().sort((function(e,t){return e.role.id>t.role.id?1:-1}));r.days[i].slots.push({id:e.id,title:e.titre,start:t,end:new Date(e.fin),piafs:c})})),Object(f.jsx)(an,{children:a.map((function(e,r){return Object(f.jsx)(cn,{children:e.days.map((function(e,r){return e.start>=t&&e.start<n?Object(f.jsx)(nn,{day:e},r):Object(f.jsx)(rn,{},r)}))},r)}))})};var on=Object(l.a)("div",{target:"e1i6h5gm4"})({name:"1ocx2cx",styles:"border:2px solid gray;height:500px;display:flex;align-items:center;justify-content:center"}),ln=Object(l.a)("div",{target:"e1i6h5gm3"})({name:"1j44lco",styles:"border:1px solid gray;border-radius:10px;max-width:500px;margin:20px 0 100px auto;padding:10px;text-align:center"}),un=Object(l.a)("h3",{target:"e1i6h5gm2"})({name:"kcgxcv",styles:"text-align:left;margin-top:0"}),dn=Object(l.a)("nav",{target:"e1i6h5gm1"})({name:"1v3pou9",styles:"display:flex;align-items:center;margin-bottom:1rem;button:not(:first-of-type){margin-left:1rem;}h2{flex:1;text-transform:capitalize;}"}),jn=Object(l.a)("div",{target:"e1i6h5gm0"})({name:"1fghvjy",styles:"display:flex;justify-content:end"}),bn=function(){var e,t=Object(a.useContext)(Re),n=t.goBack,r=t.goForward,i=t.goToday,c=t.start,s=t.end,l=Object(Bt.a)(),u=Object(Ct.a)(l.breakpoints.up("sm")),d=u?"Aujourd\u2019hui":"",j=u?"Pr\xe9c\xe9dent":"",b=u?"Suivant":"",O=Object(o.useQuery)(J,{variables:{after:c,before:s}}),h=O.data,x=O.loading,m=O.error;return m?Object(f.jsx)(E,{error:m}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(dn,{children:[Object(f.jsx)(p.a,{variant:"h2",children:(e=c,Te(e,"MMMM yyyy"))}),Object(f.jsxs)(jn,{children:[Object(f.jsx)(xe.a,{disabled:x,variant:"contained",color:"primary",startIcon:Object(f.jsx)(qt.a,{}),onClick:n,children:j}),Object(f.jsx)(xe.a,{disabled:x||Object(Nt.a)(c,new Date),variant:"contained",color:"primary",startIcon:Object(f.jsx)(Ft.a,{}),onClick:i,children:d}),Object(f.jsx)(xe.a,{disabled:x,variant:"contained",color:"primary",endIcon:Object(f.jsx)(Jt.a,{}),onClick:r,children:b})]})]}),x?Object(f.jsx)(on,{children:Object(f.jsx)(Fe.a,{})}):Object(f.jsx)(sn,{start:c,end:s,list:null===h||void 0===h?void 0:h.creneaus}),Object(f.jsxs)(ln,{children:[Object(f.jsx)(un,{children:"L\xe9gende"}),Object(f.jsxs)(Zt.a,{container:!0,children:[Object(f.jsxs)(Zt.a,{item:!0,xs:4,children:[Object(f.jsx)(tt,{$status:"available"}),Object(f.jsx)("div",{children:"PIAF disponible"})]}),Object(f.jsxs)(Zt.a,{item:!0,xs:4,children:[Object(f.jsx)(tt,{$status:"replacement"}),Object(f.jsx)("div",{children:"Cherche rempla\xe7ant\xb7e"})]}),Object(f.jsxs)(Zt.a,{item:!0,xs:4,children:[Object(f.jsx)(tt,{$status:"occupied"}),Object(f.jsx)("div",{children:"PIAF occup\xe9e"})]})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(Zt.a,{container:!0,children:[Object(f.jsxs)(Zt.a,{item:!0,xs:4,children:[Object(f.jsx)(tt,{$status:"available",$role:"CH",children:"\xa0"}),Object(f.jsx)("div",{children:"Chouettos"})]}),Object(f.jsxs)(Zt.a,{item:!0,xs:4,children:[Object(f.jsx)(tt,{$status:"available",children:"CA"}),Object(f.jsx)("div",{children:"Caissier\xb7e"})]}),Object(f.jsxs)(Zt.a,{item:!0,xs:4,children:[Object(f.jsx)(tt,{$status:"available",children:"GH"}),Object(f.jsx)("div",{children:"Grand Hibou"})]})]})]})]})},pn=n(257),fn=n(258),On=n(256);var hn=Object(l.a)("div",{target:"e16mrsvp1"})({name:"1bv1svr",styles:"height:50vh;display:flex;align-items:center;justify-content:center"}),xn=Object(l.a)("div",{target:"e16mrsvp0"})({name:"71mxng",styles:"margin:0 auto;max-width:500px;p,.MuiTextField-root{margin:10px 0;}button{margin:15px auto;display:block;}"}),mn=function(){var e,t=$().user,n=Object(a.useState)(!1),r=Object(B.a)(n,2),i=r[0],c=r[1],s=mt().openDialog,o=Object(a.useState)({email:(null===t||void 0===t?void 0:t.email)||"",telephone:(null===t||void 0===t?void 0:t.telephone)||""}),l=Object(B.a)(o,2),u=l[0],d=l[1];Object(a.useEffect)((function(){t&&d({email:t.email,telephone:t.telephone})}),[t]);var j=function(e){var t=e.target,n=t.name,r=t.value;d(Object(H.a)(Object(H.a)({},u),{},Object(Se.a)({},n,r)))},b=function(){var e=Object(Oe.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c(!0),e.prev=2,e.next=5,re.mutate({mutation:Y,variables:Object(H.a)(Object(H.a)({},u),{},{idUser:null===t||void 0===t?void 0:t.id})});case 5:s("Vos informations ont bien \xe9t\xe9 mises \xe0 jour"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),k(e.t0);case 11:c(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();if(!t)return Object(f.jsx)(hn,{children:Object(f.jsx)(Fe.a,{})});var O=null===(e=t.statuts.find((function(e){return e.actif})))||void 0===e?void 0:e.libelle.toLowerCase(),h=t.rolesChouette.map((function(e){return e.libelle})).join(", ");return Object(f.jsx)(xn,{children:Object(f.jsxs)("form",{onSubmit:b,children:[Object(f.jsxs)(p.a,{variant:"h2",children:[t.prenom," ",t.nom]}),Object(f.jsxs)("p",{children:["Je suis ",O||"(sans statut)"]}),Object(f.jsxs)("p",{children:["Et j\u2019ai comme formations ",h||"(sans r\xf4le)"]}),Object(f.jsx)(he.a,{name:"telephone",label:"T\xe9l\xe9phone",required:!0,disabled:!t,value:u.telephone,onChange:j,fullWidth:!0,InputProps:{startAdornment:Object(f.jsx)(On.a,{position:"start",children:Object(f.jsx)(pn.a,{})})}}),Object(f.jsx)(he.a,{name:"email",label:"Adresse e-mail",required:!0,disabled:!t,value:u.email,onChange:j,fullWidth:!0,InputProps:{startAdornment:Object(f.jsx)(On.a,{position:"start",children:Object(f.jsx)(fn.a,{})})}}),Object(f.jsx)(xe.a,{color:"primary",variant:"contained",disabled:i,type:"submit",children:"Enregistrer"})]})})},vn=n(6),gn=n(259),yn=n(282),wn=n(279),Mn=n(266),An=n(267),In=n(283),kn=n(271),zn=n(272),Sn=n(260),En=n(261),Dn=n(262),Pn=n(263),Gn=n(264),Hn=n(265),Rn=n(268),Bn=n(269),Cn=n(270),Zn=n(157),qn=function(e){var t=e.href,n=Object(Zn.a)(e,["href"]);return(null===t||void 0===t?void 0:t.startsWith("/"))?Object(f.jsx)(de.b,Object(H.a)({to:t},n)):Object(f.jsx)("a",Object(H.a)({href:t},n))},Fn=260,Jn=Object(Ee.a)(wn.a)({flexGrow:1}),Nn=Object(gn.a)((function(e){return Object(yn.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Fn,width:"calc(100% - ".concat(Fn,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:Fn,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Fn,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Se.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(H.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuItem:{textDecoration:"none",color:"black"}})})),Yn=[{title:"Accueil",href:"/home",Icon:Sn.a},{title:"Planning",href:"/planning",Icon:En.a},{title:"R\xe9serve",href:"/reserve",Icon:Dn.a},{title:"R\xe9servation automatique",href:"/auto",Icon:Pn.a},{title:"Mon profil",href:"/profile",Icon:Gn.a},{title:"Espace membre",href:"https://espace-membres.lachouettecoop.fr/page/homepage",Icon:Hn.a}],Tn=function(){var e,t,n=Nn(),r=$(),i=r.user,c=r.logout,s=Object(Bt.a)(),o=Object(a.useState)(!1),l=Object(B.a)(o,2),u=l[0],d=l[1];return Object(Ct.a)(s.breakpoints.up("sm"))?Object(f.jsxs)("div",{className:n.root,children:[Object(f.jsx)(Mn.a,{position:"fixed",className:Object(vn.a)(n.appBar,Object(Se.a)({},n.appBarShift,u)),children:Object(f.jsxs)(An.a,{children:[Object(f.jsx)(at.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(vn.a)(n.menuButton,Object(Se.a)({},n.hide,u)),children:Object(f.jsx)(Rn.a,{})}),Object(f.jsx)(p.a,{variant:"h6",noWrap:!0,children:"Planning"}),Object(f.jsx)(Jn,{}),Object(f.jsx)(xe.a,{onClick:c,color:"inherit",children:"D\xe9connexion"})]})}),Object(f.jsx)(An.a,{}),Object(f.jsxs)(In.a,{variant:"permanent",className:Object(vn.a)(n.drawer,(e={},Object(Se.a)(e,n.drawerOpen,u),Object(Se.a)(e,n.drawerClose,!u),e)),classes:{paper:Object(vn.a)((t={},Object(Se.a)(t,n.drawerOpen,u),Object(Se.a)(t,n.drawerClose,!u),t))},children:[Object(f.jsx)("div",{className:n.toolbar,children:Object(f.jsx)(at.a,{onClick:function(){d(!1)},children:"rtl"===s.direction?Object(f.jsx)(Bn.a,{}):Object(f.jsx)(Cn.a,{})})}),Object(f.jsx)(kn.a,{}),Object(f.jsxs)(Ve.a,{button:!0,children:[Object(f.jsx)(zn.a,{children:Object(f.jsx)(Gn.a,{})}),i&&Object(f.jsx)(Qe.a,{primary:"".concat(i.prenom," ").concat(i.nom)})]}),Object(f.jsx)(kn.a,{}),Object(f.jsx)(Je.a,{children:Yn.map((function(e){var t=e.href,r=e.title,a=e.Icon;return Object(f.jsx)(qn,{className:n.menuItem,href:t,children:Object(f.jsxs)(Ve.a,{button:!0,children:[Object(f.jsx)(zn.a,{children:Object(f.jsx)(a,{})}),Object(f.jsx)(Qe.a,{primary:r})]})},t)}))})]})]}):null},Ln=n(154),Un=n(273),Xn=n(274),Wn=Object(gn.a)((function(e){return Object(yn.a)({appBar:{top:"auto",bottom:0},toolbar:{justifyContent:"space-between"},label:{flexDirection:"column"},menu:{"& ul":{paddingTop:"0 !important",paddingBottom:"0 !important"}},textMenuDecoration:{textDecoration:"none"},textMenu:{color:"white",backgroundColor:e.palette.primary.main,"&:hover":{background:e.palette.primary.dark}},icon:{justifyContent:"center"}})})),Vn=[{title:"Planning",href:"/planning",Icon:En.a},{title:"R\xe9serve",href:"/reserve",Icon:Dn.a},{title:"Auto",href:"/auto",Icon:Pn.a}],Kn=[{title:"Mon profil",href:"/profile",Icon:Gn.a},{title:"Espace membre",href:"/member",Icon:Hn.a}];function Qn(){var e=Wn(),t=Object(a.useState)(null),n=Object(B.a)(t,2),r=n[0],i=n[1],c=Object(Bt.a)(),s=Object(Ct.a)(c.breakpoints.down("xs")),o=function(){i(null)};return s?Object(f.jsx)(a.Fragment,{children:Object(f.jsx)(Mn.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(f.jsxs)(An.a,{className:e.toolbar,children:[Vn.map((function(t){var n=t.href,r=t.title,a=t.Icon;return Object(f.jsx)(de.b,{className:e.textMenuDecoration,to:n,children:Object(f.jsxs)(Ve.a,{button:!0,className:e.label,children:[Object(f.jsx)(zn.a,{className:e.icon,children:Object(f.jsx)(a,{})}),Object(f.jsx)(Qe.a,{className:e.textMenu,primary:r})]})},r)})),Object(f.jsx)(Ln.a,{id:"simple-menu",className:e.menu,anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o,children:Kn.map((function(t){return Object(f.jsx)(de.b,{className:e.textMenuDecoration,to:t.href,children:Object(f.jsx)(Un.a,{className:e.textMenu,onClick:o,children:t.title})},t.title)}))}),Object(f.jsx)(at.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},edge:"end",color:"inherit",children:Object(f.jsx)(Xn.a,{})})]})})}):null}var $n=n(155),_n=n(275),er=n(276),tr=n(280);var nr=Object(l.a)("div",{target:"e1y580i92"})({name:"1p6wbo1",styles:"height:300px;display:flex;align-items:center;justify-content:center"}),rr=Object(l.a)("div",{target:"e1y580i91"})({name:"z3fm1b",styles:"margin-top:2rem;@media screen and (min-width: 980px){display:flex;>div{flex:1 0 14.29%;}}"}),ar=Object(l.a)("div",{target:"e1y580i90"})({name:"1cltfo6",styles:"margin:20px 0 40px"}),ir=function(){var e=$().user,t=Object(a.useState)(!1),n=Object(B.a)(t,2),r=n[0],i=n[1],c=mt().openDialog,s=Object(a.useState)(""),l=Object(B.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)([]),b=Object(B.a)(j,2),O=b[0],h=b[1],x=Object(o.useQuery)(X),m=x.data,v=x.loading,g=x.error,y=Object(o.useQuery)(U,{skip:!e,variables:{idUser:null===e||void 0===e?void 0:e.id}}),w=y.data,M=y.loading,A=y.error,I=v||M;Object(a.useEffect)((function(){w&&(null===w||void 0===w?void 0:w.reserves.length)>0&&(d(w.reserves[0].informations),h(w.reserves[0].creneauGeneriques.map((function(e){return e.id}))))}),[w]);var z=g||A;if(z)return Object(f.jsx)(E,{error:z});var S=[];if(m)for(var D=function(e){null===m||void 0===m||m.creneauGeneriques.filter((function(t){var n=t.jour,r=t.actif;return n===e&&r})).forEach((function(t){var n=S.find((function(t){return t.day===e})),r=new Date(t.heureDebut).getTime();if(n){var a=n.slots.find((function(e){return e.time===r}));a?a.allSlotIds.push(t.id):n.slots.push({time:r,slotDisplayed:t,allSlotIds:[t.id]})}else S.push({day:e,slots:[{time:r,slotDisplayed:t,allSlotIds:[t.id]}]})}))},P=0;P<7;P++)D(P);var G=function(e){var t=[];return S.forEach((function(n){var r=n.slots.find((function(t){return t.slotDisplayed.id===e}));r&&(t=r.allSlotIds)})),t},H=function(){var t=Object(Oe.a)(fe.a.mark((function t(){var n;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),n={user:null===e||void 0===e?void 0:e.id,informations:u,creneauGenerique:O},(null===w||void 0===w?void 0:w.reserves.length)&&(n.id=w.reserves[0].id),t.prev=3,t.next=6,re.mutate({mutation:n.id?L:T,variables:n});case 6:c((n.id?"Votre inscription \xe0 la r\xe9serve a bien \xe9t\xe9 mise \xe0 jour.":"Vous \xeates d\xe9sormais inscrit\xb7e \xe0 la reserve.")+" Merci !"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),k(t.t0);case 12:i(!1);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"R\xe9serve"}),I?Object(f.jsx)(nr,{children:Object(f.jsx)(Fe.a,{})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(rr,{children:S.map((function(e){return Object(f.jsxs)(_n.a,{children:[(t=e.day,Xe[t]),e.slots.map((function(e){var t=e.slotDisplayed;return Object(f.jsx)(er.a,{control:Object(f.jsx)(tr.a,{color:"default",checked:O.includes(t.id),onChange:function(e){var n=e.target;!function(e,t){var n=O.slice();t?(n.push.apply(n,Object($n.a)(G(e))),h(n)):(G(e).forEach((function(e){n.splice(n.indexOf(e),1)})),h(n))}(t.id,n.checked)}}),label:"".concat(Ue(t.heureDebut)," - ").concat(Ue(t.heureFin))},t.id)}))]},e.day);var t}))}),Object(f.jsx)(ar,{children:Object(f.jsx)(he.a,{multiline:!0,disabled:I,label:"Informations suppl\xe9mentaires (optionnel)",value:u,onChange:function(e){var t=e.target;d(t.value)},fullWidth:!0})}),Object(f.jsx)(xe.a,{disabled:r,color:"primary",variant:"contained",onClick:H,children:"Enregistrer"})]})]})},cr=Object(Ee.a)(be.a)((function(e){var t=e.theme;return Object(Se.a)({marginTop:t.spacing(4),paddingLeft:t.spacing(1)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(12)})})),sr=function(){var e=function(e){var t={};return e.substr(1).split("&").forEach((function(e){if(e){var n=e.split("=");2===n.length&&(t[n[0]]=decodeURIComponent(n[1]))}})),t}(Object(je.g)().search).next;return Object(f.jsxs)(Ze,{children:[Object(f.jsx)(Tn,{}),Object(f.jsxs)(cr,{children:[Object(f.jsxs)(je.d,{children:[Object(f.jsx)(je.b,{path:"/home",children:Object(f.jsx)(Rt,{})}),Object(f.jsx)(je.b,{path:"/planning",children:Object(f.jsx)(bn,{})}),Object(f.jsx)(je.b,{path:"/profile",children:Object(f.jsx)(mn,{})}),Object(f.jsx)(je.b,{path:"/reserve",children:Object(f.jsx)(ir,{})}),Object(f.jsx)(je.b,{path:"/profile",children:Object(f.jsx)(mn,{})}),Object(f.jsx)(je.a,{to:e||"/home"})]}),Object(f.jsx)(Qn,{})]})]})},or=function(){var e=$().auth;return Object(f.jsx)(de.a,{children:Object(f.jsx)(xt,{children:e?Object(f.jsx)(sr,{}):Object(f.jsx)(ze,{})})})};s.a.render(Object(f.jsx)(G,{children:Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(ue,{children:Object(f.jsx)(o.ApolloProvider,{client:re,children:Object(f.jsx)(Q,{children:Object(f.jsx)(or,{})})})})})}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.f7311180.chunk.js.map