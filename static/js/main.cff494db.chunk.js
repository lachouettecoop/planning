(this.webpackJsonpplanning=this.webpackJsonpplanning||[]).push([[0],{185:function(e,t,n){"use strict";n.r(t);var r,a,i,c,s,o,l,u,d,j,b=n(0),p=n.n(b),O=n(22),x=n.n(O),f=n(273),h=n(21),m=n(62),g=n(18),v=n(53),y=Object(h.gql)(r||(r=Object(v.a)(["\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      username\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statuts {\n        id\n        libelle\n        actif\n        dateDebut\n        dateFin\n      }\n    }\n  }\n"]))),w=Object(h.gql)(a||(a=Object(v.a)(["\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      debut\n      fin\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          prenom\n          nom\n        }\n      }\n    }\n  }\n"]))),A=Object(h.gql)(i||(i=Object(v.a)(["\n  query PIAFS($idPiaffeur: String, $after: String, $before: String, $statut: String) {\n    piafs(piaffeur: $idPiaffeur, creneau_debut: { after: $after, before: $before }, statut: $statut) {\n      id\n      statut\n      creneau {\n        id\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        prenom\n        nom\n        username\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n"]))),M=Object(h.gql)(c||(c=Object(v.a)(["\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      piafs {\n        id\n        statut\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n        }\n      }\n    }\n  }\n"]))),I=Object(h.gql)(s||(s=Object(v.a)(["\n  mutation REGISTRATION_UPDATE($idPiaf: ID!, $idPiaffeur: String!, $statut: String!) {\n    updatePiaf(input: { id: $idPiaf, piaffeur: $idPiaffeur, statut: $statut }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n      }\n    }\n  }\n"]))),S=Object(h.gql)(o||(o=Object(v.a)(["\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String) {\n    updateUser(input: { id: $idUser, email: $email, telephone: $telephone }) {\n      user {\n        id\n        username\n        email\n        telephone\n      }\n    }\n  }\n"]))),E=Object(h.gql)(l||(l=Object(v.a)(["\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),k=Object(h.gql)(u||(u=Object(v.a)(["\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n          username\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),D=Object(h.gql)(d||(d=Object(v.a)(["\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n"]))),P=Object(h.gql)(j||(j=Object(v.a)(["\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n"]))),z=n(36),G=n(142),R=Object(h.createHttpLink)({uri:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/planning",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API,"/api/graphql")}),C=Object(G.a)((function(e,t){var n=J();return n?Object(z.a)(Object(z.a)({},t),{},{headers:Object(z.a)(Object(z.a)({},t.headers),{},{"X-Auth-Token":n.token})}):t})),H=new h.ApolloClient({link:C.concat(R),cache:new h.InMemoryCache}),B=n(1),q=Object(b.createContext)({}),Z="user",J=function(){var e=localStorage.getItem(Z);return e?JSON.parse(e):null},T=function(e){var t=e.children,n=Object(b.useState)(J),r=Object(g.a)(n,2),a=r[0],i=r[1],c=Object(b.useState)(null),s=Object(g.a)(c,2),o=s[0],l=s[1];Object(b.useEffect)((function(){a&&H.query({query:y,variables:{id:"api/users/".concat(a.id)}}).then((function(e){var t=e.data;l(t.user)}))}),[a]);return Object(B.jsx)(q.Provider,{value:{auth:a,user:o,login:function(e){i(e),localStorage.setItem(Z,JSON.stringify(e))},logout:function(){i(null),localStorage.removeItem(Z)}},children:t})};function N(){return Object(b.useContext)(q)}var F=n(26),Y=n(223),U=n(27),L=n.n(U),W=n(43),X=n(275),V=n(226),K=n(143),Q=n.n(K),$=function(){var e=Object(W.a)(L.a.mark((function e(t,n){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/planning",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API,"/").concat(t),{method:"POST",body:n});case 2:if((r=e.sent).ok){e.next=5;break}throw new Q.a(r.status,r.statusText);case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){console.error(e),alert(e.message)},ee=function(){var e=Object(b.useState)(!1),t=Object(g.a)(e,2),n=t[0],r=t[1],a=N().login,i=function(){var e=Object(W.a)(L.a.mark((function e(t){var n,i,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),r(!0),e.prev=3,e.next=6,$("login_api",n);case 6:i=e.sent,c={id:i.userId,email:n.get("username"),token:i.token},a(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),_(e.t0),r(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsx)(Y.a,{children:Object(B.jsxs)("form",{onSubmit:i,children:[Object(B.jsx)(X.a,{type:"email",name:"username",label:"E-mail",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(B.jsx)(X.a,{type:"password",name:"password",label:"Mot de passe",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(B.jsx)(V.a,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",disabled:n,children:"Connexion"})]})})},te=function(){var e=Object(F.g)().pathname;return Object(B.jsx)(Y.a,{children:Object(B.jsxs)(F.d,{children:[Object(B.jsx)(F.b,{path:"/login",children:Object(B.jsx)(ee,{})}),Object(B.jsx)(F.a,{to:"/login?next=".concat(e)})]})})},ne=n(39),re=n(154),ae=n(227),ie=n(228),ce=n(229),se=n(148),oe=Object(b.createContext)({}),le=function(){return Object(ae.a)(new Date)},ue=function(){return Object(ie.a)(new Date)},de=function(e){var t=e.children,n=Object(b.useState)(le),r=Object(g.a)(n,2),a=r[0],i=r[1],c=Object(b.useState)(ue),s=Object(g.a)(c,2),o=s[0],l=s[1];return Object(B.jsx)(oe.Provider,{value:{start:a,end:o,goBack:function(){var e=Object(ce.a)(a,1);i(e),l(Object(ie.a)(e))},goForward:function(){var e=Object(se.a)(a,1);i(e),l(Object(ie.a)(e))},goToday:function(){i(le),l(ue)}},children:t})};var je=n(13),be=n(242),pe=n(239),Oe=n(225),xe=n(274),fe=n(151),he=function(e,t){return"string"===typeof e&&(e=new Date(e)),Object(xe.a)(e,t,{locale:fe.a})},me=function(e){return he(e,"EEEE d MMMM yyyy")},ge=function(e){return he(e,"HH:mm")},ve=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],ye=function(e){return Object(xe.a)(e,"yyyy-MM-dd")};var we=Object(je.a)("div",{target:"e11z1m2j0"})({name:"1nm0ewq",styles:"color:#e53935"}),Ae=n(189),Me=n(240),Ie=n(241),Se={available:"white",replacement:"orange",occupied:"green"},Ee={CH:"data:image/png;base64,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"},ke=function(e){if(e){var t=Ee[e];if(t)return"url(".concat(t,")")}},De=Object(je.a)("span",{target:"emw2y5h0"})("flex-shrink:0;display:inline-block;margin:2px;width:32px;height:32px;border:2px solid ",(function(e){var t=e.$status;return Se[t]}),";border-radius:50%;background-color:#ddd;background-image:",(function(e){var t=e.$role;return ke(t)||"none"}),";background-position:center;background-size:24px;background-repeat:no-repeat;line-height:28px;text-align:center;"),Pe=function(e){return"remplacement"===e.statut?"replacement":e.piaffeur?"occupied":"available"},ze=function(e){var t=e.piaf;return Object(B.jsx)(De,{$status:Pe(t),$role:t.role.roleUniqueId,children:ke(t.role.roleUniqueId)?"":t.role.roleUniqueId})},Ge=n(235),Re=n(230),Ce=n(231),He=n(12),Be=n(232),qe=n(238),Ze=n(115),Je=n(236),Te=n(68),Ne=n(237),Fe=n(234),Ye=n(233),Ue=function(e){var t=e.open,n=e.handleClose,r=e.title,a=e.message;return Object(B.jsxs)(Re.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(B.jsx)(Ce.a,{id:"alert-dialog-title",children:r}),Object(B.jsx)(Be.a,{children:Object(B.jsx)(Ye.a,{id:"alert-dialog-description",children:a})}),Object(B.jsx)(Fe.a,{children:Object(B.jsx)(V.a,{onClick:n,color:"primary",children:"OK"})})]})},Le=Object(b.createContext)({}),We=function(e){var t=e.children,n=Object(b.useState)(!1),r=Object(g.a)(n,2),a=r[0],i=r[1],c=Object(b.useState)(""),s=Object(g.a)(c,2),o=s[0],l=s[1],u=Object(b.useState)(""),d=Object(g.a)(u,2),j=d[0],p=d[1],O=function(){i(!1)};return Object(B.jsxs)(Le.Provider,{value:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";p(e),l(t),i(!0)},closeDialog:O},children:[t,Object(B.jsx)(Ue,{open:a,handleClose:O,title:o,message:j})]})},Xe=function(){return Object(b.useContext)(Le)};var Ve=Object(je.a)(Ge.a,{target:"e1el6lcd4"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),Ke=Object(je.a)("div",{target:"e1el6lcd3"})({name:"10vegbb",styles:"span{color:gray;margin-left:5px;}"}),Qe=Object(je.a)("div",{target:"e1el6lcd2"})({name:"n2b3mr",styles:"margin:0 0 16px 0;display:flex;align-items:center;justify-content:center;flex-wrap:wrap"}),$e=Object(je.a)("div",{target:"e1el6lcd1"})({name:"825opm",styles:"flex:1;margin:0 8px;span{color:#888;}"}),_e=Object(je.a)("div",{target:"e1el6lcd0"})({name:"2qga7i",styles:"text-align:right"}),et=function(e){var t,n=e.slot,r=e.show,a=e.handleClose,i=Object(b.useState)(!1),c=Object(g.a)(i,2),s=c[0],o=c[1],l=Xe().openDialog,u=N().user,d=null===(t=n.piafs)||void 0===t?void 0:t.find((function(e){var t=e.piaffeur,n=e.statut;return(null===t||void 0===t?void 0:t.id)===(null===u||void 0===u?void 0:u.id)&&"occupe"===n})),j=n.start.getTime()<Date.now(),p=function(){var e=Object(W.a)(L.a.mark((function e(){var t,r,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Ze.a)(n.start),r=Object(Je.a)(n.start),e.prev=2,e.next=5,H.query({query:A,variables:{idPiaffeur:null===u||void 0===u?void 0:u.id,after:t,before:r}});case 5:return a=e.sent,e.abrupt("return",a.data.piafs.length);case 9:e.prev=9,e.t0=e.catch(2),_(e.t0);case 12:return e.abrupt("return",0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(W.a)(L.a.mark((function e(){var t,r,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Te.a)(n.start),r=Object(Ne.a)(n.start),e.prev=2,e.next=5,H.query({query:A,variables:{idPiaffeur:null===u||void 0===u?void 0:u.id,after:t,before:r}});case 5:return a=e.sent,e.abrupt("return",a.data.piafs.length);case 9:e.prev=9,e.t0=e.catch(2),_(e.t0);case 12:return e.abrupt("return",0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(W.a)(L.a.mark((function e(t){var r,a,i,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=null===u||void 0===u?void 0:u.rolesChouette)&&a.find((function(e){return e.id===t.role.id}))){e.next=4;break}return l("Pour t\u2019inscrire \xe0 cette PIAF tu dois d\u2019abord passer la formation ".concat(t.role.libelle)),e.abrupt("return");case 4:return o(!0),e.next=7,p();case 7:if(!(e.sent>=3)){e.next=11;break}return l("Il n'est pas possible de s'inscriresur plus de 3 PIAF par semaine"),e.abrupt("return");case 11:return e.next=13,O();case 13:if(!(e.sent>=2)){e.next=17;break}return l("Il n'est pas possible de s'inscrire sur plus de 2 PIAF par jour"),e.abrupt("return");case 17:return i=t.id,(c=null===(r=n.piafs)||void 0===r?void 0:r.find((function(e){var n=e.statut,r=e.role;return"remplacement"===n&&r.id===t.role.id})))&&(i=c.id),e.prev=20,e.next=23,H.mutate({mutation:I,variables:{idPiaf:i,idPiaffeur:null===u||void 0===u?void 0:u.id,statut:"occupe"}});case 23:l("Inscription OK. Merci !"),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(20),_(e.t0);case 29:o(!1);case 30:case"end":return e.stop()}}),e,null,[[20,26]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(W.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,H.mutate({mutation:I,variables:{idPiaf:t.id,idPiaffeur:null===u||void 0===u?void 0:u.id,statut:"remplacement"}});case 4:l("D\xe9sinscription faite : la PIAF est d\xe9sormais en recherche de remplacement"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),_(e.t0);case 10:o(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(Re.a,{open:r,onClose:a,fullWidth:!0,children:[Object(B.jsx)(Ve,{onClick:a,children:Object(B.jsx)(qe.a,{})}),Object(B.jsxs)(Ce.a,{children:[Object(He.a)(me(n.start)),Object(B.jsx)("br",{}),Object(B.jsxs)(Ke,{children:[Object(B.jsxs)("strong",{children:[ge(n.start),"\u2013",ge(n.end)]}),Object(B.jsx)("span",{children:n.title})]})]}),Object(B.jsx)(Be.a,{children:n.piafs?n.piafs.map((function(e){var t=e.id,n=e.role,r=e.piaffeur,a=Pe(e);return Object(B.jsxs)(Qe,{children:[Object(B.jsx)(ze,{piaf:e}),Object(B.jsxs)($e,{children:["occupied"===a&&r?"".concat(r.prenom," ").concat(r.nom):"Place disponible",Object(B.jsx)("br",{}),Object(B.jsx)("span",{children:n.libelle})]}),"occupied"===a&&d&&"GH"===d.role.roleUniqueId&&r&&r.id!=(null===u||void 0===u?void 0:u.id)&&Object(B.jsxs)(_e,{children:[Object(B.jsx)("a",{href:"mailto:".concat(r.email),children:r.email}),Object(B.jsx)("br",{}),Object(B.jsx)("a",{href:"tel:".concat(r.telephone),children:r.telephone})]}),"occupied"!==a&&!d&&!j&&Object(B.jsx)(V.a,{disabled:s,color:"primary",variant:"contained",onClick:function(){return x(e)},children:"S\u2019inscrire"}),(null===r||void 0===r?void 0:r.id)===(null===u||void 0===u?void 0:u.id)&&"occupe"===e.statut&&!j&&Object(B.jsx)(V.a,{disabled:s,color:"primary",variant:"contained",onClick:function(){return f(e)},children:"Demander un remplacement"})]},t)})):Object(B.jsx)(pe.a,{})})]})},tt=function(e){var t=e.piaf,n=t.creneau,r=Object(b.useState)(!1),a=Object(g.a)(r,2),i=a[0],c=a[1],s=Object(h.useLazyQuery)(w,{variables:{id:n.id}}),o=Object(g.a)(s,2),l=o[0],u=o[1].data,d={id:n.id,title:n.titre,start:new Date(n.debut),end:new Date(n.fin),piafs:null===u||void 0===u?void 0:u.creneau.piafs};return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(Ae.a,{button:!0,onClick:function(){c(!0),l()},children:[Object(B.jsx)(Me.a,{children:Object(B.jsx)(ze,{piaf:t})}),Object(B.jsx)(Ie.a,{primary:me(d.start),secondary:"de ".concat(ge(d.start)," \xe0 ").concat(ge(d.end))})]},t.id),Object(B.jsx)(et,{show:i,slot:d,handleClose:function(){c(!1)}})]})},nt=function(){var e=N().auth,t=Object(h.useQuery)(A,{variables:{idPiaffeur:"/api/users/".concat(e.id),after:ye(Object(be.a)())}}),n=t.loading,r=t.error,a=t.data;return n?Object(B.jsx)(pe.a,{}):r?Object(B.jsx)(we,{children:Object(B.jsxs)("p",{children:["Erreur : ",r.message]})}):a?a.piafs.length?Object(B.jsx)(Oe.a,{children:a.piafs.map((function(e){return Object(B.jsx)(tt,{piaf:e},e.id)}))}):Object(B.jsx)("p",{children:"Aucune PIAF \xe0 venir. Inscrivez-vous sur le planning !"}):null},rt=n(149),at=function(){var e=N().auth,t=Object(h.useQuery)(A,{variables:{after:ye(Object(be.a)()),before:ye(Object(rt.a)(Object(be.a)(),700)),statut:"remplacement"}}),n=t.loading,r=t.error,a=t.data;if(n)return Object(B.jsx)(pe.a,{});if(r)return Object(B.jsx)(we,{children:Object(B.jsxs)("p",{children:["Erreur : ",r.message]})});if(!a)return null;var i=a.piafs.filter((function(t){var n;return(null===(n=t.piaffeur)||void 0===n?void 0:n.id)!=="/api/users/".concat(e.id)}));return i.length?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("p",{children:"Les cr\xe9neaux ci dessous ne peuvent plus \xeatre effectu\xe9s par un Chouettos, ils sont disponibles pour un remplacement. N\u2019h\xe9sites pas \xe0 te positionner, la personne que tu remplaces sera avertie par e-mail instantan\xe9ment !"}),Object(B.jsx)(Oe.a,{children:i.map((function(e){return Object(B.jsx)(tt,{piaf:e},e.id)}))})]}):Object(B.jsx)("p",{children:"Aucun remplacement \xe0 venir n\u2019est demand\xe9."})};var it=Object(je.a)("div",{target:"eeumoro3"})({name:"1vu4ehm",styles:"display:flex;flex-wrap:wrap;>div{flex:0 1 50%;min-width:400px;}"}),ct=Object(je.a)("div",{target:"eeumoro2"})({name:"1ey515q",styles:"h2{margin-bottom:0;}h1{font-weight:normal;font-size:2.5em;margin-top:0;&::first-letter{text-transform:uppercase;}span{font-size:1.2rem;}}"}),st=Object(je.a)("div",{target:"eeumoro1"})(""),ot=Object(je.a)("div",{target:"eeumoro0"})(""),lt=function(e){if(!e)return"\u2026";var t=e.statuts.find((function(e){return e.actif}));return t?t.libelle:"?"},ut=function(){var e=N().user;return Object(B.jsxs)(it,{children:[Object(B.jsxs)(ct,{children:[Object(B.jsx)("h2",{children:"Mon statut"}),Object(B.jsxs)("h1",{children:["14/12 ",Object(B.jsx)("span",{children:"PIAFs attendues"})]}),Object(B.jsx)("h2",{children:"Je suis"}),Object(B.jsx)("h1",{children:lt(e)})]}),Object(B.jsxs)(st,{children:[Object(B.jsx)("h2",{children:"Mes prochaines PIAFs"}),Object(B.jsx)(nt,{})]}),Object(B.jsxs)(ot,{children:[Object(B.jsx)("h2",{children:"Remplacements"}),Object(B.jsx)(at,{})]})]})},dt=n(47),jt=n(245),bt=n(246),pt=n(247),Ot=n(249),xt=n(250),ft=n(248),ht=n(283),mt=n(278),gt=n(244);var vt="#FFFFAA",yt=Object(je.a)("button",{target:"e7w31zc2"})("width:100%;border:none;background-color:",(function(e){return e.$open?vt:"transparent"}),";padding:5px;text-align:left;font-size:inherit;line-height:inherit;font:inherit;cursor:pointer;&:focus{background-color:",vt,";outline:none;}"),wt=Object(je.a)("div",{target:"e7w31zc1"})({name:"88ia8m",styles:"span{color:gray;}"}),At=Object(je.a)("div",{target:"e7w31zc0"})({name:"3wl4gs",styles:"display:flex;flex-wrap:wrap;margin:0 -2px"}),Mt=function(e){var t,n=e.slot,r=Object(b.useState)(!1),a=Object(g.a)(r,2),i=a[0],c=a[1];return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(yt,{$open:i,onClick:function(){c(!0)},children:[Object(B.jsxs)(wt,{children:[Object(B.jsxs)("strong",{children:[ge(n.start),"\u2013",ge(n.end)]}),Object(B.jsx)("br",{}),Object(B.jsx)("span",{children:n.title})]}),Object(B.jsx)(At,{children:null===(t=n.piafs)||void 0===t?void 0:t.map((function(e){return Object(B.jsx)(ze,{piaf:e},e.id)}))})]}),Object(B.jsx)(et,{show:i,slot:n,handleClose:function(){c(!1)}})]})},It=n(282),St=n(243);var Et=Object(je.a)("div",{target:"exian1q2"})("opacity:",(function(e){return"past"===e.$when?.5:1}),";border:1px solid gray;min-height:80px;background-color:",(function(e){return"present"===e.$when?"#d0d9d0":"#eee"}),";"),kt=Object(je.a)("h3",{target:"exian1q1"})({name:"upp2wi",styles:"margin:0 5px;text-transform:capitalize"}),Dt=Object(je.a)("ul",{target:"exian1q0"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),Pt=function(e){var t,n=e.day;return Object(B.jsxs)(Et,{$when:Object(It.a)(n.start)?"present":Object(St.a)(n.start)?"past":"future",children:[Object(B.jsx)(kt,{children:(t=n.start,he(t,"EEEE d MMM"))}),Object(B.jsx)(Dt,{children:n.slots.map((function(e){return Object(B.jsx)(Mt,{slot:e},e.id)}))})]})},zt=function(){return Object(B.jsx)(Et,{$when:"past"})};var Gt=Object(je.a)("div",{target:"e1f08xgb1"})({name:"1juea80",styles:"border:1px solid gray;margin:0;padding:0"}),Rt=Object(je.a)("div",{target:"e1f08xgb0"})({name:"agoxxa",styles:"@media screen and (min-width: 800px){display:flex;>div{flex:1 0 14.29%;}}"}),Ct=function(e){var t=e.start,n=e.end,r=e.list;if(!r)return null;var a=Object(ht.a)({start:t,end:n},{weekStartsOn:1}).map((function(e){return{start:e,days:[0,1,2,3,4,5,6].map((function(t){return{start:Object(rt.a)(e,t),slots:[]}}))}}));return r.forEach((function(e){var t=new Date(e.debut),n=Object(mt.a)(t,a[0].start),r=a[n],i=(Object(gt.a)(t)||7)-1,c=e.piafs.slice().sort((function(e,t){return e.role.id>t.role.id?1:-1}));r.days[i].slots.push({id:e.id,title:e.titre,start:t,end:new Date(e.fin),piafs:c})})),Object(B.jsx)(Gt,{children:a.map((function(e,r){return Object(B.jsx)(Rt,{children:e.days.map((function(e,r){return e.start>=t&&e.start<n?Object(B.jsx)(Pt,{day:e},r):Object(B.jsx)(zt,{},r)}))},r)}))})};var Ht=Object(je.a)("div",{target:"e1i6h5gm5"})({name:"1ocx2cx",styles:"border:2px solid gray;height:500px;display:flex;align-items:center;justify-content:center"}),Bt=Object(je.a)("div",{target:"e1i6h5gm4"})({name:"1j44lco",styles:"border:1px solid gray;border-radius:10px;max-width:500px;margin:20px 0 100px auto;padding:10px;text-align:center"}),qt=Object(je.a)("h3",{target:"e1i6h5gm3"})({name:"kcgxcv",styles:"text-align:left;margin-top:0"}),Zt=Object(je.a)("nav",{target:"e1i6h5gm2"})({name:"6vaup4",styles:"display:flex;align-items:center;margin-bottom:10px;button:not(:first-of-type){margin-left:10px;}"}),Jt=Object(je.a)("h2",{target:"e1i6h5gm1"})({name:"eau6rs",styles:"flex:1;margin:0 20px;text-transform:capitalize;min-width:160px;text-align:center"}),Tt=Object(je.a)("div",{target:"e1i6h5gm0"})({name:"1fghvjy",styles:"display:flex;justify-content:end"}),Nt=function(){var e,t=Object(b.useContext)(oe),n=t.goBack,r=t.goForward,a=t.goToday,i=t.start,c=t.end,s=Object(dt.a)(),o=Object(jt.a)(s.breakpoints.up("sm")),l=o?"Aujourd\u2019hui":"",u=o?"Pr\xe9c\xe9dent":"",d=o?"Suivant":"",j=Object(h.useQuery)(M,{variables:{after:i,before:c}}),p=j.data,O=j.loading,x=j.error;return x?Object(B.jsxs)(we,{children:[Object(B.jsxs)("h2",{children:[Object(B.jsx)("strong",{children:"Une erreur est survenue."})," Essayez de recharger la page."]}),Object(B.jsx)("p",{children:x.message})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Zt,{children:Object(B.jsxs)(bt.a,{container:!0,children:[Object(B.jsx)(bt.a,{item:!0,xs:12,md:6,children:Object(B.jsx)(Jt,{children:(e=i,he(e,"MMMM yyyy"))})}),Object(B.jsx)(bt.a,{item:!0,xs:12,md:6,children:Object(B.jsxs)(Tt,{children:[Object(B.jsx)(V.a,{disabled:O,variant:"contained",color:"primary",startIcon:Object(B.jsx)(pt.a,{}),onClick:n,children:u}),Object(B.jsx)(V.a,{disabled:O||Object(ft.a)(i,new Date),variant:"contained",color:"primary",startIcon:Object(B.jsx)(Ot.a,{}),onClick:a,children:l}),Object(B.jsx)(V.a,{disabled:O,variant:"contained",color:"primary",endIcon:Object(B.jsx)(xt.a,{}),onClick:r,children:d})]})})]})}),O?Object(B.jsx)(Ht,{children:Object(B.jsx)(pe.a,{})}):Object(B.jsx)(Ct,{start:i,end:c,list:null===p||void 0===p?void 0:p.creneaus}),Object(B.jsxs)(Bt,{children:[Object(B.jsx)(qt,{children:"L\xe9gende"}),Object(B.jsxs)(bt.a,{container:!0,children:[Object(B.jsxs)(bt.a,{item:!0,xs:4,children:[Object(B.jsx)(De,{$status:"available"}),Object(B.jsx)("div",{children:"PIAF disponible"})]}),Object(B.jsxs)(bt.a,{item:!0,xs:4,children:[Object(B.jsx)(De,{$status:"replacement"}),Object(B.jsx)("div",{children:"Cherche rempla\xe7ant\xb7e"})]}),Object(B.jsxs)(bt.a,{item:!0,xs:4,children:[Object(B.jsx)(De,{$status:"occupied"}),Object(B.jsx)("div",{children:"PIAF occup\xe9e"})]})]}),Object(B.jsx)("br",{}),Object(B.jsxs)(bt.a,{container:!0,children:[Object(B.jsxs)(bt.a,{item:!0,xs:4,children:[Object(B.jsx)(De,{$status:"available",$role:"CH",children:"\xa0"}),Object(B.jsx)("div",{children:"Chouettos"})]}),Object(B.jsxs)(bt.a,{item:!0,xs:4,children:[Object(B.jsx)(De,{$status:"available",children:"CA"}),Object(B.jsx)("div",{children:"Caissier\xb7e"})]}),Object(B.jsxs)(bt.a,{item:!0,xs:4,children:[Object(B.jsx)(De,{$status:"available",children:"GH"}),Object(B.jsx)("div",{children:"Grand Hibou"})]})]})]})]})},Ft=n(252),Yt=n(253),Ut=n(251);var Lt=Object(je.a)("div",{target:"e16mrsvp1"})({name:"1bv1svr",styles:"height:50vh;display:flex;align-items:center;justify-content:center"}),Wt=Object(je.a)("div",{target:"e16mrsvp0"})({name:"71mxng",styles:"margin:0 auto;max-width:500px;p,.MuiTextField-root{margin:10px 0;}button{margin:15px auto;display:block;}"}),Xt=function(){var e,t=N().user,n=Object(b.useState)(!1),r=Object(g.a)(n,2),a=r[0],i=r[1],c=Xe().openDialog,s=Object(b.useState)({email:(null===t||void 0===t?void 0:t.email)||"",telephone:(null===t||void 0===t?void 0:t.telephone)||""}),o=Object(g.a)(s,2),l=o[0],u=o[1];Object(b.useEffect)((function(){t&&u({email:t.email,telephone:t.telephone})}),[t]);var d=function(e){var t=e.target,n=t.name,r=t.value;u(Object(z.a)(Object(z.a)({},l),{},Object(ne.a)({},n,r)))},j=function(){var e=Object(W.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),i(!0),e.prev=2,e.next=5,H.mutate({mutation:S,variables:Object(z.a)(Object(z.a)({},l),{},{idUser:null===t||void 0===t?void 0:t.id})});case 5:c("Vos informations ont bien \xe9t\xe9 mises \xe0 jour"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),_(e.t0);case 11:i(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();if(!t)return Object(B.jsx)(Lt,{children:Object(B.jsx)(pe.a,{})});var p=null===(e=t.statuts.find((function(e){return e.actif})))||void 0===e?void 0:e.libelle.toLowerCase(),O=t.rolesChouette.map((function(e){return e.libelle})).join(", ");return Object(B.jsx)(Wt,{children:Object(B.jsxs)("form",{onSubmit:j,children:[Object(B.jsxs)("h2",{children:[t.prenom," ",t.nom]}),Object(B.jsxs)("p",{children:["Je suis ",p||"(sans statut)"]}),Object(B.jsxs)("p",{children:["Et j\u2019ai comme formations ",O||"(sans r\xf4le)"]}),Object(B.jsx)(X.a,{name:"telephone",label:"T\xe9l\xe9phone",required:!0,disabled:!t,value:l.telephone,onChange:d,fullWidth:!0,InputProps:{startAdornment:Object(B.jsx)(Ut.a,{position:"start",children:Object(B.jsx)(Ft.a,{})})}}),Object(B.jsx)(X.a,{name:"email",label:"Adresse e-mail",required:!0,disabled:!t,value:l.email,onChange:d,fullWidth:!0,InputProps:{startAdornment:Object(B.jsx)(Ut.a,{position:"start",children:Object(B.jsx)(Yt.a,{})})}}),Object(B.jsx)(V.a,{color:"primary",variant:"contained",disabled:a,type:"submit",children:"Enregistrer"})]})})},Vt=n(6),Kt=n(254),Qt=n(279),$t=n(276),_t=n(261),en=n(262),tn=n(70),nn=n(280),rn=n(266),an=n(267),cn=n(255),sn=n(256),on=n(257),ln=n(258),un=n(259),dn=n(260),jn=n(263),bn=n(264),pn=n(265),On=n(155),xn=function(e){var t=e.href,n=Object(On.a)(e,["href"]);return(null===t||void 0===t?void 0:t.startsWith("/"))?Object(B.jsx)(m.b,Object(z.a)({to:t},n)):Object(B.jsx)("a",Object(z.a)({href:t},n))},fn=260,hn=Object(re.a)($t.a)({flexGrow:1}),mn=Object(Kt.a)((function(e){return Object(Qt.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:fn,width:"calc(100% - ".concat(fn,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:fn,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:fn,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(ne.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(z.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuItem:{textDecoration:"none",color:"black"}})})),gn=[{title:"Accueil",href:"/home",Icon:cn.a},{title:"Planning",href:"/planning",Icon:sn.a},{title:"R\xe9serve",href:"/reserve",Icon:on.a},{title:"R\xe9servation automatique",href:"/auto",Icon:ln.a},{title:"Mon profil",href:"/profile",Icon:un.a},{title:"Espace membre",href:"https://espace-membres.lachouettecoop.fr/page/homepage",Icon:dn.a}],vn=function(){var e,t,n=mn(),r=N(),a=r.user,i=r.logout,c=Object(dt.a)(),s=Object(b.useState)(!1),o=Object(g.a)(s,2),l=o[0],u=o[1];return Object(jt.a)(c.breakpoints.up("sm"))?Object(B.jsxs)("div",{className:n.root,children:[Object(B.jsx)(_t.a,{position:"fixed",className:Object(Vt.a)(n.appBar,Object(ne.a)({},n.appBarShift,l)),children:Object(B.jsxs)(en.a,{children:[Object(B.jsx)(Ge.a,{color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},edge:"start",className:Object(Vt.a)(n.menuButton,Object(ne.a)({},n.hide,l)),children:Object(B.jsx)(jn.a,{})}),Object(B.jsx)(tn.a,{variant:"h6",noWrap:!0,children:"Planning"}),Object(B.jsx)(hn,{}),Object(B.jsx)(V.a,{onClick:i,color:"inherit",children:"D\xe9connexion"})]})}),Object(B.jsx)(en.a,{}),Object(B.jsxs)(nn.a,{variant:"permanent",className:Object(Vt.a)(n.drawer,(e={},Object(ne.a)(e,n.drawerOpen,l),Object(ne.a)(e,n.drawerClose,!l),e)),classes:{paper:Object(Vt.a)((t={},Object(ne.a)(t,n.drawerOpen,l),Object(ne.a)(t,n.drawerClose,!l),t))},children:[Object(B.jsx)("div",{className:n.toolbar,children:Object(B.jsx)(Ge.a,{onClick:function(){u(!1)},children:"rtl"===c.direction?Object(B.jsx)(bn.a,{}):Object(B.jsx)(pn.a,{})})}),Object(B.jsx)(rn.a,{}),Object(B.jsxs)(Ae.a,{button:!0,children:[Object(B.jsx)(an.a,{children:Object(B.jsx)(un.a,{})}),a&&Object(B.jsx)(Ie.a,{primary:"".concat(a.prenom," ").concat(a.nom)})]}),Object(B.jsx)(rn.a,{}),Object(B.jsx)(Oe.a,{children:gn.map((function(e){var t=e.href,r=e.title,a=e.Icon;return Object(B.jsx)(xn,{className:n.menuItem,href:t,children:Object(B.jsxs)(Ae.a,{button:!0,children:[Object(B.jsx)(an.a,{children:Object(B.jsx)(a,{})}),Object(B.jsx)(Ie.a,{primary:r})]})},t)}))})]})]}):null},yn=n(152),wn=n(268),An=n(269),Mn=Object(Kt.a)((function(e){return Object(Qt.a)({appBar:{top:"auto",bottom:0},toolbar:{justifyContent:"space-between"},label:{flexDirection:"column"},menu:{"& ul":{paddingTop:"0 !important",paddingBottom:"0 !important"}},textMenuDecoration:{textDecoration:"none"},textMenu:{color:"white",backgroundColor:e.palette.primary.main,"&:hover":{background:e.palette.primary.dark}},icon:{justifyContent:"center"}})})),In=[{title:"Planning",href:"/planning",Icon:sn.a},{title:"R\xe9serve",href:"/reserve",Icon:on.a},{title:"Auto",href:"/auto",Icon:ln.a}],Sn=[{title:"Mon profil",href:"/profile",Icon:un.a},{title:"Espace membre",href:"/member",Icon:dn.a}];function En(){var e=Mn(),t=Object(b.useState)(null),n=Object(g.a)(t,2),r=n[0],a=n[1],i=Object(dt.a)(),c=Object(jt.a)(i.breakpoints.down("xs")),s=function(){a(null)};return c?Object(B.jsx)(b.Fragment,{children:Object(B.jsx)(_t.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(B.jsxs)(en.a,{className:e.toolbar,children:[In.map((function(t){var n=t.href,r=t.title,a=t.Icon;return Object(B.jsx)(m.b,{className:e.textMenuDecoration,to:n,children:Object(B.jsxs)(Ae.a,{button:!0,className:e.label,children:[Object(B.jsx)(an.a,{className:e.icon,children:Object(B.jsx)(a,{})}),Object(B.jsx)(Ie.a,{className:e.textMenu,primary:r})]})},r)})),Object(B.jsx)(yn.a,{id:"simple-menu",className:e.menu,anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:s,children:Sn.map((function(t){return Object(B.jsx)(m.b,{className:e.textMenuDecoration,to:t.href,children:Object(B.jsx)(wn.a,{className:e.textMenu,onClick:s,children:t.title})},t.title)}))}),Object(B.jsx)(Ge.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)},edge:"end",color:"inherit",children:Object(B.jsx)(An.a,{})})]})})}):null}var kn=n(153),Dn=n(270),Pn=n(271),zn=n(277);var Gn=Object(je.a)("div",{target:"e1y580i92"})({name:"1p6wbo1",styles:"height:300px;display:flex;align-items:center;justify-content:center"}),Rn=Object(je.a)("div",{target:"e1y580i91"})({name:"jtghaq",styles:"@media screen and (min-width: 980px){display:flex;>div{flex:1 0 14.29%;}}"}),Cn=Object(je.a)("div",{target:"e1y580i90"})({name:"1cltfo6",styles:"margin:20px 0 40px"}),Hn=function(){var e=N().user,t=Object(b.useState)(!1),n=Object(g.a)(t,2),r=n[0],a=n[1],i=Xe().openDialog,c=Object(b.useState)(""),s=Object(g.a)(c,2),o=s[0],l=s[1],u=Object(b.useState)([]),d=Object(g.a)(u,2),j=d[0],p=d[1],O=Object(h.useQuery)(P),x=O.data,f=O.loading,m=O.error,v=Object(h.useQuery)(D,{skip:!e,variables:{idUser:null===e||void 0===e?void 0:e.id}}),y=v.data,w=v.loading,A=v.error,M=f||w;if(Object(b.useEffect)((function(){y&&(null===y||void 0===y?void 0:y.reserves.length)>0&&(l(y.reserves[0].informations),p(y.reserves[0].creneauGeneriques.map((function(e){return e.id}))))}),[y]),m||A)return Object(B.jsxs)(we,{children:[Object(B.jsxs)("h2",{children:[Object(B.jsx)("strong",{children:"Une erreur est survenue."})," Essayez de recharger la page."]}),Object(B.jsx)("p",{children:null===m||void 0===m?void 0:m.message}),Object(B.jsx)("p",{children:null===A||void 0===A?void 0:A.message})]});var I=[];if(x)for(var S=function(e){null===x||void 0===x||x.creneauGeneriques.filter((function(t){var n=t.jour,r=t.actif;return n===e&&r})).forEach((function(t){var n=I.find((function(t){return t.day===e})),r=new Date(t.heureDebut).getTime();if(n){var a=n.slots.find((function(e){return e.time===r}));a?a.allSlotIds.push(t.id):n.slots.push({time:r,slotDisplayed:t,allSlotIds:[t.id]})}else I.push({day:e,slots:[{time:r,slotDisplayed:t,allSlotIds:[t.id]}]})}))},z=0;z<7;z++)S(z);var G=function(e){var t=[];return I.forEach((function(n){var r=n.slots.find((function(t){return t.slotDisplayed.id===e}));r&&(t=r.allSlotIds)})),t},R=function(){var t=Object(W.a)(L.a.mark((function t(){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),n={user:null===e||void 0===e?void 0:e.id,informations:o,creneauGenerique:j},(null===y||void 0===y?void 0:y.reserves.length)&&(n.id=y.reserves[0].id),t.prev=3,t.next=6,H.mutate({mutation:n.id?k:E,variables:n});case 6:i((n.id?"Votre inscription \xe0 la r\xe9serve a bien \xe9t\xe9 mise \xe0 jour.":"Vous \xeates d\xe9sormais inscrit\xb7e \xe0 la reserve.")+" Merci !"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),_(t.t0);case 12:a(!1);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(){return t.apply(this,arguments)}}();return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("h1",{children:"R\xe9serve"}),M?Object(B.jsx)(Gn,{children:Object(B.jsx)(pe.a,{})}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Rn,{children:I.map((function(e){return Object(B.jsxs)(Dn.a,{children:[(t=e.day,ve[t]),e.slots.map((function(e){var t=e.slotDisplayed;return Object(B.jsx)(Pn.a,{control:Object(B.jsx)(zn.a,{color:"default",checked:j.includes(t.id),onChange:function(e){var n=e.target;!function(e,t){var n=j.slice();t?(n.push.apply(n,Object(kn.a)(G(e))),p(n)):(G(e).forEach((function(e){n.splice(n.indexOf(e),1)})),p(n))}(t.id,n.checked)}}),label:"".concat(ge(t.heureDebut)," - ").concat(ge(t.heureFin))},t.id)}))]},e.day);var t}))}),Object(B.jsx)(Cn,{children:Object(B.jsx)(X.a,{multiline:!0,disabled:M,label:"Informations suppl\xe9mentaires (optionnel)",value:o,onChange:function(e){var t=e.target;l(t.value)},fullWidth:!0})}),Object(B.jsx)(V.a,{disabled:r,color:"primary",variant:"contained",onClick:R,children:"S\u2019inscrire"})]})]})},Bn=Object(re.a)(Y.a)((function(e){var t=e.theme;return Object(ne.a)({marginTop:t.spacing(3),paddingLeft:t.spacing(1)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(12)})})),qn=function(){var e=function(e){var t={};return e.substr(1).split("&").forEach((function(e){if(e){var n=e.split("=");2===n.length&&(t[n[0]]=decodeURIComponent(n[1]))}})),t}(Object(F.g)().search).next;return Object(B.jsxs)(de,{children:[Object(B.jsx)(vn,{}),Object(B.jsxs)(Bn,{children:[Object(B.jsxs)(F.d,{children:[Object(B.jsx)(F.b,{path:"/home",children:Object(B.jsx)(ut,{})}),Object(B.jsx)(F.b,{path:"/planning",children:Object(B.jsx)(Nt,{})}),Object(B.jsx)(F.b,{path:"/profile",children:Object(B.jsx)(Xt,{})}),Object(B.jsx)(F.b,{path:"/reserve",children:Object(B.jsx)(Hn,{})}),Object(B.jsx)(F.b,{path:"/profile",children:Object(B.jsx)(Xt,{})}),Object(B.jsx)(F.a,{to:e||"/home"})]}),Object(B.jsx)(En,{})]})]})},Zn=n(150),Jn=n(272),Tn=Object(Zn.a)({palette:{primary:{main:"#445448"},contrastThreshold:3,tonalOffset:.2}}),Nn=function(){var e=N().auth;return Object(B.jsx)(Jn.a,{theme:Tn,children:Object(B.jsx)(m.a,{children:Object(B.jsx)(We,{children:e?Object(B.jsx)(qn,{}):Object(B.jsx)(te,{})})})})};x.a.render(Object(B.jsxs)(p.a.StrictMode,{children:[Object(B.jsx)(f.a,{}),Object(B.jsx)(h.ApolloProvider,{client:H,children:Object(B.jsx)(T,{children:Object(B.jsx)(Nn,{})})})]}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.cff494db.chunk.js.map