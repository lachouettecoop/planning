{"version":3,"sources":["helpers/errors.tsx","graphql/queriesUser.ts","helpers/user.ts","providers/user.tsx","helpers/apollo.ts","images/icons.svg","providers/theme.tsx","graphql/queries.ts","providers/roles.tsx","images/logo_white.svg","components/Dialog.tsx","providers/dialog.tsx","helpers/request.ts","pages/anonymous/Login.tsx","pages/anonymous/index.tsx","providers/datePlanning.tsx","types/model.ts","components/Link.tsx","helpers/role.tsx","components/menu.tsx","components/menuBottom.tsx","components/Loader.tsx","helpers/piaf.ts","components/PiafCircle.tsx","helpers/date.ts","components/PiafRow.tsx","components/SlotDialog.tsx","components/Piaf.tsx","components/UserPiafs.tsx","components/ReplacementPiafs.tsx","pages/authenticated/Home.tsx","components/Slot.tsx","components/CalendarDay.tsx","components/Calendar.tsx","components/IconsCaption.tsx","pages/authenticated/Planning.tsx","components/LongAbsence.tsx","pages/authenticated/Profile.tsx","pages/authenticated/Reserve.tsx","components/UserInfoDialog.tsx","components/Users.tsx","pages/authenticated/Magasin.tsx","pages/authenticated/BdM.tsx","pages/Legal.tsx","pages/authenticated/index.tsx","App.tsx","index.tsx"],"names":["apiKey","process","Bugsnag","start","releaseStage","enabledReleaseStages","appVersion","metadata","deployDate","Date","toString","deployAuthor","plugins","BugsnagPluginReact","handleError","error","console","alert","message","notify","Boundary","getPlugin","createErrorBoundary","React","Container","ErrorBlock","Typography","variant","aria-hidden","String","Text","ErrorMessage","ErrorBoundary","children","FallbackComponent","LOGGED_IN_USER","gql","USER_UPDATE","USERS","formatName","user","prenom","nom","UserContext","createContext","STORAGE_KEY","getStoredUser","stored","localStorage","getItem","JSON","parse","UserProvider","useState","auth","setAuth","setUser","useEffect","apollo","query","variables","id","then","data","email","Provider","value","login","setItem","stringify","logout","removeItem","useUser","useContext","API_URL","_symbol","_symbol2","_symbol3","_symbol4","_symbol5","_symbol6","_symbol7","_symbol8","_symbol9","_symbol10","TEST","includes","link","createHttpLink","uri","authLink","setContext","_","previous","headers","token","client","ApolloClient","concat","cache","InMemoryCache","defaultOptions","fetchPolicy","watchQuery","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgIcons","_ref","svgRef","title","titleId","props","xmlns","style","display","ref","viewBox","fill","cx","cy","r","d","x","y","width","height","ForwardRef","TITLE_FONT","TEXT_FONT","MAIN_COLOR","SECONDARY_COLOR","grey","THEME","createMuiTheme","typography","fontFamily","body1","fontSize","body2","subtitle1","subtitle2","h1","fontWeight","h2","h3","color","h4","h5","h6","palette","primary","main","secondary","contrastThreshold","tonalOffset","overrides","MuiCssBaseline","a","coreLocale","dataGridLocale","ThemeProvider","theme","CssBaseline","SLOTS","PIAFS","PIAFS_COUNT","PLANNING","REGISTRATION_UPDATE","VALIDATE_PIAF","PIAF_NON_POURVU","RESERVE_CREATE","RESERVE_UPDATE","RESERVE_USER","CRENEAUX_GENERIQUES","ROLES","RolesContext","RolesProvider","roles","useQuery","_path","_g","Dialog","open","handleClose","callback","handleConfirm","ok","setTimeout","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","DialogContext","DialogProvider","setOpen","setTitle","setMessage","setCallback","closeDialog","openDialog","newMessage","newTitle","undefined","openQuestion","Promise","resolve","useDialog","post","path","body","fetch","method","response","HttpError","status","statusText","json","sendEmail","recipient","subject","Error","FormData","append","SvgLogoWhite","transform","Header","LoginPage","loading","setLoading","handleSubmit","event","preventDefault","currentTarget","userId","get","code","maxWidth","onSubmit","TextField","type","name","label","fullWidth","margin","size","disabled","Anonymous","pathname","useLocation","Login","to","DatePlanningContext","getInitialStart","startOfMonth","getInitialEnd","endOfMonth","DatePlanningProvider","setStart","end","setEnd","after","before","refetch","goBack","date","subMonths","goForward","addMonths","goToday","RoleId","UniversalLink","href","startsWith","hasRole","some","roleUniqueId","formatRoles","map","libelle","join","DRAWER_WIDTH","Spacer","styled","Box","flexGrow","useStyles","makeStyles","createStyles","root","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","breakpoints","up","toolbar","alignItems","justifyContent","padding","mixins","content","menuItem","textDecoration","activeItem","ITEMS","Icon","HomeIcon","role","Chouettos","EventIcon","GroupIcon","PersonIcon","StorefrontIcon","AdminMag","CardMembershipIcon","AdminBdM","ArrowBackIcon","Menu","classes","useTheme","useMediaQuery","userRoles","rolesChouette","className","AppBar","position","clsx","Toolbar","IconButton","aria-label","edge","noWrap","Chip","Person","Drawer","paper","direction","ChevronRight","ChevronLeft","List","filter","active","Link","Tooltip","ListItem","button","ListItemIcon","ListItemText","top","bottom","flexDirection","menu","paddingTop","paddingBottom","textMenuDecoration","backgroundColor","icon","activeIcon","MAIN_ITEMS","EXTRA_ITEMS","BottomAppBar","anchorEl","setAnchorEl","matches","down","component","keepMounted","Boolean","MenuItem","aria-controls","aria-haspopup","Loader","CircularProgress","getPiafRole","piaffeur","GrandHibou","nbPiafGH","GrandHibou_Formation","Caissier","nbPiafCaisse","Caissier_Formation","isTaken","piaf","statut","isCritical","slot","piafs","differenceInDays","orderPiafsByDate","left","right","creneau","debut","orderPiafsByRoleId","KNOWN_ROLES","values","Svg","$taken","$critical","PiafIcon","taken","critical","xlinkHref","PiafCircle","getDate","formatInFrench","pattern","format","locale","fr","formatDateShort","formatDateLong","formatTime","formatDateTime","WEEKDAYS","queryDate","ADMIN_ROLES","Row","Status","Contact","InfoPiaf","getPiafCount","startOfDay","startOfWeek","endOfDay","endOfWeek","p","nonPourvu","getRegistrationPiaf","replacementPiaf","find","sendEmailReplacedPiaf","replacedUserMail","ghEmail","GHPiaf","getGHEmail","PiafRow","info","setInfo","currentUserIsAdmin","currentUserPiafInSlot","register","loggedUser","registrationPiaf","mutate","mutation","piafId","informations","unregister","isFuture","isPast","piafRole","showInfos","telephone","multiline","onChange","CloseButton","Title","SlotDialog","show","Close","disableTypography","capitalize","information","Bordered","Grid","Piaf","allowValidate","useLazyQuery","load","handleValidate","validate","handleNonPourvue","titre","fin","container","item","xs","ListItemAvatar","FormGroup","FormControlLabel","control","Checkbox","checked","pourvu","UserPiafs","validated","skip","sort","ReplacementPiafs","startOfToday","otherPiafs","match","Number","getId","addWeeks","COLORS","chouette","StatusText","$status","Bottom","Content","HomePage","counter","nbPiafEffectuees","nbPiafAttendues","SELECTED_COLOR","ClickableSlot","$open","$slotTitle","toLowerCase","Slot","WEEK_COLORS","1","2","3","4","$when","CalendarDay","day","weekNumber","slots","isFirstDoW","getDay","isToday","DayPlaceholder","WeekRow","Calendar","list","weeks","eachWeekOfInterval","weekStartsOn","days","addDays","forEach","node","weekIndex","differenceInWeeks","week","infoCreneau","piaffeursCount","piaffeursCountFirstPiaf","push","creneauGenerique","frequence","index","Caption","IconsCaption","PIAF","Formation","Acc","CaptionDialog","Loading","Nav","ButtonArea","BottomCaption","orderSlotsByDate","PlanningPage","creneaus","horsMag","startIcon","ArrowBackIos","isSameMonth","CalendarToday","endIcon","ArrowForwardIos","TextInput","REASONS","noPiaf","noBuy","other","LongAbsence","reason","comment","startDate","endDate","setValues","handleInputChange","handleSendEmail","autoComplete","required","InputLabelProps","shrink","FormControl","InputLabel","Select","rel","ProfilePage","saving","setSaving","openAbsenceDialog","setOpenAbsenceDialog","handleSave","idUser","InputProps","startAdornment","InputAdornment","Phone","Mail","ReserveGrid","Infos","ReservePage","setInformation","setSlots","dataCreneauxList","loadingCL","errorCreneauxList","dataCreneauxUser","loadingCU","errorReserve","reserves","creneauGeneriques","cg","queryError","slotList","jour","actif","reserveFound","s","startTime","heureDebut","getTime","slotReserveFound","time","allSlotIds","slotDisplayed","getSlots","idCreneauGenerique","selected","displayed","text","reserve","temp","slice","splice","handleCheckboxChange","heureFin","RightCol","UserInfoDialog","absenceLongueDureeSansCourses","absenceLongueDureeCourses","StyledGrid","DataGrid","booleanFormatter","COLUMNS","field","headerName","flex","valueFormatter","Users","selectedRow","setSelectedRow","setOpenDialog","rows","users","columns","onRowClick","row","autoPageSize","MagasinPage","BdMPage","LegalPage","Authenticated","next","search","params","substr","split","part","tuple","decodeURIComponent","getParams","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b9272323.chunk.js","sourcesContent":["import React, { ErrorInfo, FC } from \"react\"\nimport Bugsnag from \"@bugsnag/js\"\nimport BugsnagPluginReact from \"@bugsnag/plugin-react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\n\nconst apiKey = process.env.REACT_APP_BUGSNAG_KEY\n\nif (apiKey) {\n  Bugsnag.start({\n    apiKey,\n    releaseStage: process.env.NODE_ENV,\n    enabledReleaseStages: [\"production\"],\n    appVersion: process.env.REACT_APP_COMMIT,\n    metadata: {\n      deployDate: new Date().toString(),\n      deployAuthor: process.env.REACT_APP_AUTHOR,\n    },\n    plugins: [new BugsnagPluginReact()],\n  })\n}\n\n// TODO: show nicer message\nexport const handleError = (error: Error) => {\n  console.error(error)\n  alert(error.message)\n  if (apiKey) {\n    Bugsnag.notify(error)\n  }\n}\n\nconst Boundary = apiKey ? Bugsnag.getPlugin(\"react\")?.createErrorBoundary(React) : null\n\nconst Container = styled.div`\n  padding: 1rem;\n  h2 {\n    color: #e53935;\n    margin: 1rem 0;\n  }\n  code {\n    display: block;\n    margin-top: 3rem;\n    color: #aaa;\n  }\n`\n\n// https://github.com/bugsnag/bugsnag-js/blob/next/packages/plugin-react/types/bugsnag-plugin-react.d.ts\ninterface FallbackProps {\n  error: Error\n  info?: ErrorInfo\n  clearError?: () => void\n}\n\nexport const ErrorBlock = ({ error }: FallbackProps) => (\n  <Container>\n    <Typography variant=\"h2\">\n      <span aria-hidden>🐞</span>\n      <br />\n      Une erreur est survenue\n    </Typography>\n    <Typography>Essayez de recharger la page</Typography>\n    <code>{String(error)}</code>\n  </Container>\n)\n\nconst Text = styled.p`\n  color: #e53935;\n`\n\ninterface MessageProps {\n  error: Error\n}\n\nexport const ErrorMessage = ({ error }: MessageProps) => <Text>Erreur : {error.message}</Text>\n\nexport const ErrorBoundary: FC = ({ children }) =>\n  Boundary ? <Boundary FallbackComponent={ErrorBlock}>{children}</Boundary> : <>{children}</>\n","import { gql } from \"@apollo/client\"\n\nexport const LOGGED_IN_USER = gql`\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n    }\n  }\n`\nexport const USER_UPDATE = gql`\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String) {\n    updateUser(input: { id: $idUser, email: $email, telephone: $telephone }) {\n      user {\n        id\n        email\n        telephone\n      }\n    }\n  }\n`\n\nexport const USERS = gql`\n  query USERS {\n    users(enabled: true) {\n      id\n      nom\n      prenom\n      email\n      actif\n      rolesChouette {\n        id\n        libelle\n        roleUniqueId\n      }\n      statut\n      reserve {\n        id\n        informations\n        creneauGeneriques {\n          id\n          heureDebut\n          heureFin\n          jour\n        }\n      }\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n    }\n  }\n`\n","import { User } from \"src/types/model\"\n\nexport const formatName = (user: User) => `${user.prenom} ${user.nom}`\n","import type { User } from \"src/types/model\"\n\nimport { createContext, useContext, useState, FC, useEffect } from \"react\"\nimport Bugsnag from \"@bugsnag/js\"\n\nimport { LOGGED_IN_USER } from \"src/graphql/queriesUser\"\nimport apollo from \"src/helpers/apollo\"\nimport { formatName } from \"src/helpers/user\"\n\nexport interface Auth {\n  email: string\n  token: string\n  id: number\n}\n\nexport interface IUserContext<IsAuthenticated extends boolean = false> {\n  auth: IsAuthenticated extends true ? Auth : Auth | null\n  user: User | null\n  login: (auth: Auth) => void\n  logout: () => void\n}\n\nconst UserContext = createContext<IUserContext>({} as IUserContext)\n\nconst STORAGE_KEY = \"user\"\n\nexport const getStoredUser = () => {\n  const stored = localStorage.getItem(STORAGE_KEY)\n  if (!stored) {\n    return null\n  }\n  return JSON.parse(stored) as Auth\n}\n\nexport const UserProvider: FC = ({ children }) => {\n  const [auth, setAuth] = useState<Auth | null>(getStoredUser)\n  const [user, setUser] = useState<User | null>(null)\n\n  useEffect(() => {\n    if (auth) {\n      apollo\n        .query<{ user: User }>({\n          query: LOGGED_IN_USER,\n          variables: { id: `api/users/${auth.id}` },\n        })\n        .then(({ data }) => {\n          setUser(data.user)\n        })\n    }\n  }, [auth])\n\n  useEffect(() => {\n    if (user) {\n      Bugsnag.setUser(user.id, user.email, formatName(user))\n    } else {\n      Bugsnag.setUser()\n    }\n  }, [user])\n\n  const login = (data: Auth) => {\n    setAuth(data)\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data))\n  }\n\n  const logout = () => {\n    setAuth(null)\n    localStorage.removeItem(STORAGE_KEY)\n  }\n\n  return <UserContext.Provider value={{ auth, user, login, logout }}>{children}</UserContext.Provider>\n}\n\nexport function useUser<IsAuthenticated extends boolean = false>() {\n  return useContext(UserContext) as IUserContext<IsAuthenticated>\n}\n","import { ApolloClient, createHttpLink, InMemoryCache } from \"@apollo/client\"\nimport { setContext } from \"@apollo/client/link/context\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nconst API_URL = process.env.REACT_APP_API\n\nif (!API_URL) {\n  throw new Error(\"You must compile the app with a REACT_APP_API environment variable - see example.env\")\n}\n\nexport const TEST = API_URL.includes(\"test\")\n\nconst link = createHttpLink({\n  uri: `${API_URL}/api/graphql`,\n})\n\nconst authLink = setContext((_, previous) => {\n  const user = getStoredUser()\n  if (!user) {\n    return previous\n  }\n  return {\n    ...previous,\n    headers: {\n      ...previous.headers,\n      \"X-Auth-Token\": user.token,\n    },\n  }\n})\n\nconst client = new ApolloClient({\n  link: authLink.concat(link),\n  cache: new InMemoryCache(),\n  defaultOptions: {\n    query: {\n      fetchPolicy: \"network-only\",\n    },\n    watchQuery: {\n      fetchPolicy: \"cache-and-network\",\n    },\n  },\n})\n\nexport default client\n\nexport const getId = (id?: string | number) => {\n  if (typeof id === \"number\") {\n    return id\n  }\n  if (typeof id === \"string\") {\n    const matches = id.match(/api\\/\\w+\\/(\\d+)/)\n    if (matches) {\n      return Number(matches[1])\n    }\n  }\n  return null\n}\n","var _symbol, _symbol2, _symbol3, _symbol4, _symbol5, _symbol6, _symbol7, _symbol8, _symbol9, _symbol10;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIcons(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    style: {\n      display: \"none\"\n    },\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _symbol || (_symbol = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"A\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"Accompagnateur-rice\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 26.75,\n    cy: 26.8,\n    r: 5.25\n  }))), _symbol2 || (_symbol2 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"CA\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"Caissier-e\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.24,20l1.34,1.32A6.23,6.23,0,0,1,20.15,23a8.24,8.24,0,0,1-3.17.59A8.45,8.45,0,0,1,13.59,23,7.42,7.42,0,0,1,11,21a7.12,7.12,0,0,1-1.51-2.88H7.06V17H9.25c0-.36-.05-.65-.05-.86s0-.49.05-.86H7.06V14.07h2.4A7,7,0,0,1,11,11.2a7.19,7.19,0,0,1,2.62-1.92A8.29,8.29,0,0,1,17,8.59a8.38,8.38,0,0,1,3.18.59,6.36,6.36,0,0,1,2.42,1.7l-1.34,1.33a5.48,5.48,0,0,0-4.16-1.75,5.83,5.83,0,0,0-3.36,1,5.23,5.23,0,0,0-2,2.62h6.66v1.18H11.39a5.81,5.81,0,0,0-.06.86,6,6,0,0,0,.06.86h7v1.18H11.68a5.25,5.25,0,0,0,2,2.63,5.9,5.9,0,0,0,3.36,1A5.5,5.5,0,0,0,21.24,20Z\"\n  }))), _symbol3 || (_symbol3 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"CAA\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"Caissier-e accompagnateur-rice\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 26.75,\n    cy: 26.8,\n    r: 5.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.24,20l1.34,1.32A6.23,6.23,0,0,1,20.15,23a8.24,8.24,0,0,1-3.17.59A8.45,8.45,0,0,1,13.59,23,7.42,7.42,0,0,1,11,21a7.12,7.12,0,0,1-1.51-2.88H7.06V17H9.25c0-.36-.05-.65-.05-.86s0-.49.05-.86H7.06V14.07h2.4A7,7,0,0,1,11,11.2a7.19,7.19,0,0,1,2.62-1.92A8.29,8.29,0,0,1,17,8.59a8.38,8.38,0,0,1,3.18.59,6.36,6.36,0,0,1,2.42,1.7l-1.34,1.33a5.48,5.48,0,0,0-4.16-1.75,5.83,5.83,0,0,0-3.36,1,5.23,5.23,0,0,0-2,2.62h6.66v1.18H11.39a5.81,5.81,0,0,0-.06.86,6,6,0,0,0,.06.86h7v1.18H11.68a5.25,5.25,0,0,0,2,2.63,5.9,5.9,0,0,0,3.36,1A5.5,5.5,0,0,0,21.24,20Z\"\n  }))), _symbol4 || (_symbol4 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"CAF\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"Caissier-e en formation\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 26.75,\n    cy: 26.8,\n    r: 4.5\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M26.75,23.05A3.75,3.75,0,1,1,23,26.8a3.75,3.75,0,0,1,3.75-3.75m0-1.5A5.25,5.25,0,1,0,32,26.8a5.25,5.25,0,0,0-5.25-5.25Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.24,20l1.34,1.32A6.23,6.23,0,0,1,20.15,23a8.24,8.24,0,0,1-3.17.59A8.45,8.45,0,0,1,13.59,23,7.42,7.42,0,0,1,11,21a7.12,7.12,0,0,1-1.51-2.88H7.06V17H9.25c0-.36-.05-.65-.05-.86s0-.49.05-.86H7.06V14.07h2.4A7,7,0,0,1,11,11.2a7.19,7.19,0,0,1,2.62-1.92A8.29,8.29,0,0,1,17,8.59a8.38,8.38,0,0,1,3.18.59,6.36,6.36,0,0,1,2.42,1.7l-1.34,1.33a5.48,5.48,0,0,0-4.16-1.75,5.83,5.83,0,0,0-3.36,1,5.23,5.23,0,0,0-2,2.62h6.66v1.18H11.39a5.81,5.81,0,0,0-.06.86,6,6,0,0,0,.06.86h7v1.18H11.68a5.25,5.25,0,0,0,2,2.63,5.9,5.9,0,0,0,3.36,1A5.5,5.5,0,0,0,21.24,20Z\"\n  }))), _symbol5 || (_symbol5 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"CH\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"Chouettos\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30.13,10.49a7.25,7.25,0,0,0-8.68-3.38c-2.92,1-4.46,3.27-5.4,6.33a10.47,10.47,0,0,0-1.37-3.14C11.17,5,4.65,6.05,2.32,10L.21,13.4c2-7,6.59-11.53,13.16-13.18,7.3-.22,15.9,3.62,18.4,13.05Zm-14.07.37a8.8,8.8,0,0,1,3.37-4.73,7.83,7.83,0,0,1,7.78-.46C20.94-.9,10.41-1.09,4.79,5.8,9.55,2.81,14.55,6.62,16.06,10.86Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.07,15.59a2.76,2.76,0,0,1,3-2.83,2.88,2.88,0,1,1-.1,5.76A2.75,2.75,0,0,1,21.07,15.59Zm4.05.06C25,15,24.7,14.51,24,14.51a1.05,1.05,0,0,0-1.17,1.11,1,1,0,0,0,1.14,1.15C24.66,16.79,25,16.36,25.12,15.65Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.67,12.76a2.88,2.88,0,1,1,0,5.76,2.88,2.88,0,1,1,0-5.76Zm1.18,2.89a1.07,1.07,0,0,0-1.14-1.14,1.05,1.05,0,0,0-1.15,1.13A1.06,1.06,0,0,0,8.7,16.78,1.07,1.07,0,0,0,9.85,15.65Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.07,21.41a3.86,3.86,0,0,1-1.22-2.08,1.33,1.33,0,0,1,1.23-1.25c.56,0,1.32.62,1.22,1.27A3.68,3.68,0,0,1,16.07,21.41Z\"\n  }))), _symbol6 || (_symbol6 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"F\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"Formation\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 26.75,\n    cy: 26.8,\n    r: 4.5\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M26.75,23.05A3.75,3.75,0,1,1,23,26.8a3.75,3.75,0,0,1,3.75-3.75m0-1.5A5.25,5.25,0,1,0,32,26.8a5.25,5.25,0,0,0-5.25-5.25Z\"\n  }))), _symbol7 || (_symbol7 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"GH\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"GH\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.94,15h1.73v3.92a5.63,5.63,0,0,1-1.77.93,7,7,0,0,1-2.08.32,5.65,5.65,0,0,1-2.71-.65,4.87,4.87,0,0,1-1.9-1.81,5.24,5.24,0,0,1,0-5.2,4.87,4.87,0,0,1,1.9-1.81A5.8,5.8,0,0,1,10.85,10a6,6,0,0,1,2.25.41,4.47,4.47,0,0,1,1.7,1.19l-1.15,1.13a3.72,3.72,0,0,0-2.72-1.13A3.86,3.86,0,0,0,9.08,12a3.21,3.21,0,0,0-1.26,1.22,3.5,3.5,0,0,0-.46,1.8,3.39,3.39,0,0,0,.46,1.77,3.26,3.26,0,0,0,1.26,1.24,3.72,3.72,0,0,0,1.84.45,3.91,3.91,0,0,0,2-.51Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M25.82,10.14V20H24V15.76H18.9V20H17.07V10.14H18.9V14.2H24V10.14Z\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: 11.03,\n    y: 14.95,\n    width: 3.65,\n    height: 1.31\n  }))), _symbol8 || (_symbol8 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"GHA\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"GH accompagnateur-rice\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.94,15h1.73v3.92a5.52,5.52,0,0,1-1.77.93,7,7,0,0,1-2.08.32,5.65,5.65,0,0,1-2.71-.65,4.87,4.87,0,0,1-1.9-1.81,5.24,5.24,0,0,1,0-5.2,4.87,4.87,0,0,1,1.9-1.81A5.8,5.8,0,0,1,10.85,10a6,6,0,0,1,2.25.41,4.47,4.47,0,0,1,1.7,1.19l-1.15,1.13a3.72,3.72,0,0,0-2.72-1.13A3.86,3.86,0,0,0,9.08,12a3.21,3.21,0,0,0-1.26,1.22,3.5,3.5,0,0,0-.46,1.8,3.39,3.39,0,0,0,.46,1.77,3.26,3.26,0,0,0,1.26,1.24,3.72,3.72,0,0,0,1.84.45,3.91,3.91,0,0,0,2-.51Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M25.82,10.14V20H24V15.76H18.9V20H17.07V10.14H18.9V14.2H24V10.14Z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 26.75,\n    cy: 26.75,\n    r: 5.25\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: 11.03,\n    y: 14.95,\n    width: 3.65,\n    height: 1.31\n  }))), _symbol9 || (_symbol9 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"GHF\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"GH en formation\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.94,15h1.73v3.92a5.63,5.63,0,0,1-1.77.93,7,7,0,0,1-2.08.32,5.65,5.65,0,0,1-2.71-.65,4.87,4.87,0,0,1-1.9-1.81,5.24,5.24,0,0,1,0-5.2,4.87,4.87,0,0,1,1.9-1.81A5.8,5.8,0,0,1,10.85,10a6,6,0,0,1,2.25.41,4.47,4.47,0,0,1,1.7,1.19l-1.15,1.13a3.72,3.72,0,0,0-2.72-1.13A3.86,3.86,0,0,0,9.08,12a3.21,3.21,0,0,0-1.26,1.22,3.5,3.5,0,0,0-.46,1.8,3.39,3.39,0,0,0,.46,1.77,3.26,3.26,0,0,0,1.26,1.24,3.72,3.72,0,0,0,1.84.45,3.91,3.91,0,0,0,2-.51Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M25.82,10.14V20H24V15.76H18.9V20H17.07V10.14H18.9V14.2H24V10.14Z\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 26.75,\n    cy: 26.75,\n    r: 4.5\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M26.75,23A3.75,3.75,0,1,1,23,26.75,3.75,3.75,0,0,1,26.75,23m0-1.5A5.25,5.25,0,1,0,32,26.75a5.25,5.25,0,0,0-5.25-5.25Z\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: 11.03,\n    y: 14.95,\n    width: 3.65,\n    height: 1.31\n  }))), _symbol10 || (_symbol10 = /*#__PURE__*/React.createElement(\"symbol\", {\n    id: \"P\",\n    viewBox: \"0 0 32 32\"\n  }, /*#__PURE__*/React.createElement(\"title\", null, \"PIAF\"), /*#__PURE__*/React.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: 16,\n    cy: 16,\n    r: 15.25\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIcons);\nexport default __webpack_public_path__ + \"static/media/icons.e5fd9c72.svg\";\nexport { ForwardRef as ReactComponent };","import type { FC } from \"react\"\n\nimport { createMuiTheme, ThemeProvider as MUIThemeProvider, Theme as MUITheme } from \"@material-ui/core/styles\"\nimport { frFR as dataGridLocale } from \"@material-ui/data-grid\"\nimport { CssBaseline } from \"@material-ui/core\"\nimport { ThemeProvider as EmotionThemeProvider } from \"@emotion/react/macro\"\nimport { frFR as coreLocale } from \"@material-ui/core/locale\"\nimport { grey } from \"@material-ui/core/colors\"\n\nimport { ReactComponent as Icons } from \"src/images/icons.svg\"\n\n// see public/index.html\nconst TITLE_FONT = \"Montserrat, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=titres-et-sous-titres\nconst TEXT_FONT = \"Cabin, sans-serif\" // https://style.lachouettecoop.fr/#/typographie?a=texte\n\nconst MAIN_COLOR = \"#3A5447\" // https://style.lachouettecoop.fr/#/couleurs\nconst SECONDARY_COLOR = grey[500]\n\ndeclare module \"@emotion/react\" {\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  export interface Theme extends MUITheme {}\n}\n\nconst THEME = createMuiTheme(\n  {\n    typography: {\n      fontFamily: TEXT_FONT,\n      body1: {\n        fontFamily: TEXT_FONT,\n        fontSize: \"1rem\",\n      },\n      body2: {\n        fontFamily: TEXT_FONT,\n        fontSize: \"1rem\",\n      },\n      subtitle1: {\n        fontFamily: TITLE_FONT,\n      },\n      subtitle2: {\n        fontFamily: TITLE_FONT,\n      },\n      h1: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        fontSize: \"2.5rem\",\n      },\n      h2: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        fontSize: \"1.5rem\",\n      },\n      h3: {\n        fontFamily: TITLE_FONT,\n        fontWeight: 600,\n        color: MAIN_COLOR,\n      },\n      h4: {\n        fontFamily: TITLE_FONT,\n      },\n      h5: {\n        fontFamily: TITLE_FONT,\n      },\n      h6: {\n        fontFamily: TITLE_FONT,\n      },\n    },\n    palette: {\n      primary: {\n        // light: will be calculated from palette.primary.main,\n        main: MAIN_COLOR,\n        // dark: will be calculated from palette.primary.main,\n        // contrastText: will be calculated to contrast with palette.primary.main\n      },\n      secondary: {\n        main: SECONDARY_COLOR,\n      },\n      // Used by `getContrastText()` to maximize the contrast between\n      // the background and the text.\n      contrastThreshold: 3,\n      // Used by the functions below to shift a color's luminance by approximately\n      // two indexes within its tonal palette.\n      // E.g., shift from Red 500 to Red 300 or Red 700.\n      tonalOffset: 0.2,\n    },\n    overrides: {\n      MuiCssBaseline: {\n        \"@global\": {\n          a: {\n            color: MAIN_COLOR,\n          },\n        },\n      },\n    },\n  },\n  coreLocale,\n  dataGridLocale\n)\n\nconst ThemeProvider: FC = ({ children }) => (\n  <EmotionThemeProvider theme={THEME}>\n    <MUIThemeProvider theme={THEME}>\n      <CssBaseline />\n      <Icons />\n      {children}\n    </MUIThemeProvider>\n  </EmotionThemeProvider>\n)\n\nexport default ThemeProvider\n","import { gql } from \"@apollo/client\"\n\nexport const SLOTS = gql`\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      informations\n      debut\n      fin\n      horsMag\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n`\n\nexport const PIAFS = gql`\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String, $validated: Boolean) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut, pourvu: $validated) {\n      id\n      statut\n      pourvu\n      nonPourvu\n      informations\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        nom\n        prenom\n        email\n        telephone\n        nbPiafGH\n        nbPiafCaisse\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n`\n\nexport const PIAFS_COUNT = gql`\n  query PIAFS_COUNT($userId: String, $after: String, $before: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }) {\n      id\n      statut\n      nonPourvu\n      creneau {\n        debut\n        fin\n      }\n    }\n  }\n`\n\nexport const PLANNING = gql`\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      informations\n      horsMag\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n`\n\nexport const REGISTRATION_UPDATE = gql`\n  mutation REGISTRATION_UPDATE($piafId: ID!, $userId: String!, $statut: String!, $informations: String) {\n    updatePiaf(input: { id: $piafId, piaffeur: $userId, statut: $statut, informations: $informations }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n        informations\n      }\n    }\n  }\n`\nexport const VALIDATE_PIAF = gql`\n  mutation VALIDATE_PIAF($piafId: ID!, $validate: Boolean) {\n    updatePiaf(input: { id: $piafId, pourvu: $validate }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n      }\n    }\n  }\n`\n\nexport const PIAF_NON_POURVU = gql`\n  mutation PIAF_NON_POURVU($piafId: ID!, $nonPourvu: Boolean) {\n    updatePiaf(input: { id: $piafId, nonPourvu: $nonPourvu }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n        nonPourvu\n      }\n    }\n  }\n`\n\nexport const RESERVE_CREATE = gql`\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_UPDATE = gql`\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n`\n\nexport const RESERVE_USER = gql`\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n`\n\nexport const CRENEAUX_GENERIQUES = gql`\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n`\n\nexport const PIAF_CREATE = gql`\n  mutation PIAF_CREATE($idCreneau: String!, $idRole: String) {\n    createPiaf(input: { creneau: $idCreneau, role: $idRole, visible: true, pourvu: false, nonPourvu: false }) {\n      piaf {\n        id\n        creneau {\n          id\n        }\n        piaffeur {\n          id\n        }\n        role {\n          id\n        }\n      }\n    }\n  }\n`\n\nexport const ROLES = gql`\n  query ROLES {\n    roles {\n      id\n      libelle\n      roleUniqueId\n    }\n  }\n`\n","import type { Role } from \"src/types/model\"\n\nimport { createContext, useContext, FC } from \"react\"\n\nimport { ROLES } from \"src/graphql/queries\"\nimport { useQuery } from \"@apollo/client\"\n\nexport interface IRolesContext {\n  roles: Role[]\n}\ntype Result = { roles: Role[] }\n\nconst RolesContext = createContext<IRolesContext>({} as IRolesContext)\n\nexport const RolesProvider: FC = ({ children }) => {\n  let roles: Role[] = []\n\n  const { data } = useQuery<Result>(ROLES)\n\n  if (data) {\n    roles = data.roles\n  }\n\n  return <RolesContext.Provider value={{ roles }}>{children}</RolesContext.Provider>\n}\n\nexport function useRoles() {\n  return (useContext(RolesContext) as IRolesContext).roles\n}\n","var _path, _g;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoWhite(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 756,\n    height: 756,\n    viewBox: \"0 0 756 756\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z\",\n    fill: \"#314b3f\"\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(1.33333 0 0 -1.33333 0 756)\",\n    fill: \"#314b3f\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoWhite);\nexport default __webpack_public_path__ + \"static/media/logo_white.6e9fcd91.svg\";\nexport { ForwardRef as ReactComponent };","import {\n  Button,\n  Dialog as MuiDialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\"\n\ninterface Props {\n  open: boolean\n  handleClose: () => void\n  title: string\n  message: string\n  callback?: (ok: boolean) => void\n}\n\nconst Dialog = ({ open, handleClose, title, message, callback }: Props) => {\n  const handleConfirm = (ok: boolean) => () => {\n    if (callback) {\n      setTimeout(callback, 300, ok)\n    }\n    handleClose()\n  }\n\n  return (\n    <MuiDialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">{message}</DialogContentText>\n      </DialogContent>\n      {callback ? (\n        <DialogActions>\n          <Button onClick={handleConfirm(true)} color=\"primary\">\n            Oui\n          </Button>\n          <Button onClick={handleConfirm(false)} color=\"primary\">\n            Non\n          </Button>\n        </DialogActions>\n      ) : (\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            OK\n          </Button>\n        </DialogActions>\n      )}\n    </MuiDialog>\n  )\n}\n\nexport default Dialog\n","import { createContext, useContext, useState, FC } from \"react\"\n\nimport Dialog from \"src/components/Dialog\"\n\ntype Callback = (choice: boolean) => void\n\ninterface IDialogContext {\n  openDialog: (message: string, title?: string) => void\n  openQuestion: (message: string, title?: string) => Promise<boolean>\n  closeDialog: () => void\n}\n\nconst DialogContext = createContext({} as IDialogContext)\n\nexport const DialogProvider: FC = ({ children }) => {\n  const [open, setOpen] = useState(false)\n  const [title, setTitle] = useState(\"\")\n  const [message, setMessage] = useState(\"\")\n  const [callback, setCallback] = useState<Callback>()\n\n  const openDialog = (newMessage: string, newTitle = \"\") => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    setCallback(undefined)\n    setOpen(true)\n  }\n\n  const openQuestion = (newMessage: string, newTitle = \"\") => {\n    setMessage(newMessage)\n    setTitle(newTitle)\n    return new Promise((resolve: Callback) => {\n      setCallback(() => resolve)\n      setOpen(true)\n    })\n  }\n\n  const closeDialog = () => {\n    setOpen(false)\n  }\n\n  return (\n    <DialogContext.Provider value={{ openDialog, openQuestion, closeDialog }}>\n      {children}\n      <Dialog open={open} handleClose={closeDialog} title={title} message={message} callback={callback} />\n    </DialogContext.Provider>\n  )\n}\n\nexport const useDialog = () => useContext(DialogContext)\n","import HttpError from \"standard-http-error\"\n\nimport { getStoredUser } from \"src/providers/user\"\n\nexport const post = async (path: string, body: BodyInit, headers?: HeadersInit) => {\n  const response = await fetch(`${process.env.REACT_APP_API}/${path}`, {\n    method: \"POST\",\n    body,\n    headers,\n  })\n  if (!response.ok) {\n    throw new HttpError(response.status, response.statusText)\n  }\n  return response.json()\n}\n\nexport const getParams = (search: string) => {\n  const params: Record<string, string> = {}\n  search\n    .substr(1)\n    .split(\"&\")\n    .forEach((part) => {\n      if (part) {\n        const tuple = part.split(\"=\")\n        if (tuple.length === 2) {\n          params[tuple[0]] = decodeURIComponent(tuple[1])\n        }\n      }\n    })\n  return params\n}\n\n// TODO: use email templates and just pass a template ID with variables\nexport const sendEmail = async (recipient: string, subject: string, message: string) => {\n  const user = getStoredUser()\n\n  if (!user) {\n    throw new Error(\"You must be authenticated to trigger the sending of an email\")\n  }\n\n  const headers = {\n    \"X-Auth-Token\": user.token,\n  }\n\n  const data = new FormData()\n  data.append(\"sujet\", subject)\n  data.append(\"email\", recipient)\n  data.append(\"corps\", message)\n\n  return await post(\"dist_api/send_email\", data, headers)\n}\n","import { FormEvent, useState } from \"react\"\nimport { Container, TextField, Button, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { useUser, Auth } from \"src/providers/user\"\nimport { post } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\n\nimport { ReactComponent as Logo } from \"src/images/logo_white.svg\"\nimport HttpError from \"standard-http-error\"\n\nconst Header = styled.div`\n  text-align: center;\n  svg {\n    width: 250px;\n    height: 250px;\n    margin: -20px 0;\n  }\n`\n\nconst LoginPage = () => {\n  const [loading, setLoading] = useState(false)\n  const { login } = useUser()\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    const body = new FormData(event.currentTarget)\n    setLoading(true)\n    try {\n      const data = await post(\"login_api\", body)\n      const auth: Auth = {\n        id: data.userId,\n        email: body.get(\"username\") as string,\n        token: data.token,\n      }\n      login(auth)\n    } catch (error) {\n      if (error instanceof HttpError && error.code === 401) {\n        alert(\"Identifiant ou mot de passe incorrect\")\n      } else {\n        handleError(error)\n      }\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <Header>\n        <Logo />\n        <Typography variant=\"h1\">Planning</Typography>\n      </Header>\n      <form onSubmit={handleSubmit}>\n        <p>\n          Cette application permet de gérer le planning des PIAF du magasin. Connecte-toi avec tes identifiants\n          habituels.\n        </p>\n        <TextField type=\"email\" name=\"username\" label=\"E-mail\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <TextField type=\"password\" name=\"password\" label=\"Mot de passe\" fullWidth variant=\"outlined\" margin=\"normal\" />\n        <Button type=\"submit\" fullWidth size=\"large\" variant=\"contained\" color=\"primary\" disabled={loading}>\n          Connexion\n        </Button>\n      </form>\n    </Container>\n  )\n}\n\nexport default LoginPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport { Container } from \"@material-ui/core\"\n\nimport LoginPage from \"src/pages/anonymous/Login\"\n\nconst Anonymous = () => {\n  const { pathname } = useLocation()\n\n  return (\n    <Container>\n      <Switch>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Redirect to={`/login?next=${pathname}`} />\n      </Switch>\n    </Container>\n  )\n}\n\nexport default Anonymous\n","import { createContext, useContext, useState, FC } from \"react\"\nimport { startOfMonth, endOfMonth, subMonths, addMonths } from \"date-fns\"\nimport { ApolloError, ApolloQueryResult, OperationVariables, useQuery } from \"@apollo/client\"\n\nimport { PLANNING } from \"src/graphql/queries\"\nimport { Creneau } from \"src/types/model\"\n\nexport interface IDatePlanningContext {\n  start: Date\n  end: Date\n  goBack: () => void\n  goForward: () => void\n  goToday: () => void\n  data?: Result\n  loading: boolean\n  error?: ApolloError\n  refetch: (variables?: Partial<OperationVariables> | undefined) => Promise<ApolloQueryResult<Result>>\n}\n\ntype Result = { creneaus: Creneau[] }\n\nconst DatePlanningContext = createContext<IDatePlanningContext>({} as IDatePlanningContext)\n\nconst getInitialStart = () => startOfMonth(new Date())\nconst getInitialEnd = () => endOfMonth(new Date())\n\nexport const DatePlanningProvider: FC = ({ children }) => {\n  const [start, setStart] = useState<Date>(getInitialStart)\n  const [end, setEnd] = useState<Date>(getInitialEnd)\n\n  const { data, loading, error, refetch } = useQuery<Result>(PLANNING, {\n    variables: { after: start, before: end },\n  })\n\n  const goBack = () => {\n    const date = subMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goForward = () => {\n    const date = addMonths(start, 1)\n    setStart(date)\n    setEnd(endOfMonth(date))\n  }\n\n  const goToday = () => {\n    setStart(getInitialStart)\n    setEnd(getInitialEnd)\n  }\n\n  return (\n    <DatePlanningContext.Provider value={{ start, end, goBack, goForward, goToday, data, loading, error, refetch }}>\n      {children}\n    </DatePlanningContext.Provider>\n  )\n}\n\nexport function useDatePlanning() {\n  return useContext(DatePlanningContext) as IDatePlanningContext\n}\n","export type ID = string\n\nexport enum RoleId {\n  GrandHibou = \"GH\",\n  Chouettos = \"CH\",\n  Caissier = \"CA\",\n  GrandHibou_Formation = \"GHF\",\n  Caissier_Formation = \"CAF\",\n  GrandHibou_Acc = \"GHA\",\n  Caissier_Acc = \"CAA\",\n  AdminMag = \"MAG\",\n  AdminBdM = \"BDM\",\n  // only for icons:\n  PIAF = \"P\",\n  Formation = \"F\",\n  Acc = \"A\",\n}\n\nexport interface Role {\n  id: ID\n  libelle: string\n  roleUniqueId: RoleId\n}\n\nexport interface CreneauGenerique {\n  id: ID\n  titre: string\n  frequence: string\n  jour: number\n  heureDebut: string // ISO datetime\n  heureFin: string // ISO datetime\n  actif: boolean\n}\n\nexport interface Poste {\n  id: ID\n  reservationChouettos: User\n  creneauGenerique: CreneauGenerique\n  role: Role\n}\n\nexport interface Reserve {\n  id: ID\n  informations: string\n  user: User\n  creneauGeneriques: CreneauGenerique[]\n}\n\nexport interface User {\n  id: ID\n  email: string\n  username: string\n  rolesChouette: Role[]\n  enabled: boolean\n  civilite: string\n  nom: string\n  prenom: string\n  telephone: string\n  codeBarre: string\n  domaineCompetence: string\n  photo: string\n  dateNaissance: string // ISO datetime\n  notes: string\n  actif: boolean // what’s the difference with \"enabled\"?\n  carteImprimee: boolean\n  gh: boolean // grand hibou\n  poste: Poste\n  statut: string\n  reserve: Reserve\n  absenceLongueDureeCourses: boolean\n  absenceLongueDureeSansCourses: boolean\n  nbPiafEffectuees: number\n  nbPiafAttendues: number\n  nbPiafGH?: number\n  nbPiafCaisse?: number\n}\n\nexport interface Creneau {\n  id: ID\n  titre: string\n  creneauGenerique: CreneauGenerique | null\n  debut: string // ISO datetime\n  fin: string // ISO datetime\n  informations: string\n  horsMag: boolean\n  piafs: PIAF[]\n}\n\nexport interface InfoCreneau {\n  piaffeursCount: number\n  piaffeursCountFirstPiaf: number\n}\n\nexport interface PIAF {\n  id: ID\n  role: Role | null\n  piaffeur: User | null\n  creneau: Creneau\n  visible: boolean\n  pourvu: boolean\n  nonPourvu: boolean\n  statut: \"occupe\" | \"remplacement\" | \"\" | null // empty = available\n  informations: string | null\n  infoCreneau: InfoCreneau\n}\n","import { Link } from \"react-router-dom\"\n\nconst UniversalLink = ({ href, ...props }: React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  if (href?.startsWith(\"/\")) {\n    return <Link to={href} {...props} />\n  }\n  return <a href={href} {...props} />\n}\n\nexport default UniversalLink\n","import { Role, RoleId, User } from \"src/types/model\"\n\nexport const getTrainerRoleId = (id: RoleId) => {\n  switch (id) {\n    case RoleId.Caissier:\n      return RoleId.Caissier_Acc\n    case RoleId.GrandHibou:\n      return RoleId.GrandHibou_Acc\n    default:\n      return null\n  }\n}\n\nexport const hasRole = (id: RoleId, roles: Role[]) => {\n  return roles.some(({ roleUniqueId }) => roleUniqueId === id)\n}\n\nexport const needsTraining = (user: User | null, roleId: RoleId) => {\n  if (user) {\n    if (roleId == RoleId.GrandHibou) {\n      return !user.nbPiafGH\n    } else if (roleId == RoleId.Caissier) {\n      return !user.nbPiafCaisse\n    }\n  }\n  return false\n}\n\nexport const formatRoles = (roles: Role[]) => roles.map(({ libelle }) => libelle).join(\", \")\n","import { useState } from \"react\"\nimport { useLocation } from \"react-router\"\nimport clsx from \"clsx\"\nimport { createStyles, makeStyles, useTheme } from \"@material-ui/core/styles\"\nimport {\n  styled,\n  useMediaQuery,\n  Drawer,\n  AppBar,\n  Toolbar,\n  List,\n  Typography,\n  IconButton,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Button,\n  Box,\n  Chip,\n  Tooltip,\n} from \"@material-ui/core\"\nimport {\n  Menu as MenuIcon,\n  ChevronLeft as ChevronLeftIcon,\n  ChevronRight as ChevronRightIcon,\n  Group as GroupIcon,\n  Person as PersonIcon,\n  // Replay as ReplayIcon,\n  ArrowBack as ArrowBackIcon,\n  Home as HomeIcon,\n  Event as EventIcon,\n  Storefront as StorefrontIcon,\n  CardMembership as CardMembershipIcon,\n} from \"@material-ui/icons\"\n\nimport Link from \"src/components/Link\"\nimport { useUser } from \"src/providers/user\"\nimport { hasRole } from \"src/helpers/role\"\nimport { TEST } from \"src/helpers/apollo\"\nimport { formatName } from \"src/helpers/user\"\nimport { RoleId } from \"src/types/model\"\n\nconst DRAWER_WIDTH = 260\n\nconst Spacer = styled(Box)({\n  flexGrow: 1,\n})\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      marginLeft: DRAWER_WIDTH,\n      width: `calc(100% - ${DRAWER_WIDTH}px)`,\n      transition: theme.transitions.create([\"width\", \"margin\"], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: 36,\n    },\n    hide: {\n      display: \"none\",\n    },\n    drawer: {\n      width: DRAWER_WIDTH,\n      flexShrink: 0,\n      whiteSpace: \"nowrap\",\n    },\n    drawerOpen: {\n      width: DRAWER_WIDTH,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    drawerClose: {\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      overflowX: \"hidden\",\n      width: theme.spacing(7) + 1,\n      [theme.breakpoints.up(\"sm\")]: {\n        width: theme.spacing(9) + 1,\n      },\n    },\n    toolbar: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-end\",\n      padding: theme.spacing(0, 1),\n      // necessary for content to be below app bar\n      ...theme.mixins.toolbar,\n    },\n    content: {\n      flexGrow: 1,\n      padding: theme.spacing(3),\n    },\n    menuItem: {\n      textDecoration: \"none\",\n      color: theme.palette.secondary.main,\n    },\n    activeItem: {\n      textDecoration: \"none\",\n      color: theme.palette.primary.main,\n    },\n  })\n)\n\nconst ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon, role: RoleId.Chouettos },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon, role: RoleId.Chouettos },\n  { title: \"Réserve\", href: \"/reserve\", Icon: GroupIcon, role: RoleId.Chouettos },\n  /* {\n    title: \"Réservation automatique\",\n    href: \"/auto\",\n    Icon: ReplayIcon,\n    role: RoleId.Chouettos,\n  },*/\n  { title: \"Mon profil\", href: \"/profile\", Icon: PersonIcon, role: RoleId.Chouettos },\n  { title: \"Groupe MAG\", href: \"/magasin\", Icon: StorefrontIcon, role: RoleId.AdminMag },\n  { title: \"Groupe BdM\", href: \"/bdm\", Icon: CardMembershipIcon, role: RoleId.AdminBdM },\n  {\n    title: \"Espace membre\",\n    href: \"https://espace-membres.lachouettecoop.fr/page/homepage\",\n    Icon: ArrowBackIcon,\n    role: RoleId.Chouettos,\n  },\n]\n\nconst Menu = () => {\n  const classes = useStyles()\n  const { user, logout } = useUser<true>()\n  const theme = useTheme()\n  const [open, setOpen] = useState(false)\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"))\n\n  const handleDrawerOpen = () => {\n    setOpen(true)\n  }\n\n  const handleDrawerClose = () => {\n    setOpen(false)\n  }\n\n  if (!matches) {\n    return null\n  }\n\n  const userRoles = user?.rolesChouette || []\n\n  return (\n    <div className={classes.root}>\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={clsx(classes.menuButton, {\n              [classes.hide]: open,\n            })}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap>\n            Planning {TEST && <Chip label=\"TEST\" />}\n          </Typography>\n          <Spacer />\n          <PersonIcon />\n          {user && formatName(user)}\n          <Spacer />\n          <Button onClick={logout} color=\"inherit\">\n            Déconnexion\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <Toolbar />\n      <Drawer\n        variant=\"permanent\"\n        className={clsx(classes.drawer, {\n          [classes.drawerOpen]: open,\n          [classes.drawerClose]: !open,\n        })}\n        classes={{\n          paper: clsx({\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          }),\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === \"rtl\" ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <List>\n          {ITEMS.filter(({ role }) => hasRole(role, userRoles)).map(({ href, title, Icon }) => {\n            const active = pathname === href\n            return (\n              <Link className={active ? classes.activeItem : classes.menuItem} href={href} key={href}>\n                <Tooltip title={title}>\n                  <ListItem button>\n                    <ListItemIcon>\n                      <Icon color={active ? \"primary\" : \"secondary\"} />\n                    </ListItemIcon>\n                    <ListItemText primary={title} />\n                  </ListItem>\n                </Tooltip>\n              </Link>\n            )\n          })}\n        </List>\n      </Drawer>\n    </div>\n  )\n}\n\nexport default Menu\n","import { useState } from \"react\"\nimport { Link, useLocation } from \"react-router-dom\"\nimport { createStyles, useTheme, makeStyles } from \"@material-ui/core/styles\"\nimport {\n  useMediaQuery,\n  Menu,\n  MenuItem,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  AppBar,\n  Toolbar,\n  IconButton,\n} from \"@material-ui/core\"\nimport { MoreVert as MoreIcon, Group as GroupIcon, Event as EventIcon, Home as HomeIcon } from \"@material-ui/icons\"\n\nimport { RoleId } from \"src/types/model\"\nimport { hasRole } from \"src/helpers/role\"\nimport { useUser } from \"src/providers/user\"\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    appBar: {\n      top: \"auto\",\n      bottom: 0,\n    },\n    toolbar: {\n      justifyContent: \"space-between\",\n    },\n    label: {\n      // Aligns the content of the button vertically.\n      flexDirection: \"column\",\n    },\n    menu: {\n      \"& ul\": {\n        paddingTop: \"0 !important\",\n        paddingBottom: \"0 !important\",\n      },\n    },\n    textMenuDecoration: {\n      textDecoration: \"none\",\n    },\n    menuItem: {\n      color: \"rgba(255, 255, 255, 0.54)\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    activeItem: {\n      color: \"white\",\n      backgroundColor: theme.palette.primary.main,\n      \"&:hover\": {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    icon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"rgba(255, 255, 255, 0.54)\",\n      },\n    },\n    activeIcon: {\n      justifyContent: \"center\",\n      \"& svg\": {\n        fill: \"white\",\n      },\n    },\n  })\n)\n\nconst MAIN_ITEMS = [\n  { title: \"Accueil\", href: \"/home\", Icon: HomeIcon, role: RoleId.Chouettos },\n  { title: \"Planning\", href: \"/planning\", Icon: EventIcon, role: RoleId.Chouettos },\n  { title: \"Réserve\", href: \"/reserve\", Icon: GroupIcon, role: RoleId.Chouettos },\n]\nconst EXTRA_ITEMS = [\n  //{ title: \"Auto\", href: \"/auto\", role: RoleId.Chouettos },\n  { title: \"Mon profil\", href: \"/profile\", role: RoleId.Chouettos },\n  { title: \"Espace membre\", href: \"/member\", role: RoleId.Chouettos },\n  { title: \"Groupe MAG\", href: \"/magasin\", role: RoleId.AdminMag },\n  { title: \"Groupe BdM\", href: \"/bdm\", role: RoleId.AdminBdM },\n]\n\nexport default function BottomAppBar() {\n  const classes = useStyles()\n  const { user, logout } = useUser<true>()\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null)\n  const theme = useTheme()\n  const { pathname } = useLocation()\n  const matches = useMediaQuery(theme.breakpoints.down(\"xs\"))\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  const userRoles = user?.rolesChouette || []\n\n  if (!matches) {\n    return null\n  }\n\n  return (\n    <>\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\n        <Toolbar className={classes.toolbar}>\n          {MAIN_ITEMS.filter(({ role }) => hasRole(role, userRoles)).map(({ href, title, Icon }) => {\n            const active = pathname === href\n            return (\n              <ListItem button className={classes.label} key={title} component={Link} to={href}>\n                <ListItemIcon className={active ? classes.activeIcon : classes.icon}>\n                  <Icon />\n                </ListItemIcon>\n                <ListItemText className={active ? classes.activeItem : classes.menuItem} primary={title} />\n              </ListItem>\n            )\n          })}\n          <Menu\n            id=\"simple-menu\"\n            className={classes.menu}\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleClose}\n          >\n            {EXTRA_ITEMS.filter(({ role }) => hasRole(role, userRoles)).map(({ href, title }) => {\n              const active = pathname === href\n              return (\n                <MenuItem\n                  key={title}\n                  className={active ? classes.activeItem : classes.menuItem}\n                  onClick={handleClose}\n                  component={Link}\n                  to={href}\n                >\n                  {title}\n                </MenuItem>\n              )\n            })}\n\n            <MenuItem onClick={logout} key=\"Logout\" className={classes.menuItem} color=\"inherit\">\n              Déconnexion\n            </MenuItem>\n          </Menu>\n          <IconButton aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick} edge=\"end\" color=\"inherit\">\n            <MoreIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </>\n  )\n}\n","import styled from \"@emotion/styled/macro\"\nimport { CircularProgress } from \"@material-ui/core\"\n\nconst Loader = styled(CircularProgress)`\n  margin: 16px 0;\n`\n\nexport default Loader\n","import { differenceInDays } from \"date-fns\"\nimport type { ISlot } from \"src/types/app\"\n\nimport { PIAF, RoleId } from \"src/types/model\"\n\nconst CRITICAL_DAYS = 5 // until how many days ahead a slot can be critical\nconst CRITICAL_MINIMUM_TAKEN = 3 // minimum number of taken PIAFs to not be a critical slot\n\nexport const getPiafRole = ({ role, piaffeur }: PIAF) => {\n  if (!role) {\n    return null\n  }\n  if (piaffeur) {\n    if (role.roleUniqueId === RoleId.GrandHibou && !piaffeur.nbPiafGH) {\n      return RoleId.GrandHibou_Formation\n    }\n    if (role.roleUniqueId === RoleId.Caissier && !piaffeur.nbPiafCaisse) {\n      return RoleId.Caissier_Formation\n    }\n  }\n  return role.roleUniqueId\n}\n\nexport const isTaken = (piaf: PIAF) => {\n  if (piaf.statut === \"remplacement\") {\n    return false\n  }\n  return Boolean(piaf.piaffeur)\n}\n\nexport const isCritical = (slot: ISlot, piaf: PIAF) => {\n  if (!slot.piafs) {\n    return false\n  }\n  if (differenceInDays(slot.start, new Date()) > CRITICAL_DAYS) {\n    return false\n  }\n  const countTaken = slot.piafs.filter(isTaken).length\n  return (\n    countTaken < CRITICAL_MINIMUM_TAKEN ||\n    piaf.role?.roleUniqueId == RoleId.GrandHibou ||\n    piaf.role?.roleUniqueId == RoleId.Caissier\n  )\n}\n\nexport const orderPiafsByDate = (left: PIAF, right: PIAF) => (left.creneau.debut > right.creneau.debut ? 1 : -1)\nexport const orderPiafsByRoleId = (left: PIAF, right: PIAF) => {\n  if (!left.role) {\n    return -2\n  }\n  if (!right.role) {\n    return 2\n  }\n  return left.role.id > right.role.id ? 1 : -1\n}\n","import type { PIAF } from \"src/types/model\"\n\nimport styled from \"@emotion/styled/macro\"\n\nimport { RoleId } from \"src/types/model\"\nimport { getPiafRole, isTaken } from \"src/helpers/piaf\"\n\nconst KNOWN_ROLES = Object.values(RoleId)\n\nconst Svg = styled.svg<{ $taken?: boolean; $critical?: boolean }>`\n  flex-shrink: 0;\n  display: inline-block;\n  margin: 3px;\n  width: 32px;\n  height: 32px;\n  opacity: ${({ $taken }) => ($taken ? 0.25 : 1)};\n  use {\n    fill: ${({ $critical }) => ($critical ? \"#e53935\" : \"black\")};\n  }\n`\n\ninterface RoleProps {\n  role?: RoleId | null\n  taken?: boolean\n  critical?: boolean\n}\n\nexport const PiafIcon = ({ role, taken, critical }: RoleProps) => {\n  if (!role || !KNOWN_ROLES.includes(role)) {\n    role = RoleId.Chouettos\n  }\n  return (\n    <Svg $taken={taken} $critical={critical}>\n      <use xlinkHref={\"#\" + role} width=\"100%\" height=\"100%\" />\n    </Svg>\n  )\n}\n\ninterface Props {\n  piaf: PIAF\n  critical?: boolean\n}\n\nconst PiafCircle = ({ piaf, critical }: Props) => (\n  <PiafIcon role={getPiafRole(piaf)} taken={isTaken(piaf)} critical={critical} />\n)\n\nexport default PiafCircle\n","import { format } from \"date-fns\"\nimport fr from \"date-fns/locale/fr\"\n\nconst getDate = (date: Date | number | string) => {\n  if (typeof date !== \"object\") {\n    return new Date(date)\n  }\n  return date\n}\n\nconst formatInFrench = (date: Date | number | string, pattern: string) => format(getDate(date), pattern, { locale: fr })\n\nexport const formatDateShort = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMM\")\nexport const formatDateLong = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMMM yyyy\")\n\nexport const formatMonthYear = (date: Date | number | string) => formatInFrench(date, \"MMMM yyyy\")\n\nexport const formatTime = (date: Date | number | string) => formatInFrench(date, \"HH:mm\")\n\nexport const formatDateTime = (date: Date | number | string) => formatInFrench(date, \"EEEE d MMMM yyyy à HH:mm\")\n\nexport const formatDateInterval = (start: Date | number | string, end: Date | number | string) => {\n  start = getDate(start)\n  end = getDate(end)\n\n  let startPattern = \"d\"\n  if (start.getFullYear() !== end.getFullYear()) {\n    startPattern = \"d MMMM yyyy\"\n  } else if (start.getMonth() !== end.getMonth()) {\n    startPattern = \"d MMMM\"\n  } else if (start.getDate() === end.getDate()) {\n    return formatDateLong(start)\n  }\n  return `du ${formatInFrench(start, startPattern)} au ${formatInFrench(end, \"d MMMM yyyy\")}`\n}\n\nconst WEEKDAYS = [\"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\", \"Dimanche\"]\nexport const getDayOfWeek = (index: number) => WEEKDAYS[index]\n\nexport const queryDate = (date: Date | number) => format(date, \"yyyy-MM-dd\")\n","import type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { Button, TextField } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\nimport { startOfWeek, endOfWeek, startOfDay, endOfDay, isPast } from \"date-fns\"\n\nimport { PIAF, User, RoleId } from \"src/types/model\"\nimport PiafCircle from \"src/components/PiafCircle\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { useRoles } from \"src/providers/roles\"\nimport { useUser } from \"src/providers/user\"\nimport { PIAFS_COUNT, REGISTRATION_UPDATE } from \"src/graphql/queries\"\nimport apollo from \"src/helpers/apollo\"\nimport { hasRole } from \"src/helpers/role\"\nimport { handleError } from \"src/helpers/errors\"\nimport { isTaken, getPiafRole } from \"src/helpers/piaf\"\nimport { sendEmail } from \"src/helpers/request\"\nimport { formatDateTime, formatDateShort } from \"src/helpers/date\"\nimport { formatName } from \"src/helpers/user\"\n\nconst MAX_PIAF_PER_WEEK = 3\nconst MAX_PIAF_PER_DAY = 2\n//const PERCENTAGE_NEW_CHOUETTOS = 50\nconst ADMIN_ROLES = [RoleId.AdminBdM, RoleId.AdminMag]\n\nconst Row = styled.div`\n  margin: 0 0 1rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  button {\n    margin-left: 8px;\n  }\n`\nconst Status = styled.div`\n  flex: 1;\n  margin: 0 8px;\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n  }\n`\nconst Contact = styled.div`\n  text-align: right;\n  a {\n    text-decoration: none;\n  }\n`\nconst InfoPiaf = styled.div`\n  display: block;\n`\n\ntype Result = { piafs: PIAF[] }\n\nconst getPiafCount = async (slot: ISlot, userId: string, type: \"week\" | \"day\") => {\n  const after = type === \"day\" ? startOfDay(slot.start) : startOfWeek(slot.start)\n  const before = type === \"day\" ? endOfDay(slot.start) : endOfWeek(slot.start)\n  const { data } = await apollo.query<Result>({\n    query: PIAFS_COUNT,\n    variables: { userId, after, before },\n  })\n  //The filter by statut on the database does not work\n  return data.piafs.filter((p) => p.statut === \"occupe\" && p.nonPourvu === false).length\n}\n/*\nFeature not available due to the reset of the counters\nconst checkMaximumNumberOfNewChouettos = (user: User, piaf: PIAF) => {\n  // There is a maximum percentage for PIAF of new Chouettos\n  if (user.nbPiafEffectuees === 0) {\n    const piafeursCount = piaf.infoCreneau.piaffeursCount\n    const maxPiafeursFirstPiaf = Math.floor((piafeursCount * PERCENTAGE_NEW_CHOUETTOS) / 100)\n    const piafeursFirstPiaf = piaf.infoCreneau.piaffeursCountFirstPiaf\n\n    if (piafeursFirstPiaf >= maxPiafeursFirstPiaf) {\n      return false\n    }\n  }\n  return true\n}*/\nconst getRegistrationPiaf = (slot: ISlot, piaf: PIAF) => {\n  const replacementPiaf = slot.piafs?.find(\n    ({ statut, role }) => statut === \"remplacement\" && role?.id === piaf.role?.id\n  )\n  if (replacementPiaf) {\n    // If there is a PIAF with status \"remplacement\" and the same role,\n    // the user will be registered in it instead of the requested one.\n    return replacementPiaf\n  }\n  return piaf\n}\n\nconst getGHEmail = (slot: ISlot) => {\n  const GHPiaf = slot.piafs?.find(({ statut, role }) => statut === \"occupe\" && role?.id === RoleId.GrandHibou)\n  return GHPiaf?.piaffeur?.email\n}\n\nconst sendEmailReplacedPiaf = (piaf: PIAF, slot: ISlot, user: User) => {\n  const replacedUserMail = (piaf.piaffeur as User).email\n  if (replacedUserMail) {\n    sendEmail(\n      replacedUserMail,\n      \"PIAF remplacée\",\n      `Ta PIAF du ${formatDateTime(slot.start)} a été pourvue. Tu n’es plus en charge de cette PIAF.`\n    )\n  }\n\n  if (piaf.role?.roleUniqueId != RoleId.GrandHibou) {\n    const ghEmail = getGHEmail(slot)\n    if (ghEmail) {\n      sendEmail(\n        ghEmail,\n        \"PIAF remplacée\",\n        `La PIAF du ${formatDateTime(slot.start)} a été pourvue.\n        ${formatName(user)} est maintenant inscrit pour cette PIAF.`\n      )\n    }\n  }\n}\n\ninterface Props {\n  piaf: PIAF\n  slot: ISlot\n}\n\nconst PiafRow = ({ piaf, slot }: Props) => {\n  const [loading, setLoading] = useState(false)\n  const [info, setInfo] = useState(\"\")\n  const { openDialog, openQuestion } = useDialog()\n  const { user } = useUser<true>()\n  const roles = useRoles()\n\n  const currentUserIsAdmin = user\n    ? ADMIN_ROLES.some((role) => user.rolesChouette.some(({ roleUniqueId }) => roleUniqueId === role))\n    : false\n\n  const currentUserPiafInSlot =\n    user && slot.piafs?.find(({ piaffeur, statut }) => piaffeur?.id === user.id && statut === \"occupe\")\n\n  const handleInputChange = ({ target }: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setInfo(target.value)\n  }\n\n  const register = async () => {\n    if (!piaf.role) {\n      openDialog(\"Cette PIAF n’a pas de rôle. Contacte l’administrateur pour lui signaler cette erreur.\")\n      return\n    }\n\n    try {\n      const userRoles = user?.rolesChouette\n      if (!userRoles || !hasRole(piaf.role.roleUniqueId, userRoles)) {\n        setLoading(false)\n        openDialog(`Pour t’inscrire à cette PIAF, tu dois d’abord passer la formation ${piaf.role.libelle}`)\n        return\n      }\n\n      const loggedUser = user as User\n\n      const piafOfWeek = await getPiafCount(slot, loggedUser.id, \"week\")\n      if (piafOfWeek >= MAX_PIAF_PER_WEEK) {\n        setLoading(false)\n        openDialog(`Il n’est pas possible de s’inscrire à plus de ${MAX_PIAF_PER_WEEK} PIAF par semaine`)\n        return\n      }\n\n      const piafOfDay = await getPiafCount(slot, loggedUser.id, \"day\")\n      if (piafOfDay >= MAX_PIAF_PER_DAY) {\n        setLoading(false)\n        openDialog(`Il n’est pas possible de s’inscrire à plus de ${MAX_PIAF_PER_DAY} PIAF par jour`)\n        return\n      }\n\n      /* if (!checkMaximumNumberOfNewChouettos(loggedUser, piaf)) {\n        setLoading(false)\n        openDialog(`Il n’est pas possible d’avoir plus de ${PERCENTAGE_NEW_CHOUETTOS}% de nouveaux chouettos par PIAF`)\n        return\n      }\n*/\n      const ok = await openQuestion(\n        `Es-tu sûr·e de vouloir t’inscrire à cette PIAF du ${formatDateShort(slot.start)} en tant que ${\n          piaf.role.libelle\n        }?`\n      )\n\n      if (!ok) {\n        return\n      }\n\n      setLoading(true)\n      const registrationPiaf = getRegistrationPiaf(slot, piaf)\n      if (registrationPiaf.statut === \"remplacement\") {\n        sendEmailReplacedPiaf(registrationPiaf, slot, loggedUser)\n      }\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: {\n          piafId: registrationPiaf.id,\n          userId: loggedUser.id,\n          statut: \"occupe\",\n          informations: info,\n        },\n      })\n\n      openDialog(\"Inscription effectuée. Merci !\")\n    } catch (error) {\n      handleError(error as Error)\n    }\n\n    setLoading(false)\n  }\n\n  const unregister = async () => {\n    const ok = await openQuestion(\n      `N’oublie pas de chercher un·e remplaçant·e sur Facebook, Zulip, appel aux autres Chouettos… Plus ton créneau est proche, plus c’est important! Es-tu sûr·e de vouloir te désinscrire ?`\n    )\n\n    if (!ok) {\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      setInfo(\"\")\n\n      const userId = (user as User).id\n\n      await apollo.mutate({\n        mutation: REGISTRATION_UPDATE,\n        variables: { piafId: piaf.id, userId, statut: \"remplacement\", informations: null },\n      })\n\n      openDialog(\"Désinscription effectuée : la PIAF est désormais en recherche de remplacement !\")\n    } catch (error) {\n      handleError(error as Error)\n    }\n\n    setLoading(false)\n  }\n\n  const { piaffeur, informations } = piaf\n  const taken = isTaken(piaf)\n  const isFuture = !isPast(slot.start)\n  const piafRole = roles.find(({ roleUniqueId }) => roleUniqueId == getPiafRole(piaf))\n\n  // show contact infos only if the current user is the GH of the slot or is an admin\n  const showInfos = currentUserIsAdmin || currentUserPiafInSlot?.role?.roleUniqueId === RoleId.GrandHibou\n\n  return (\n    <Row>\n      <PiafCircle piaf={piaf} />\n      <Status>\n        {taken && piaffeur ? formatName(piaffeur) : \"Place disponible\"}\n        <br />\n        <span> {piafRole?.libelle}</span>\n      </Status>\n      {taken && piaffeur && piaffeur.id != user?.id && (\n        <Contact>\n          {showInfos && (\n            <>\n              <a href={`mailto:${piaffeur.email}`}>{piaffeur.email}</a>\n              <br />\n              <a href={`tel:${piaffeur.telephone}`}>{piaffeur.telephone}</a>\n              <br />\n            </>\n          )}\n          {informations}\n        </Contact>\n      )}\n      {!taken && !currentUserPiafInSlot && isFuture && (\n        <TextField\n          name=\"informations\"\n          multiline\n          label=\"Informations (optionnel)\"\n          value={info}\n          onChange={handleInputChange}\n        />\n      )}\n      {!taken && !currentUserPiafInSlot && isFuture && (\n        <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={register}>\n          S’inscrire\n        </Button>\n      )}\n      {piaffeur?.id === user?.id && taken && isFuture && (\n        <InfoPiaf>\n          <div>{informations}</div>\n          <Button disabled={loading} color=\"primary\" variant=\"contained\" onClick={unregister}>\n            Demander un remplacement\n          </Button>\n        </InfoPiaf>\n      )}\n    </Row>\n  )\n}\n\nexport default PiafRow\n","import type { ISlot } from \"src/types/app\"\n\nimport { capitalize, Dialog, DialogContent, DialogTitle, IconButton, Typography } from \"@material-ui/core\"\nimport { Close } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport PiafRow from \"src/components/PiafRow\"\nimport { formatTime, formatDateLong } from \"src/helpers/date\"\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  right: 8px;\n  top: 8px;\n`\nconst Title = styled.div`\n  h3 {\n    font-size: 1.5em;\n    margin-bottom: 8px;\n  }\n  h4 {\n    font-size: 1.2em;\n  }\n  span {\n    color: ${({ theme }) => theme.palette.grey[600]};\n    margin-left: 5px;\n    font-weight: 500;\n  }\n`\n\ninterface Props {\n  slot: ISlot\n  show: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nconst SlotDialog = ({ slot, show, handleClose }: Props) => {\n  return (\n    <Dialog open={show} onClose={handleClose} fullWidth>\n      <CloseButton onClick={handleClose}>\n        <Close />\n      </CloseButton>\n      <DialogTitle disableTypography>\n        <Title>\n          <Typography variant=\"h3\">{capitalize(formatDateLong(slot.start))}</Typography>\n          <Typography variant=\"h4\">\n            <strong>\n              {formatTime(slot.start)}–{formatTime(slot.end)}\n            </strong>\n            <span>{slot.title}</span>\n          </Typography>\n          <div>{slot.information}</div>\n        </Title>\n      </DialogTitle>\n      <DialogContent>\n        {slot.piafs ? slot.piafs.map((piaf) => <PiafRow key={piaf.id} piaf={piaf} slot={slot} />) : <Loader />}\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nexport default SlotDialog\n","import type { Creneau, PIAF } from \"src/types/model\"\nimport { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport { ListItem, ListItemAvatar, ListItemText, Checkbox, FormControlLabel, Grid, FormGroup } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\nimport { useLazyQuery } from \"@apollo/client\"\n\nimport PiafCircle from \"src/components/PiafCircle\"\nimport SlotDialog from \"src/components/SlotDialog\"\nimport { PIAF_NON_POURVU, SLOTS } from \"src/graphql/queries\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { VALIDATE_PIAF } from \"src/graphql/queries\"\nimport { formatDateLong, formatTime } from \"src/helpers/date\"\nimport apollo from \"src/helpers/apollo\"\nimport { handleError } from \"src/helpers/errors\"\n\nconst Bordered = styled(Grid)`\n  border: 1px solid gray;\n  border-radius: 5px;\n  margin-bottom: 2px;\n`\n\ninterface Result {\n  creneau: Creneau\n}\n\ninterface Props {\n  piaf: PIAF\n  allowValidate?: boolean\n}\n\nconst Piaf = ({ piaf, allowValidate = false }: Props) => {\n  const { creneau } = piaf\n  const [open, setOpen] = useState(false)\n  const { openQuestion, openDialog } = useDialog()\n\n  const [load, { data }] = useLazyQuery<Result>(SLOTS, {\n    variables: { id: creneau.id },\n  })\n\n  const handleClick = () => {\n    setOpen(true)\n    load()\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const handleValidate = async (piafId: string) => {\n    const ok = await openQuestion(\"Es-tu sûr·e de vouloir valider cette PIAF ?\")\n\n    if (!ok) {\n      return\n    }\n\n    const variables: Record<string, any> = {\n      piafId,\n      validate: true,\n    }\n\n    try {\n      await apollo.mutate({\n        mutation: VALIDATE_PIAF,\n        variables,\n      })\n\n      openDialog(\"La PIAF a été validée\")\n    } catch (error) {\n      handleError(error as Error)\n    }\n  }\n\n  const handleNonPourvue = async (piafId: string) => {\n    const ok = await openQuestion(\"Es-tu sûr·e de vouloir indiquer cette PIAF comme non pourvue?\")\n\n    if (!ok) {\n      return\n    }\n\n    const variables: Record<string, any> = {\n      piafId,\n      nonPourvu: true,\n    }\n\n    try {\n      await apollo.mutate({\n        mutation: PIAF_NON_POURVU,\n        variables,\n      })\n\n      openDialog(\"La PIAF a été indiqué comme non pourvue\")\n    } catch (error) {\n      handleError(error as Error)\n    }\n  }\n\n  const slot: ISlot = {\n    id: creneau.id,\n    title: creneau.titre,\n    information: creneau.informations,\n    start: new Date(creneau.debut),\n    end: new Date(creneau.fin),\n    piafs: data?.creneau.piafs,\n  }\n\n  const Container = allowValidate ? Bordered : Grid\n\n  return (\n    <Container container>\n      <Grid item xs={8}>\n        <ListItem key={piaf.id} button onClick={handleClick}>\n          <ListItemAvatar>\n            <PiafCircle piaf={piaf} />\n          </ListItemAvatar>\n          <ListItemText\n            primary={formatDateLong(slot.start)}\n            secondary={`de ${formatTime(slot.start)} à ${formatTime(slot.end)}`}\n          />\n        </ListItem>\n      </Grid>\n      <Grid item xs={4}>\n        {allowValidate && (\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={piaf.pourvu}\n                  name=\"validatePIAF\"\n                  onChange={() => {\n                    handleValidate(piaf.id)\n                  }}\n                />\n              }\n              label=\"Valider\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={piaf.nonPourvu}\n                  name=\"nonPourvu\"\n                  onChange={() => {\n                    handleNonPourvue(piaf.id)\n                  }}\n                />\n              }\n              label=\"Non pourvue\"\n            />\n          </FormGroup>\n        )}\n      </Grid>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </Container>\n  )\n}\n\nexport default Piaf\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { List } from \"@material-ui/core\"\n\nimport Loader from \"src/components/Loader\"\nimport Piaf from \"src/components/Piaf\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { orderPiafsByDate } from \"src/helpers/piaf\"\n\ntype Result = { piafs: PIAF[] }\ninterface Props {\n  userId?: string\n  after?: string\n  validated?: boolean\n  allowValidate?: boolean\n}\n\nconst UserPiafs = ({ userId, after, validated = false, allowValidate = false }: Props) => {\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: { userId, after, validated },\n    skip: !userId,\n  })\n\n  if (loading || !userId) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  if (!data.piafs.length && !allowValidate) {\n    return <p>Aucune PIAF à venir. Inscris-toi sur le planning !</p>\n  }\n\n  if (!data.piafs.length && allowValidate) {\n    return <p>Aucune PIAF à valider.</p>\n  }\n\n  const piafs = data.piafs\n    .filter(({ statut, nonPourvu }) => statut !== \"remplacement\" && nonPourvu == false)\n    .sort(orderPiafsByDate)\n\n  return (\n    <List>\n      {piafs.map((piaf) => (\n        <Piaf key={piaf.id} piaf={piaf} allowValidate={allowValidate} />\n      ))}\n    </List>\n  )\n}\n\nexport default UserPiafs\n","import type { PIAF } from \"src/types/model\"\n\nimport { useQuery } from \"@apollo/client\"\nimport { startOfToday, addMonths, addWeeks } from \"date-fns\"\nimport { List } from \"@material-ui/core\"\n\nimport Loader from \"src/components/Loader\"\nimport Piaf from \"src/components/Piaf\"\nimport { useUser } from \"src/providers/user\"\nimport { PIAFS } from \"src/graphql/queries\"\nimport { queryDate } from \"src/helpers/date\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { orderPiafsByDate } from \"src/helpers/piaf\"\nimport { hasRole } from \"src/helpers/role\"\nimport { getId } from \"src/helpers/apollo\"\n\ntype Result = { piafs: PIAF[] }\n\nconst ReplacementPiafs = () => {\n  const { auth, user } = useUser<true>()\n\n  const { loading, error, data } = useQuery<Result>(PIAFS, {\n    variables: {\n      after: queryDate(startOfToday()),\n      before: queryDate(addMonths(startOfToday(), 2)),\n      statut: \"remplacement\",\n    },\n  })\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  const userRoles = user?.rolesChouette || []\n\n  const otherPiafs = data.piafs\n    .filter(\n      (piaf) =>\n        getId(piaf.piaffeur?.id) !== auth.id &&\n        piaf.role &&\n        hasRole(piaf.role.roleUniqueId, userRoles) &&\n        new Date(piaf.creneau.debut) < addWeeks(startOfToday(), 2)\n    )\n    .sort(orderPiafsByDate)\n\n  if (!otherPiafs.length) {\n    return <p>Aucun remplacement à venir n’est demandé.</p>\n  }\n\n  return (\n    <>\n      <p>\n        Les créneaux suivants sont vacants et donc disponibles pour un remplacement. N’hésite pas à te positionner, la\n        personne que tu remplaces sera avertie par e-mail instantanément !\n      </p>\n      <List>\n        {otherPiafs.map((piaf) => (\n          <Piaf key={piaf.id} piaf={piaf} />\n        ))}\n      </List>\n    </>\n  )\n}\n\nexport default ReplacementPiafs\n","import styled from \"@emotion/styled/macro\"\nimport { Typography } from \"@material-ui/core\"\nimport { startOfToday } from \"date-fns\"\nimport { Link } from \"react-router-dom\"\n\nimport { useUser } from \"src/providers/user\"\nimport UserPiafs from \"src/components/UserPiafs\"\nimport ReplacementPiafs from \"src/components/ReplacementPiafs\"\nimport { queryDate } from \"src/helpers/date\"\n\n// https://style.lachouettecoop.fr/#/couleurs\n// TODO: use constants\n// https://github.com/lachouettecoop/chouette-admin-chouettos/blob/master/src/Controller/PlanningController.php#L99-L105\nconst COLORS: Record<string, string> = {\n  \"très chouette\": \"#2ECC40\",\n  chouette: \"#FF851B\",\n  \"chouette en alerte\": \"#FF4136\",\n}\nconst StatusText = styled(Typography)<{ $status?: string }>`\n  color: ${({ $status, theme }) => ($status && COLORS[$status]) || theme.palette.secondary.main};\n  &::first-letter {\n    text-transform: uppercase;\n  }\n`\n\nconst Container = styled.div`\n  min-height: calc(100vh - 132px);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`\nconst Bottom = styled.div`\n  font-size: 0.85em;\n  margin-top: ${({ theme }) => theme.spacing(4)}px;\n`\nconst Content = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 32px;\n  > div {\n    flex: 0 1 calc(50% - 16px);\n    min-width: 300px;\n  }\n`\nconst Status = styled.div`\n  h3 {\n    font-size: 2.5rem;\n    span {\n      font-size: 0.5em;\n    }\n    margin-bottom: 2rem;\n  }\n`\n\nconst HomePage = () => {\n  const { user } = useUser<true>()\n\n  const counter = `${user?.nbPiafEffectuees ?? \"…\"}/${user?.nbPiafAttendues ?? \"…\"}`\n  const status = user?.statut || \"…\"\n\n  return (\n    <Container>\n      <Content>\n        <Status>\n          <Typography variant=\"h2\">Mon statut</Typography>\n          <Typography variant=\"h3\">\n            {counter} <span>PIAF attendues</span>\n          </Typography>\n          <Typography variant=\"h2\">Je suis</Typography>\n          <StatusText variant=\"h3\" $status={user?.statut}>\n            {status}\n          </StatusText>\n        </Status>\n        <div>\n          <Typography variant=\"h2\">Mes prochaines PIAF</Typography>\n          <UserPiafs userId={user?.id} after={queryDate(startOfToday())} />\n        </div>\n        <div>\n          <Typography variant=\"h2\">Remplacements</Typography>\n          <ReplacementPiafs />\n        </div>\n      </Content>\n      <Bottom>\n        <Link to=\"/legal\">Politique de traitement des données personnelles</Link>\n        <p>Ce site n’utilise pas de cookies tiers</p>\n        <p>\n          Un problème ? Une question ? Contacte le BdM :{\" \"}\n          <a href={`mailto:${process.env.REACT_APP_MAIL_BDM}`}>{process.env.REACT_APP_MAIL_BDM}</a>\n        </p>\n      </Bottom>\n    </Container>\n  )\n}\n\nexport default HomePage\n","import type { ISlot } from \"src/types/app\"\n\nimport { useState } from \"react\"\nimport styled from \"@emotion/styled/macro\"\n\nimport SlotDialog from \"src/components/SlotDialog\"\nimport PiafCircle from \"src/components/PiafCircle\"\nimport { formatTime } from \"src/helpers/date\"\nimport { isCritical, isTaken } from \"src/helpers/piaf\"\n\nconst SELECTED_COLOR = \"#FFFFAA\"\nconst TRAINING_COLOR = \"#89C7A8\"\n\nconst ClickableSlot = styled.button<{ $open: boolean; $slotTitle: string }>`\n  width: 100%;\n  border: none;\n  background-color: ${({ $open, $slotTitle }) =>\n    $open\n      ? SELECTED_COLOR\n      : $slotTitle.toLowerCase().toString().startsWith(\"formation\")\n      ? TRAINING_COLOR\n      : \"transparent\"};\n  padding: 5px;\n  text-align: left;\n  font-size: inherit;\n  line-height: inherit;\n  font: inherit;\n  cursor: pointer;\n  &:focus {\n    background-color: ${SELECTED_COLOR};\n    outline: none;\n  }\n`\nconst Title = styled.div`\n  span {\n    color: gray;\n  }\n`\nconst List = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 -2px;\n  svg {\n    width: 24px;\n    height: 24px;\n  }\n`\n\ninterface Props {\n  slot: ISlot\n}\n\nconst Slot = ({ slot }: Props) => {\n  const [open, setOpen] = useState(false)\n\n  const handleClick = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <ClickableSlot $open={open} $slotTitle={slot.title || \"\"} onClick={handleClick}>\n        <Title>\n          <strong>\n            {formatTime(slot.start)}–{formatTime(slot.end)}\n          </strong>\n          <br />\n          <span>{slot.title}</span>\n        </Title>\n        <List>\n          {slot.piafs?.map((piaf) => (\n            <PiafCircle key={piaf.id} piaf={piaf} critical={isCritical(slot, piaf) && !isTaken(piaf)} />\n          ))}\n        </List>\n      </ClickableSlot>\n      <SlotDialog show={open} slot={slot} handleClose={handleClose} />\n    </>\n  )\n}\n\nexport default Slot\n","import type { IDay, IWeekNumber } from \"src/types/app\"\n\nimport styled from \"@emotion/styled/macro\"\nimport { isPast, isToday } from \"date-fns\"\nimport { capitalize, Typography } from \"@material-ui/core\"\n\nimport Slot from \"src/components/Slot\"\nimport { formatDateShort } from \"src/helpers/date\"\n\ntype TimeStatus = \"past\" | \"present\" | \"future\"\n\nconst WEEK_COLORS: Record<IWeekNumber, string> = {\n  1: \"#89C7A8\",\n  2: \"#638F79\",\n  3: \"#3A5447\",\n  4: \"#27382F\",\n}\n\nconst Header = styled.div<{ $when?: IWeekNumber }>`\n  background-color: ${({ $when, theme }) => ($when ? WEEK_COLORS[$when] : theme.palette.grey[400])};\n  height: 18px;\n  color: white;\n  font-size: 12px;\n  padding: 0 4px;\n`\n\nconst Container = styled.div<{ $when: TimeStatus }>`\n  opacity: ${({ $when }) => ($when === \"past\" ? 0.25 : 1)};\n  border: 1px solid gray;\n  min-height: 80px;\n  background-color: ${({ $when }) => ($when === \"present\" ? \"#d0d9d0\" : \"#eee\")};\n  h3 {\n    font-size: 1em;\n    margin: 4px;\n  }\n`\nconst List = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n`\n\ninterface Props {\n  day: IDay\n  weekNumber?: IWeekNumber\n}\n\nconst CalendarDay = ({ day, weekNumber }: Props) => {\n  const { start, slots } = day\n  const isFirstDoW = start.getDay() === 1 || start.getDate() === 1\n\n  return (\n    <Container $when={isToday(start) ? \"present\" : isPast(start) ? \"past\" : \"future\"}>\n      <Header $when={weekNumber}>{isFirstDoW && weekNumber && `Semaine ${weekNumber}`}</Header>\n      <Typography variant=\"h3\">{capitalize(formatDateShort(start))}</Typography>\n      <List>\n        {slots.map((slot) => (\n          <Slot slot={slot} key={slot.id}></Slot>\n        ))}\n      </List>\n    </Container>\n  )\n}\n\nexport default CalendarDay\n\nexport const DayPlaceholder = () => <Container $when=\"past\" />\n","import type { Creneau, PIAF } from \"src/types/model\"\nimport type { IWeek, IWeekNumber } from \"src/types/app\"\n\nimport { useMediaQuery, useTheme } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\nimport { addDays, differenceInWeeks, eachWeekOfInterval, getDay } from \"date-fns\"\n\nimport CalendarDay, { DayPlaceholder } from \"src/components/CalendarDay\"\nimport { orderPiafsByRoleId } from \"src/helpers/piaf\"\n\nconst Container = styled.div`\n  border: 1px solid gray;\n  margin: 0;\n  padding: 0;\n`\nconst WeekRow = styled.div`\n  @media (min-width: 800px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\n\ninterface Props {\n  start: Date\n  end: Date\n  list?: Creneau[]\n}\n\nconst Calendar = ({ start, end, list }: Props) => {\n  const theme = useTheme()\n  const matches = useMediaQuery(theme.breakpoints.down(\"sm\"))\n\n  if (!list) {\n    return null\n  }\n\n  const weeks: IWeek[] = eachWeekOfInterval({ start, end }, { weekStartsOn: 1 }).map((date) => ({\n    start: date,\n    days: [0, 1, 2, 3, 4, 5, 6].map((i) => ({ start: addDays(date, i), slots: [] })),\n  }))\n\n  list.forEach((node) => {\n    const date = new Date(node.debut)\n    const weekIndex = differenceInWeeks(date, weeks[0].start)\n    const week = weeks[weekIndex]\n    const day = (getDay(date) || 7) - 1 // Monday = 0, ..., Sunday = 6\n\n    const piaffeursCount = node.piafs.length\n    const piaffeursCountFirstPiaf = node.piafs.filter(({ piaffeur }) => piaffeur?.nbPiafEffectuees === 0).length\n    const infoCreneau = { piaffeursCount, piaffeursCountFirstPiaf }\n\n    const piafs: PIAF[] = node.piafs\n      .map((piaf) => ({\n        ...piaf,\n        infoCreneau,\n      }))\n      .sort(orderPiafsByRoleId)\n\n    week.days[day].slots.push({\n      id: node.id,\n      title: node.titre,\n      information: node.informations,\n      start: date,\n      end: new Date(node.fin),\n      piafs,\n    })\n\n    if (node.creneauGenerique) {\n      week.weekNumber = Number(node.creneauGenerique.frequence) as IWeekNumber\n    }\n  })\n\n  return (\n    <Container>\n      {weeks.map((week, index) => (\n        <WeekRow key={index}>\n          {week.days.map((day, i) =>\n            day.start >= start && day.start < end ? (\n              <CalendarDay day={day} key={i} weekNumber={week.weekNumber} />\n            ) : matches ? null : (\n              <DayPlaceholder key={i} />\n            )\n          )}\n        </WeekRow>\n      ))}\n    </Container>\n  )\n}\n\nexport default Calendar\n","import { useEffect, useState } from \"react\"\nimport styled from \"@emotion/styled/macro\"\nimport { Grid, Dialog, DialogContent, DialogActions, Button } from \"@material-ui/core\"\n\nimport { RoleId } from \"src/types/model\"\nimport { PiafIcon } from \"src/components/PiafCircle\"\n\nconst Container = styled.div`\n  text-align: center;\n`\nconst Title = styled.h3`\n  margin: 0 0 2em;\n`\nconst Caption = styled.figcaption`\n  word-wrap: break-word;\n  padding: 0 4px;\n`\n\nconst IconsCaption = () => {\n  return (\n    <Container>\n      <Title>Légende</Title>\n      <Grid container>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.Chouettos} />\n          <Caption>Chouettos</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.Caissier} />\n          <Caption>Caissier·ère</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.GrandHibou} />\n          <Caption>Grand Hibou</Caption>\n        </Grid>\n      </Grid>\n      <br />\n      <Grid container>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.PIAF} />\n          <Caption>PIAF disponible</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.PIAF} taken />\n          <Caption>PIAF occupée</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.PIAF} critical />\n          <Caption>PIAF critique</Caption>\n        </Grid>\n      </Grid>\n      <br />\n      <Grid container>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.Formation} />\n          <Caption>En formation</Caption>\n        </Grid>\n        <Grid item xs={4} component=\"figure\">\n          <PiafIcon role={RoleId.Acc} />\n          <Caption>Accompagnateur·rice</Caption>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n}\n\nexport default IconsCaption\n\nexport const CaptionDialog = () => {\n  const [open, setOpen] = useState(false)\n\n  useEffect(() => {\n    const dismissed = localStorage.getItem(\"caption_dismissed\")\n    if (!dismissed) {\n      setOpen(true)\n    }\n  }, [])\n\n  const handleClose = () => {\n    setOpen(false)\n    localStorage.setItem(\"caption_dismissed\", \"true\")\n  }\n\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogContent>\n        <IconsCaption />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Compris !\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import type { Creneau } from \"src/types/model\"\n\nimport { Button, Typography } from \"@material-ui/core\"\nimport { ArrowBackIos, ArrowForwardIos, CalendarToday } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\nimport { isSameMonth } from \"date-fns\"\n\nimport Loader from \"src/components/Loader\"\nimport Calendar from \"src/components/Calendar\"\nimport IconsCaption, { CaptionDialog } from \"src/components/IconsCaption\"\nimport { useDatePlanning } from \"src/providers/datePlanning\"\nimport { formatMonthYear } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\nconst Loading = styled.div`\n  border: 2px solid gray;\n  height: 500px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Nav = styled.nav`\n  display: flex;\n  margin-bottom: 1rem;\n  button:not(:first-of-type) {\n    margin-left: 1rem;\n  }\n  h2 {\n    flex: 1;\n    text-transform: capitalize;\n  }\n  ${({ theme }) => theme.breakpoints.down(\"xs\")} {\n    h2 {\n      font-size: 1.15rem;\n    }\n  }\n`\nconst ButtonArea = styled.div`\n  display: flex;\n  justify-content: end;\n  ${({ theme }) => theme.breakpoints.down(\"sm\")} {\n    span.text {\n      display: none;\n    }\n    .MuiButton-root {\n      min-width: 32px;\n    }\n    .MuiButton-startIcon {\n      margin-right: -4px;\n    }\n    .MuiButton-endIcon {\n      margin-left: -4px;\n    }\n  }\n`\nconst BottomCaption = styled.div`\n  max-width: 500px;\n  margin: 20px 0 100px auto;\n  border: 1px solid gray;\n  border-radius: 10px;\n  padding: 20px 10px;\n`\n\nconst orderSlotsByDate = (left: Creneau, right: Creneau) => (left.debut > right.debut ? 1 : -1)\n\nconst PlanningPage = () => {\n  const { goBack, goForward, goToday, start, end, data, error, loading } = useDatePlanning()\n  if (error) {\n    return <ErrorBlock error={error} />\n  }\n\n  const slots = data?.creneaus.filter(({ horsMag }) => !horsMag).sort(orderSlotsByDate)\n\n  return (\n    <>\n      <Nav>\n        <Typography variant=\"h2\">{formatMonthYear(start)}</Typography>\n        <ButtonArea>\n          <Button disabled={loading} variant=\"contained\" color=\"primary\" startIcon={<ArrowBackIos />} onClick={goBack}>\n            <span className=\"text\">Précédent</span>\n          </Button>\n          <Button\n            disabled={loading || isSameMonth(start, new Date())}\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<CalendarToday />}\n            onClick={goToday}\n          >\n            <span className=\"text\">Aujourd’hui</span>\n          </Button>\n          <Button\n            disabled={loading}\n            variant=\"contained\"\n            color=\"primary\"\n            endIcon={<ArrowForwardIos />}\n            onClick={goForward}\n          >\n            <span className=\"text\">Suivant</span>\n          </Button>\n        </ButtonArea>\n      </Nav>\n      {loading ? (\n        <Loading>\n          <Loader />\n        </Loading>\n      ) : (\n        <Calendar start={start} end={end} list={slots} />\n      )}\n      <BottomCaption>\n        <IconsCaption />\n      </BottomCaption>\n      <CaptionDialog />\n    </>\n  )\n}\n\nexport default PlanningPage\n","import { FormEvent, ChangeEvent, useState } from \"react\"\nimport {\n  Button,\n  Dialog,\n  TextField,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  DialogTitle,\n  Select,\n  MenuItem,\n  InputLabel,\n  FormControl,\n} from \"@material-ui/core\"\nimport { Close } from \"@material-ui/icons\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { useDialog } from \"src/providers/dialog\"\nimport { formatDateLong } from \"src/helpers/date\"\nimport { sendEmail } from \"src/helpers/request\"\nimport { handleError } from \"src/helpers/errors\"\nimport { formatName } from \"src/helpers/user\"\n\nimport { User } from \"src/types/model\"\n\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  > * {\n    margin-bottom: 1rem;\n    @media (min-width: 400px) {\n      flex: 1;\n      &:not(:first-of-type) {\n        margin-left: ${({ theme }) => theme.spacing(3)}px;\n      }\n    }\n  }\n`\n\nconst CloseButton = styled(IconButton)`\n  position: absolute;\n  right: 8px;\n  top: 8px;\n`\n\nconst TextInput = styled(TextField)`\n  width: 100%;\n`\n\nconst Title = styled(DialogTitle)`\n  margin-right: 32px;\n`\n\nconst REASONS = {\n  noPiaf: \"Je ne pourrai pas assurer ma PIAF\",\n  noBuy: \"Je ne pourrai pas assurer ma PIAF ni effectuer mes courses\",\n  other: \"Autre (spécifier en commentaire)\",\n}\n\ninterface Props {\n  show: boolean\n  user: User\n  handleClose: () => void\n}\n\ninterface State {\n  reason: keyof typeof REASONS | \"\"\n  comment: string\n  startDate: string\n  endDate: string\n}\n\nconst LongAbsence = ({ show, handleClose, user }: Props) => {\n  const { openDialog } = useDialog()\n  const [values, setValues] = useState<State>({\n    reason: \"\",\n    comment: \"\",\n    startDate: \"\",\n    endDate: \"\",\n  })\n  const [loading, setLoading] = useState(false)\n\n  const handleInputChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = target\n    setValues({\n      ...values,\n      [name]: value,\n    })\n  }\n\n  const handleReasonChange = ({ target }: ChangeEvent<{ name?: string; value: unknown }>) => {\n    const { name, value } = target\n    setValues({\n      ...values,\n      [name as string]: value,\n    })\n  }\n\n  const handleSendEmail = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n\n    if (!process.env.REACT_APP_MAIL_BDM) {\n      alert(\"L’adresse e-mail du BdM n’est pas configurée. Contacte l’administrateur.\")\n      return\n    }\n\n    if (!values.startDate || !values.reason) {\n      openDialog(\"Tous les champs sont obligatoires.\")\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      const content = [\n        `Nom et prénom : ${formatName(user)}`,\n        `Mail : ${user.email} `,\n        `Téléphone : ${user.telephone} `,\n        `Raison de l'absence : ${REASONS[values.reason]}`,\n        `Date début : ${formatDateLong(values.startDate)}`,\n      ]\n      if (values.comment) {\n        content.push(`Commentaire : ${values.comment}`)\n      }\n\n      await sendEmail(process.env.REACT_APP_MAIL_BDM, \"Absence prolongée\", content.join(\"<br />\"))\n\n      handleClose()\n      openDialog(\n        \"Un e-mail a été envoyé au BdM qui te recontactera si besoin. Pense bien a les recontacter lorsque tu pourras reprendre les PIAF.\"\n      )\n    } catch (error) {\n      handleError(error as Error)\n    }\n\n    setLoading(false)\n  }\n\n  return (\n    <Dialog open={show} onClose={handleClose}>\n      <form onSubmit={handleSendEmail} autoComplete=\"off\">\n        <CloseButton onClick={handleClose}>\n          <Close />\n        </CloseButton>\n        <Title>Informer d’un changement de ma situation</Title>\n        <DialogContent>\n          <Row>\n            <TextField\n              id=\"startDate\"\n              label=\"Date de début\"\n              name=\"startDate\"\n              type=\"date\"\n              fullWidth\n              required\n              value={values.startDate}\n              onChange={handleInputChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />\n\n            {/*            <TextField\n              id=\"endDate\"\n              label=\"Date de fin\"\n              name=\"endDate\"\n              type=\"date\"\n              fullWidth\n              required\n              value={values.endDate}\n              onChange={handleInputChange}\n              InputLabelProps={{\n                shrink: true,\n              }}\n            /> */}\n          </Row>\n          <Row>\n            <FormControl fullWidth>\n              <InputLabel>Type de changement</InputLabel>\n              <Select\n                value={values.reason}\n                label=\"Type de changement\"\n                name=\"reason\"\n                required\n                onChange={handleReasonChange}\n              >\n                {Object.keys(REASONS).map((key) => (\n                  <MenuItem value={key} key={key}>\n                    {REASONS[key]}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </Row>\n          <Row>\n            <TextInput\n              name=\"comment\"\n              multiline\n              required={values.reason === \"other\"}\n              label=\"Commentaire additionnel\"\n              value={values.comment}\n              onChange={handleInputChange}\n            ></TextInput>\n          </Row>\n          <Row>\n            <span>\n              Pour plus d’informations,{\" \"}\n              <a href=\"https://espace-membres.lachouettecoop.fr/page/les-documents\" target=\"_blank\" rel=\"noopener\">\n                consultez le manuel du•de la coopérateur•ice\n              </a>\n              .\n            </span>\n          </Row>\n        </DialogContent>\n        <DialogActions>\n          <Button type=\"submit\" color=\"primary\" variant=\"contained\" disabled={loading}>\n            Confirmer au BdM\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  )\n}\n\nexport default LongAbsence\n","import { useEffect, useState } from \"react\"\nimport { Phone, Mail } from \"@material-ui/icons\"\nimport { Button, InputAdornment, TextField, Typography } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport LongAbsence from \"src/components/LongAbsence\"\nimport { useUser } from \"src/providers/user\"\nimport apollo from \"src/helpers/apollo\"\nimport { USER_UPDATE } from \"src/graphql/queriesUser\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { handleError } from \"src/helpers/errors\"\nimport { formatRoles } from \"src/helpers/role\"\nimport { formatName } from \"src/helpers/user\"\n\nconst Loading = styled.div`\n  height: 50vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 500px;\n  p,\n  .MuiTextField-root {\n    margin: 10px 0;\n  }\n  button {\n    margin: 15px auto;\n    display: block;\n  }\n`\n\nconst ProfilePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [openAbsenceDialog, setOpenAbsenceDialog] = useState(false)\n  const [values, setValues] = useState({\n    email: user?.email || \"\",\n    telephone: user?.telephone || \"\",\n  })\n\n  useEffect(() => {\n    if (user) {\n      setValues({\n        email: user.email,\n        telephone: user.telephone,\n      })\n    }\n  }, [user])\n\n  const handleInputChange = ({ target }: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = target\n    setValues({\n      ...values,\n      [name]: value,\n    })\n  }\n\n  const handleSave = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    setSaving(true)\n    try {\n      await apollo.mutate({\n        mutation: USER_UPDATE,\n        variables: { ...values, idUser: user?.id },\n      })\n      openDialog(\"Tes informations ont bien été mises à jour\")\n    } catch (error) {\n      handleError(error as Error)\n    }\n    setSaving(false)\n  }\n\n  const handleOpenAbsenceDialog = () => {\n    setOpenAbsenceDialog(true)\n  }\n\n  const handleCloseAbsenceDialog = () => {\n    setOpenAbsenceDialog(false)\n  }\n\n  if (!user) {\n    return (\n      <Loading>\n        <Loader />\n      </Loading>\n    )\n  }\n\n  return (\n    <Container>\n      <form onSubmit={handleSave}>\n        <Typography variant=\"h2\">{formatName(user)}</Typography>\n        <p>{formatRoles(user.rolesChouette)}</p>\n        <TextField\n          name=\"telephone\"\n          label=\"Téléphone\"\n          required\n          disabled={!user}\n          value={values.telephone}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Phone />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <TextField\n          name=\"email\"\n          label=\"Adresse e-mail\"\n          required\n          disabled={!user}\n          value={values.email}\n          onChange={handleInputChange}\n          fullWidth\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <Mail />\n              </InputAdornment>\n            ),\n          }}\n        />\n        <Button color=\"primary\" variant=\"contained\" disabled={saving} type=\"submit\">\n          Enregistrer\n        </Button>\n        <Button color=\"primary\" disabled={saving} onClick={handleOpenAbsenceDialog}>\n          Tu ne peux pas faire des PIAF pendant 2 mois, c’est par ici!\n        </Button>\n      </form>\n      <LongAbsence show={openAbsenceDialog} handleClose={handleCloseAbsenceDialog} user={user} />\n    </Container>\n  )\n}\n\nexport default ProfilePage\n","import { CreneauGenerique, Reserve } from \"src/types/model\"\nimport { IReserve } from \"src/types/app\"\n\nimport { useEffect, useState, ChangeEvent } from \"react\"\nimport { Button, FormGroup, FormControlLabel, Checkbox, TextField, Typography } from \"@material-ui/core\"\nimport { useQuery } from \"@apollo/client\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport apollo from \"src/helpers/apollo\"\nimport { handleError } from \"src/helpers/errors\"\nimport { RESERVE_CREATE, RESERVE_UPDATE, CRENEAUX_GENERIQUES, RESERVE_USER } from \"src/graphql/queries\"\nimport { useUser } from \"src/providers/user\"\nimport { useDialog } from \"src/providers/dialog\"\nimport { formatTime, getDayOfWeek } from \"src/helpers/date\"\nimport { ErrorBlock } from \"src/helpers/errors\"\n\nconst Loading = styled.div`\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\nconst ReserveGrid = styled.div`\n  margin-top: 2rem;\n  @media (min-width: 980px) {\n    display: flex;\n    > div {\n      flex: 1 0 14.29%;\n    }\n  }\n`\nconst Infos = styled.div`\n  margin: 20px 0 40px;\n`\n\ntype ResultCG = { creneauGeneriques: CreneauGenerique[] }\ntype ResultRU = { reserves: Reserve[] }\n\nconst ReservePage = () => {\n  const { user } = useUser<true>()\n  const [saving, setSaving] = useState(false)\n  const { openDialog } = useDialog()\n  const [information, setInformation] = useState<string>(\"\")\n  const [slots, setSlots] = useState<string[]>([])\n\n  const { data: dataCreneauxList, loading: loadingCL, error: errorCreneauxList } = useQuery<ResultCG>(\n    CRENEAUX_GENERIQUES\n  )\n  const { data: dataCreneauxUser, loading: loadingCU, error: errorReserve } = useQuery<ResultRU>(RESERVE_USER, {\n    skip: !user,\n    variables: { idUser: user?.id },\n  })\n  const loading = loadingCL || loadingCU\n\n  useEffect(() => {\n    if (dataCreneauxUser && dataCreneauxUser?.reserves.length > 0) {\n      setInformation(dataCreneauxUser.reserves[0].informations)\n      setSlots(dataCreneauxUser.reserves[0].creneauGeneriques.map((cg) => cg.id))\n    }\n  }, [dataCreneauxUser])\n\n  const queryError = errorCreneauxList || errorReserve\n  if (queryError) {\n    return <ErrorBlock error={queryError} />\n  }\n\n  const slotList: IReserve[] = []\n\n  if (dataCreneauxList) {\n    for (let day = 0; day < 7; day++) {\n      dataCreneauxList?.creneauGeneriques\n        .filter(({ jour, actif }) => jour === day && actif)\n        .forEach((slot) => {\n          const reserveFound = slotList.find((s) => s.day === day)\n          const startTime = new Date(slot.heureDebut).getTime()\n          if (reserveFound) {\n            const slotReserveFound = reserveFound.slots.find(({ time }) => time === startTime)\n            if (slotReserveFound) {\n              slotReserveFound.allSlotIds.push(slot.id)\n            } else {\n              reserveFound.slots.push({\n                time: startTime,\n                slotDisplayed: slot,\n                allSlotIds: [slot.id],\n              })\n            }\n          } else {\n            slotList.push({\n              day: day,\n              slots: [\n                {\n                  time: startTime,\n                  slotDisplayed: slot,\n                  allSlotIds: [slot.id],\n                },\n              ],\n            })\n          }\n        })\n    }\n  }\n\n  const handleInfoChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    setInformation(target.value)\n  }\n\n  const getSlots = (idCreneauGenerique: string) => {\n    let list: string[] = []\n    slotList.forEach((slot) => {\n      const selected = slot.slots.find((displayed) => displayed.slotDisplayed.id === idCreneauGenerique)\n      if (selected) {\n        list = selected.allSlotIds\n      }\n    })\n    return list\n  }\n\n  const handleCheckboxChange = (idCreneauGenerique: string, checked: boolean) => {\n    const temp = slots.slice()\n    if (checked) {\n      temp.push(...getSlots(idCreneauGenerique))\n      setSlots(temp)\n    } else {\n      getSlots(idCreneauGenerique).forEach((slot) => {\n        temp.splice(temp.indexOf(slot), 1)\n      })\n      setSlots(temp)\n    }\n  }\n\n  const handleSave = async () => {\n    setSaving(true)\n\n    const variables: Record<string, any> = {\n      user: user?.id,\n      informations: information,\n      creneauGenerique: slots,\n    }\n    if (dataCreneauxUser?.reserves.length) {\n      variables.id = dataCreneauxUser.reserves[0].id\n    }\n\n    try {\n      await apollo.mutate({\n        mutation: variables.id ? RESERVE_UPDATE : RESERVE_CREATE,\n        variables,\n      })\n\n      const text = variables.id\n        ? \"Ton inscription à la réserve a bien été mise à jour\"\n        : \"Tu es désormais inscrit·e à la reserve\"\n\n      openDialog(text + \". Merci !\")\n    } catch (error) {\n      handleError(error as Error)\n    }\n\n    setSaving(false)\n  }\n\n  return (\n    <>\n      <Typography variant=\"h2\">Réserve</Typography>\n      {loading ? (\n        <Loading>\n          <Loader />\n        </Loading>\n      ) : (\n        <>\n          Jours pour lesquels je peux parfois me rendre disponible. Si un créneau est libre moins de 48h avant, un\n          e-mail sera envoyé à tou·te·s les inscrit·te·s.\n          <ReserveGrid>\n            {slotList.map((reserve) => (\n              <FormGroup key={reserve.day}>\n                {getDayOfWeek(reserve.day)}\n                {reserve.slots\n                  .sort((left, right) => (left.time > right.time ? 1 : -1))\n                  .map(({ slotDisplayed }) => (\n                    <FormControlLabel\n                      key={slotDisplayed.id}\n                      control={\n                        <Checkbox\n                          color=\"default\"\n                          checked={slots.includes(slotDisplayed.id)}\n                          onChange={({ target }) => {\n                            handleCheckboxChange(slotDisplayed.id, target.checked)\n                          }}\n                        />\n                      }\n                      label={`${formatTime(slotDisplayed.heureDebut)} - ${formatTime(slotDisplayed.heureFin)}`}\n                    />\n                  ))}\n              </FormGroup>\n            ))}\n          </ReserveGrid>\n          <Infos>\n            <TextField\n              multiline\n              disabled={loading}\n              label=\"Informations supplémentaires (optionnel)\"\n              value={information}\n              onChange={handleInfoChange}\n              fullWidth\n            />\n          </Infos>\n          <Button disabled={saving} color=\"primary\" variant=\"contained\" onClick={handleSave}>\n            Enregistrer\n          </Button>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default ReservePage\n","import type { User } from \"src/types/model\"\n\nimport { Button } from \"@material-ui/core\"\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Grid } from \"@material-ui/core\"\nimport styled from \"@emotion/styled/macro\"\n\nimport UserPiafs from \"src/components/UserPiafs\"\nimport { formatRoles } from \"src/helpers/role\"\nimport { formatName } from \"src/helpers/user\"\n\nconst RightCol = styled(Grid)`\n  display: flex;\n  align-items: center;\n`\n\ninterface Props {\n  open: boolean\n  handleClose: (event: React.MouseEvent<HTMLButtonElement>) => void\n  data?: User\n}\n\nconst UserInfoDialog = ({ open, handleClose, data }: Props) => {\n  if (!data) {\n    return null\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{formatName(data)}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          <Grid container>\n            <Grid item xs={6}>\n              <h3>Roles</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {formatRoles(data.rolesChouette)}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Statut</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.statut}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Compteur PIAF</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.nbPiafEffectuees}/{data.nbPiafAttendues}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Absence longue durée sans courses</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.absenceLongueDureeSansCourses ? \"oui\" : \"non\"}\n            </RightCol>\n            <Grid item xs={6}>\n              <h3>Absence longue durée avec courses</h3>\n            </Grid>\n            <RightCol item xs={6}>\n              {data.absenceLongueDureeCourses ? \"oui\" : \"non\"}\n            </RightCol>\n            <Grid item xs={12}>\n              <UserPiafs userId={data.id} validated={false} allowValidate={true} />\n            </Grid>\n          </Grid>\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\" variant=\"contained\">\n          Fermer\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default UserInfoDialog\n","import type { Role, User } from \"src/types/model\"\n\nimport { useState } from \"react\"\nimport { DataGrid, GridColumns, GridRowData, GridValueFormatterParams } from \"@material-ui/data-grid\"\nimport { useQuery } from \"@apollo/client\"\nimport styled from \"@emotion/styled/macro\"\n\nimport Loader from \"src/components/Loader\"\nimport UserInfoDialog from \"src/components/UserInfoDialog\"\nimport { USERS } from \"src/graphql/queriesUser\"\nimport { ErrorMessage } from \"src/helpers/errors\"\nimport { formatRoles } from \"src/helpers/role\"\n\nconst StyledGrid = styled(DataGrid)`\n  margin-top: 16px;\n  height: calc(100vh - 150px);\n  .MuiDataGrid-row {\n    cursor: pointer;\n  }\n`\n\nconst booleanFormatter = ({ value }: GridValueFormatterParams) => (value ? \"oui\" : \"non\")\n\ntype Result = { users: User[] }\n\nconst COLUMNS: GridColumns = [\n  { field: \"nom\", headerName: \"Nom\", flex: 1 },\n  { field: \"prenom\", headerName: \"Prenom\", flex: 1 },\n  { field: \"statut\", headerName: \"Statut\", flex: 1 },\n  {\n    field: \"rolesChouette\",\n    headerName: \"Roles\",\n    flex: 2,\n    valueFormatter: ({ value }: GridValueFormatterParams) => formatRoles(value as Role[]),\n  },\n  {\n    field: \"absenceLongueDureeCourses\",\n    headerName: \"Absence avec courses\",\n    flex: 1,\n    valueFormatter: booleanFormatter,\n  },\n  {\n    field: \"absenceLongueDureeSansCourses\",\n    headerName: \"Absence sans courses\",\n    flex: 1,\n    valueFormatter: booleanFormatter,\n  },\n]\n\nconst Users = () => {\n  const { data, loading, error } = useQuery<Result>(USERS)\n  const [selectedRow, setSelectedRow] = useState<User>()\n  const [openDialog, setOpenDialog] = useState(false)\n\n  if (loading) {\n    return <Loader />\n  }\n\n  if (error) {\n    return <ErrorMessage error={error} />\n  }\n\n  if (!data) {\n    return null\n  }\n\n  const rows = data.users.slice().sort((left, right) => (left.nom > right.nom ? 1 : -1))\n\n  const onRowClick = ({ row }: GridRowData) => {\n    setSelectedRow(row)\n    setOpenDialog(true)\n  }\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false)\n  }\n\n  return (\n    <>\n      <StyledGrid rows={rows} columns={COLUMNS} onRowClick={onRowClick} autoPageSize />\n      <UserInfoDialog open={openDialog} handleClose={handleCloseDialog} data={selectedRow} />\n    </>\n  )\n}\n\nexport default Users\n","import { Typography } from \"@material-ui/core\"\n\nimport Users from \"src/components/Users\"\n\nconst MagasinPage = () => {\n  return (\n    <>\n      <Typography variant=\"h2\">Groupe MAG</Typography>\n      <Users />\n    </>\n  )\n}\n\nexport default MagasinPage\n","import { Typography } from \"@material-ui/core\"\n\nimport Users from \"src/components/Users\"\n\nconst BdMPage = () => {\n  return (\n    <>\n      <Typography variant=\"h2\">Groupe BdM</Typography>\n      <Users />\n    </>\n  )\n}\n\nexport default BdMPage\n","import { Typography } from \"@material-ui/core\"\n\nconst LegalPage = () => {\n  return (\n    <>\n      <Typography variant=\"h2\">Politique de traitement des données personnelles</Typography>\n      <p>\n        Les informations recueillies sur ces formulaires sont enregistrées dans un fichier informatisé par La Chouette\n        Coop SAS, pour permettre la gestion du planning de participation des coopérateurs·rices au fonctionnement de la\n        coopérative. La base légale du traitement est le contrat par lequel les coopérateurs·rices s’engagent à\n        effectuer 3 heures de participation toutes les 4 semaines à la coopérative.\n      </p>\n      <p>\n        Les données sont communiquées aux seuls coopérateurs·rices de La Chouette Coop. Elles sont conservées pendant la\n        durée du mandat de coopérateur·rice et en cas de démission pendant 5 ans maximum.\n      </p>\n      <p>Les données sont hébergées en France par OVH.</p>\n      <p>\n        Vous pouvez accéder aux données vous concernant, les rectifier, demander leur effacement ou exercer votre droit\n        à la limitation du traitement de vos données. Pour exercer ces droits ou pour toute question sur le traitement\n        de vos données dans ce dispositif, vous pouvez contacter :{\" \"}\n        <a href=\"mailto:bureau-des-membres@lachouettecoop.fr\">bureau-des-membres@lachouettecoop.fr</a>\n      </p>\n      <p>\n        Si vous estimez, après nous avoir contactés, que vos droits « Informatique et Libertés » ne sont pas respectés,\n        vous pouvez adresser une réclamation à la CNIL.\n      </p>\n    </>\n  )\n}\n\nexport default LegalPage\n","import { Redirect, Route, Switch, useLocation } from \"react-router-dom\"\nimport styled from \"@emotion/styled/macro\"\n\nimport { DatePlanningProvider } from \"src/providers/datePlanning\"\nimport Menu from \"src/components/menu\"\nimport MenuBottom from \"src/components/menuBottom\"\nimport { getParams } from \"src/helpers/request\"\n\nimport HomePage from \"src/pages/authenticated/Home\"\nimport PlanningPage from \"src/pages/authenticated/Planning\"\nimport ProfilePage from \"src/pages/authenticated/Profile\"\nimport ReservePage from \"src/pages/authenticated/Reserve\"\nimport MagasinPage from \"src/pages/authenticated/Magasin\"\nimport BdMPage from \"src/pages/authenticated/BdM\"\nimport LegalPage from \"src/pages/Legal\"\n\nconst Content = styled.div`\n  margin: ${({ theme }) => theme.spacing(3)}px;\n  ${({ theme }) => theme.breakpoints.down(\"xs\")} {\n    margin-bottom: ${({ theme }) => theme.spacing(12)}px;\n  }\n  ${({ theme }) => theme.breakpoints.up(\"sm\")} {\n    margin-left: ${({ theme }) => theme.spacing(12)}px;\n  }\n`\n\nconst Authenticated = () => {\n  const { search } = useLocation()\n  const { next } = getParams(search)\n\n  return (\n    <DatePlanningProvider>\n      <Menu />\n      <Content>\n        <Switch>\n          <Route path=\"/home\" component={HomePage} />\n          <Route path=\"/planning\" component={PlanningPage} />\n          <Route path=\"/profile\" component={ProfilePage} />\n          <Route path=\"/reserve\" component={ReservePage} />\n          <Route path=\"/bdm\" component={BdMPage} />\n          <Route path=\"/magasin\" component={MagasinPage} />\n          <Route path=\"/legal\" component={LegalPage} />\n          <Redirect to={next || \"/home\"} />\n        </Switch>\n        <MenuBottom />\n      </Content>\n    </DatePlanningProvider>\n  )\n}\n\nexport default Authenticated\n","import { BrowserRouter } from \"react-router-dom\"\n\nimport { useUser } from \"src/providers/user\"\nimport { DialogProvider } from \"src/providers/dialog\"\n\nimport Anonymous from \"src/pages/anonymous\"\nimport Authenticated from \"src/pages/authenticated\"\n\nconst App = () => {\n  const { auth } = useUser()\n\n  return (\n    <BrowserRouter>\n      <DialogProvider>{auth ? <Authenticated /> : <Anonymous />}</DialogProvider>\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { ApolloProvider } from \"@apollo/client\"\n\nimport { ErrorBoundary } from \"src/helpers/errors\"\nimport apollo from \"src/helpers/apollo\"\nimport { UserProvider } from \"src/providers/user\"\nimport ThemeProvider from \"src/providers/theme\"\nimport { RolesProvider } from \"src/providers/roles\"\nimport App from \"src/App\"\n\nReactDOM.render(\n  <ErrorBoundary>\n    <React.StrictMode>\n      <ThemeProvider>\n        <ApolloProvider client={apollo}>\n          <UserProvider>\n            <RolesProvider>\n              <App />\n            </RolesProvider>\n          </UserProvider>\n        </ApolloProvider>\n      </ThemeProvider>\n    </React.StrictMode>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}