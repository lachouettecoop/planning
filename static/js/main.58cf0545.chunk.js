(this.webpackJsonpplanning=this.webpackJsonpplanning||[]).push([[0],{244:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(24),s=n.n(c),o=n(18),l=n(13),u=n(134),d=n.n(u),j=n(182),b=n.n(j),f=n(82),p=n(1);var h="bd8932c3a4a955397cd4900e01d9ad76";d.a.start({apiKey:h,releaseStage:"production",enabledReleaseStages:["production"],appVersion:"7f8e39e5a464acee2d71a505f59e2a94fef67adc",metadata:{deployDate:(new Date).toString(),deployAuthor:"antoinerousseau"},plugins:[new b.a]});var O,m,x,v=function(e){console.error(e),alert(e.message),d.a.notify(e)},g=null===(r=d.a.getPlugin("react"))||void 0===r?void 0:r.createErrorBoundary(i.a),y=Object(l.a)("div",{target:"e1vn7bue1"})({name:"10i3u6",styles:"padding:1rem;h2{color:#e53935;margin:1rem 0;}code{display:block;margin-top:3rem;color:#aaa;}"}),C=function(e){var t=e.error;return Object(p.jsxs)(y,{children:[Object(p.jsxs)(f.a,{variant:"h2",children:[Object(p.jsx)("span",{"aria-hidden":!0,children:"\ud83d\udc1e"}),Object(p.jsx)("br",{}),"Une erreur est survenue"]}),Object(p.jsx)(f.a,{children:"Essayez de recharger la page"}),Object(p.jsx)("code",{children:String(t)})]})},w=Object(l.a)("p",{target:"e1vn7bue0"})({name:"1nm0ewq",styles:"color:#e53935"}),I=function(e){var t=e.error;return Object(p.jsxs)(w,{children:["Erreur : ",t.message]})},S=function(e){var t=e.children;return g?Object(p.jsx)(g,{FallbackComponent:C,children:t}):Object(p.jsx)(p.Fragment,{children:t})},A=n(38),k=n(187),P=n(9),E=n(39),F=Object(o.gql)(O||(O=Object(E.a)(["\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statut\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n    }\n  }\n"]))),$=Object(o.gql)(m||(m=Object(E.a)(["\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String) {\n    updateUser(input: { id: $idUser, email: $email, telephone: $telephone }) {\n      user {\n        id\n        email\n        telephone\n      }\n    }\n  }\n"]))),D=Object(o.gql)(x||(x=Object(E.a)(["\n  query USERS {\n    users(enabled: true) {\n      id\n      nom\n      prenom\n      email\n      actif\n      rolesChouette {\n        id\n        libelle\n        roleUniqueId\n      }\n      statut\n      reserve {\n        id\n        informations\n        creneauGeneriques {\n          id\n          heureDebut\n          heureFin\n          jour\n        }\n      }\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n    }\n  }\n"]))),M=Object(a.createContext)({}),q="user",_=function(){var e=localStorage.getItem(q);return e?JSON.parse(e):null},G=function(e){var t=e.children,n=Object(a.useState)(_),r=Object(P.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(null),o=Object(P.a)(s,2),l=o[0],u=o[1];Object(a.useEffect)((function(){i&&Z.query({query:F,variables:{id:"api/users/".concat(i.id)}}).then((function(e){var t=e.data;u(t.user)}))}),[i]);return Object(p.jsx)(M.Provider,{value:{auth:i,user:l,login:function(e){c(e),localStorage.setItem(q,JSON.stringify(e))},logout:function(){c(null),localStorage.removeItem(q)}},children:t})};function T(){return Object(a.useContext)(M)}var R,z,H,N,U,B,L,V,W,J,K,Q,Y=Object(o.createHttpLink)({uri:"".concat("https://adminchouettos.lachouettecoop.fr","/api/graphql")}),X=Object(k.a)((function(e,t){var n=_();return n?Object(A.a)(Object(A.a)({},t),{},{headers:Object(A.a)(Object(A.a)({},t.headers),{},{"X-Auth-Token":n.token})}):t})),Z=new o.ApolloClient({link:X.concat(Y),cache:new o.InMemoryCache}),ee=n(92),te=n(295),ne=n(127),re=n(299),ae=n(342),ie=n(46),ce="Montserrat, sans-serif",se="Cabin, sans-serif",oe=Object(ee.a)({typography:{fontFamily:se,body1:{fontFamily:se,fontSize:"1rem"},body2:{fontFamily:se,fontSize:"1rem"},subtitle1:{fontFamily:ce},subtitle2:{fontFamily:ce},h1:{fontFamily:ce,fontWeight:600,fontSize:"2.5rem"},h2:{fontFamily:ce,fontWeight:600,fontSize:"1.5rem"},h3:{fontFamily:ce},h4:{fontFamily:ce},h5:{fontFamily:ce},h6:{fontFamily:ce}},palette:{primary:{main:"#445448"},secondary:{main:"#9e9e9e"},contrastThreshold:3,tonalOffset:.2}},ie.frFR,ne.b),le=function(e){var t=e.children;return Object(p.jsx)(ae.b,{theme:oe,children:Object(p.jsxs)(te.a,{theme:oe,children:[Object(p.jsx)(re.a,{}),t]})})},ue=Object(o.gql)(R||(R=Object(E.a)(["\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      informations\n      debut\n      fin\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n"]))),de=Object(o.gql)(z||(z=Object(E.a)(["\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String, $validated: Boolean) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut, pourvu: $validated) {\n      id\n      statut\n      pourvu\n      informations\n      creneau {\n        id\n        titre\n        debut\n        fin\n      }\n      piaffeur {\n        id\n        nom\n        prenom\n        email\n        telephone\n        nbPiafGH\n        nbPiafCaisse\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n"]))),je=Object(o.gql)(H||(H=Object(E.a)(["\n  query PIAFS_COUNT($userId: String, $after: String, $before: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }) {\n      id\n      statut\n      creneau {\n        debut\n        fin\n      }\n    }\n  }\n"]))),be=Object(o.gql)(N||(N=Object(E.a)(["\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      informations\n      piafs {\n        id\n        statut\n        informations\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n"]))),fe=Object(o.gql)(U||(U=Object(E.a)(["\n  mutation REGISTRATION_UPDATE($piafId: ID!, $userId: String!, $statut: String!, $informations: String) {\n    updatePiaf(input: { id: $piafId, piaffeur: $userId, statut: $statut, informations: $informations }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n        informations\n      }\n    }\n  }\n"]))),pe=Object(o.gql)(B||(B=Object(E.a)(["\n  mutation VALIDATE_PIAF($piafId: ID!, $validate: Boolean) {\n    updatePiaf(input: { id: $piafId, pourvu: $validate }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n      }\n    }\n  }\n"]))),he=Object(o.gql)(L||(L=Object(E.a)(["\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),Oe=Object(o.gql)(V||(V=Object(E.a)(["\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),me=Object(o.gql)(W||(W=Object(E.a)(["\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n"]))),xe=Object(o.gql)(J||(J=Object(E.a)(["\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n"]))),ve=Object(o.gql)(K||(K=Object(E.a)(["\n  mutation PIAF_CREATE($idCreneau: String!, $idRole: String) {\n    createPiaf(input: { creneau: $idCreneau, role: $idRole, visible: true, pourvu: false }) {\n      piaf {\n        id\n        creneau {\n          id\n        }\n        piaffeur {\n          id\n        }\n        role {\n          id\n        }\n      }\n    }\n  }\n"]))),ge=Object(o.gql)(Q||(Q=Object(E.a)(["\n  query ROLES {\n    roles {\n      id\n      libelle\n      roleUniqueId\n    }\n  }\n"]))),ye=Object(a.createContext)({}),Ce=function(e){var t=e.children,n=[],r=Object(o.useQuery)(ge).data;return r&&(n=r.roles),Object(p.jsx)(ye.Provider,{value:{roles:n},children:t})};var we,Ie,Se=n(74),Ae=n(30),ke=n(300),Pe=n(25),Ee=n.n(Pe),Fe=n(35),$e=n(159),De=n(90),Me=n(192),qe=n.n(Me),_e=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t,n,r){var a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://adminchouettos.lachouettecoop.fr","/").concat(t),{method:"POST",body:n,headers:r});case 2:if((a=e.sent).ok){e.next=5;break}throw new qe.a(a.status,a.statusText);case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t,n,r){var a,i,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=_()){e.next=3;break}throw new Error("You must be authenticated to trigger the sending of an email");case 3:return i={"X-Auth-Token":a.token},(c=new FormData).append("sujet",n),c.append("email",t),c.append("corps",r),e.next=10,_e("dist_api/send_email",c,i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ze(e,t){var n=e.title,r=e.titleId,i=Re(e,["title","titleId"]);return a.createElement("svg",Te({xmlns:"http://www.w3.org/2000/svg",width:756,height:756,viewBox:"0 0 756 756",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,we||(we=a.createElement("path",{d:"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z",fill:"#314b3f"})),Ie||(Ie=a.createElement("g",{transform:"matrix(1.33333 0 0 -1.33333 0 756)",fill:"#314b3f"},a.createElement("path",{d:"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308"}),a.createElement("path",{d:"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244"}))))}var He=a.forwardRef(ze);n.p;var Ne=Object(l.a)("div",{target:"e1o1sysb0"})({name:"1sw8vsk",styles:"text-align:center;svg{width:250px;height:250px;margin:-20px 0;}"}),Ue=function(){var e=Object(a.useState)(!1),t=Object(P.a)(e,2),n=t[0],r=t[1],i=T().login,c=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t){var n,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),r(!0),e.prev=3,e.next=6,_e("login_api",n);case 6:a=e.sent,c={id:a.userId,email:n.get("username"),token:a.token},i(c),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),v(e.t0),r(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(ke.a,{maxWidth:"xs",children:[Object(p.jsxs)(Ne,{children:[Object(p.jsx)(He,{}),Object(p.jsx)(f.a,{variant:"h1",children:"Planning"})]}),Object(p.jsxs)("form",{onSubmit:c,children:[Object(p.jsx)("p",{children:"Cette application permet de g\xe9rer le planning des PIAFs du magasin. Connectez-vous avec vos identifiants habituels."}),Object(p.jsx)($e.a,{type:"email",name:"username",label:"E-mail",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(p.jsx)($e.a,{type:"password",name:"password",label:"Mot de passe",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(p.jsx)(De.a,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",disabled:n,children:"Connexion"})]})]})},Be=function(){var e=Object(Ae.g)().pathname;return Object(p.jsx)(ke.a,{children:Object(p.jsxs)(Ae.d,{children:[Object(p.jsx)(Ae.b,{path:"/login",children:Object(p.jsx)(Ue,{})}),Object(p.jsx)(Ae.a,{to:"/login?next=".concat(e)})]})})},Le=n(32),Ve=n(118),We=n(301),Je=n(302),Ke=n(303),Qe=n(193),Ye=Object(a.createContext)({}),Xe=function(){return Object(We.a)(new Date)},Ze=function(){return Object(Je.a)(new Date)},et=function(e){var t=e.children,n=Object(a.useState)(Xe),r=Object(P.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(Ze),o=Object(P.a)(s,2),l=o[0],u=o[1];return Object(p.jsx)(Ye.Provider,{value:{start:i,end:l,goBack:function(){var e=Object(Ke.a)(i,1);c(e),u(Object(Je.a)(e))},goForward:function(){var e=Object(Qe.a)(i,1);c(e),u(Object(Je.a)(e))},goToday:function(){c(Xe),u(Ze)}},children:t})};var tt=n(316),nt=n(248),rt=n(253);var at,it=Object(l.a)(rt.a,{target:"exfr9vd0"})({name:"1k6141t",styles:"margin:16px 0"}),ct=n(313),st=n(249),ot=n(314),lt=n(315),ut=n(250),dt=n(157),jt=n(340),bt=n(195),ft=function(e,t){return"string"===typeof e&&(e=new Date(e)),Object(jt.a)(e,t,{locale:bt.a})},pt=function(e){return ft(e,"EEEE d MMMM yyyy")},ht=function(e){return ft(e,"HH:mm")},Ot=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],mt=function(e){return Object(jt.a)(e,"yyyy-MM-dd")};!function(e){e.GrandHibou="GH",e.Chouettos="CH",e.Caissier="CA",e.GrandHibou_Formation="GHF",e.Caissier_Formation="CAF",e.GrandHibou_Acc="GHA",e.Caissier_Acc="CAA",e.AdminMag="MAG",e.AdminBdM="BDM"}(at||(at={}));var xt,vt=function(e){var t=e.role,n=e.piaffeur;if(n){if(t.roleUniqueId===at.GrandHibou&&!n.nbPiafGH)return at.GrandHibou_Formation;if(t.roleUniqueId===at.Caissier&&!n.nbPiafCaisse)return at.Caissier_Formation}return t.roleUniqueId},gt=function(e){return"remplacement"!==e.statut&&Boolean(e.piaffeur)},yt={CA:n.p+"static/media/ca.b47d9fee.svg",CAA:n.p+"static/media/caa.f4457990.svg",CAF:n.p+"static/media/caf.7fd9d842.svg",CH:n.p+"static/media/ch.7513f395.svg",GH:n.p+"static/media/gh.a3fdca6f.svg",GHA:n.p+"static/media/gha.bd476097.svg",GHF:n.p+"static/media/ghf.c11dd89e.svg"},Ct=Object(l.a)("span",{target:"emw2y5h0"})("flex-shrink:0;display:inline-block;margin:3px;width:32px;height:32px;background-image:",(function(e){return function(e){if(e){var t=yt[e];if(t)return"url(".concat(t,")")}return"none"}(e.$role)}),";background-size:100%;background-position:center center;background-repeat:no-repeat;opacity:",(function(e){return e.$taken?.25:1}),";"),wt=function(e){var t=e.piaf;return Object(p.jsx)(Ct,{$taken:gt(t),$role:vt(t)})},It=n(89),St=n(304),At=n(305),kt=n(12),Pt=n(306),Et=n(312),Ft=n(80),$t=n(148),Dt=n(309),Mt=n(310),qt=n(311),_t=n(308),Gt=n(307),Tt=function(e){var t=e.open,n=e.handleClose,r=e.title,a=e.message,i=e.callback,c=function(e){return function(){i&&i(e),n()}};return Object(p.jsxs)(St.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(p.jsx)(At.a,{id:"alert-dialog-title",children:r}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)(Gt.a,{id:"alert-dialog-description",children:a})}),i?Object(p.jsxs)(_t.a,{children:[Object(p.jsx)(De.a,{onClick:c(!0),color:"primary",children:"Oui"}),Object(p.jsx)(De.a,{onClick:c(!1),color:"primary",children:"Non"})]}):Object(p.jsx)(_t.a,{children:Object(p.jsx)(De.a,{onClick:n,color:"primary",children:"OK"})})]})};!function(e){e[e.YesNo=0]="YesNo",e[e.Information=1]="Information"}(xt||(xt={}));var Rt=Object(a.createContext)({}),zt=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(P.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(""),o=Object(P.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(""),j=Object(P.a)(d,2),b=j[0],f=j[1],h=Object(a.useState)(),O=Object(P.a)(h,2),m=O[0],x=O[1],v=function(){c(!1)};return Object(p.jsxs)(Rt.Provider,{value:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;f(e),u(t),x((function(){return n})),c(!0)},closeDialog:v},children:[t,Object(p.jsx)(Tt,{open:i,handleClose:v,title:l,message:b,callback:m})]})},Ht=function(){return Object(a.useContext)(Rt)},Nt=function(e){switch(e){case at.Caissier:return at.Caissier_Acc;case at.GrandHibou:return at.GrandHibou_Acc;default:return null}},Ut=function(e,t){return t.find((function(t){return t.roleUniqueId===e}))},Bt=function(e,t){if(e){if(t==at.GrandHibou)return!e.nbPiafGH||0==e.nbPiafGH;if(t==at.Caissier)return!e.nbPiafGH||0==e.nbPiafGH}return!1},Lt=function(e){return e.map((function(e){return e.libelle})).join(", ")};var Vt=Object(l.a)("div",{target:"e181b5zh3"})({name:"13i0wi",styles:"margin:0 0 1rem 0;display:flex;align-items:center;justify-content:center;flex-wrap:wrap"}),Wt=Object(l.a)("div",{target:"e181b5zh2"})("flex:1;margin:0 8px;span{color:",(function(e){return e.theme.palette.grey[600]}),";}"),Jt=Object(l.a)("div",{target:"e181b5zh1"})({name:"2qga7i",styles:"text-align:right"}),Kt=Object(l.a)("div",{target:"e181b5zh0"})({name:"4zleql",styles:"display:block"}),Qt=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t,n,r){var a,i,c,s;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="day"===r?Object(Ft.a)(t.start):Object($t.a)(t.start),i="day"===r?Object(Dt.a)(t.start):Object(Mt.a)(t.start),e.next=4,Z.query({query:je,variables:{userId:n,after:a,before:i}});case 4:return c=e.sent,s=c.data,e.abrupt("return",s.piafs.filter((function(e){return"occupe"===e.statut})).length);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Yt=function(e,t){if(0===(null===e||void 0===e?void 0:e.nbPiafEffectuees)){var n=t.infoCreneau.piaffeursCount,r=Math.floor(50*n/100);if(t.infoCreneau.piaffeursCountFirstPiaf>=r)return!1}return!0},Xt=function(e,t){var n,r=null===(n=e.piafs)||void 0===n?void 0:n.find((function(e){var n=e.statut,r=e.role;return"remplacement"===n&&r.id===t.role.id}));return r?r.id:t.id},Zt=function(e){var t,n=e.piaf,r=e.user,i=e.slot,c=Object(a.useState)(!1),s=Object(P.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(""),d=Object(P.a)(u,2),j=d[0],b=d[1],f=Ht().openDialog,h=null===(t=i.piafs)||void 0===t?void 0:t.find((function(e){var t=e.piaffeur,n=e.statut;return(null===t||void 0===t?void 0:t.id)===(null===r||void 0===r?void 0:r.id)&&"occupe"===n})),O=Object(a.useContext)(ye).roles,m=function(){var e=Object(Fe.a)(Ee.a.mark((function e(){var t,a,c,s;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),e.prev=1,(t=null===r||void 0===r?void 0:r.rolesChouette)&&Ut(n.role.roleUniqueId,t)){e.next=7;break}return l(!1),f("Pour t\u2019inscrire \xe0 cette PIAF, tu dois d\u2019abord passer la formation ".concat(n.role.libelle)),e.abrupt("return");case 7:return a=r.id,e.next=10,Qt(i,a,"week");case 10:if(!(e.sent>=3)){e.next=15;break}return l(!1),f("Il n\u2019est pas possible de s\u2019inscrire \xe0 plus de ".concat(3," PIAF par semaine")),e.abrupt("return");case 15:return e.next=17,Qt(i,a,"day");case 17:if(!(e.sent>=2)){e.next=22;break}return l(!1),f("Il n\u2019est pas possible de s\u2019inscrire \xe0 plus de ".concat(2," PIAF par jour")),e.abrupt("return");case 22:if(Yt(r,n)){e.next=26;break}return l(!1),f("Il n\u2019est pas possible d\u2019avoir plus de ".concat(50,"% de nouveaux chouettos par PIAF")),e.abrupt("return");case 26:return c=Xt(i,n),e.next=29,Z.mutate({mutation:fe,variables:{piafId:c,userId:a,statut:"occupe",informations:j}});case 29:if(s=!0,!Bt(r,n.role.roleUniqueId)){e.next=34;break}return e.next=33,x(n.role.roleUniqueId);case 33:s=e.sent;case 34:s&&f("Inscription effectu\xe9e. Merci !"),e.next=40;break;case 37:e.prev=37,e.t0=e.catch(1),v(e.t0);case 40:l(!1);case 41:case"end":return e.stop()}}),e,null,[[1,37]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t){var n,r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Nt(t))){e.next=12;break}if(!(r=O.find((function(e){return e.roleUniqueId==n})))){e.next=8;break}return e.next=6,Z.mutate({mutation:ve,variables:{idCreneau:i.id,idRole:r.id}});case 6:e.next=10;break;case 8:return f("Le role ".concat(n," n'a pas pu \xeatre trouv\xe9. Svp, contactez votre administrateur")),e.abrupt("return",!1);case 10:e.next=14;break;case 12:return f("Il n'y a pas un role formateur pour ".concat(t,". Svp, contactez votre administrateur")),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(Fe.a)(Ee.a.mark((function e(){var t;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,b(""),t=r.id,e.next=6,Z.mutate({mutation:fe,variables:{piafId:n.id,userId:t,statut:"remplacement",informations:null}});case 6:Bt(r,n.role.roleUniqueId)?f("D\xe9sinscription effectu\xe9e ! Svp, mettez vous en contact avec le BdM pour enlever la PIAF accompagnateur\xb7trice"):f("D\xe9sinscription effectu\xe9e : la PIAF est d\xe9sormais en recherche de remplacement !"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),v(e.t0);case 12:l(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),y=n.id,C=n.role,w=n.piaffeur,I=gt(n);return Object(p.jsxs)(Vt,{children:[Object(p.jsx)(wt,{piaf:n}),Object(p.jsxs)(Wt,{children:["occupied"===status&&w?"".concat(w.prenom," ").concat(w.nom):"Place disponible",Object(p.jsx)("br",{}),Object(p.jsx)("span",{children:C.libelle})]}),I&&h&&h.role.roleUniqueId===at.GrandHibou&&w&&w.id!=(null===r||void 0===r?void 0:r.id)&&Object(p.jsxs)(Jt,{children:[Object(p.jsx)("a",{href:"mailto:".concat(w.email),children:w.email}),Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:"tel:".concat(w.telephone),children:w.telephone}),Object(p.jsx)("div",{children:n.informations})]}),!I&&!h&&!Object(qt.a)(i.start)&&Object(p.jsx)($e.a,{name:"informations",multiline:!0,label:"Information (optionnel)",value:j,onChange:function(e){var t=e.target;b(t.value)}}),!I&&!h&&!Object(qt.a)(i.start)&&Object(p.jsx)(De.a,{disabled:o,color:"primary",variant:"contained",onClick:m,children:"S\u2019inscrire"}),(null===w||void 0===w?void 0:w.id)===(null===r||void 0===r?void 0:r.id)&&I&&!Object(qt.a)(i.start)&&Object(p.jsxs)(Kt,{children:[Object(p.jsx)("div",{children:n.informations}),Object(p.jsx)(De.a,{disabled:o,color:"primary",variant:"contained",onClick:g,children:"Demander un remplacement"})]})]},y)};var en=Object(l.a)(It.a,{target:"e1el6lcd1"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),tn=Object(l.a)("div",{target:"e1el6lcd0"})("span{color:",(function(e){return e.theme.palette.grey[600]}),";margin-left:5px;}"),nn=function(e){var t=e.slot,n=e.show,r=e.handleClose,a=T().user;return Object(p.jsxs)(St.a,{open:n,onClose:r,fullWidth:!0,children:[Object(p.jsx)(en,{onClick:r,children:Object(p.jsx)(Et.a,{})}),Object(p.jsxs)(At.a,{children:[Object(kt.a)(pt(t.start)),Object(p.jsx)("br",{}),Object(p.jsxs)(tn,{children:[Object(p.jsxs)("strong",{children:[ht(t.start),"\u2013",ht(t.end)]}),Object(p.jsx)("span",{children:t.title}),Object(p.jsx)("div",{children:t.information})]})]}),Object(p.jsx)(Pt.a,{children:t.piafs?t.piafs.map((function(e){return Object(p.jsx)(Zt,{piaf:e,user:a,slot:t},e.id)})):Object(p.jsx)(it,{})})]})},rn=function(e){var t=e.piaf,n=e.allowValidate,r=void 0!==n&&n,i=t.creneau,c=Object(a.useState)(!1),s=Object(P.a)(c,2),l=s[0],u=s[1],d=Ht().openDialog,j=Object(o.useLazyQuery)(ue,{variables:{id:i.id}}),b=Object(P.a)(j,2),f=b[0],h=b[1].data,O=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("\xcates-vous s\xfbr\xb7e de vouloir valider cette PIAF ?","",function(){var e=Object(Fe.a)(Ee.a.mark((function e(n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}return r={piafId:t,validate:!0},e.prev=2,e.next=5,Z.mutate({mutation:pe,variables:r});case 5:d("La PIAF a \xe9t\xe9 valid\xe9e"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),v(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m={id:i.id,title:i.titre,information:i.informations,start:new Date(i.debut),end:new Date(i.fin),piafs:null===h||void 0===h?void 0:h.creneau.piafs};return Object(p.jsxs)(ct.a,{container:!0,children:[Object(p.jsx)(ct.a,{item:!0,xs:8,children:Object(p.jsxs)(st.a,{button:!0,onClick:function(){u(!0),f()},children:[Object(p.jsx)(ot.a,{children:Object(p.jsx)(wt,{piaf:t})}),Object(p.jsx)(lt.a,{primary:pt(m.start),secondary:"de ".concat(ht(m.start)," \xe0 ").concat(ht(m.end))})]},t.id)}),Object(p.jsx)(ct.a,{item:!0,xs:4,children:r&&Object(p.jsx)(ut.a,{control:Object(p.jsx)(dt.a,{checked:t.pourvu,name:"validatePIAF",onChange:function(){O(t.id)}}),label:"Valider PIAF"})}),Object(p.jsx)(nn,{show:l,slot:m,handleClose:function(){u(!1)}})]})},an=function(e){var t=e.userId,n=e.after,r=e.validated,a=void 0!==r&&r,i=e.allowValidate,c=void 0!==i&&i,s=Object(o.useQuery)(de,{variables:{userId:"".concat(t),after:n,validated:a}}),l=s.loading,u=s.error,d=s.data;if(l)return Object(p.jsx)(it,{});if(u)return Object(p.jsx)(I,{error:u});if(!d)return null;if(!d.piafs.length&&!c)return Object(p.jsx)("p",{children:"Aucune PIAF \xe0 venir. Inscrivez-vous sur le planning !"});if(!d.piafs.length&&c)return Object(p.jsx)("p",{children:"Aucune PIAF \xe0 valider."});var j=d.piafs.slice().sort((function(e,t){return e.creneau.debut>t.creneau.debut?1:-1}));return Object(p.jsx)(nt.a,{children:j.map((function(e){return Object(p.jsx)(rn,{piaf:e,allowValidate:c},e.id)}))})},cn=n(194),sn=function(){var e=T().auth,t=Object(o.useQuery)(de,{variables:{after:mt(Object(tt.a)()),before:mt(Object(cn.a)(Object(tt.a)(),700)),statut:"remplacement"}}),n=t.loading,r=t.error,a=t.data;if(n)return Object(p.jsx)(it,{});if(r)return Object(p.jsx)(I,{error:r});if(!a)return null;var i=a.piafs.filter((function(t){var n;return(null===(n=t.piaffeur)||void 0===n?void 0:n.id)!=="/api/users/".concat(e.id)})).sort((function(e,t){return new Date(e.creneau.debut).getTime()>new Date(t.creneau.debut).getTime()?1:-1}));return i.length?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{children:"Les cr\xe9neaux ci dessous ne peuvent plus \xeatre effectu\xe9s par un Chouettos, ils sont disponibles pour un remplacement. N\u2019h\xe9sites pas \xe0 te positionner, la personne que tu remplaces sera avertie par e-mail instantan\xe9ment !"}),Object(p.jsx)(nt.a,{children:i.map((function(e){return Object(p.jsx)(rn,{piaf:e},e.id)}))})]}):Object(p.jsx)("p",{children:"Aucun remplacement \xe0 venir n\u2019est demand\xe9."})};var on=Object(l.a)("div",{target:"eeumoro3"})({name:"7kydvz",styles:"display:flex;flex-wrap:wrap;>div{flex:0 1 50%;min-width:300px;}"}),ln=Object(l.a)("div",{target:"eeumoro2"})({name:"1e2ri1z",styles:"p{font-size:2.5rem;margin-bottom:2rem;&::first-letter{text-transform:uppercase;}span{font-size:0.5em;}}"}),un=Object(l.a)("div",{target:"eeumoro1"})(""),dn=Object(l.a)("div",{target:"eeumoro0"})(""),jn=function(){var e,t,n=T().user,r=(null===n||void 0===n?void 0:n.id)||"",a="".concat(null!==(e=null===n||void 0===n?void 0:n.nbPiafEffectuees)&&void 0!==e?e:"\u2026","/").concat(null!==(t=null===n||void 0===n?void 0:n.nbPiafAttendues)&&void 0!==t?t:"\u2026"),i=(null===n||void 0===n?void 0:n.statut)||"\u2026";return Object(p.jsxs)(on,{children:[Object(p.jsxs)(ln,{children:[Object(p.jsx)(f.a,{variant:"h2",children:"Mon statut"}),Object(p.jsxs)(f.a,{children:[a," ",Object(p.jsx)("span",{children:"PIAFs attendues"})]}),Object(p.jsx)(f.a,{variant:"h2",children:"Je suis"}),Object(p.jsx)(f.a,{children:i})]}),Object(p.jsxs)(un,{children:[Object(p.jsx)(f.a,{variant:"h2",children:"Mes prochaines PIAFs"}),Object(p.jsx)(an,{userId:r,after:mt(Object(tt.a)())})]}),Object(p.jsxs)(dn,{children:[Object(p.jsx)(f.a,{variant:"h2",children:"Remplacements"}),Object(p.jsx)(sn,{})]})]})},bn=n(34),fn=n(317),pn=n(319),hn=n(321),On=n(322),mn=n(320),xn=n(347),vn=n(343),gn=n(318),yn=n(346);var Cn="#FFFFAA",wn=Object(l.a)("button",{target:"e7w31zc2"})("width:100%;border:none;background-color:",(function(e){return e.$open?Cn:"transparent"}),";padding:5px;text-align:left;font-size:inherit;line-height:inherit;font:inherit;cursor:pointer;&:focus{background-color:",Cn,";outline:none;}"),In=Object(l.a)("div",{target:"e7w31zc1"})({name:"88ia8m",styles:"span{color:gray;}"}),Sn=Object(l.a)("div",{target:"e7w31zc0"})("display:flex;flex-wrap:wrap;margin:0 -2px;",Ct,"{width:24px;height:24px;}"),An=function(e){var t,n=e.slot,r=Object(a.useState)(!1),i=Object(P.a)(r,2),c=i[0],s=i[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(wn,{$open:c,onClick:function(){s(!0)},children:[Object(p.jsxs)(In,{children:[Object(p.jsxs)("strong",{children:[ht(n.start),"\u2013",ht(n.end)]}),Object(p.jsx)("br",{}),Object(p.jsx)("span",{children:n.title})]}),Object(p.jsx)(Sn,{children:null===(t=n.piafs)||void 0===t?void 0:t.map((function(e){return Object(p.jsx)(wt,{piaf:e},e.id)}))})]}),Object(p.jsx)(nn,{show:c,slot:n,handleClose:function(){s(!1)}})]})};var kn=Object(l.a)("div",{target:"exian1q2"})("opacity:",(function(e){return"past"===e.$when?.25:1}),";border:1px solid gray;min-height:80px;background-color:",(function(e){return"present"===e.$when?"#d0d9d0":"#eee"}),";"),Pn=Object(l.a)("h3",{target:"exian1q1"})({name:"upb6wm",styles:"margin:0 5px;font-weight:500;text-transform:capitalize"}),En=Object(l.a)("ul",{target:"exian1q0"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),Fn=function(e){var t,n=e.day;return Object(p.jsxs)(kn,{$when:Object(yn.a)(n.start)?"present":Object(qt.a)(n.start)?"past":"future",children:[Object(p.jsx)(Pn,{children:(t=n.start,ft(t,"EEEE d MMM"))}),Object(p.jsx)(En,{children:n.slots.map((function(e){return Object(p.jsx)(An,{slot:e},e.id)}))})]})},$n=function(){return Object(p.jsx)(kn,{$when:"past"})};var Dn=Object(l.a)("div",{target:"e1f08xgb1"})({name:"1juea80",styles:"border:1px solid gray;margin:0;padding:0"}),Mn=Object(l.a)("div",{target:"e1f08xgb0"})({name:"agoxxa",styles:"@media screen and (min-width: 800px){display:flex;>div{flex:1 0 14.29%;}}"}),qn=function(e){var t=e.start,n=e.end,r=e.list,a=Object(bn.a)(),i=Object(fn.a)(a.breakpoints.down("sm"));if(!r)return null;var c=Object(xn.a)({start:t,end:n},{weekStartsOn:1}).map((function(e){return{start:e,days:[0,1,2,3,4,5,6].map((function(t){return{start:Object(cn.a)(e,t),slots:[]}}))}}));return r.forEach((function(e){var t=new Date(e.debut),n=Object(vn.a)(t,c[0].start),r=c[n],a=(Object(gn.a)(t)||7)-1,i=e.piafs.length,s=e.piafs.filter((function(e){var t;return 0===(null===(t=e.piaffeur)||void 0===t?void 0:t.nbPiafEffectuees)})).length;e.piafs.map((function(e){var t=JSON.parse(JSON.stringify(e)),n={piaffeursCount:i,piaffeursCountFirstPiaf:s};t.infoCreneau=n}));var o=[];e.piafs.slice().sort((function(e,t){return e.role.id>t.role.id?1:-1})).map((function(e){var t=JSON.parse(JSON.stringify(e)),n={piaffeursCount:i,piaffeursCountFirstPiaf:s};t.infoCreneau=n,o.push(t)})),r.days[a].slots.push({id:e.id,title:e.titre,information:e.informations,start:t,end:new Date(e.fin),piafs:o})})),Object(p.jsx)(Dn,{children:c.map((function(e,r){return Object(p.jsx)(Mn,{children:e.days.map((function(e,r){return e.start>=t&&e.start<n?Object(p.jsx)(Fn,{day:e},r):i?null:Object(p.jsx)($n,{},r)}))},r)}))})};var _n=Object(l.a)("div",{target:"e4heot02"})({name:"rqtp6c",styles:"border:1px solid gray;border-radius:10px;max-width:664px;margin:20px 0 100px auto;padding:20px 10px;text-align:center"}),Gn=Object(l.a)("h3",{target:"e4heot01"})({name:"1i9vogi",styles:"margin-top:0"}),Tn=Object(l.a)("figcaption",{target:"e4heot00"})({name:"6gj13f",styles:"word-wrap:break-word;padding:0 4px"}),Rn=function(){return Object(p.jsxs)(_n,{children:[Object(p.jsx)(Gn,{children:"L\xe9gende"}),Object(p.jsxs)(ct.a,{container:!0,children:[Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.Chouettos}),Object(p.jsx)(Tn,{children:"PIAF disponible"})]}),Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.Chouettos,$taken:!0}),Object(p.jsx)(Tn,{children:"PIAF occup\xe9e"})]})]}),Object(p.jsx)("br",{}),Object(p.jsxs)(ct.a,{container:!0,children:[Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.Chouettos}),Object(p.jsx)(Tn,{children:"Chouettos"})]}),Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.Caissier}),Object(p.jsx)(Tn,{children:"Caissier\xb7\xe8re"})]}),Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.GrandHibou}),Object(p.jsx)(Tn,{children:"Grand Hibou"})]})]}),Object(p.jsx)("br",{}),Object(p.jsxs)(ct.a,{container:!0,children:[Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.Caissier_Formation}),Object(p.jsx)(Tn,{children:"Caissier\xb7\xe8re en formation"})]}),Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.Caissier_Acc}),Object(p.jsx)(Tn,{children:"Caissier\xb7\xe8re accompagnateur\xb7rice"})]}),Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.GrandHibou_Formation}),Object(p.jsx)(Tn,{children:"Grand Hibou en formation"})]}),Object(p.jsxs)(ct.a,{item:!0,xs:3,component:"figure",children:[Object(p.jsx)(Ct,{$role:at.GrandHibou_Acc}),Object(p.jsx)(Tn,{children:"Grand Hibou accompagnateur\xb7rice"})]})]})]})};var zn=Object(l.a)("div",{target:"e1i6h5gm2"})({name:"1ocx2cx",styles:"border:2px solid gray;height:500px;display:flex;align-items:center;justify-content:center"}),Hn=Object(l.a)("nav",{target:"e1i6h5gm1"})({name:"u1kre2",styles:"display:flex;margin-bottom:1rem;button:not(:first-of-type){margin-left:1rem;}h2{flex:1;text-transform:capitalize;}"}),Nn=Object(l.a)("div",{target:"e1i6h5gm0"})({name:"1fghvjy",styles:"display:flex;justify-content:end"}),Un=function(){var e,t=Object(a.useContext)(Ye),n=t.goBack,r=t.goForward,i=t.goToday,c=t.start,s=t.end,l=Object(bn.a)(),u=Object(fn.a)(l.breakpoints.up("sm")),d=u?"Aujourd\u2019hui":"",j=u?"Pr\xe9c\xe9dent":"",b=u?"Suivant":"",h=Object(o.useQuery)(be,{variables:{after:c,before:s}}),O=h.data,m=h.loading,x=h.error;return x?Object(p.jsx)(C,{error:x}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Hn,{children:[Object(p.jsx)(f.a,{variant:"h2",children:(e=c,ft(e,"MMMM yyyy"))}),Object(p.jsxs)(Nn,{children:[Object(p.jsx)(De.a,{disabled:m,variant:"contained",color:"primary",startIcon:Object(p.jsx)(pn.a,{}),onClick:n,children:j}),Object(p.jsx)(De.a,{disabled:m||Object(mn.a)(c,new Date),variant:"contained",color:"primary",startIcon:Object(p.jsx)(hn.a,{}),onClick:i,children:d}),Object(p.jsx)(De.a,{disabled:m,variant:"contained",color:"primary",endIcon:Object(p.jsx)(On.a,{}),onClick:r,children:b})]})]}),m?Object(p.jsx)(zn,{children:Object(p.jsx)(it,{})}):Object(p.jsx)(qn,{start:c,end:s,list:null===O||void 0===O?void 0:O.creneaus}),Object(p.jsx)(Rn,{})]})},Bn=n(324),Ln=n(325),Vn=n(323);var Wn=Object(l.a)("div",{target:"ej6jrjj3"})({name:"13i0wi",styles:"margin:0 0 1rem 0;display:flex;align-items:center;justify-content:center;flex-wrap:wrap"}),Jn=Object(l.a)(It.a,{target:"ej6jrjj2"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),Kn=Object(l.a)($e.a,{target:"ej6jrjj1"})({name:"1d3w5wq",styles:"width:100%"}),Qn=Object(l.a)(At.a,{target:"ej6jrjj0"})({name:"1qx4gu9",styles:"margin-right:30px"}),Yn=function(e){var t=e.show,n=e.handleClose,r=Ht().openDialog,i=Object(a.useState)({reasonAbsence:"",dateIni:new Date,dateFin:new Date}),c=Object(P.a)(i,2),s=c[0],o=c[1],l=function(e){var t=e.target,n=t.name,r=t.value;o(Object(A.a)(Object(A.a)({},s),{},Object(Le.a)({},n,r)))},u="Bonjour, je ne pourrais assurer une activit\xe9 r\xe9guli\xe8re \xe0 La Chouette Coop du ".concat(s.dateIni,"  au  ").concat(s.dateFin,"  en  raison  de ").concat(s.reasonAbsence,". "),d=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API:"https://adminchouettos.lachouettecoop.fr",REACT_APP_BUGSNAG_KEY:"bd8932c3a4a955397cd4900e01d9ad76",REACT_APP_COMMIT:"7f8e39e5a464acee2d71a505f59e2a94fef67adc",REACT_APP_AUTHOR:"antoinerousseau"}).REACT_APP_MAIL_BDM){e.next=4;break}return alert("L\u2019adresse  e-mail du BdM n\u2019est pas configur\xe9e. Contactez votre administrateur."),e.abrupt("return");case 4:if(s.dateIni&&s.dateFin&&s.reasonAbsence){e.next=7;break}return r("Tous les champs sont obligatoires."),e.abrupt("return");case 7:if(!(s.dateIni>s.dateFin)){e.next=10;break}return r("La date de d\xe9but ne peut pas \xeatre post\xe9rieure \xe0 la date de fin."),e.abrupt("return");case 10:return e.next=12,Ge(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API:"https://adminchouettos.lachouettecoop.fr",REACT_APP_BUGSNAG_KEY:"bd8932c3a4a955397cd4900e01d9ad76",REACT_APP_COMMIT:"7f8e39e5a464acee2d71a505f59e2a94fef67adc",REACT_APP_AUTHOR:"antoinerousseau"}).REACT_APP_MAIL_BDM,"Absence prolong\xe9e",u);case 12:n(),r("Un mail informatif a \xe9t\xe9 envoy\xe9 au BdM. Votre absence sera bient\xf4t valid\xe9e.");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(St.a,{open:t,onClose:n,children:Object(p.jsxs)("form",{onSubmit:d,autoComplete:"off",children:[Object(p.jsx)(Jn,{onClick:n,children:Object(p.jsx)(Et.a,{})}),Object(p.jsx)(Qn,{children:"Informer d\u2019une absence prolong\xe9e"}),Object(p.jsxs)(Pt.a,{children:[Object(p.jsx)(Wn,{children:Object(p.jsx)($e.a,{id:"dateIni",label:"Date debut",name:"dateIni",type:"date",required:!0,value:s.dateIni,onChange:l,InputLabelProps:{shrink:!0}})}),Object(p.jsx)(Wn,{children:Object(p.jsx)($e.a,{id:"dateFin",label:"Date fin",name:"dateFin",type:"date",required:!0,value:s.dateFin,onChange:l,InputLabelProps:{shrink:!0}})}),Object(p.jsx)(Wn,{children:Object(p.jsx)(Kn,{name:"reasonAbsence",multiline:!0,required:!0,label:"Motif de l\u2019absence",value:s.reasonAbsence,onChange:l})})]}),Object(p.jsx)(_t.a,{children:Object(p.jsx)(De.a,{type:"submit",color:"primary",variant:"contained",children:"Confirmer au BdM"})})]})})};var Xn=Object(l.a)("div",{target:"e16mrsvp1"})({name:"1bv1svr",styles:"height:50vh;display:flex;align-items:center;justify-content:center"}),Zn=Object(l.a)("div",{target:"e16mrsvp0"})({name:"71mxng",styles:"margin:0 auto;max-width:500px;p,.MuiTextField-root{margin:10px 0;}button{margin:15px auto;display:block;}"}),er=function(){var e=T().user,t=Object(a.useState)(!1),n=Object(P.a)(t,2),r=n[0],i=n[1],c=Ht().openDialog,s=Object(a.useState)(!1),o=Object(P.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)({email:(null===e||void 0===e?void 0:e.email)||"",telephone:(null===e||void 0===e?void 0:e.telephone)||""}),j=Object(P.a)(d,2),b=j[0],h=j[1];Object(a.useEffect)((function(){e&&h({email:e.email,telephone:e.telephone})}),[e]);var O=function(e){var t=e.target,n=t.name,r=t.value;h(Object(A.a)(Object(A.a)({},b),{},Object(Le.a)({},n,r)))},m=function(){var t=Object(Fe.a)(Ee.a.mark((function t(n){return Ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),i(!0),t.prev=2,t.next=5,Z.mutate({mutation:$,variables:Object(A.a)(Object(A.a)({},b),{},{idUser:null===e||void 0===e?void 0:e.id})});case 5:c("Vos informations ont bien \xe9t\xe9 mises \xe0 jour"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),v(t.t0);case 11:i(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();return e?Object(p.jsxs)(Zn,{children:[Object(p.jsxs)("form",{onSubmit:m,children:[Object(p.jsxs)(f.a,{variant:"h2",children:[e.prenom," ",e.nom]}),Object(p.jsx)("p",{children:Lt(e.rolesChouette)}),Object(p.jsx)($e.a,{name:"telephone",label:"T\xe9l\xe9phone",required:!0,disabled:!e,value:b.telephone,onChange:O,fullWidth:!0,InputProps:{startAdornment:Object(p.jsx)(Vn.a,{position:"start",children:Object(p.jsx)(Bn.a,{})})}}),Object(p.jsx)($e.a,{name:"email",label:"Adresse e-mail",required:!0,disabled:!e,value:b.email,onChange:O,fullWidth:!0,InputProps:{startAdornment:Object(p.jsx)(Vn.a,{position:"start",children:Object(p.jsx)(Ln.a,{})})}}),Object(p.jsx)(De.a,{color:"primary",variant:"contained",disabled:r,type:"submit",children:"Enregistrer"}),Object(p.jsx)(De.a,{color:"primary",variant:"contained",disabled:r,onClick:function(){u(!0)},children:"Informer d\u2019une absence prolong\xe9e"})]}),Object(p.jsx)(Yn,{show:l,handleClose:function(){u(!1)}})]}):Object(p.jsx)(Xn,{children:Object(p.jsx)(it,{})})},tr=n(36),nr=n(326);var rr=Object(l.a)("div",{target:"e1y580i92"})({name:"1p6wbo1",styles:"height:300px;display:flex;align-items:center;justify-content:center"}),ar=Object(l.a)("div",{target:"e1y580i91"})({name:"z3fm1b",styles:"margin-top:2rem;@media screen and (min-width: 980px){display:flex;>div{flex:1 0 14.29%;}}"}),ir=Object(l.a)("div",{target:"e1y580i90"})({name:"1cltfo6",styles:"margin:20px 0 40px"}),cr=function(){var e=T().user,t=Object(a.useState)(!1),n=Object(P.a)(t,2),r=n[0],i=n[1],c=Ht().openDialog,s=Object(a.useState)(""),l=Object(P.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)([]),b=Object(P.a)(j,2),h=b[0],O=b[1],m=Object(o.useQuery)(xe),x=m.data,g=m.loading,y=m.error,w=Object(o.useQuery)(me,{skip:!e,variables:{idUser:null===e||void 0===e?void 0:e.id}}),I=w.data,S=w.loading,A=w.error,k=g||S;Object(a.useEffect)((function(){I&&(null===I||void 0===I?void 0:I.reserves.length)>0&&(d(I.reserves[0].informations),O(I.reserves[0].creneauGeneriques.map((function(e){return e.id}))))}),[I]);var E=y||A;if(E)return Object(p.jsx)(C,{error:E});var F=[];if(x)for(var $=function(e){null===x||void 0===x||x.creneauGeneriques.filter((function(t){var n=t.jour,r=t.actif;return n===e&&r})).forEach((function(t){var n=F.find((function(t){return t.day===e})),r=new Date(t.heureDebut).getTime();if(n){var a=n.slots.find((function(e){return e.time===r}));a?a.allSlotIds.push(t.id):n.slots.push({time:r,slotDisplayed:t,allSlotIds:[t.id]})}else F.push({day:e,slots:[{time:r,slotDisplayed:t,allSlotIds:[t.id]}]})}))},D=0;D<7;D++)$(D);var M=function(e){var t=[];return F.forEach((function(n){var r=n.slots.find((function(t){return t.slotDisplayed.id===e}));r&&(t=r.allSlotIds)})),t},q=function(){var t=Object(Fe.a)(Ee.a.mark((function t(){var n;return Ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),n={user:null===e||void 0===e?void 0:e.id,informations:u,creneauGenerique:h},(null===I||void 0===I?void 0:I.reserves.length)&&(n.id=I.reserves[0].id),t.prev=3,t.next=6,Z.mutate({mutation:n.id?Oe:he,variables:n});case 6:c((n.id?"Votre inscription \xe0 la r\xe9serve a bien \xe9t\xe9 mise \xe0 jour.":"Vous \xeates d\xe9sormais inscrit\xb7e \xe0 la reserve.")+" Merci !"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),v(t.t0);case 12:i(!1);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f.a,{variant:"h2",children:"R\xe9serve"}),k?Object(p.jsx)(rr,{children:Object(p.jsx)(it,{})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ar,{children:F.map((function(e){return Object(p.jsxs)(nr.a,{children:[(t=e.day,Ot[t]),e.slots.map((function(e){var t=e.slotDisplayed;return Object(p.jsx)(ut.a,{control:Object(p.jsx)(dt.a,{color:"default",checked:h.includes(t.id),onChange:function(e){var n=e.target;!function(e,t){var n=h.slice();t?(n.push.apply(n,Object(tr.a)(M(e))),O(n)):(M(e).forEach((function(e){n.splice(n.indexOf(e),1)})),O(n))}(t.id,n.checked)}}),label:"".concat(ht(t.heureDebut)," - ").concat(ht(t.heureFin))},t.id)}))]},e.day);var t}))}),Object(p.jsx)(ir,{children:Object(p.jsx)($e.a,{multiline:!0,disabled:k,label:"Informations suppl\xe9mentaires (optionnel)",value:u,onChange:function(e){var t=e.target;d(t.value)},fullWidth:!0})}),Object(p.jsx)(De.a,{disabled:r,color:"primary",variant:"contained",onClick:q,children:"Enregistrer"})]})]})};var sr=Object(l.a)(ct.a,{target:"e3772390"})({name:"1xjykim",styles:"line-height:4"}),or=function(e){var t=e.open,n=e.handleClose,r=e.data;return r?Object(p.jsxs)(St.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(p.jsxs)(At.a,{id:"alert-dialog-title",children:[r.prenom," ",r.nom.toUpperCase()]}),Object(p.jsx)(Pt.a,{children:Object(p.jsx)(Gt.a,{id:"alert-dialog-description",children:Object(p.jsxs)(ct.a,{container:!0,children:[Object(p.jsx)(ct.a,{item:!0,xs:6,children:Object(p.jsx)("h3",{children:"Roles"})}),Object(p.jsx)(sr,{item:!0,xs:6,children:Lt(r.rolesChouette)}),Object(p.jsx)(ct.a,{item:!0,xs:6,children:Object(p.jsx)("h3",{children:"Statut"})}),Object(p.jsx)(sr,{item:!0,xs:6,children:r.statut}),Object(p.jsx)(ct.a,{item:!0,xs:6,children:Object(p.jsx)("h3",{children:"Compteur PIAFS"})}),Object(p.jsxs)(sr,{item:!0,xs:6,children:[r.nbPiafEffectuees,"/",r.nbPiafAttendues]}),Object(p.jsx)(ct.a,{item:!0,xs:6,children:Object(p.jsx)("h3",{children:"Absence longue dur\xe9e sans courses"})}),Object(p.jsx)(sr,{item:!0,xs:6,children:r.absenceLongueDureeSansCourses?"oui":"non"}),Object(p.jsx)(ct.a,{item:!0,xs:6,children:Object(p.jsx)("h3",{children:"Absence longue dur\xe9e avec courses"})}),Object(p.jsx)(sr,{item:!0,xs:6,children:r.absenceLongueDureeCourses?"oui":"non"}),Object(p.jsx)(ct.a,{item:!0,xs:12,children:Object(p.jsx)(an,{userId:r.id,validated:!1,allowValidate:!0})})]})})}),Object(p.jsx)(_t.a,{children:Object(p.jsx)(De.a,{onClick:n,color:"primary",variant:"contained",children:"Fermer"})})]}):null};var lr=Object(l.a)(ne.a,{target:"ez4p05b0"})({name:"am2b86",styles:"margin-top:16px;height:calc(100vh - 150px);.MuiDataGrid-row{cursor:pointer;}"}),ur=function(e){return e.value?"oui":"non"},dr=[{field:"nom",headerName:"Nom",flex:1},{field:"prenom",headerName:"Prenom",flex:1},{field:"statut",headerName:"Statut",flex:1},{field:"rolesChouette",headerName:"Roles",flex:2,valueFormatter:function(e){var t=e.value;return Lt(t)}},{field:"absenceLongueDureeCourses",headerName:"Absence avec courses",flex:1,valueFormatter:ur},{field:"absenceLongueDureeSansCourses",headerName:"Absence sans courses",flex:1,valueFormatter:ur}],jr=function(){var e=Object(o.useQuery)(D),t=e.data,n=e.loading,r=e.error,i=Object(a.useState)(),c=Object(P.a)(i,2),s=c[0],l=c[1],u=Object(a.useState)(!1),d=Object(P.a)(u,2),j=d[0],b=d[1];if(n)return Object(p.jsx)(it,{});if(r)return Object(p.jsx)(I,{error:r});if(!t)return null;var f=t.users.slice().sort((function(e,t){return e.nom>t.nom?1:-1}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(lr,{rows:f,columns:dr,onRowClick:function(e){var t=e.row;l(t),b(!0)},autoPageSize:!0}),Object(p.jsx)(or,{open:j,handleClose:function(){b(!1)},data:s})]})},br=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f.a,{variant:"h2",children:"Groupe MAG"}),Object(p.jsx)(jr,{})]})},fr=function(){return Object(p.jsx)(p.Fragment,{children:"BdM"})},pr=n(6),hr=n(53),Or=n(181),mr=n(341),xr=n(334),vr=n(298),gr=n(345),yr=n(338),Cr=n(252),wr=n(327),Ir=n(328),Sr=n(329),Ar=n(330),kr=n(331),Pr=n(332),Er=n(333),Fr=n(335),$r=n(336),Dr=n(337),Mr=n(197),qr=function(e){var t=e.href,n=Object(Mr.a)(e,["href"]);return(null===t||void 0===t?void 0:t.startsWith("/"))?Object(p.jsx)(Se.b,Object(A.a)({to:t},n)):Object(p.jsx)("a",Object(A.a)({href:t},n))},_r=260,Gr=Object(Ve.a)(mr.a)({flexGrow:1}),Tr=Object(hr.a)((function(e){return Object(Or.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:_r,width:"calc(100% - ".concat(_r,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:_r,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:_r,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Le.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(A.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuItem:{textDecoration:"none",color:e.palette.secondary.main},activeItem:{textDecoration:"none",color:e.palette.primary.main}})})),Rr=[{title:"Accueil",href:"/home",Icon:wr.a,role:at.Chouettos},{title:"Planning",href:"/planning",Icon:Ir.a,role:at.Chouettos},{title:"R\xe9serve",href:"/reserve",Icon:Sr.a,role:at.Chouettos},{title:"Mon profil",href:"/profile",Icon:Ar.a,role:at.Chouettos},{title:"Groupe MAG",href:"/magasin",Icon:kr.a,role:at.AdminMag},{title:"Groupe BdM",href:"/bdm",Icon:Pr.a,role:at.AdminBdM},{title:"Espace membre",href:"https://espace-membres.lachouettecoop.fr/page/homepage",Icon:Er.a,role:at.Chouettos}],zr=function(){var e,t,n=Tr(),r=T(),i=r.user,c=r.logout,s=Object(bn.a)(),o=Object(a.useState)(!1),l=Object(P.a)(o,2),u=l[0],d=l[1],j=Object(Ae.g)().pathname;if(!Object(fn.a)(s.breakpoints.up("sm")))return null;var b=(null===i||void 0===i?void 0:i.rolesChouette)||[];return Object(p.jsxs)("div",{className:n.root,children:[Object(p.jsx)(xr.a,{position:"fixed",className:Object(pr.a)(n.appBar,Object(Le.a)({},n.appBarShift,u)),children:Object(p.jsxs)(vr.a,{children:[Object(p.jsx)(It.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(pr.a)(n.menuButton,Object(Le.a)({},n.hide,u)),children:Object(p.jsx)(Fr.a,{})}),Object(p.jsx)(f.a,{variant:"h6",noWrap:!0,children:"Planning"}),Object(p.jsx)(Gr,{}),Object(p.jsx)(De.a,{onClick:c,color:"inherit",children:"D\xe9connexion"})]})}),Object(p.jsx)(vr.a,{}),Object(p.jsxs)(gr.a,{variant:"permanent",className:Object(pr.a)(n.drawer,(e={},Object(Le.a)(e,n.drawerOpen,u),Object(Le.a)(e,n.drawerClose,!u),e)),classes:{paper:Object(pr.a)((t={},Object(Le.a)(t,n.drawerOpen,u),Object(Le.a)(t,n.drawerClose,!u),t))},children:[Object(p.jsx)("div",{className:n.toolbar,children:Object(p.jsx)(It.a,{onClick:function(){d(!1)},children:"rtl"===s.direction?Object(p.jsx)($r.a,{}):Object(p.jsx)(Dr.a,{})})}),Object(p.jsx)(yr.a,{}),Object(p.jsxs)(st.a,{children:[Object(p.jsx)(Cr.a,{children:Object(p.jsx)(Ar.a,{})}),i&&Object(p.jsx)(lt.a,{primary:"".concat(i.prenom," ").concat(i.nom)})]}),Object(p.jsx)(yr.a,{}),Object(p.jsx)(nt.a,{children:Rr.filter((function(e){var t=e.role;return Ut(t,b)})).map((function(e){var t=e.href,r=e.title,a=e.Icon,i=j===t;return Object(p.jsx)(qr,{className:i?n.activeItem:n.menuItem,href:t,children:Object(p.jsxs)(st.a,{button:!0,children:[Object(p.jsx)(Cr.a,{children:Object(p.jsx)(a,{color:i?"primary":"secondary"})}),Object(p.jsx)(lt.a,{primary:r})]})},t)}))})]})]})},Hr=n(196),Nr=n(83),Ur=n(339),Br=Object(hr.a)((function(e){return Object(Or.a)({appBar:{top:"auto",bottom:0},toolbar:{justifyContent:"space-between"},label:{flexDirection:"column"},menu:{"& ul":{paddingTop:"0 !important",paddingBottom:"0 !important"}},textMenuDecoration:{textDecoration:"none"},menuItem:{color:"rgba(255, 255, 255, 0.54)",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},activeItem:{color:"white",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},icon:{justifyContent:"center","& svg":{fill:"rgba(255, 255, 255, 0.54)"}},activeIcon:{justifyContent:"center","& svg":{fill:"white"}}})})),Lr=[{title:"Accueil",href:"/home",Icon:wr.a,role:at.Chouettos},{title:"Planning",href:"/planning",Icon:Ir.a,role:at.Chouettos},{title:"R\xe9serve",href:"/reserve",Icon:Sr.a,role:at.Chouettos}],Vr=[{title:"Mon profil",href:"/profile",role:at.Chouettos},{title:"Espace membre",href:"/member",role:at.Chouettos},{title:"Groupe MAG",href:"/magasin",role:at.AdminMag},{title:"Groupe BdM",href:"/bdm",role:at.AdminBdM}];function Wr(){var e=Br(),t=T(),n=t.user,r=t.logout,i=Object(a.useState)(null),c=Object(P.a)(i,2),s=c[0],o=c[1],l=Object(bn.a)(),u=Object(Ae.g)().pathname,d=Object(fn.a)(l.breakpoints.down("xs")),j=function(){o(null)},b=(null===n||void 0===n?void 0:n.rolesChouette)||[];return d?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(xr.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(p.jsxs)(vr.a,{className:e.toolbar,children:[Lr.filter((function(e){var t=e.role;return Ut(t,b)})).map((function(t){var n=t.href,r=t.title,a=t.Icon,i=u===n;return Object(p.jsxs)(st.a,{button:!0,className:e.label,component:Se.b,to:n,children:[Object(p.jsx)(Cr.a,{className:i?e.activeIcon:e.icon,children:Object(p.jsx)(a,{})}),Object(p.jsx)(lt.a,{className:i?e.activeItem:e.menuItem,primary:r})]},r)})),Object(p.jsxs)(Hr.a,{id:"simple-menu",className:e.menu,anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:j,children:[Vr.filter((function(e){var t=e.role;return Ut(t,b)})).map((function(t){var n=t.href,r=t.title,a=u===n;return Object(p.jsx)(Nr.a,{className:a?e.activeItem:e.menuItem,onClick:j,component:Se.b,to:n,children:r},r)})),Object(p.jsx)(Nr.a,{onClick:r,className:e.menuItem,color:"inherit",children:"D\xe9connexion"},"Logout")]}),Object(p.jsx)(It.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},edge:"end",color:"inherit",children:Object(p.jsx)(Ur.a,{})})]})})}):null}var Jr=Object(Ve.a)(ke.a)((function(e){var t=e.theme;return Object(Le.a)({marginTop:t.spacing(4),marginBottom:t.spacing(14),paddingLeft:t.spacing(1)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(12)})})),Kr=function(){var e=function(e){var t={};return e.substr(1).split("&").forEach((function(e){if(e){var n=e.split("=");2===n.length&&(t[n[0]]=decodeURIComponent(n[1]))}})),t}(Object(Ae.g)().search).next;return Object(p.jsxs)(et,{children:[Object(p.jsx)(zr,{}),Object(p.jsxs)(Jr,{children:[Object(p.jsxs)(Ae.d,{children:[Object(p.jsx)(Ae.b,{path:"/home",children:Object(p.jsx)(jn,{})}),Object(p.jsx)(Ae.b,{path:"/planning",children:Object(p.jsx)(Un,{})}),Object(p.jsx)(Ae.b,{path:"/profile",children:Object(p.jsx)(er,{})}),Object(p.jsx)(Ae.b,{path:"/reserve",children:Object(p.jsx)(cr,{})}),Object(p.jsx)(Ae.b,{path:"/bdm",children:Object(p.jsx)(fr,{})}),Object(p.jsx)(Ae.b,{path:"/magasin",children:Object(p.jsx)(br,{})}),Object(p.jsx)(Ae.a,{to:e||"/home"})]}),Object(p.jsx)(Wr,{})]})]})},Qr=function(){var e=T().auth;return Object(p.jsx)(Se.a,{children:Object(p.jsx)(zt,{children:e?Object(p.jsx)(Kr,{}):Object(p.jsx)(Be,{})})})};s.a.render(Object(p.jsx)(S,{children:Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(le,{children:Object(p.jsx)(o.ApolloProvider,{client:Z,children:Object(p.jsx)(G,{children:Object(p.jsx)(Ce,{children:Object(p.jsx)(Qr,{})})})})})})}),document.getElementById("root"))}},[[244,1,2]]]);
//# sourceMappingURL=main.58cf0545.chunk.js.map