(this.webpackJsonpplanning=this.webpackJsonpplanning||[]).push([[0],{255:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(26),s=n.n(c),o=n(18),l=n(11),u=n(92),d=n.n(u),j=n(188),b=n.n(j),p=n(88),f=n(1);var m="bd8932c3a4a955397cd4900e01d9ad76";d.a.start({apiKey:m,releaseStage:"production",enabledReleaseStages:["production"],appVersion:"89ced09475446acfa23454ae10f496b58bcd0f1f",metadata:{deployDate:(new Date).toString(),deployAuthor:"antoinerousseau"},plugins:[new b.a]});var h,O,x,v,g,y,w=function(e){console.error(e),alert(e.message),d.a.notify(e)},C=null===(r=d.a.getPlugin("react"))||void 0===r?void 0:r.createErrorBoundary(i.a),I=Object(l.a)("div",{target:"e1vn7bue1"})({name:"10i3u6",styles:"padding:1rem;h2{color:#e53935;margin:1rem 0;}code{display:block;margin-top:3rem;color:#aaa;}"}),P=function(e){var t=e.error;return Object(f.jsxs)(I,{children:[Object(f.jsxs)(p.a,{variant:"h2",children:[Object(f.jsx)("span",{"aria-hidden":!0,children:"\ud83d\udc1e"}),Object(f.jsx)("br",{}),"Une erreur est survenue"]}),Object(f.jsx)(p.a,{children:"Essayez de recharger la page"}),Object(f.jsx)("code",{children:String(t)})]})},k=Object(l.a)("p",{target:"e1vn7bue0"})({name:"1nm0ewq",styles:"color:#e53935"}),A=function(e){var t=e.error;return Object(f.jsxs)(k,{children:["Erreur : ",t.message]})},S=function(e){var t=e.children;return C?Object(f.jsx)(C,{FallbackComponent:P,children:t}):Object(f.jsx)(f.Fragment,{children:t})},E=n(33),D=n(193),q=n(8),F=n(34),M=Object(o.gql)(h||(h=Object(F.a)(["\n  query LOGGED_IN_USER($id: ID!) {\n    user(id: $id) {\n      id\n      rolesChouette {\n        id\n        roleUniqueId\n        libelle\n      }\n      nom\n      prenom\n      email\n      telephone\n      actif\n      statut\n      codeBarre\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n      affichageDonneesPersonnelles\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      attenteCommissionParticipation\n    }\n  }\n"]))),$=Object(o.gql)(O||(O=Object(F.a)(["\n  mutation USER_UPDATE($idUser: ID!, $email: String, $telephone: String, $affichageDonneesPersonnelles: Boolean) {\n    updateUser(\n      input: {\n        id: $idUser\n        email: $email\n        telephone: $telephone\n        affichageDonneesPersonnelles: $affichageDonneesPersonnelles\n      }\n    ) {\n      user {\n        id\n        email\n        telephone\n        affichageDonneesPersonnelles\n      }\n    }\n  }\n"]))),z=Object(o.gql)(x||(x=Object(F.a)(["\n  query USERS {\n    users(enabled: true) {\n      id\n      nom\n      prenom\n      email\n      actif\n      codeBarre\n      rolesChouette {\n        id\n        libelle\n        roleUniqueId\n      }\n      statut\n      reserve {\n        id\n        informations\n        creneauGeneriques {\n          id\n          heureDebut\n          heureFin\n          jour\n        }\n      }\n      absenceLongueDureeCourses\n      absenceLongueDureeSansCourses\n      nbPiafEffectuees\n      nbPiafAttendues\n      nbPiafGH\n      nbPiafCaisse\n      attenteCommissionParticipation\n    }\n  }\n"]))),L=Object(o.gql)(v||(v=Object(F.a)(["\n  mutation($id: ID!) {\n    updateUser(input: { id: $id, absenceLongueDureeSansCourses: false }) {\n      user {\n        id\n        username\n        nom\n        prenom\n        absenceLongueDureeSansCourses\n        absenceLongueDureeCourses\n      }\n    }\n  }\n"]))),H=Object(o.gql)(g||(g=Object(F.a)(["\n  mutation($id: ID!) {\n    updateUser(input: { id: $id, absenceLongueDureeCourses: false }) {\n      user {\n        id\n        username\n        nom\n        prenom\n        absenceLongueDureeSansCourses\n        absenceLongueDureeCourses\n      }\n    }\n  }\n"]))),G=Object(o.gql)(y||(y=Object(F.a)(["\n  mutation($id: ID!) {\n    updateUser(input: { id: $id, attenteCommissionParticipation: true }) {\n      user {\n        id\n        username\n        nom\n        prenom\n        attenteCommissionParticipation\n      }\n    }\n  }\n"]))),B=function(e){return"".concat(e.prenom," ").concat(e.nom)},U=Object(a.createContext)({}),T="user",N=function(){var e=localStorage.getItem(T);return e?JSON.parse(e):null},V=function(e){var t=e.children,n=Object(a.useState)(N),r=Object(q.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(null),o=Object(q.a)(s,2),l=o[0],u=o[1];Object(a.useEffect)((function(){i&&re.query({query:M,variables:{id:"api/users/".concat(i.id)}}).then((function(e){var t=e.data;u(t.user)}))}),[i]),Object(a.useEffect)((function(){l?d.a.setUser(l.id,l.email,B(l)):d.a.setUser()}),[l]);return Object(f.jsx)(U.Provider,{value:{auth:i,user:l,login:function(e){c(e),localStorage.setItem(T,JSON.stringify(e))},logout:function(){c(null),localStorage.removeItem(T)},refetchUser:function(){i&&re.query({query:M,variables:{id:"api/users/".concat(i.id)}}).then((function(e){var t=e.data;u(t.user)}))}},children:t})};function R(){return Object(a.useContext)(U)}var _="https://adminchouettos.lachouettecoop.fr";var Z,J,W,Q,X,K,Y,ee=_.includes("test"),te=Object(o.createHttpLink)({uri:"".concat(_,"/api/graphql")}),ne=Object(D.a)((function(e,t){var n=N();return n?Object(E.a)(Object(E.a)({},t),{},{headers:Object(E.a)(Object(E.a)({},t.headers),{},{"X-Auth-Token":n.token})}):t})),re=new o.ApolloClient({link:ne.concat(te),cache:new o.InMemoryCache,defaultOptions:{query:{fetchPolicy:"network-only"},watchQuery:{fetchPolicy:"cache-and-network"}}}),ae=n(98),ie=n(303),ce=n(130),se=n(307),oe=n(355),le=n(49),ue=n(137);function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function be(e,t){var n=e.title,r=e.titleId,i=je(e,["title","titleId"]);return a.createElement("svg",de({xmlns:"http://www.w3.org/2000/svg",style:{display:"none"},ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,Z||(Z=a.createElement("symbol",{id:"F",viewBox:"0 0 32 32"},a.createElement("title",null,"Formateur\xb7rice"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("circle",{cx:26.75,cy:26.8,r:5.25}))),J||(J=a.createElement("symbol",{id:"CA",viewBox:"0 0 32 32"},a.createElement("title",null,"Caissier\xb7\xe8re"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M21.24,20l1.34,1.32A6.23,6.23,0,0,1,20.15,23a8.24,8.24,0,0,1-3.17.59A8.45,8.45,0,0,1,13.59,23,7.42,7.42,0,0,1,11,21a7.12,7.12,0,0,1-1.51-2.88H7.06V17H9.25c0-.36-.05-.65-.05-.86s0-.49.05-.86H7.06V14.07h2.4A7,7,0,0,1,11,11.2a7.19,7.19,0,0,1,2.62-1.92A8.29,8.29,0,0,1,17,8.59a8.38,8.38,0,0,1,3.18.59,6.36,6.36,0,0,1,2.42,1.7l-1.34,1.33a5.48,5.48,0,0,0-4.16-1.75,5.83,5.83,0,0,0-3.36,1,5.23,5.23,0,0,0-2,2.62h6.66v1.18H11.39a5.81,5.81,0,0,0-.06.86,6,6,0,0,0,.06.86h7v1.18H11.68a5.25,5.25,0,0,0,2,2.63,5.9,5.9,0,0,0,3.36,1A5.5,5.5,0,0,0,21.24,20Z"}))),W||(W=a.createElement("symbol",{id:"CAF",viewBox:"0 0 32 32"},a.createElement("title",null,"Caissier\xb7\xe8re formateur\xb7ice"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("circle",{cx:26.75,cy:26.8,r:5.25}),a.createElement("path",{d:"M21.24,20l1.34,1.32A6.23,6.23,0,0,1,20.15,23a8.24,8.24,0,0,1-3.17.59A8.45,8.45,0,0,1,13.59,23,7.42,7.42,0,0,1,11,21a7.12,7.12,0,0,1-1.51-2.88H7.06V17H9.25c0-.36-.05-.65-.05-.86s0-.49.05-.86H7.06V14.07h2.4A7,7,0,0,1,11,11.2a7.19,7.19,0,0,1,2.62-1.92A8.29,8.29,0,0,1,17,8.59a8.38,8.38,0,0,1,3.18.59,6.36,6.36,0,0,1,2.42,1.7l-1.34,1.33a5.48,5.48,0,0,0-4.16-1.75,5.83,5.83,0,0,0-3.36,1,5.23,5.23,0,0,0-2,2.62h6.66v1.18H11.39a5.81,5.81,0,0,0-.06.86,6,6,0,0,0,.06.86h7v1.18H11.68a5.25,5.25,0,0,0,2,2.63,5.9,5.9,0,0,0,3.36,1A5.5,5.5,0,0,0,21.24,20Z"}))),Q||(Q=a.createElement("symbol",{id:"CH",viewBox:"0 0 32 32"},a.createElement("title",null,"Chouettos"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M30.13,10.49a7.25,7.25,0,0,0-8.68-3.38c-2.92,1-4.46,3.27-5.4,6.33a10.47,10.47,0,0,0-1.37-3.14C11.17,5,4.65,6.05,2.32,10L.21,13.4c2-7,6.59-11.53,13.16-13.18,7.3-.22,15.9,3.62,18.4,13.05Zm-14.07.37a8.8,8.8,0,0,1,3.37-4.73,7.83,7.83,0,0,1,7.78-.46C20.94-.9,10.41-1.09,4.79,5.8,9.55,2.81,14.55,6.62,16.06,10.86Z"}),a.createElement("path",{d:"M21.07,15.59a2.76,2.76,0,0,1,3-2.83,2.88,2.88,0,1,1-.1,5.76A2.75,2.75,0,0,1,21.07,15.59Zm4.05.06C25,15,24.7,14.51,24,14.51a1.05,1.05,0,0,0-1.17,1.11,1,1,0,0,0,1.14,1.15C24.66,16.79,25,16.36,25.12,15.65Z"}),a.createElement("path",{d:"M8.67,12.76a2.88,2.88,0,1,1,0,5.76,2.88,2.88,0,1,1,0-5.76Zm1.18,2.89a1.07,1.07,0,0,0-1.14-1.14,1.05,1.05,0,0,0-1.15,1.13A1.06,1.06,0,0,0,8.7,16.78,1.07,1.07,0,0,0,9.85,15.65Z"}),a.createElement("path",{d:"M16.07,21.41a3.86,3.86,0,0,1-1.22-2.08,1.33,1.33,0,0,1,1.23-1.25c.56,0,1.32.62,1.22,1.27A3.68,3.68,0,0,1,16.07,21.41Z"}))),X||(X=a.createElement("symbol",{id:"GH",viewBox:"0 0 32 32"},a.createElement("title",null,"GH"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M12.94,15h1.73v3.92a5.63,5.63,0,0,1-1.77.93,7,7,0,0,1-2.08.32,5.65,5.65,0,0,1-2.71-.65,4.87,4.87,0,0,1-1.9-1.81,5.24,5.24,0,0,1,0-5.2,4.87,4.87,0,0,1,1.9-1.81A5.8,5.8,0,0,1,10.85,10a6,6,0,0,1,2.25.41,4.47,4.47,0,0,1,1.7,1.19l-1.15,1.13a3.72,3.72,0,0,0-2.72-1.13A3.86,3.86,0,0,0,9.08,12a3.21,3.21,0,0,0-1.26,1.22,3.5,3.5,0,0,0-.46,1.8,3.39,3.39,0,0,0,.46,1.77,3.26,3.26,0,0,0,1.26,1.24,3.72,3.72,0,0,0,1.84.45,3.91,3.91,0,0,0,2-.51Z"}),a.createElement("path",{d:"M25.82,10.14V20H24V15.76H18.9V20H17.07V10.14H18.9V14.2H24V10.14Z"}),a.createElement("rect",{x:11.03,y:14.95,width:3.65,height:1.31}))),K||(K=a.createElement("symbol",{id:"GHF",viewBox:"0 0 32 32"},a.createElement("title",null,"GH formateur\xb7ice"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}),a.createElement("path",{d:"M12.94,15h1.73v3.92a5.52,5.52,0,0,1-1.77.93,7,7,0,0,1-2.08.32,5.65,5.65,0,0,1-2.71-.65,4.87,4.87,0,0,1-1.9-1.81,5.24,5.24,0,0,1,0-5.2,4.87,4.87,0,0,1,1.9-1.81A5.8,5.8,0,0,1,10.85,10a6,6,0,0,1,2.25.41,4.47,4.47,0,0,1,1.7,1.19l-1.15,1.13a3.72,3.72,0,0,0-2.72-1.13A3.86,3.86,0,0,0,9.08,12a3.21,3.21,0,0,0-1.26,1.22,3.5,3.5,0,0,0-.46,1.8,3.39,3.39,0,0,0,.46,1.77,3.26,3.26,0,0,0,1.26,1.24,3.72,3.72,0,0,0,1.84.45,3.91,3.91,0,0,0,2-.51Z"}),a.createElement("path",{d:"M25.82,10.14V20H24V15.76H18.9V20H17.07V10.14H18.9V14.2H24V10.14Z"}),a.createElement("circle",{cx:26.75,cy:26.75,r:5.25}),a.createElement("rect",{x:11.03,y:14.95,width:3.65,height:1.31}))),Y||(Y=a.createElement("symbol",{id:"P",viewBox:"0 0 32 32"},a.createElement("title",null,"PIAF"),a.createElement("circle",{fill:"#fff",cx:16,cy:16,r:15.25}),a.createElement("path",{d:"M16,1.5A14.5,14.5,0,1,1,1.5,16,14.51,14.51,0,0,1,16,1.5M16,0A16,16,0,1,0,32,16,16,16,0,0,0,16,0Z"}))))}var pe,fe,me,he,Oe,xe,ve,ge,ye,we,Ce,Ie,Pe,ke,Ae=a.forwardRef(be),Se=(n.p,"Montserrat, sans-serif"),Ee="Cabin, sans-serif",De="#3A5447",qe=ue.a[500],Fe=Object(ae.a)({typography:{fontFamily:Ee,body1:{fontFamily:Ee,fontSize:"1rem"},body2:{fontFamily:Ee,fontSize:"1rem"},subtitle1:{fontFamily:Se},subtitle2:{fontFamily:Se},h1:{fontFamily:Se,fontWeight:600,fontSize:"2.5rem"},h2:{fontFamily:Se,fontWeight:600,fontSize:"1.5rem"},h3:{fontFamily:Se,fontWeight:600,color:De},h4:{fontFamily:Se},h5:{fontFamily:Se},h6:{fontFamily:Se}},palette:{primary:{main:De},secondary:{main:qe},contrastThreshold:3,tonalOffset:.2},overrides:{MuiTooltip:{tooltip:{fontSize:"1rem"}},MuiCssBaseline:{"@global":{a:{color:De}}}}},le.frFR,ce.b),Me=function(e){var t=e.children;return Object(f.jsx)(oe.b,{theme:Fe,children:Object(f.jsxs)(ie.a,{theme:Fe,children:[Object(f.jsx)(se.a,{}),Object(f.jsx)(Ae,{}),t]})})},$e=Object(o.gql)(pe||(pe=Object(F.a)(["\n  query SLOTS($id: ID!) {\n    creneau(id: $id) {\n      titre\n      informations\n      debut\n      fin\n      horsMag\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        description\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n        }\n      }\n    }\n  }\n"]))),ze=Object(o.gql)(fe||(fe=Object(F.a)(["\n  query PIAFS($userId: String, $after: String, $before: String, $statut: String, $validated: Boolean) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }, statut: $statut, pourvu: $validated) {\n      id\n      statut\n      pourvu\n      nonPourvu\n      informations\n      description\n      creneau {\n        id\n        titre\n        debut\n        fin\n        horsMag\n      }\n      piaffeur {\n        id\n        nom\n        prenom\n        email\n        telephone\n        nbPiafGH\n        nbPiafCaisse\n        affichageDonneesPersonnelles\n      }\n      role {\n        id\n        roleUniqueId\n        libelle\n      }\n    }\n  }\n"]))),Le=Object(o.gql)(me||(me=Object(F.a)(["\n  query PIAFS_COUNT($userId: String, $after: String, $before: String) {\n    piafs(piaffeur: $userId, creneau_debut: { after: $after, before: $before }) {\n      id\n      statut\n      nonPourvu\n      creneau {\n        debut\n        fin\n      }\n    }\n  }\n"]))),He=Object(o.gql)(he||(he=Object(F.a)(["\n  query PLANNING($after: String, $before: String) {\n    creneaus(debut: { after: $after, before: $before }) {\n      id\n      debut\n      fin\n      titre\n      informations\n      horsMag\n      creneauGenerique {\n        frequence\n      }\n      piafs {\n        id\n        statut\n        informations\n        description\n        role {\n          id\n          roleUniqueId\n          libelle\n        }\n        piaffeur {\n          id\n          nom\n          prenom\n          email\n          telephone\n          nbPiafGH\n          nbPiafCaisse\n          affichageDonneesPersonnelles\n        }\n      }\n    }\n  }\n"]))),Ge=Object(o.gql)(Oe||(Oe=Object(F.a)(["\n  mutation REGISTRATION_UPDATE($piafId: ID!, $userId: String!, $statut: String!, $informations: String) {\n    updatePiaf(input: { id: $piafId, piaffeur: $userId, statut: $statut, informations: $informations }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        statut\n        informations\n      }\n    }\n  }\n"]))),Be=Object(o.gql)(xe||(xe=Object(F.a)(["\n  mutation VALIDATE_PIAF($piafId: ID!, $validate: Boolean) {\n    updatePiaf(input: { id: $piafId, pourvu: $validate }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n      }\n    }\n  }\n"]))),Ue=Object(o.gql)(ve||(ve=Object(F.a)(["\n  mutation PIAF_NON_POURVU($piafId: ID!, $nonPourvu: Boolean) {\n    updatePiaf(input: { id: $piafId, nonPourvu: $nonPourvu }) {\n      piaf {\n        id\n        piaffeur {\n          id\n        }\n        pourvu\n        nonPourvu\n      }\n    }\n  }\n"]))),Te=Object(o.gql)(ge||(ge=Object(F.a)(["\n  mutation RESERVE_CREATE($user: String, $informations: String, $creneauGenerique: [String]) {\n    createReserve(input: { user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),Ne=Object(o.gql)(ye||(ye=Object(F.a)(["\n  mutation RESERVE_UPDATE($id: ID!, $user: String, $informations: String, $creneauGenerique: [String]) {\n    updateReserve(input: { id: $id, user: $user, informations: $informations, creneauGeneriques: $creneauGenerique }) {\n      reserve {\n        id\n        informations\n        user {\n          id\n        }\n        creneauGeneriques {\n          id\n          jour\n          frequence\n          heureDebut\n          heureFin\n        }\n      }\n    }\n  }\n"]))),Ve=Object(o.gql)(we||(we=Object(F.a)(["\n  query RESERVE_USER($idUser: String) {\n    reserves(user: $idUser) {\n      id\n      informations\n      creneauGeneriques {\n        id\n      }\n    }\n  }\n"]))),Re=Object(o.gql)(Ce||(Ce=Object(F.a)(["\n  query CRENEAUX_GENERIQUES {\n    creneauGeneriques {\n      id\n      heureDebut\n      heureFin\n      titre\n      jour\n      actif\n      horsMag\n      postes {\n        id\n        role {\n          libelle\n        }\n      }\n    }\n  }\n"]))),_e=(Object(o.gql)(Ie||(Ie=Object(F.a)(["\n  mutation PIAF_CREATE($idCreneau: String!, $idRole: String) {\n    createPiaf(input: { creneau: $idCreneau, role: $idRole, visible: true, pourvu: false, nonPourvu: false }) {\n      piaf {\n        id\n        creneau {\n          id\n        }\n        piaffeur {\n          id\n        }\n        role {\n          id\n        }\n      }\n    }\n  }\n"]))),Object(o.gql)(Pe||(Pe=Object(F.a)(["\n  query PIAF_GET($id: ID!) {\n    piaf(id: $id) {\n      id\n      creneau {\n        id\n      }\n      piaffeur {\n        id\n      }\n      role {\n        id\n      }\n    }\n  }\n"])))),Ze=Object(o.gql)(ke||(ke=Object(F.a)(["\n  query ROLES {\n    roles {\n      id\n      libelle\n      roleUniqueId\n    }\n  }\n"]))),Je=Object(a.createContext)({}),We=function(e){var t=e.children,n=[],r=Object(o.useQuery)(Ze).data;return r&&(n=r.roles),Object(f.jsx)(Je.Provider,{value:{roles:n},children:t})};var Qe,Xe,Ke=n(41),Ye=n(308),et=n(309),tt=n(310),nt=n(311),rt=n(312),at=n(95),it=function(e){var t=e.open,n=e.handleClose,r=e.title,a=e.message,i=e.callback,c=function(e){return function(){i&&setTimeout(i,300,e),n()}};return Object(f.jsxs)(Ye.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(et.a,{id:"alert-dialog-title",children:r}),Object(f.jsx)(tt.a,{children:Object(f.jsx)(nt.a,{id:"alert-dialog-description",children:a})}),i?Object(f.jsxs)(rt.a,{children:[Object(f.jsx)(at.a,{onClick:c(!0),color:"primary",children:"Oui"}),Object(f.jsx)(at.a,{onClick:c(!1),color:"primary",children:"Non"})]}):Object(f.jsx)(rt.a,{children:Object(f.jsx)(at.a,{onClick:n,color:"primary",children:"OK"})})]})},ct=Object(a.createContext)({}),st=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(q.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(""),o=Object(q.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(""),j=Object(q.a)(d,2),b=j[0],p=j[1],m=Object(a.useState)(),h=Object(q.a)(m,2),O=h[0],x=h[1],v=function(){c(!1)};return Object(f.jsxs)(ct.Provider,{value:{openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";p(e),u(t),x(void 0),c(!0)},openQuestion:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p(e),u(t),new Promise((function(e){x((function(){return e})),c(!0)}))},closeDialog:v},children:[t,Object(f.jsx)(it,{open:i,handleClose:v,title:l,message:b,callback:O})]})},ot=function(){return Object(a.useContext)(ct)},lt=n(29),ut=n(313),dt=n(20),jt=n.n(dt),bt=n(30),pt=n(165),ft=n(159),mt=n(94),ht=n(314),Ot=n(315),xt=n(133),vt=n.n(xt),gt=function(){var e=Object(bt.a)(jt.a.mark((function e(t,n,r){var a;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://adminchouettos.lachouettecoop.fr","/").concat(t),{method:"POST",body:n,headers:r});case 2:if((a=e.sent).ok){e.next=5;break}throw new vt.a(a.status,a.statusText);case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),yt=function(){var e=Object(bt.a)(jt.a.mark((function e(t,n,r){var a,i,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N()){e.next=3;break}throw new Error("You must be authenticated to trigger the sending of an email");case 3:return i={"X-Auth-Token":a.token},(c=new FormData).append("sujet",n),c.append("email",t),c.append("corps",r),e.next=10,gt("dist_api/send_email",c,i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ct(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function It(e,t){var n=e.title,r=e.titleId,i=Ct(e,["title","titleId"]);return a.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",width:756,height:756,viewBox:"0 0 756 756",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,Qe||(Qe=a.createElement("path",{d:"M61.585 422.116v58.818h22.67v14.24H44.713v-73.058zM135.514 468.447l-8.98-24.533-9.093 24.533zm4.6 12.924h-27.6l-5.585 13.803H89.402l29.464-73.058h15.446l28.808 73.058h-17.527z",fill:"#314b3f"})),Xe||(Xe=a.createElement("g",{transform:"matrix(1.33333 0 0 -1.33333 0 756)",fill:"#314b3f"},a.createElement("path",{d:"M187.233 197.273c-4.847-2.463-8.789-2.955-12.075-2.955-10.106 0-16.922 3.45-21.524 7.966-4.927 4.765-8.543 11.994-8.543 20.786 0 8.626 3.616 15.854 8.543 20.62 4.847 4.681 11.913 7.884 20.454 7.884 3.616 0 7.805-.739 13.145-3.04v-14.62c-2.793 2.956-6.98 5.83-12.814 5.83-4.6 0-8.298-1.48-11.17-4.27-3.042-2.959-5.178-7.393-5.178-12.652 0-5.666 2.3-9.693 4.764-12.076 1.152-1.148 5.093-4.599 11.83-4.599 3.287 0 7.721.902 12.568 5.668zM209.99 229.476h21.85v20.866h12.651v-54.793H231.84v23.248h-21.85v-23.248h-12.653v54.793h12.653zM271.76 235.23c-2.38-2.301-4.846-6.326-4.846-12.407 0-5.012 1.643-9.037 5.01-12.323 3.533-3.367 7.479-4.519 11.748-4.519 5.586 0 9.529 2.054 12.159 4.684 2.134 2.052 4.766 5.914 4.766 12.241 0 5.667-2.301 9.855-4.766 12.323-2.71 2.627-7.066 4.681-12.077 4.681-4.764 0-9.036-1.726-11.993-4.68m33.269 8.376c5.175-5.012 8.544-12.239 8.544-20.7 0-7.313-2.626-14.788-8.544-20.537-5.093-4.932-11.993-8.05-21.193-8.05-10.27 0-17.25 4.107-21.358 8.05-5.258 4.928-8.544 12.322-8.544 20.37 0 7.888 3.53 15.855 8.46 20.783 3.699 3.7 10.515 8.052 21.442 8.052 8.544 0 15.69-2.628 21.193-7.968M369.353 217.894c0-5.258-.657-11.747-6.08-17.333-5.259-5.422-11.335-6.243-17.085-6.243-5.752 0-11.83.821-17.087 6.243-5.424 5.586-6.081 12.075-6.081 17.333v32.447h12.654v-32.12c0-2.38.163-6.406 2.873-9.2 2.217-2.38 5.257-2.873 7.641-2.873 2.38 0 5.42.493 7.638 2.873 2.711 2.795 2.876 6.82 2.876 9.2v32.12h12.651zM412.315 239.664h-18.317v-10.598h17.415v-10.678h-17.415v-12.16h18.317V195.55h-30.97v54.793h30.97zM441.807 239.664V195.55h-12.65v44.115h-11.913v10.678h36.475v-10.678zM483.862 239.664V195.55h-12.649v44.115H459.3v10.678h36.476v-10.678zM533.396 239.664h-18.315v-10.598h17.413v-10.678h-17.413v-12.16h18.315V195.55H502.43v54.793h30.967zM150.376 147.294h14.159v-6.497h-14.159zM216.303 142.846v-6.907s.07-10.871-9.847-10.871c-9.913 0-9.844 10.87-9.844 10.87v29.614s-.07 10.87 9.844 10.87c9.917 0 9.847-10.87 9.847-10.87v-6.91H209.4v6.91s.27 3.69-2.806 3.69c-2.6 0-2.6-3.69-2.6-3.69v-29.613s0-3.691 2.6-3.691c3.077 0 2.806 3.69 2.806 3.69v6.908zM257.48 169.241c-2.598 0-2.462-3.689-2.462-3.689v-29.614s-.136-3.69 2.461-3.69c2.6 0 2.465 3.69 2.465 3.69v29.614s.135 3.69-2.465 3.69m0-44.175c-9.916 0-9.845 10.871-9.845 10.871v29.614s-.07 10.871 9.845 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M309.045 169.241c-2.598 0-2.461-3.689-2.461-3.689v-29.614s-.137-3.69 2.46-3.69c2.599 0 2.466 3.69 2.466 3.69v29.614s.133 3.69-2.465 3.69m0-44.175c-9.913 0-9.847 10.871-9.847 10.871v29.614s-.066 10.871 9.847 10.871c9.917 0 9.847-10.87 9.847-10.87v-29.615s.07-10.87-9.847-10.87M358.63 153.24c4.65 0 5.54 1.71 5.54 7.32 0 5.607-.89 7.792-5.54 7.792zm-7.385 22.635h7.385c6.43 0 12.993-3.488 12.993-15.044 0-11.556-6.563-15.113-12.993-15.113v-20.103h-7.385zM402.399 147.294h14.157v-6.497h-14.157zM281.567 382.087a.789.789 0 011.375 0l3.075 5.445a.79.79 0 01-.13.947l-3.073 3.075a.792.792 0 01-1.118 0l-3.074-3.075a.79.79 0 01-.129-.947zM304.03 401.252a3.2 3.2 0 003.195-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308-8.307-3.727-8.307-8.308c0-4.58 3.725-8.308 8.307-8.308M261.852 401.252a3.2 3.2 0 003.196-3.196 3.2 3.2 0 00-3.196-3.196 3.2 3.2 0 00-3.196 3.195 3.2 3.2 0 003.196 3.196m0-11.503c4.582 0 8.308 3.728 8.308 8.308s-3.726 8.308-8.308 8.308c-4.581 0-8.31-3.727-8.31-8.308 0-4.58 3.729-8.308 8.31-8.308"}),a.createElement("path",{d:"M326.169 356.778c-4.608-20.494-16.665-32.974-22.36-38.441a76.7 76.7 0 013.984 12.545c1.569 6.95 2.219 13.674 1.985 20.554-.006.193-.035.38-.077.562a49.412 49.412 0 0118.185 22.554c.139-6.01-.418-11.997-1.717-17.774m-55.152-11.866a48.987 48.987 0 0111.239-1.313c7.694 0 14.98 1.783 21.47 4.949a74.272 74.272 0 00-1.845-16.332c-2.415-10.696-6.664-18.27-9.76-23.135-8.12-5.194-19.32-10.255-34.45-13.325 9.88 15.04 14.362 31.548 13.346 49.156m-30.591-61.684v83.767a49.396 49.396 0 0123.956-20.015c1.587-17.966-2.98-34.741-13.59-49.862l-1.18-1.684c-3.438-4.91-6.265-8.95-9.186-12.206m4.686 132.08c.35.404.703.81 1.114 1.183 1.183 1.212 2.607 2.275 4.11 3.266 1.56.914 3.226 1.714 5.002 2.268.44.145.9.223 1.35.342.46.13.894.204 1.312.256.455.05.778.169 1.34.184l1.616.075.123.008.024-.001.087-.005.348-.018.697-.032c.469 0 .93-.052 1.386-.14.925-.104 1.82-.328 2.714-.555 1.756-.552 3.44-1.283 4.967-2.228 1.483-.994 2.91-2.048 4.054-3.293.633-.568 1.087-1.26 1.647-1.848.465-.652.964-1.27 1.359-1.913.79-1.29 1.453-2.541 1.957-3.704.237-.593.456-1.148.66-1.662l.458-1.447c.305-.878.412-1.653.549-2.141.128-.5.194-.766.194-.766l.194.77c.14.498.243 1.233.55 2.125.14.443.295.934.462 1.468.223.517.429 1.077.662 1.665a30.81 30.81 0 001.966 3.71c.4.642.895 1.263 1.366 1.913.56.59 1.013 1.284 1.653 1.85 1.14 1.249 2.578 2.3 4.066 3.29 1.524.955 3.22 1.67 4.979 2.223l1.348.33c.448.106.854.127 1.28.21l.643.106.808.037.809.037.382.018.064-.005.174-.01c1.877.002 3.73-.371 5.525-.87 1.788-.543 3.459-1.364 5.03-2.27 1.519-.985 2.95-2.05 4.152-3.255.397-.355.74-.744 1.079-1.13a43.206 43.206 0 006.362-22.618c0-23.974-19.505-43.48-43.478-43.48-19.874 0-43.48 15.249-43.48 43.48a43.22 43.22 0 006.336 22.577m37.144 20.9c9.559 0 18.403-3.107 25.588-8.357-1.364.293-2.761.48-4.175.502l-.23.01-.115.006-.248-.011-.405-.024-.808-.05-.808-.05-.954-.143c-.63-.112-1.302-.188-1.887-.36l-1.743-.513c-2.272-.8-4.373-1.928-6.164-3.311-1.756-1.418-3.315-2.953-4.458-4.643-.626-.8-1.07-1.694-1.558-2.5-.396-.864-.798-1.681-1.101-2.497a20.82 20.82 0 01-1.012-3.644 20.73 20.73 0 01-1.004 3.618c-.297.815-.704 1.627-1.093 2.492-.485.806-.932 1.693-1.552 2.496-1.141 1.684-2.684 3.223-4.433 4.642-1.786 1.38-3.876 2.513-6.14 3.324-1.148.348-2.31.717-3.525.869-.6.117-1.204.193-1.818.212l-.916.055-.458.026-.115.005-.058.004h-.03l-.17-.004-.201-.01-1.615-.095c-.515-.02-1.243-.171-1.85-.26-.15-.022-.29-.052-.436-.077 7.168 5.207 15.974 8.289 25.492 8.289m49.13-43.478c0 27.09-22.04 49.13-49.13 49.13-27.092 0-48.717-22.04-48.717-49.13V275.847c0-1.223 1.104-2.34 2.195-2.89a3.235 3.235 0 013.38.288c5.23 3.866 9.072 8.927 13.832 15.678.03.004.06.002.092.007 18.943 3.025 32.639 9.04 42.319 15.244.488.16 8.738 6.323 11.397 8.845 4.905 4.647 19.83 18.792 25.153 42.468 2.653 11.798-.52 37.129-.52 37.244"}))))}var Pt=a.forwardRef(It);n.p;var kt,At=Object(l.a)("div",{target:"e1o1sysb2"})({name:"1sw8vsk",styles:"text-align:center;svg{width:250px;height:250px;margin:-20px 0;}"}),St=Object(l.a)(at.a,{target:"e1o1sysb1"})({name:"avpsk8",styles:"margin-bottom:15px"}),Et=Object(l.a)("div",{target:"e1o1sysb0"})({name:"1i02ixe",styles:"margin:5px;float:right"}),Dt=function(){var e=Object(a.useState)(!1),t=Object(q.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(q.a)(i,2),s=c[0],o=c[1],l=R().login,u=function(){var e=Object(bt.a)(jt.a.mark((function e(t){var n,a,i;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),r(!0),e.prev=3,e.next=6,gt("login_api",n);case 6:a=e.sent,i={id:a.userId,email:n.get("username"),token:a.token},l(i),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),e.t0 instanceof vt.a&&401===e.t0.code?alert("Identifiant ou mot de passe incorrect"):w(e.t0),r(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(ut.a,{maxWidth:"xs",children:[Object(f.jsxs)(At,{children:[Object(f.jsx)(Pt,{}),Object(f.jsx)(p.a,{variant:"h1",children:"Planning"})]}),Object(f.jsxs)("form",{onSubmit:u,children:[Object(f.jsx)("p",{children:"Pour te connecter, l\u2019identifiant et le mot de passe sont les m\xeames que ceux que tu utilises pour aller sur l\u2019espace membres. Si tu r\xe9initialises ton mot de passe, le changement sera donc valable aussi pour l\u2019espace membres."}),Object(f.jsx)(pt.a,{type:"email",name:"username",label:"E-mail",fullWidth:!0,variant:"outlined",margin:"normal"}),Object(f.jsx)(pt.a,{type:s?"text":"password",name:"password",label:"Mot de passe",fullWidth:!0,variant:"outlined",margin:"normal",InputProps:{endAdornment:Object(f.jsx)(ft.a,{title:s?"Cacher le mot de passe":"Afficher le mot de passe",children:Object(f.jsx)(mt.a,{"aria-label":"toggle password visibility",onClick:function(){o(!s)},edge:"end",children:s?Object(f.jsx)(ht.a,{}):Object(f.jsx)(Ot.a,{})})})}}),Object(f.jsx)(Et,{children:Object(f.jsx)("a",{href:"https://adminchouettos.lachouettecoop.fr/resetting/request",children:"Mot de passe oubli\xe9 ?"})}),Object(f.jsx)(St,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",disabled:n,children:"Connexion"})]})]})},qt=function(){var e=Object(lt.h)().pathname;return Object(f.jsx)(ut.a,{children:Object(f.jsxs)(lt.e,{children:[Object(f.jsx)(lt.c,{path:"/login",children:Object(f.jsx)(Dt,{})}),Object(f.jsx)(lt.b,{to:"/login?next=".concat(e)})]})})},Ft=n(316),Mt=n(317),$t=n(318),zt=n(198),Lt=Object(a.createContext)({}),Ht=function(){return Object(Ft.a)(new Date)},Gt=function(){return Object(Mt.a)(new Date)},Bt=function(e){var t=e.children,n=Object(a.useState)(Ht),r=Object(q.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(Gt),l=Object(q.a)(s,2),u=l[0],d=l[1],j=Object(o.useQuery)(He,{variables:{after:i,before:u}}),b=j.data,p=j.loading,m=j.error,h=j.refetch;return Object(f.jsx)(Lt.Provider,{value:{start:i,end:u,goBack:function(){var e=Object($t.a)(i,1);c(e),d(Object(Mt.a)(e))},goForward:function(){var e=Object(zt.a)(i,1);c(e),d(Object(Mt.a)(e))},goToday:function(){c(Ht),d(Gt)},data:b,loading:p,error:m,refetch:h},children:t})};function Ut(){return Object(a.useContext)(Lt)}!function(e){e.GrandHibou="GH",e.Chouettos="CH",e.Caissier="CA",e.GrandHibou_Formateur="GHF",e.Caissier_Formateur="CAF",e.AdminMag="MAG",e.AdminBdM="BDM",e.PosteAccueil="PA",e.PIAF="P",e.Formateur="F"}(kt||(kt={}));var Tt=n(37),Nt=n(6),Vt=n(57),Rt=n(186),_t=n(38),Zt=n(121),Jt=n(354),Wt=n(327),Qt=n(328),Xt=n(306),Kt=n(358),Yt=n(359),en=n(259),tn=n(260),nn=n(263),rn=n(332),an=n(319),cn=n(320),sn=n(321),on=n(322),ln=n(323),un=n(324),dn=n(325),jn=n(326),bn=n(329),pn=n(330),fn=n(331),mn=n(204),hn=function(e){var t=e.href,n=Object(mn.a)(e,["href"]);return(null===t||void 0===t?void 0:t.startsWith("/"))?Object(f.jsx)(Ke.b,Object(E.a)({to:t},n)):Object(f.jsx)("a",Object(E.a)({href:t},n))},On=function(e,t){return t.some((function(t){return t.roleUniqueId===e}))},xn=function(e,t){return t.some((function(t){var n=t.roleUniqueId;return e.includes(n)}))},vn=function(e){return e.map((function(e){return e.libelle})).join(", ")},gn=260,yn=Object(Zt.a)(Jt.a)({flexGrow:1}),wn=Object(Vt.a)((function(e){return Object(Rt.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:gn,width:"calc(100% - ".concat(gn,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:gn,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:gn,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(Tt.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(E.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuItem:{textDecoration:"none",color:e.palette.secondary.main},activeItem:{textDecoration:"none",color:e.palette.primary.main}})})),Cn=[{title:"Accueil",href:"/home",Icon:an.a,roles:[kt.Chouettos]},{title:"Planning",href:"/planning",Icon:cn.a,roles:[kt.Chouettos,kt.PosteAccueil]},{title:"R\xe9serve",href:"/reserve",Icon:sn.a,roles:[kt.Chouettos]},{title:"Mon profil",href:"/profile",Icon:on.a,roles:[kt.Chouettos]},{title:"Historique des PIAF",href:"/history",Icon:ln.a,roles:[kt.Chouettos]},{title:"Groupe MAG",href:"/magasin",Icon:un.a,roles:[kt.AdminMag]},{title:"Groupe BdM",href:"/bdm",Icon:dn.a,roles:[kt.AdminBdM]},{title:"Espace membre",href:"https://espace-membres.lachouettecoop.fr/page/homepage",Icon:jn.a,roles:[kt.Chouettos]}],In=function(){var e,t,n=wn(),r=R(),i=r.user,c=r.logout,s=Object(_t.a)(),o=Object(a.useState)(!1),l=Object(q.a)(o,2),u=l[0],d=l[1],j=Object(lt.h)().pathname;if(!Object(Wt.a)(s.breakpoints.up("sm")))return null;var b=(null===i||void 0===i?void 0:i.rolesChouette)||[];return Object(f.jsxs)("div",{className:n.root,children:[Object(f.jsx)(Qt.a,{position:"fixed",className:Object(Nt.a)(n.appBar,Object(Tt.a)({},n.appBarShift,u)),children:Object(f.jsxs)(Xt.a,{children:[Object(f.jsx)(mt.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(Nt.a)(n.menuButton,Object(Tt.a)({},n.hide,u)),children:Object(f.jsx)(bn.a,{})}),Object(f.jsxs)(p.a,{variant:"h6",noWrap:!0,children:["Planning ",ee&&Object(f.jsx)(Kt.a,{label:"TEST"})]}),Object(f.jsx)(yn,{}),Object(f.jsx)(on.a,{}),i&&B(i),Object(f.jsx)(yn,{}),Object(f.jsx)(at.a,{onClick:c,color:"inherit",children:"D\xe9connexion"})]})}),Object(f.jsx)(Xt.a,{}),Object(f.jsxs)(Yt.a,{variant:"permanent",className:Object(Nt.a)(n.drawer,(e={},Object(Tt.a)(e,n.drawerOpen,u),Object(Tt.a)(e,n.drawerClose,!u),e)),classes:{paper:Object(Nt.a)((t={},Object(Tt.a)(t,n.drawerOpen,u),Object(Tt.a)(t,n.drawerClose,!u),t))},children:[Object(f.jsx)("div",{className:n.toolbar,children:Object(f.jsx)(mt.a,{onClick:function(){d(!1)},children:"rtl"===s.direction?Object(f.jsx)(pn.a,{}):Object(f.jsx)(fn.a,{})})}),Object(f.jsx)(en.a,{children:Cn.filter((function(e){var t=e.roles;return xn(t,b)})).map((function(e){var t=e.href,r=e.title,a=e.Icon,i=j===t;return Object(f.jsx)(hn,{className:i?n.activeItem:n.menuItem,href:t,children:Object(f.jsx)(ft.a,{title:r,children:Object(f.jsxs)(tn.a,{button:!0,children:[Object(f.jsx)(nn.a,{children:Object(f.jsx)(a,{color:i?"primary":"secondary"})}),Object(f.jsx)(rn.a,{primary:r})]})})},t)}))})]})]})},Pn=n(203),kn=n(89),An=n(333),Sn=Object(Vt.a)((function(e){return Object(Rt.a)({appBar:{top:"auto",bottom:0},toolbar:{justifyContent:"space-between"},label:{flexDirection:"column"},menu:{"& ul":{paddingTop:"0 !important",paddingBottom:"0 !important"}},textMenuDecoration:{textDecoration:"none"},menuItem:{color:"rgba(255, 255, 255, 0.54)",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},activeItem:{color:"white",backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},icon:{justifyContent:"center","& svg":{fill:"rgba(255, 255, 255, 0.54)"}},activeIcon:{justifyContent:"center","& svg":{fill:"white"}}})})),En=[{title:"Accueil",href:"/home",Icon:an.a,roles:[kt.Chouettos]},{title:"Planning",href:"/planning",Icon:cn.a,roles:[kt.Chouettos,kt.PosteAccueil]},{title:"R\xe9serve",href:"/reserve",Icon:sn.a,roles:[kt.Chouettos]}],Dn=[{title:"Mon profil",href:"/profile",roles:[kt.Chouettos]},{title:"Historique des PIAF",href:"/history",roles:[kt.Chouettos]},{title:"Espace membre",href:"/member",roles:[kt.Chouettos]},{title:"Groupe MAG",href:"/magasin",roles:[kt.AdminMag]},{title:"Groupe BdM",href:"/bdm",roles:[kt.AdminBdM]}];function qn(){var e=Sn(),t=R(),n=t.user,r=t.logout,i=Object(a.useState)(null),c=Object(q.a)(i,2),s=c[0],o=c[1],l=Object(_t.a)(),u=Object(lt.h)().pathname,d=Object(Wt.a)(l.breakpoints.down("xs")),j=function(){o(null)},b=(null===n||void 0===n?void 0:n.rolesChouette)||[];return d?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(Qt.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(f.jsxs)(Xt.a,{className:e.toolbar,children:[En.filter((function(e){var t=e.roles;return xn(t,b)})).map((function(t){var n=t.href,r=t.title,a=t.Icon,i=u===n;return Object(f.jsxs)(tn.a,{button:!0,className:e.label,component:Ke.b,to:n,children:[Object(f.jsx)(nn.a,{className:i?e.activeIcon:e.icon,children:Object(f.jsx)(a,{})}),Object(f.jsx)(rn.a,{className:i?e.activeItem:e.menuItem,primary:r})]},r)})),Object(f.jsxs)(Pn.a,{id:"simple-menu",className:e.menu,anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:j,children:[Dn.filter((function(e){var t=e.roles;return xn(t,b)})).map((function(t){var n=t.href,r=t.title,a=u===n;return Object(f.jsx)(kn.a,{className:a?e.activeItem:e.menuItem,onClick:j,component:Ke.b,to:n,children:r},r)})),Object(f.jsx)(kn.a,{onClick:r,className:e.menuItem,color:"inherit",children:"D\xe9connexion"},"Logout")]}),Object(f.jsx)(mt.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},edge:"end",color:"inherit",children:Object(f.jsx)(An.a,{})})]})})}):null}var Fn=n(341),Mn=n(353),$n=n(202),zn=function(e){return"object"!==typeof e?new Date(e):e},Ln=function(e,t){return Object(Mn.a)(zn(e),t,{locale:$n.a})},Hn=function(e){return Ln(e,"EEEE d MMM")},Gn=function(e){return Ln(e,"EEEE d MMMM yyyy")},Bn=function(e){return Ln(e,"HH:mm")},Un=function(e){return Ln(e,"EEEE d MMMM yyyy \xe0 HH:mm")},Tn=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],Nn=function(e){return Object(Mn.a)(e,"yyyy-MM-dd")},Vn=n(264);var Rn=Object(l.a)(Vn.a,{target:"exfr9vd0"})({name:"1k6141t",styles:"margin:16px 0"}),_n=n(339),Zn=n(340),Jn=n(267),Wn=n(261),Qn=n(163),Xn=n(199),Kn=n.n(Xn),Yn=n(205),er=function(e){var t=e.role;return t?t.roleUniqueId:null},tr=function(e){return"remplacement"!==e.statut&&Boolean(e.piaffeur)},nr=function(e,t){var n,r;return!tr(t)&&(!!e.piafs&&(!e.horsMag&&(!(Object(Yn.a)(e.start,new Date)>5)&&(!e.title.toLowerCase().toString().startsWith("formation")&&((null===(n=t.role)||void 0===n?void 0:n.roleUniqueId)==kt.GrandHibou||(null===(r=t.role)||void 0===r?void 0:r.roleUniqueId)==kt.Caissier||100*e.piafs.filter(tr).length/e.piafs.length<75)))))},rr=function(e,t){return e.creneau.debut>t.creneau.debut?1:-1},ar=function(e,t){return e.role?t.role?e.role.id>t.role.id?1:-1:2:-2};var ir=Object.values(kt),cr=Object(l.a)("svg",{target:"emw2y5h2"})("flex-shrink:0;display:inline-block;margin:3px;width:32px;height:32px;opacity:",(function(e){return e.$taken?.25:1}),";use{fill:",(function(e){return e.$critical?"#e53935":"black"}),";}"),sr=Object(l.a)(Kn.a,{target:"emw2y5h1"})({name:"vtxxan",styles:"position:absolute;z-index:10;left:-5px;top:0px;height:1rem!important"}),or=Object(l.a)("div",{target:"emw2y5h0"})({name:"bjn8wh",styles:"position:relative"}),lr=function(e){var t=e.role,n=e.taken,r=e.critical,a=e.info;return t&&ir.includes(t)||(t=kt.Chouettos),Object(f.jsx)(ft.a,{title:a||"",children:Object(f.jsxs)(or,{children:[a&&Object(f.jsx)(sr,{}),Object(f.jsx)(cr,{$taken:n,$critical:r,children:Object(f.jsx)("use",{xlinkHref:"#"+t,width:"100%",height:"100%"})})]})})},ur=function(e){var t=e.piaf,n=e.critical,r=e.displayTooltip;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(lr,{role:er(t),taken:tr(t),critical:n,info:r&&t.informations||""})})},dr=n(12),jr=n(338),br=n(337),pr=n(86),fr=n(154),mr=n(334),hr=n(335),Or=n(336);var xr=[kt.AdminBdM,kt.AdminMag],vr=Object(l.a)("div",{target:"e181b5zh5"})({name:"yxesgb",styles:"margin:0 0 1rem 0;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;button{margin-left:8px;}"}),gr=Object(l.a)("div",{target:"e181b5zh4"})("flex:1;margin:0 8px;span{color:",(function(e){return e.theme.palette.grey[600]}),";}"),yr=Object(l.a)("div",{target:"e181b5zh3"})({name:"1yv69uo",styles:"text-align:right;a{text-decoration:none;}"}),wr=Object(l.a)(pt.a,{target:"e181b5zh2"})({name:"82a6rk",styles:"flex:1"}),Cr=Object(l.a)("div",{target:"e181b5zh1"})({name:"4zleql",styles:"display:block"}),Ir=Object(l.a)("div",{target:"e181b5zh0"})({name:"1eb1ipf",styles:".MuiButton-root{min-width:32px;}.MuiButton-startIcon{margin-right:-4px;}.MuiButton-endIcon{margin-left:-4px;}"}),Pr=function(){var e=Object(bt.a)(jt.a.mark((function e(t,n,r){var a,i,c,s;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="day"===r?Object(pr.a)(t.start):Object(fr.a)(t.start),i="day"===r?Object(mr.a)(t.start):Object(hr.a)(t.start),e.next=4,re.query({query:Le,variables:{userId:n,after:a,before:i}});case 4:return c=e.sent,s=c.data,e.abrupt("return",s.piafs.filter((function(e){return"occupe"===e.statut&&!1===e.nonPourvu})).length);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),kr=function(e,t){var n,r=null===(n=e.piafs)||void 0===n?void 0:n.find((function(e){var n,r=e.statut,a=e.role;return"remplacement"===r&&(null===a||void 0===a?void 0:a.id)===(null===(n=t.role)||void 0===n?void 0:n.id)}));return r||t},Ar=function(e,t,n){var r,a=e.piaffeur.email;if(a&&yt(a,"PIAF remplac\xe9e","Ta PIAF du ".concat(Un(t.start)," a \xe9t\xe9 pourvue. Tu n\u2019es plus en charge de cette PIAF.")),(null===(r=e.role)||void 0===r?void 0:r.roleUniqueId)!=kt.GrandHibou){var i=function(e){var t,n,r=null===(t=e.piafs)||void 0===t?void 0:t.find((function(e){var t=e.statut,n=e.role;return"occupe"===t&&(null===n||void 0===n?void 0:n.id)===kt.GrandHibou}));return null===r||void 0===r||null===(n=r.piaffeur)||void 0===n?void 0:n.email}(t);i&&yt(i,"PIAF remplac\xe9e","La PIAF du ".concat(Un(t.start)," a \xe9t\xe9 pourvue.\n        ").concat(B(n)," est maintenant inscrit pour cette PIAF."))}},Sr=function(e){var t,n,r=e.piaf,i=e.slot,c=Object(a.useState)(!1),s=Object(q.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)((null===r||void 0===r?void 0:r.informations)||""),d=Object(q.a)(u,2),j=d[0],b=d[1],p=ot(),m=p.openDialog,h=p.openQuestion,O=R().user,x=Object(a.useContext)(Je).roles,v=Ut().refetch,g=!!O&&xr.some((function(e){return O.rolesChouette.some((function(t){return t.roleUniqueId===e}))})),y=O&&(null===(t=i.piafs)||void 0===t?void 0:t.find((function(e){var t=e.piaffeur,n=e.statut;return(null===t||void 0===t?void 0:t.id)===O.id&&"occupe"===n}))),C=O,I=function(e){var t=e.target;b(t.value)},P=function(){var e=Object(bt.a)(jt.a.mark((function e(){var t;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O,e.next=3,re.mutate({mutation:Ge,variables:{piafId:r.id,userId:t.id,statut:"occupe",informations:j}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(bt.a)(jt.a.mark((function e(t){var n,a,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.absenceLongueDureeCourses&&!t.absenceLongueDureeSansCourses){e.next=3;break}return m("Ta participation aux PIAF du magasin est actuellement en pause. Tu peux la reprendre depuis la page d'accueil pour pouvoir t\u2019inscrire \xe0 nouveau sur le planning"),e.abrupt("return",!1);case 3:return e.next=5,re.query({query:_e,variables:{id:r.id}});case 5:if(n=e.sent,!(a=n.data).piaf.piaffeur||"occupe"!=a.piaf.statut){e.next=11;break}return m("La PIAF a \xe9t\xe9 d\xe9j\xe0 prise par un autre chouettos"),v(),e.abrupt("return",!1);case 11:if(r.role){e.next=14;break}return m("Cette PIAF n\u2019a pas de r\xf4le. Contacte l\u2019administrateur pour lui signaler cette erreur."),e.abrupt("return",!1);case 14:if((c=null===O||void 0===O?void 0:O.rolesChouette)&&On(r.role.roleUniqueId,c)){e.next=19;break}return l(!1),m("Pour t\u2019inscrire \xe0 cette PIAF, tu dois d\u2019abord passer la formation ".concat(r.role.libelle)),e.abrupt("return",!1);case 19:return e.next=21,Pr(i,t.id,"week");case 21:if(!(e.sent>=3)){e.next=26;break}return l(!1),m("Il n\u2019est pas possible de s\u2019inscrire \xe0 plus de ".concat(3," PIAF par semaine")),e.abrupt("return",!1);case 26:return e.next=28,Pr(i,t.id,"day");case 28:if(!(e.sent>=2)){e.next=33;break}return l(!1),m("Il n\u2019est pas possible de s\u2019inscrire \xe0 plus de ".concat(2," PIAF par jour")),e.abrupt("return",!1);case 33:return e.abrupt("return",!0);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(bt.a)(jt.a.mark((function e(){var t,n,a;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O,e.next=3,k(t);case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,h("Es-tu s\xfbr\xb7e de vouloir t\u2019inscrire \xe0 cette PIAF du ".concat(Hn(i.start)," en tant que ").concat(null===(n=r.role)||void 0===n?void 0:n.libelle,"?"));case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return l(!0),"remplacement"===(a=kr(i,r)).statut&&Ar(a,i,t),e.next=16,re.mutate({mutation:Ge,variables:{piafId:a.id,userId:t.id,statut:"occupe",informations:j}});case 16:m("Inscription effectu\xe9e. Merci !"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),w(e.t0);case 22:l(!1);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(bt.a)(jt.a.mark((function e(){var t;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("N\u2019oublie pas de chercher un\xb7e rempla\xe7ant\xb7e sur Facebook, Zulip, appel aux autres Chouettos\u2026 Plus ton cr\xe9neau est proche, plus c\u2019est important! Es-tu s\xfbr\xb7e de vouloir te d\xe9sinscrire ?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return l(!0),e.prev=6,b(""),t=O.id,e.next=11,re.mutate({mutation:Ge,variables:{piafId:r.id,userId:t,statut:"remplacement",informations:null}});case 11:m("D\xe9sinscription effectu\xe9e : la PIAF est d\xe9sormais en recherche de remplacement !"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),w(e.t0);case 17:l(!1);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}(),E=r.piaffeur,D=r.informations,F=tr(r),M=!Object(Or.a)(i.end),$=x.find((function(e){return e.roleUniqueId==er(r)})),z=g||(null===y||void 0===y||null===(n=y.role)||void 0===n?void 0:n.roleUniqueId)===kt.GrandHibou||(null===E||void 0===E?void 0:E.affichageDonneesPersonnelles);return Object(f.jsxs)(vr,{children:[Object(f.jsx)(ur,{piaf:r,critical:nr(i,r)}),Object(f.jsxs)(gr,{children:[F&&E?B(E):"Place disponible",Object(f.jsx)("br",{}),Object(f.jsxs)("span",{children:[" ",null===$||void 0===$?void 0:$.libelle]}),r.description?Object(f.jsxs)("span",{children:[" - ",r.description]}):""]}),F&&Object(f.jsxs)(yr,{children:[z&&E&&(null===E||void 0===E?void 0:E.id)!==(null===O||void 0===O?void 0:O.id)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("a",{href:"mailto:".concat(E.email),children:E.email}),Object(f.jsx)("br",{}),Object(f.jsx)("a",{href:"tel:".concat(E.telephone),children:E.telephone}),Object(f.jsx)("br",{})]}),(null===E||void 0===E?void 0:E.id)!==(null===O||void 0===O?void 0:O.id)&&Object(f.jsx)("div",{children:D}),(null===E||void 0===E?void 0:E.id)===(null===O||void 0===O?void 0:O.id)&&M&&!On(kt.PosteAccueil,C.rolesChouette)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(vr,{children:[" ",Object(f.jsx)(wr,{name:"informations",multiline:!0,label:"Commentaire (optionnel)",value:j,onChange:I}),Object(f.jsx)(Ir,{children:Object(f.jsx)(at.a,{disabled:o,startIcon:Object(f.jsx)(br.a,{}),color:"primary",variant:"contained",onClick:P})})]}),Object(f.jsx)(Cr,{children:Object(f.jsx)(at.a,{disabled:o,color:"primary",variant:"contained",onClick:S,children:"Demander un remplacement"})})]})]}),!F&&!y&&M&&!On(kt.PosteAccueil,C.rolesChouette)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(wr,{name:"informations",multiline:!0,label:"Commentaire (optionnel)",value:j,onChange:I}),Object(f.jsx)(at.a,{disabled:o,color:"primary",variant:"contained",onClick:A,children:"S\u2019inscrire"})]})]})};var Er=Object(l.a)(mt.a,{target:"e1el6lcd1"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),Dr=Object(l.a)("div",{target:"e1el6lcd0"})("h3{font-size:1.5em;margin-bottom:8px;}h4{font-size:1.2em;}span{color:",(function(e){return e.theme.palette.grey[600]}),";margin-left:5px;font-weight:500;}"),qr=function(e){var t=e.slot,n=e.show,r=e.handleClose;return Object(f.jsxs)(Ye.a,{open:n,onClose:r,fullWidth:!0,children:[Object(f.jsx)(Er,{onClick:r,children:Object(f.jsx)(jr.a,{})}),Object(f.jsx)(et.a,{disableTypography:!0,children:Object(f.jsxs)(Dr,{children:[Object(f.jsx)(p.a,{variant:"h3",children:Object(dr.a)(Gn(t.start))}),Object(f.jsxs)(p.a,{variant:"h4",children:[Object(f.jsxs)("strong",{children:[Bn(t.start),"\u2013",Bn(t.end)]}),Object(f.jsx)("span",{children:t.title})]}),Object(f.jsx)("div",{children:t.information})]})}),Object(f.jsx)(tt.a,{children:t.piafs?t.piafs.map((function(e){return Object(f.jsx)(Sr,{piaf:e,slot:t},e.id)})):Object(f.jsx)(Rn,{})})]})};var Fr=Object(l.a)(_n.a,{target:"eaqzuha0"})({name:"m832pm",styles:"border:1px solid gray;border-radius:5px;margin-bottom:2px"}),Mr=function(e){var t=e.piaf,n=e.allowValidate,r=e.critical,i=t.creneau,c=Object(a.useState)(!1),s=Object(q.a)(c,2),l=s[0],u=s[1],d=ot(),j=d.openQuestion,b=d.openDialog,p=Object(o.useLazyQuery)($e,{variables:{id:i.id}}),m=Object(q.a)(p,2),h=m[0],O=m[1].data,x=function(){var e=Object(bt.a)(jt.a.mark((function e(t){var n;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("Es-tu s\xfbr\xb7e de vouloir valider cette PIAF ?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return n={piafId:t,validate:!0},e.prev=6,e.next=9,re.mutate({mutation:Be,variables:n});case 9:b("La PIAF a \xe9t\xe9 valid\xe9e"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),w(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(bt.a)(jt.a.mark((function e(t){var n;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("Es-tu s\xfbr\xb7e de vouloir indiquer cette PIAF comme non pourvue?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return n={piafId:t,nonPourvu:!0},e.prev=6,e.next=9,re.mutate({mutation:Ue,variables:n});case 9:b("La PIAF a \xe9t\xe9 indiqu\xe9 comme non pourvue"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),w(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),g={id:i.id,title:i.titre,information:i.informations,start:new Date(i.debut),end:new Date(i.fin),horsMag:i.horsMag,piafs:null===O||void 0===O?void 0:O.creneau.piafs},y=n?Fr:_n.a;return Object(f.jsxs)(y,{container:!0,children:[Object(f.jsx)(_n.a,{item:!0,xs:8,children:Object(f.jsxs)(tn.a,{button:!0,onClick:function(){u(!0),h()},children:[Object(f.jsx)(Zn.a,{children:Object(f.jsx)(ur,{piaf:t,critical:r})}),Object(f.jsx)(rn.a,{primary:Gn(g.start),secondary:"de ".concat(Bn(g.start)," \xe0 ").concat(Bn(g.end))})]},t.id)}),Object(f.jsx)(_n.a,{item:!0,xs:4,children:n&&Object(f.jsxs)(Jn.a,{children:[Object(f.jsx)(Wn.a,{control:Object(f.jsx)(Qn.a,{checked:t.pourvu,name:"validatePIAF",onChange:function(){x(t.id)}}),label:"Valider"}),Object(f.jsx)(Wn.a,{control:Object(f.jsx)(Qn.a,{checked:t.nonPourvu,name:"nonPourvu",onChange:function(){v(t.id)}}),label:"Non pourvue"})]})}),Object(f.jsx)(qr,{show:l,slot:g,handleClose:function(){u(!1)}})]})},$r=new Date(Date.now()),zr=function(e){var t=e.userId,n=e.after,r=e.validated,a=void 0!==r&&r,i=e.allowValidate,c=void 0!==i&&i,s=Object(o.useQuery)(ze,{variables:{userId:t,after:n,validated:a},skip:!t}),l=s.loading,u=s.error,d=s.data;if(l||!t)return Object(f.jsx)(Rn,{});if(u)return Object(f.jsx)(A,{error:u});if(!d)return null;var j=d.piafs.filter((function(e){var t=e.statut,n=e.nonPourvu,r=e.creneau;return"remplacement"!==t&&0==n&&(c&&new Date(r.fin)<$r||!c&&new Date(r.fin)>$r)})).sort(rr);return j.length||c?!j.length&&c?Object(f.jsx)("p",{children:"Aucune PIAF \xe0 valider."}):Object(f.jsx)(en.a,{children:j.map((function(e){return Object(f.jsx)(Mr,{piaf:e,allowValidate:c},e.id)}))}):Object(f.jsxs)("p",{children:["Aucune PIAF \xe0 venir. Inscris-toi sur ",Object(f.jsx)(Ke.b,{to:"/planning",children:"le planning"})," !"]})},Lr=n(200),Hr=function(){var e=R(),t=e.auth,n=e.user,r=new Date,a=Object(o.useQuery)(ze,{variables:{after:Nn(r),before:Nn(Object(Lr.a)(r,2)),statut:"remplacement"}}),i=a.loading,c=a.error,s=a.data;if(i)return Object(f.jsx)(Rn,{});if(c)return Object(f.jsx)(A,{error:c});if(!s)return null;var l=(null===n||void 0===n?void 0:n.rolesChouette)||[],u=s.piafs.filter((function(e){var n;return function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=e.match(/api\/\w+\/(\d+)/);if(t)return Number(t[1])}return null}(null===(n=e.piaffeur)||void 0===n?void 0:n.id)!==t.id&&(!!e.role&&!!On(e.role.roleUniqueId,l))})).sort(rr);return u.length?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Les cr\xe9neaux suivants sont vacants et donc disponibles pour un remplacement. N\u2019h\xe9site pas \xe0 te positionner, la personne que tu remplaces sera avertie par e-mail instantan\xe9ment !"}),Object(f.jsx)(en.a,{children:u.map((function(e){return Object(f.jsx)(Mr,{piaf:e},e.id)}))})]}):Object(f.jsx)("p",{children:"Aucun remplacement \xe0 venir n\u2019est demand\xe9."})},Gr=n(201),Br=function(){var e=R().user,t=new Date,n=Object(o.useQuery)(ze,{variables:{after:Nn(t),before:Nn(Object(Gr.a)(t,5))}}),r=n.loading,a=n.error,i=n.data;if(r)return Object(f.jsx)(Rn,{});if(a)return Object(f.jsx)(A,{error:a});if(!i)return null;var c=(null===e||void 0===e?void 0:e.rolesChouette)||[],s={};i.piafs.forEach((function(e){s[e.creneau.id]||(s[e.creneau.id]={id:e.creneau.id,title:e.creneau.titre,information:e.creneau.informations,start:new Date(e.creneau.debut),end:new Date(e.creneau.fin),horsMag:e.creneau.horsMag,piafs:[]}),s[e.creneau.id].piafs.push(e)}));var l=i.piafs.filter((function(e){return!tr(e)&&(!!e.role&&(!!On(e.role.roleUniqueId,c)&&(!(t>new Date(e.creneau.debut))&&nr(s[e.creneau.id],e))))})).sort(rr);return l.length?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Les cr\xe9neaux suivants sont vacants et critiques ! N\u2019h\xe9site pas \xe0 te positionner, le magasin a besoin de toi !"}),Object(f.jsx)(en.a,{children:l.map((function(e){return Object(f.jsx)(Mr,{piaf:e,critical:!0},e.id)}))})]}):Object(f.jsx)("p",{children:"Aucun cr\xe9neau critique dans les jours \xe0 venir. Esp\xe9rons que \xe7a dure !"})};var Ur=Object(l.a)(mt.a,{target:"e1j8rogw2"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),Tr=Object(l.a)(pt.a,{target:"e1j8rogw1"})({name:"1d3w5wq",styles:"width:100%"}),Nr=Object(l.a)(et.a,{target:"e1j8rogw0"})({name:"d9gf8v",styles:"margin-right:32px"}),Vr=function(e){var t=e.show,n=e.handleClose,r=e.user,i=e.title,c=e.dialogContent,s=e.emailAddress,o=e.emailSubject,l=e.callback,u=ot().openDialog,d=Object(a.useState)(""),j=Object(q.a)(d,2),b=j[0],p=j[1],m=Object(a.useState)(!1),h=Object(q.a)(m,2),O=h[0],x=h[1],v=function(){var e=Object(bt.a)(jt.a.mark((function e(t){var a;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.prev=2,a=["Pr\xe9nom NOM : ".concat(r.prenom,"  ").concat(r.nom.toUpperCase()),"Mail : ".concat(r.email," "),"T\xe9l\xe9phone : ".concat(r.telephone," "),"Code-barres : ".concat(r.codeBarre),"Commentaire : ".concat(b)],e.next=6,yt(s,o,a.join("<br />"));case 6:n(),u("Un e-mail a \xe9t\xe9 envoy\xe9 a ".concat(s," qui te recontactera si besoin.")),l&&setTimeout(l,300),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),w(e.t0);case 14:x(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(Ye.a,{open:t,onClose:n,title:i,children:Object(f.jsxs)("form",{onSubmit:v,autoComplete:"off",children:[Object(f.jsx)(Ur,{onClick:n,children:Object(f.jsx)(jr.a,{})}),Object(f.jsx)(Nr,{children:i}),Object(f.jsxs)(tt.a,{children:[c&&Object(f.jsx)("div",{children:c}),Object(f.jsx)(Tr,{name:"comment",multiline:!0,required:!1,label:"Commentaire",value:b,onChange:function(e){var t=e.target;p(t.value)}})]}),Object(f.jsx)(rt.a,{children:Object(f.jsx)(at.a,{type:"submit",color:"primary",variant:"contained",disabled:O,children:"Confirmer"})})]})})};var Rr={"tr\xe8s chouette":"#2ECC40",chouette:"#FF851B","chouette en alerte":"#FF4136"},_r=Object(l.a)(p.a,{target:"eeumoro5"})("color:",(function(e){var t=e.$status,n=e.theme;return t&&Rr[t.toLowerCase()]||n.palette.secondary.main}),";&::first-letter{text-transform:uppercase;}"),Zr=Object(l.a)("div",{target:"eeumoro4"})({name:"7ejfwp",styles:"min-height:calc(100vh - 132px);display:flex;flex-direction:column;justify-content:space-between"}),Jr=Object(l.a)("div",{target:"eeumoro3"})("font-size:0.85em;margin-top:",(function(e){return e.theme.spacing(4)}),"px;"),Wr=Object(l.a)(p.a,{target:"eeumoro2"})({name:"1o5r9bn",styles:"margin-right:10px;color:red"}),Qr=Object(l.a)("div",{target:"eeumoro1"})({name:"xksw2a",styles:"display:flex;flex-wrap:wrap;gap:32px;>div{flex:0 1 calc(50% - 16px);min-width:300px;@media (max-width: 750px){flex:1;}}"}),Xr=Object(l.a)("div",{target:"eeumoro0"})({name:"tjnilk",styles:"h3{font-size:2.5rem;margin-bottom:2rem;span{font-size:0.5em;}}"}),Kr=function(){var e,t,n=R(),r=n.user,i=n.refetchUser,c=ot().openQuestion,s=Object(a.useState)(!1),o=Object(q.a)(s,2),l=o[0],u=o[1],d="".concat(null!==(e=null===r||void 0===r?void 0:r.nbPiafEffectuees)&&void 0!==e?e:"\u2026","/").concat(null!==(t=null===r||void 0===r?void 0:r.nbPiafAttendues)&&void 0!==t?t:"\u2026"),j=(null===r||void 0===r?void 0:r.statut)||"\u2026",b=function(){var e=Object(bt.a)(jt.a.mark((function e(t){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("Tu souhaites revenir faire tes PIAF et tes courses ? Super ! Confirme-le ici et l\u2019effet sera imm\xe9diat. Pense \xe0 t\u2019inscrire \xe0 nouveau sur des cr\xe9neaux de PIAF.");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,!t){e.next=11;break}return e.next=9,re.mutate({mutation:H,variables:{id:null===r||void 0===r?void 0:r.id}});case 9:e.next=13;break;case 11:return e.next=13,re.mutate({mutation:L,variables:{id:null===r||void 0===r?void 0:r.id}});case 13:i(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),w(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(bt.a)(jt.a.mark((function e(){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.mutate({mutation:G,variables:{id:null===r||void 0===r?void 0:r.id}});case 2:i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(Zr,{children:[Object(f.jsxs)(Qr,{children:[Object(f.jsxs)(Xr,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Mon statut"}),Object(f.jsxs)(p.a,{variant:"h3",children:[d," ",Object(f.jsx)("span",{children:"PIAF attendues"})]}),!(null===r||void 0===r?void 0:r.absenceLongueDureeCourses)&&!(null===r||void 0===r?void 0:r.absenceLongueDureeSansCourses)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Je suis"}),Object(f.jsxs)(_r,{variant:"h3",$status:null===r||void 0===r?void 0:r.statut,children:[!(null===r||void 0===r?void 0:r.attenteCommissionParticipation)&&j,(null===r||void 0===r?void 0:r.attenteCommissionParticipation)&&"En attente de la d\xe9cision de la commission de participation et je peux faire mes courses"]})]}),Object(f.jsxs)(Wr,{variant:"h2",children:[(null===r||void 0===r?void 0:r.absenceLongueDureeCourses)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:"Ma participation aux PIAF du magasin est actuellement en pause, mais je peux toujours faire mes courses"}),Object(f.jsx)(at.a,{variant:"contained",color:"primary",size:"large",onClick:function(){return b(!0)},children:"Je reprends ma participation"})]}),(null===r||void 0===r?void 0:r.absenceLongueDureeSansCourses)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{children:"Ma participation aux PIAF du magasin est actuellement en pause et je ne peux pas faire mes courses"}),Object(f.jsx)(at.a,{variant:"contained",color:"primary",size:"large",onClick:function(){return b(!1)},children:"Je reprends ma participation"})]})]}),!(null===r||void 0===r?void 0:r.attenteCommissionParticipation)&&"chouette en alerte"==(null===r||void 0===r?void 0:r.statut.toLowerCase())&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{children:"Ce statut t\u2019emp\xeache de faire des courses. Si tu souhaites revenir faire tes courses et PIAF, tu peux saisir la commission participation qui examine les cas particuliers et recherche des solutions. Pour joindre la commission, tu peux cliquer sur le bouton ci-dessous"}),Object(f.jsx)(at.a,{variant:"contained",color:"primary",size:"large",onClick:function(){u(!0)},children:"joindre la commission"})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Mes prochaines PIAF"}),Object(f.jsx)(zr,{userId:null===r||void 0===r?void 0:r.id,after:Nn(Object(Fn.a)())})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Cr\xe9neaux critiques"}),Object(f.jsx)(Br,{})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Remplacements"}),Object(f.jsx)(Hr,{})]})]}),Object(f.jsxs)(Jr,{children:[Object(f.jsx)(Ke.b,{to:"/legal",children:"Politique de traitement des donn\xe9es personnelles"}),Object(f.jsx)("p",{children:"Ce site n\u2019utilise pas de cookies tiers"}),Object(f.jsxs)("p",{children:["Un probl\xe8me ? Une question ? Contacte le BdM :"," ",Object(f.jsx)("a",{href:"mailto:".concat("bureau-des-membres@lachouettecoop.fr"),children:"bureau-des-membres@lachouettecoop.fr"})]})]}),r&&Object(f.jsx)(Vr,{show:l,handleClose:function(){u(!1)},user:r,title:"Si tu confirmes ton souhait, la commission recevra un mail et prendra contact avec toi. Ton statut sera mis en attente de la d\xe9cision de la commission. En attendant, tu pourras faire tes courses.",dialogContent:"Tu peux laisser un commentaire si tu le souhaites.",emailAddress:"commission_participation_lcc@framalistes.org",emailSubject:"Saisie commission participation ".concat(r.prenom," ").concat(r.nom),callback:m})]})},Yr=n(345),ea=n(347),ta=n(348),na=n(346),ra=n(342),aa=n(343),ia=n(344),ca=n(360);var sa="#FFFFAA",oa=["inventaire","formation"],la=Object(l.a)("button",{target:"e7w31zc2"})("width:100%;border:none;background-color:",(function(e){var t=e.$open,n=e.$slotTitle;return t?sa:oa.some((function(e){return n.toLowerCase().toString().startsWith(e)}))?"#89C7A8":"transparent"}),";padding:5px;text-align:left;font-size:inherit;line-height:inherit;font:inherit;cursor:pointer;&:focus{background-color:",sa,";outline:none;}"),ua=Object(l.a)("div",{target:"e7w31zc1"})({name:"88ia8m",styles:"span{color:gray;}"}),da=Object(l.a)("div",{target:"e7w31zc0"})({name:"l6pi5w",styles:"display:flex;flex-wrap:wrap;margin:0 -2px;svg{width:24px;height:24px;}"}),ja=function(e){var t,n=e.slot,r=Object(a.useState)(!1),i=Object(q.a)(r,2),c=i[0],s=i[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(la,{$open:c,$slotTitle:n.title||"",onClick:function(){s(!0)},children:[Object(f.jsxs)(ua,{children:[Object(f.jsxs)("strong",{children:[Bn(n.start),"\u2013",Bn(n.end)]}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:n.title})]}),Object(f.jsx)(da,{children:null===(t=n.piafs)||void 0===t?void 0:t.map((function(e){return Object(f.jsx)(ur,{piaf:e,critical:nr(n,e),displayTooltip:!0},e.id)}))})]}),Object(f.jsx)(qr,{show:c,slot:n,handleClose:function(){s(!1)}})]})};var ba={A:"#89C7A8",B:"#638F79",C:"#3A5447",D:"#27382F"},pa=Object(l.a)("div",{target:"exian1q2"})("background-color:",(function(e){var t=e.$weekId,n=e.theme;return t&&ba[t]||n.palette.grey[400]}),";height:18px;color:white;font-size:12px;padding:0 4px;"),fa=Object(l.a)("div",{target:"exian1q1"})("opacity:",(function(e){return"past"===e.$when?.25:1}),";scroll-margin-top:64px;border:1px solid gray;min-height:80px;background-color:",(function(e){return"present"===e.$when?"#d0d9d0":"#eee"}),";h3{font-size:1em;margin:4px;}"),ma=Object(l.a)("ul",{target:"exian1q0"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),ha=function(e){var t=e.day,n=e.weekId,r=t.start,a=t.slots,i=Object(ca.a)(r),c=1===r.getDay()||1===r.getDate();return Object(f.jsxs)(fa,{$when:i?"present":Object(Or.a)(r)?"past":"future",ref:function(e){i&&e&&e.scrollIntoView({behavior:"smooth"})},children:[Object(f.jsx)(pa,{$weekId:n,children:c&&n&&"Semaine ".concat(n)}),Object(f.jsx)(p.a,{variant:"h3",children:Object(dr.a)(Hn(r))}),Object(f.jsx)(ma,{children:a.map((function(e){return Object(f.jsx)(ja,{slot:e},e.id)}))})]})},Oa=function(){return Object(f.jsx)(fa,{$when:"past"})};var xa=Object(l.a)("div",{target:"e1f08xgb1"})({name:"1juea80",styles:"border:1px solid gray;margin:0;padding:0"}),va=Object(l.a)("div",{target:"e1f08xgb0"})({name:"17osowq",styles:"@media (min-width: 800px){display:flex;>div{flex:1 0 14.29%;}}"}),ga=function(e){var t=e.start,n=e.end,r=e.list,a=Object(_t.a)(),i=Object(Wt.a)(a.breakpoints.down("sm"));if(!r)return null;var c=Object(ra.a)({start:t,end:n},{weekStartsOn:1}).map((function(e){return{start:e,days:[0,1,2,3,4,5,6].map((function(t){return{start:Object(Gr.a)(e,t),slots:[]}}))}}));return r.forEach((function(e){var t=new Date(e.debut),n=Object(aa.a)(t,c[0].start),r=c[n],a=(Object(ia.a)(t)||7)-1,i={piaffeursCount:e.piafs.length,piaffeursCountFirstPiaf:e.piafs.filter((function(e){var t=e.piaffeur;return 0===(null===t||void 0===t?void 0:t.nbPiafEffectuees)})).length},s=e.piafs.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{infoCreneau:i})})).sort(ar);r.days[a].slots.push({id:e.id,title:e.titre,information:e.informations,start:t,end:new Date(e.fin),horsMag:e.horsMag,piafs:s}),e.creneauGenerique&&(r.weekId=function(e){var t=Number(e);return t?String.fromCharCode(64+t):e}(e.creneauGenerique.frequence))})),Object(f.jsx)(xa,{children:c.map((function(e,r){return Object(f.jsx)(va,{children:e.days.map((function(r,a){return r.start>=t&&r.start<n?Object(f.jsx)(ha,{day:r,weekId:e.weekId},a):i?null:Object(f.jsx)(Oa,{},a)}))},r)}))})};var ya=Object(l.a)("div",{target:"e4heot02"})({name:"1azakc",styles:"text-align:center"}),wa=Object(l.a)("h3",{target:"e4heot01"})({name:"1oega3v",styles:"margin:0 0 2em"}),Ca=Object(l.a)("figcaption",{target:"e4heot00"})({name:"6gj13f",styles:"word-wrap:break-word;padding:0 4px"}),Ia=function(){return Object(f.jsxs)(ya,{children:[Object(f.jsx)(wa,{children:"L\xe9gende"}),Object(f.jsxs)(_n.a,{container:!0,children:[Object(f.jsxs)(_n.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(lr,{role:kt.Chouettos}),Object(f.jsx)(Ca,{children:"Chouettos"})]}),Object(f.jsxs)(_n.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(lr,{role:kt.Caissier}),Object(f.jsx)(Ca,{children:"Caissier\xb7\xe8re"})]}),Object(f.jsxs)(_n.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(lr,{role:kt.GrandHibou}),Object(f.jsx)(Ca,{children:"Grand Hibou"})]})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(_n.a,{container:!0,children:[Object(f.jsxs)(_n.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(lr,{role:kt.PIAF}),Object(f.jsx)(Ca,{children:"PIAF disponible"})]}),Object(f.jsxs)(_n.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(lr,{role:kt.PIAF,taken:!0}),Object(f.jsx)(Ca,{children:"PIAF occup\xe9e"})]}),Object(f.jsxs)(_n.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(lr,{role:kt.PIAF,critical:!0}),Object(f.jsx)(Ca,{children:"PIAF critique"})]})]}),Object(f.jsx)("br",{}),Object(f.jsx)(_n.a,{container:!0,children:Object(f.jsxs)(_n.a,{item:!0,xs:4,component:"figure",children:[Object(f.jsx)(lr,{role:kt.Formateur}),Object(f.jsx)(Ca,{children:"Formateur\xb7ice"})]})})]})},Pa=Ia,ka=function(){var e=Object(a.useState)(!1),t=Object(q.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){localStorage.getItem("caption_dismissed")||r(!0)}),[]);return Object(f.jsxs)(Ye.a,{open:n,fullWidth:!0,children:[Object(f.jsx)(tt.a,{children:Object(f.jsx)(Ia,{})}),Object(f.jsx)(rt.a,{children:Object(f.jsx)(at.a,{onClick:function(){r(!1),localStorage.setItem("caption_dismissed","true")},color:"primary",children:"Compris !"})})]})},Aa=function(){var e=Object(a.useState)(!1),t=Object(q.a)(e,2),n=t[0],r=t[1],i=R(),c=i.user,s=i.refetchUser;Object(a.useEffect)((function(){(null===c||void 0===c?void 0:c.affichageDonneesPersonnelles)||(localStorage.getItem("privacy_police_dismissed")||r(!0))}),[null===c||void 0===c?void 0:c.affichageDonneesPersonnelles]);var o=function(){var e=Object(bt.a)(jt.a.mark((function e(){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.prev=1,e.next=4,re.mutate({mutation:$,variables:{affichageDonneesPersonnelles:!0,idUser:null===c||void 0===c?void 0:c.id}});case 4:s(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),w(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(Ye.a,{open:n,fullWidth:!0,children:[Object(f.jsxs)(tt.a,{children:[Object(f.jsxs)("p",{children:[" ","Par d\xe9faut, tes coordonn\xe9es (email et num\xe9ro de t\xe9l\xe9phone) ne sont pas visibles par les autres coop\xe9rateurs\xb7rices. Les rendre accessibles facilite la communication entre coop\xe9rateurs\xb7rices et optimise l\u2019organisation des PIAF au magasin, par exemple en cas d\u2019indisponibilit\xe9 au dernier moment."," "]}),Object(f.jsxs)("p",{children:["Ce choix est modifiable \xe0 tout moment depuis ",Object(f.jsx)(Ke.b,{to:"/profile",children:" mon profil"})]})]}),Object(f.jsx)(at.a,{onClick:o,color:"primary",children:"Je comprends et j\u2019accepte que mes coordonn\xe9es soient visibles par tous\xb7tes les coop\xe9rateurs\xb7rices"}),Object(f.jsx)(at.a,{onClick:function(){r(!1)},color:"primary",children:"Je d\xe9cide plus tard"}),Object(f.jsx)(at.a,{onClick:function(){r(!1),localStorage.setItem("privacy_police_dismissed","true")},color:"primary",children:"Je n\u2019accepte pas que mes coordonn\xe9es soient visibles"})]})};var Sa=Object(l.a)("div",{target:"e1i6h5gm4"})({name:"1ocx2cx",styles:"border:2px solid gray;height:500px;display:flex;align-items:center;justify-content:center"}),Ea=Object(l.a)("nav",{target:"e1i6h5gm3"})("display:flex;justify-content:end;margin-bottom:1rem;button:not(:first-of-type){margin-left:1rem;}h2{flex:1;text-transform:capitalize;}",(function(e){return e.theme.breakpoints.down("xs")}),"{h2{font-size:1.15rem;}}"),Da=Object(l.a)("div",{target:"e1i6h5gm2"})("display:flex;",(function(e){return e.theme.breakpoints.down("sm")}),"{span.text{display:none;}.MuiButton-root{min-width:32px;}.MuiButton-startIcon{margin-right:-4px;}.MuiButton-endIcon{margin-left:-4px;}}"),qa=Object(l.a)("div",{target:"e1i6h5gm1"})({name:"62jlqq",styles:"margin-top:1rem;display:flex;span.text{display:none;}.MuiButton-root{min-width:32px;}.MuiButton-startIcon{margin-right:-4px;}.MuiButton-endIcon{margin-left:-4px;}"}),Fa=Object(l.a)("div",{target:"e1i6h5gm0"})({name:"1esf6zn",styles:"max-width:500px;margin:20px 0 100px auto;border:1px solid gray;border-radius:10px;padding:20px 10px"}),Ma=function(e,t){return e.debut>t.debut?1:-1},$a=function(){var e=R().user,t=Object(a.useState)(!1),n=Object(q.a)(t,2),r=n[0],i=n[1];Object(a.useEffect)((function(){e&&i(!e.affichageDonneesPersonnelles)}),[e]);var c=Ut(),s=c.goBack,o=c.goForward,l=c.goToday,u=c.start,d=c.end,j=c.data,b=c.error,m=c.loading;if(b)return Object(f.jsx)(P,{error:b});var h,O=null===j||void 0===j?void 0:j.creneaus.filter((function(e){return!e.horsMag})).sort(Ma);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(Ea,{children:[Object(f.jsx)(p.a,{variant:"h2",children:(h=u,Ln(h,"MMMM yyyy"))}),Object(f.jsxs)(Da,{children:[Object(f.jsx)(at.a,{disabled:m,variant:"contained",color:"primary",startIcon:Object(f.jsx)(Yr.a,{}),onClick:s,children:Object(f.jsx)("span",{className:"text",children:"Pr\xe9c\xe9dent"})}),Object(f.jsx)(at.a,{disabled:m||Object(na.a)(u,new Date),variant:"contained",color:"primary",startIcon:Object(f.jsx)(ea.a,{}),onClick:l,children:Object(f.jsx)("span",{className:"text",children:"Aujourd\u2019hui"})}),Object(f.jsx)(at.a,{disabled:m,variant:"contained",color:"primary",endIcon:Object(f.jsx)(ta.a,{}),onClick:o,children:Object(f.jsx)("span",{className:"text",children:"Suivant"})})]})]}),m?Object(f.jsx)(Sa,{children:Object(f.jsx)(Rn,{})}):Object(f.jsxs)(f.Fragment,{children:[r&&Object(f.jsx)(Aa,{}),Object(f.jsx)(ga,{start:u,end:d,list:O})]}),Object(f.jsx)(Ea,{children:Object(f.jsxs)(qa,{children:[Object(f.jsx)(at.a,{disabled:m,variant:"contained",color:"primary",startIcon:Object(f.jsx)(Yr.a,{}),onClick:s,children:Object(f.jsx)("span",{className:"text",children:"Pr\xe9c\xe9dent"})}),Object(f.jsx)(at.a,{disabled:m||Object(na.a)(u,new Date),variant:"contained",color:"primary",startIcon:Object(f.jsx)(ea.a,{}),onClick:l}),Object(f.jsx)(at.a,{disabled:m,variant:"contained",color:"primary",endIcon:Object(f.jsx)(ta.a,{}),onClick:o,children:Object(f.jsx)("span",{className:"text",children:"Suivant"})})]})}),Object(f.jsx)(Fa,{children:Object(f.jsx)(Pa,{})}),Object(f.jsx)(ka,{})]})},za=n(350),La=n(351),Ha=n(113),Ga=n(349),Ba=n(352),Ua=n(356),Ta=n(166),Na=n(161);var Va=Object(l.a)("div",{target:"ej6jrjj3"})("display:flex;align-items:center;justify-content:center;flex-wrap:wrap;>*{margin-bottom:1rem;@media (min-width: 400px){flex:1;&:not(:first-of-type){margin-left:",(function(e){return e.theme.spacing(3)}),"px;}}}"),Ra=Object(l.a)(mt.a,{target:"ej6jrjj2"})({name:"vgkzfy",styles:"position:absolute;right:8px;top:8px"}),_a=Object(l.a)(pt.a,{target:"ej6jrjj1"})({name:"1d3w5wq",styles:"width:100%"}),Za=Object(l.a)(et.a,{target:"ej6jrjj0"})({name:"d9gf8v",styles:"margin-right:32px"}),Ja={noPiaf:"Je ne pourrai pas assurer ma PIAF",noBuy:"Je ne pourrai pas assurer ma PIAF ni effectuer mes courses",other:"Autre (sp\xe9cifier en commentaire)"},Wa=new Date(Date.now()),Qa=function(e){var t=e.show,n=e.handleClose,r=e.user,i=ot().openDialog,c=Object(a.useState)({reason:"",comment:"",startDate:"",endDate:""}),s=Object(q.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(!1),d=Object(q.a)(u,2),j=d[0],b=d[1],p=function(e){var t=e.target,n=t.name,r=t.value;l(Object(E.a)(Object(E.a)({},o),{},Object(Tt.a)({},n,r)))},m=function(){var e=Object(bt.a)(jt.a.mark((function e(t){var a;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),e.next=4;break;case 4:if(o.startDate&&o.reason){e.next=7;break}return i("Tous les champs sont obligatoires."),e.abrupt("return");case 7:return b(!0),e.prev=8,a=["Nom et pr\xe9nom : ".concat(B(r)),"Mail : ".concat(r.email," "),"T\xe9l\xe9phone : ".concat(r.telephone," "),"Raison de l'absence : ".concat(Ja[o.reason]),"Date d\xe9but : ".concat(Gn(o.startDate))],o.comment&&a.push("Commentaire : ".concat(o.comment)),e.next=13,yt("bureau-des-membres@lachouettecoop.fr","Absence prolong\xe9e",a.join("<br />"));case 13:n(),i("Un e-mail a \xe9t\xe9 envoy\xe9 au BdM qui te recontactera si besoin. Pense bien a les recontacter lorsque tu pourras reprendre les PIAF."),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),w(e.t0);case 20:b(!1);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(Ye.a,{open:t,onClose:n,children:Object(f.jsxs)("form",{onSubmit:m,autoComplete:"off",children:[Object(f.jsx)(Ra,{onClick:n,children:Object(f.jsx)(jr.a,{})}),Object(f.jsx)(Za,{children:"Informer d\u2019un changement de ma situation"}),Object(f.jsxs)(tt.a,{children:[Object(f.jsx)(Va,{children:Object(f.jsx)(pt.a,{id:"startDate",label:"Date de d\xe9but",name:"startDate",type:"date",fullWidth:!0,required:!0,value:o.startDate,onChange:p,InputLabelProps:{shrink:!0},inputProps:{min:Nn(Wa)}})}),Object(f.jsx)(Va,{children:Object(f.jsxs)(Ha.a,{fullWidth:!0,children:[Object(f.jsx)(Ta.a,{children:"Type de changement"}),Object(f.jsx)(Na.a,{value:o.reason,label:"Type de changement",name:"reason",required:!0,onChange:function(e){var t=e.target,n=t.name,r=t.value;l(Object(E.a)(Object(E.a)({},o),{},Object(Tt.a)({},n,r)))},children:Object.keys(Ja).map((function(e){return Object(f.jsx)(kn.a,{value:e,children:Ja[e]},e)}))})]})}),Object(f.jsx)(Va,{children:Object(f.jsx)(_a,{name:"comment",multiline:!0,required:"other"===o.reason,label:"Commentaire additionnel",value:o.comment,onChange:p})}),Object(f.jsx)(Va,{children:Object(f.jsxs)("span",{children:["Pour plus d\u2019informations,"," ",Object(f.jsx)("a",{href:"https://espace-membres.lachouettecoop.fr/page/les-documents",target:"_blank",rel:"noopener",children:"consultez le manuel du\u2022de la coop\xe9rateur\u2022ice"}),"."]})})]}),Object(f.jsx)(rt.a,{children:Object(f.jsx)(at.a,{type:"submit",color:"primary",variant:"contained",disabled:j,children:"Confirmer au BdM"})})]})})};var Xa=Object(l.a)("div",{target:"e16mrsvp2"})({name:"1bv1svr",styles:"height:50vh;display:flex;align-items:center;justify-content:center"}),Ka=Object(l.a)("div",{target:"e16mrsvp1"})({name:"71mxng",styles:"margin:0 auto;max-width:500px;p,.MuiTextField-root{margin:10px 0;}button{margin:15px auto;display:block;}"}),Ya=Object(l.a)(Ha.a,{target:"e16mrsvp0"})({name:"45bbqm",styles:"margin:10px 0"}),ei=function(){var e=R(),t=e.user,n=e.refetchUser,r=Object(a.useState)(!1),i=Object(q.a)(r,2),c=i[0],s=i[1],o=ot().openDialog,l=Object(a.useState)(!1),u=Object(q.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!1),m=Object(q.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)({email:(null===t||void 0===t?void 0:t.email)||"",telephone:(null===t||void 0===t?void 0:t.telephone)||"",affichageDonneesPersonnelles:null===t||void 0===t?void 0:t.affichageDonneesPersonnelles}),v=Object(q.a)(x,2),g=v[0],y=v[1];Object(a.useEffect)((function(){t&&y({email:t.email,telephone:t.telephone,affichageDonneesPersonnelles:t.affichageDonneesPersonnelles})}),[t]),Object(a.useEffect)((function(){var e=function(e){h&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[h]);var C=function(e){var t=e.target,n=t.name,r=t.value;y(Object(E.a)(Object(E.a)({},g),{},Object(Tt.a)({},n,r))),O(!0)},I=function(){var e=Object(bt.a)(jt.a.mark((function e(r){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),s(!0),e.prev=2,e.next=5,re.mutate({mutation:$,variables:Object(E.a)(Object(E.a)({},g),{},{idUser:null===t||void 0===t?void 0:t.id})});case 5:n(),o("Tes informations ont bien \xe9t\xe9 mises \xe0 jour"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),w(e.t0);case 12:O(!1),s(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(lt.a,{when:h,message:"Les changements n'ont pas \xe9t\xe9 enregistr\xe9s, es-tu s\xfbr\xb7e de vouloir abandonner la page?"}),Object(f.jsxs)(Ka,{children:[Object(f.jsxs)("form",{onSubmit:I,children:[Object(f.jsx)(p.a,{variant:"h2",children:B(t)}),Object(f.jsx)("p",{children:vn(t.rolesChouette)}),Object(f.jsx)(pt.a,{name:"telephone",label:"T\xe9l\xe9phone",required:!0,disabled:!t,value:g.telephone,onChange:C,fullWidth:!0,InputProps:{startAdornment:Object(f.jsx)(Ga.a,{position:"start",children:Object(f.jsx)(za.a,{})})}}),Object(f.jsx)(pt.a,{name:"email",label:"Adresse e-mail",required:!0,disabled:!0,value:g.email,onChange:C,fullWidth:!0,InputProps:{startAdornment:Object(f.jsx)(Ga.a,{position:"start",children:Object(f.jsx)(La.a,{})})}}),Object(f.jsxs)(Ya,{children:[Object(f.jsxs)("p",{children:[" ","L\u2019acc\xe8s \xe0 mes coordonn\xe9es (email et num\xe9ro de t\xe9l\xe9phone) par tous les coop\xe9rateurs\xb7rices facilite la communication entre coop\xe9rateurs\xb7rices et optimise l\u2019organisation des PIAF au magasin, par exemple en cas d\u2019indisponibilit\xe9 au dernier moment."]}),Object(f.jsx)("p",{children:"Je peux modifier ce choix \xe0 tout moment."}),Object(f.jsxs)(Ba.a,{"aria-label":"displayMyContactDetails",defaultValue:"false",name:"radio-buttons-group",value:g.affichageDonneesPersonnelles?"true":"false",onChange:function(e){y(Object(E.a)(Object(E.a)({},g),{},{affichageDonneesPersonnelles:"true"==e.target.value.toLowerCase()})),O(!0)},children:[Object(f.jsx)(Wn.a,{value:"true",control:Object(f.jsx)(Ua.a,{}),label:"Je comprends et j\u2019accepte que mes coordonn\xe9es soient visibles par tous\xb7tes les coop\xe9rateurs\xb7rices"}),Object(f.jsx)(Wn.a,{value:"false",control:Object(f.jsx)(Ua.a,{}),label:"Je n\u2019accepte pas que mes coordonn\xe9es soient visibles"})]})]}),Object(f.jsx)(at.a,{color:"primary",variant:"contained",disabled:c,type:"submit",children:"Enregistrer"}),Object(f.jsx)(at.a,{color:"primary",disabled:c,onClick:function(){j(!0)},children:"Tu ne peux pas faire des PIAF pendant au moins 2 mois, c\u2019est par ici!"})]}),Object(f.jsx)(Qa,{show:d,handleClose:function(){j(!1)},user:t})]})]}):Object(f.jsx)(Xa,{children:Object(f.jsx)(Rn,{})})},ti=n(39);var ni=Object(l.a)("div",{target:"e1y580i91"})({name:"1p6wbo1",styles:"height:300px;display:flex;align-items:center;justify-content:center"}),ri=Object(l.a)("div",{target:"e1y580i90"})({name:"188rsd6",styles:"margin-top:2rem;@media (min-width: 980px){display:flex;>div{flex:1 0 14.29%;}}"}),ai=function(){var e=R().user,t=Object(a.useState)(!1),n=Object(q.a)(t,2),r=n[0],i=n[1],c=ot().openDialog,s=Object(a.useState)(""),l=Object(q.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)([]),b=Object(q.a)(j,2),m=b[0],h=b[1],O=Object(a.useState)(!1),x=Object(q.a)(O,2),v=x[0],g=x[1],y=Object(o.useQuery)(Re),C=y.data,I=y.loading,k=y.error,A=Object(o.useQuery)(Ve,{skip:!e,variables:{idUser:null===e||void 0===e?void 0:e.id}}),S=A.data,E=A.loading,D=A.error,F=I||E;Object(a.useEffect)((function(){S&&(null===S||void 0===S?void 0:S.reserves.length)>0&&(d(S.reserves[0].informations),h(S.reserves[0].creneauGeneriques.map((function(e){return e.id}))))}),[S]),Object(a.useEffect)((function(){var e=function(e){v&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[v]);var M=k||D;if(M)return Object(f.jsx)(P,{error:M});var $=[];if(C)for(var z=function(e){null===C||void 0===C||C.creneauGeneriques.filter((function(t){var n=t.jour,r=t.actif,a=t.horsMag;return n===e&&r&&!a})).forEach((function(t){var n=$.find((function(t){return t.day===e})),r=new Date(t.heureDebut).getTime();if(n){var a=n.slots.find((function(e){return e.time===r}));a?a.allSlotIds.push(t.id):n.slots.push({time:r,slotDisplayed:t,allSlotIds:[t.id]})}else $.push({day:e,slots:[{time:r,slotDisplayed:t,allSlotIds:[t.id]}]})}))},L=0;L<7;L++)z(L);var H=function(e){var t=[];return $.forEach((function(n){var r=n.slots.find((function(t){return t.slotDisplayed.id===e}));r&&(t=r.allSlotIds)})),t},G=function(){var t=Object(bt.a)(jt.a.mark((function t(){var n,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),n={user:null===e||void 0===e?void 0:e.id,informations:u,creneauGenerique:m},(null===S||void 0===S?void 0:S.reserves.length)&&(n.id=S.reserves[0].id),t.prev=3,t.next=6,re.mutate({mutation:n.id?Ne:Te,variables:n});case 6:g(!1),r=n.id?"Ton inscription \xe0 la r\xe9serve a bien \xe9t\xe9 mise \xe0 jour":"Tu es d\xe9sormais inscrit\xb7e \xe0 la reserve",c(r+". Merci !"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),w(t.t0);case 14:i(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(lt.a,{when:v,message:"Les changements n'ont pas \xe9t\xe9 enregistr\xe9s, es-tu s\xfbr\xb7e de vouloir abandonner la page?"}),Object(f.jsx)(p.a,{variant:"h2",children:"R\xe9serve"}),F?Object(f.jsx)(ni,{children:Object(f.jsx)(Rn,{})}):Object(f.jsxs)(f.Fragment,{children:["Jours pour lesquels je peux parfois me rendre disponible. Si un cr\xe9neau est libre moins de 48h avant, un e-mail sera envoy\xe9 \xe0 tou\xb7te\xb7s les inscrit\xb7te\xb7s.",Object(f.jsx)(ri,{children:$.map((function(e){return Object(f.jsxs)(Jn.a,{children:[(t=e.day,Tn[t]),e.slots.sort((function(e,t){return e.time>t.time?1:-1})).map((function(e){var t=e.slotDisplayed;return Object(f.jsx)(Wn.a,{control:Object(f.jsx)(Qn.a,{color:"default",checked:m.includes(t.id),onChange:function(e){var n=e.target;!function(e,t){var n=m.slice();t?(n.push.apply(n,Object(ti.a)(H(e))),h(n)):(H(e).forEach((function(e){n.splice(n.indexOf(e),1)})),h(n)),g(!0)}(t.id,n.checked)}}),label:"".concat(Bn(t.heureDebut)," - ").concat(Bn(t.heureFin))},t.id)}))]},e.day);var t}))}),Object(f.jsx)(at.a,{disabled:r,color:"primary",variant:"contained",onClick:G,children:"Enregistrer"})]})]})};var ii=Object(l.a)(_n.a,{target:"e3772390"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),ci=function(e){var t=e.open,n=e.handleClose,r=e.data;return r?Object(f.jsxs)(Ye.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(et.a,{id:"alert-dialog-title",children:B(r)}),Object(f.jsx)(tt.a,{children:Object(f.jsx)(nt.a,{id:"alert-dialog-description",children:Object(f.jsxs)(_n.a,{container:!0,children:[Object(f.jsx)(_n.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Roles"})}),Object(f.jsx)(ii,{item:!0,xs:6,children:vn(r.rolesChouette)}),Object(f.jsx)(_n.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Statut"})}),Object(f.jsx)(ii,{item:!0,xs:6,children:r.statut}),Object(f.jsx)(_n.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Compteur PIAF"})}),Object(f.jsxs)(ii,{item:!0,xs:6,children:[r.nbPiafEffectuees,"/",r.nbPiafAttendues]}),Object(f.jsx)(_n.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Absence longue dur\xe9e sans courses"})}),Object(f.jsx)(ii,{item:!0,xs:6,children:r.absenceLongueDureeSansCourses?"oui":"non"}),Object(f.jsx)(_n.a,{item:!0,xs:6,children:Object(f.jsx)("h3",{children:"Absence longue dur\xe9e avec courses"})}),Object(f.jsx)(ii,{item:!0,xs:6,children:r.absenceLongueDureeCourses?"oui":"non"}),Object(f.jsx)(_n.a,{item:!0,xs:12,children:Object(f.jsx)(zr,{userId:r.id,validated:!1,allowValidate:!0})})]})})}),Object(f.jsx)(rt.a,{children:Object(f.jsx)(at.a,{onClick:n,color:"primary",variant:"contained",children:"Fermer"})})]}):null};var si=Object(l.a)(ce.a,{target:"ez4p05b0"})({name:"am2b86",styles:"margin-top:16px;height:calc(100vh - 150px);.MuiDataGrid-row{cursor:pointer;}"}),oi=function(e){return e.value?"oui":"non"},li=[{field:"nom",headerName:"Nom",flex:1},{field:"prenom",headerName:"Prenom",flex:1},{field:"statut",headerName:"Statut",flex:1},{field:"rolesChouette",headerName:"Roles",flex:2,valueFormatter:function(e){var t=e.value;return vn(t)}},{field:"absenceLongueDureeCourses",headerName:"Absence avec courses",flex:1,valueFormatter:oi},{field:"absenceLongueDureeSansCourses",headerName:"Absence sans courses",flex:1,valueFormatter:oi}],ui=function(){var e=Object(o.useQuery)(z),t=e.data,n=e.loading,r=e.error,i=Object(a.useState)(),c=Object(q.a)(i,2),s=c[0],l=c[1],u=Object(a.useState)(!1),d=Object(q.a)(u,2),j=d[0],b=d[1];if(n)return Object(f.jsx)(Rn,{});if(r)return Object(f.jsx)(A,{error:r});if(!t)return null;var p=t.users.slice().sort((function(e,t){return e.nom>t.nom?1:-1}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(si,{rows:p,columns:li,onRowClick:function(e){var t=e.row;l(t),b(!0)},autoPageSize:!0}),Object(f.jsx)(ci,{open:j,handleClose:function(){b(!1)},data:s})]})},di=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Groupe MAG"}),Object(f.jsx)(ui,{})]})},ji=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Groupe BdM"}),Object(f.jsx)(ui,{})]})},bi=function(e){var t=e.userId,n=e.after,r=e.before,a=Object(o.useQuery)(ze,{variables:{before:r,after:n,statut:"occupe",userId:t}}),i=a.loading,c=a.error,s=a.data;if(i)return Object(f.jsx)(Rn,{});if(c)return Object(f.jsx)(A,{error:c});if(!s)return null;if(!s.piafs.length)return Object(f.jsx)("p",{children:"Tu n\u2019as pas encore fait des PIAF. Inscris-toi sur le planning !"});var l=s.piafs.filter((function(e){return 1==e.pourvu})).sort(rr);return Object(f.jsx)(en.a,{children:l.map((function(e){return Object(f.jsx)(Mr,{piaf:e},e.id)}))})},pi=Object(l.a)(pt.a,{target:"egv0o8y0"})("margin:",(function(e){return e.theme.spacing(1)}),"px;"),fi=new Date(Date.now()),mi=function(){var e=R().auth,t=Object(a.useState)(Object(zt.a)(fi,-3)),n=Object(q.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(fi),s=Object(q.a)(c,2),o=s[0],l=s[1],u=function(e){e.target.valueAsDate&&("dateIni"===e.target.id?i(e.target.valueAsDate):"dateFin"===e.target.id&&l(e.target.valueAsDate))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Historique des PIAF"}),Object(f.jsx)(pi,{id:"dateIni",label:"Depuis",type:"date",defaultValue:Nn(r),InputLabelProps:{shrink:!0},onChange:u}),Object(f.jsx)(pi,{id:"dateFin",label:"Jusqu\u2019au",type:"date",defaultValue:Nn(o),InputLabelProps:{shrink:!0},onChange:u}),Object(f.jsx)(bi,{userId:"api/users/".concat(e.id),after:Nn(r),before:Nn(o)})]})},hi=function(e){var t=e.path,n=e.component,r=e.roleIds,a=e.redirectionPath,i=R().user;return Object(f.jsx)(f.Fragment,{children:i&&(xn(r,i.rolesChouette)?Object(f.jsx)(lt.c,{path:t,component:n}):Object(f.jsx)(lt.b,{to:a}))})},Oi=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{variant:"h2",children:"Politique de traitement des donn\xe9es personnelles"}),Object(f.jsx)("p",{children:"Les informations recueillies sur ces formulaires sont enregistr\xe9es dans un fichier informatis\xe9 par La Chouette Coop SAS, pour permettre la gestion du planning de participation des coop\xe9rateurs\xb7rices au fonctionnement de la coop\xe9rative. La base l\xe9gale du traitement est le contrat par lequel les coop\xe9rateurs\xb7rices s\u2019engagent \xe0 effectuer 3 heures de participation toutes les 4 semaines \xe0 la coop\xe9rative."}),Object(f.jsx)("p",{children:"Les donn\xe9es sont communiqu\xe9es aux seuls coop\xe9rateurs\xb7rices de La Chouette Coop. Elles sont conserv\xe9es pendant la dur\xe9e du mandat de coop\xe9rateur\xb7rice et en cas de d\xe9mission pendant 5 ans maximum."}),Object(f.jsx)("p",{children:"Les donn\xe9es sont h\xe9berg\xe9es en France par OVH."}),Object(f.jsxs)("p",{children:["Vous pouvez acc\xe9der aux donn\xe9es vous concernant, les rectifier, demander leur effacement ou exercer votre droit \xe0 la limitation du traitement de vos donn\xe9es. Pour exercer ces droits ou pour toute question sur le traitement de vos donn\xe9es dans ce dispositif, vous pouvez contacter\xa0:"," ",Object(f.jsx)("a",{href:"mailto:bureau-des-membres@lachouettecoop.fr",children:"bureau-des-membres@lachouettecoop.fr"})]}),Object(f.jsx)("p",{children:"Si vous estimez, apr\xe8s nous avoir contact\xe9s, que vos droits \xab\xa0Informatique et Libert\xe9s\xa0\xbb ne sont pas respect\xe9s, vous pouvez adresser une r\xe9clamation \xe0 la CNIL."})]})},xi=Object(l.a)("div",{target:"e1pd3b3q0"})("margin:",(function(e){return e.theme.spacing(3)}),"px;",(function(e){return e.theme.breakpoints.down("xs")}),"{margin-bottom:",(function(e){return e.theme.spacing(12)}),"px;}",(function(e){return e.theme.breakpoints.up("sm")}),"{margin-left:",(function(e){return e.theme.spacing(12)}),"px;}"),vi=function(){var e=function(e){var t={};return e.substr(1).split("&").forEach((function(e){if(e){var n=e.split("=");2===n.length&&(t[n[0]]=decodeURIComponent(n[1]))}})),t}(Object(lt.h)().search).next;return Object(f.jsxs)(Bt,{children:[Object(f.jsx)(In,{}),Object(f.jsxs)(xi,{children:[Object(f.jsxs)(lt.e,{children:[Object(f.jsx)(hi,{path:"/home",component:Kr,roleIds:[kt.Chouettos],redirectionPath:"/planning"}),Object(f.jsx)(lt.c,{path:"/planning",component:$a}),Object(f.jsx)(hi,{path:"/profile",component:ei,roleIds:[kt.Chouettos],redirectionPath:"/planning"}),Object(f.jsx)(hi,{path:"/reserve",component:ai,roleIds:[kt.Chouettos],redirectionPath:"/planning"}),Object(f.jsx)(hi,{path:"/bdm",component:ji,roleIds:[kt.AdminBdM],redirectionPath:"/planning"}),Object(f.jsx)(hi,{path:"/magasin",component:di,roleIds:[kt.AdminMag],redirectionPath:"/planning"}),Object(f.jsx)(hi,{path:"/history",component:mi,roleIds:[kt.Chouettos],redirectionPath:"/planning"}),Object(f.jsx)(lt.c,{path:"/legal",component:Oi}),Object(f.jsx)(lt.b,{to:e||"/home"})]}),Object(f.jsx)(qn,{})]})]})},gi=function(){var e=R().auth;return Object(f.jsx)(Ke.a,{children:Object(f.jsx)(st,{children:e?Object(f.jsx)(vi,{}):Object(f.jsx)(qt,{})})})};s.a.render(Object(f.jsx)(S,{children:Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(Me,{children:Object(f.jsx)(o.ApolloProvider,{client:re,children:Object(f.jsx)(V,{children:Object(f.jsx)(We,{children:Object(f.jsx)(gi,{})})})})})})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.73dd6689.chunk.js.map